(function(Ht,se){typeof exports=="object"&&typeof module<"u"?se(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],se):(Ht=typeof globalThis<"u"?globalThis:Ht||self,se(Ht.vue_vtk={},Ht.Vue))})(this,function(Ht,se){"use strict";var Pe=1e-6,yt=typeof Float32Array<"u"?Float32Array:Array,Rd=Math.PI/180;function Ld(t){return t*Rd}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function an(){var t=new yt(9);return yt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Vn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Fd(t){var e=new yt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function kd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Vd(t,e,a,n,r,i,o,s,c){var l=new yt(9);return l[0]=t,l[1]=e,l[2]=a,l[3]=n,l[4]=r,l[5]=i,l[6]=o,l[7]=s,l[8]=c,l}function Kc(t,e,a,n,r,i,o,s,c,l){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t}function It(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Br(t,e){if(t===e){var a=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=a,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tn(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],p=e[8],u=p*o-s*l,f=-p*i+s*c,h=l*i-o*c,d=a*u+n*f+r*h;return d?(d=1/d,t[0]=u*d,t[1]=(-p*n+r*l)*d,t[2]=(s*n-r*o)*d,t[3]=f*d,t[4]=(p*a-r*c)*d,t[5]=(-s*a+r*i)*d,t[6]=h*d,t[7]=(-l*a+n*c)*d,t[8]=(o*a-n*i)*d,t):null}function Ad(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],p=e[8];return t[0]=o*p-s*l,t[1]=r*l-n*p,t[2]=n*s-r*o,t[3]=s*c-i*p,t[4]=a*p-r*c,t[5]=r*i-a*s,t[6]=i*l-o*c,t[7]=n*c-a*l,t[8]=a*o-n*i,t}function Bd(t){var e=t[0],a=t[1],n=t[2],r=t[3],i=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*(l*i-o*c)+a*(-l*r+o*s)+n*(c*r-i*s)}function Qn(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],p=e[7],u=e[8],f=a[0],h=a[1],d=a[2],v=a[3],m=a[4],x=a[5],y=a[6],g=a[7],C=a[8];return t[0]=f*n+h*o+d*l,t[1]=f*r+h*s+d*p,t[2]=f*i+h*c+d*u,t[3]=v*n+m*o+x*l,t[4]=v*r+m*s+x*p,t[5]=v*i+m*c+x*u,t[6]=y*n+g*o+C*l,t[7]=y*r+g*s+C*p,t[8]=y*i+g*c+C*u,t}function Ud(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],p=e[7],u=e[8],f=a[0],h=a[1];return t[0]=n,t[1]=r,t[2]=i,t[3]=o,t[4]=s,t[5]=c,t[6]=f*n+h*o+l,t[7]=f*r+h*s+p,t[8]=f*i+h*c+u,t}function Gd(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],p=e[7],u=e[8],f=Math.sin(a),h=Math.cos(a);return t[0]=h*n+f*o,t[1]=h*r+f*s,t[2]=h*i+f*c,t[3]=h*o-f*n,t[4]=h*s-f*r,t[5]=h*c-f*i,t[6]=l,t[7]=p,t[8]=u,t}function Id(t,e,a){var n=a[0],r=a[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pd(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function zd(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jd(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Wd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function $d(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=a+a,s=n+n,c=r+r,l=a*o,p=n*o,u=n*s,f=r*o,h=r*s,d=r*c,v=i*o,m=i*s,x=i*c;return t[0]=1-u-d,t[3]=p-x,t[6]=f+m,t[1]=p+x,t[4]=1-l-d,t[7]=h-v,t[2]=f-m,t[5]=h+v,t[8]=1-l-u,t}function Hd(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],p=e[8],u=e[9],f=e[10],h=e[11],d=e[12],v=e[13],m=e[14],x=e[15],y=a*s-n*o,g=a*c-r*o,C=a*l-i*o,S=n*c-r*s,T=n*l-i*s,w=r*l-i*c,_=p*v-u*d,E=p*m-f*d,D=p*x-h*d,O=u*m-f*v,M=u*x-h*v,N=f*x-h*m,R=y*N-g*M+C*O+S*D-T*E+w*_;return R?(R=1/R,t[0]=(s*N-c*M+l*O)*R,t[1]=(c*D-o*N-l*E)*R,t[2]=(o*M-s*D+l*_)*R,t[3]=(r*M-n*N-i*O)*R,t[4]=(a*N-r*D+i*E)*R,t[5]=(n*D-a*M-i*_)*R,t[6]=(v*w-m*T+x*S)*R,t[7]=(m*C-d*w-x*g)*R,t[8]=(d*T-v*C+x*y)*R,t):null}function Kd(t,e,a){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Xd(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function qd(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Yd(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t}function Xc(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t}function Jd(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t}function Zd(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t}function Qd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function e2(t,e){var a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],p=t[8],u=e[0],f=e[1],h=e[2],d=e[3],v=e[4],m=e[5],x=e[6],y=e[7],g=e[8];return Math.abs(a-u)<=Pe*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(n-f)<=Pe*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=Pe*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=Pe*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=Pe*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-m)<=Pe*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-x)<=Pe*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-y)<=Pe*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(p-g)<=Pe*Math.max(1,Math.abs(p),Math.abs(g))}var t2=Qn,n2=Xc;const r2=Object.freeze(Object.defineProperty({__proto__:null,add:Yd,adjoint:Ad,clone:Fd,copy:kd,create:an,determinant:Bd,equals:e2,exactEquals:Qd,frob:qd,fromMat2d:Wd,fromMat4:Vn,fromQuat:$d,fromRotation:zd,fromScaling:jd,fromTranslation:Pd,fromValues:Vd,identity:It,invert:Tn,mul:t2,multiply:Qn,multiplyScalar:Jd,multiplyScalarAndAdd:Zd,normalFromMat4:Hd,projection:Kd,rotate:Gd,scale:Id,set:Kc,str:Xd,sub:n2,subtract:Xc,translate:Ud,transpose:Br},Symbol.toStringTag,{value:"Module"}));function Ur(){var t=new yt(16);return yt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a2(t){var e=new yt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function i2(t,e,a,n,r,i,o,s,c,l,p,u,f,h,d,v){var m=new yt(16);return m[0]=t,m[1]=e,m[2]=a,m[3]=n,m[4]=r,m[5]=i,m[6]=o,m[7]=s,m[8]=c,m[9]=l,m[10]=p,m[11]=u,m[12]=f,m[13]=h,m[14]=d,m[15]=v,m}function o2(t,e,a,n,r,i,o,s,c,l,p,u,f,h,d,v,m){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=p,t[10]=u,t[11]=f,t[12]=h,t[13]=d,t[14]=v,t[15]=m,t}function Te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function We(t,e){if(t===e){var a=e[1],n=e[2],r=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=a,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=r,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Et(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],p=e[8],u=e[9],f=e[10],h=e[11],d=e[12],v=e[13],m=e[14],x=e[15],y=a*s-n*o,g=a*c-r*o,C=a*l-i*o,S=n*c-r*s,T=n*l-i*s,w=r*l-i*c,_=p*v-u*d,E=p*m-f*d,D=p*x-h*d,O=u*m-f*v,M=u*x-h*v,N=f*x-h*m,R=y*N-g*M+C*O+S*D-T*E+w*_;return R?(R=1/R,t[0]=(s*N-c*M+l*O)*R,t[1]=(r*M-n*N-i*O)*R,t[2]=(v*w-m*T+x*S)*R,t[3]=(f*T-u*w-h*S)*R,t[4]=(c*D-o*N-l*E)*R,t[5]=(a*N-r*D+i*E)*R,t[6]=(m*C-d*w-x*g)*R,t[7]=(p*w-f*C+h*g)*R,t[8]=(o*M-s*D+l*_)*R,t[9]=(n*D-a*M-i*_)*R,t[10]=(d*T-v*C+x*y)*R,t[11]=(u*C-p*T-h*y)*R,t[12]=(s*E-o*O-c*_)*R,t[13]=(a*O-n*E+r*_)*R,t[14]=(v*g-d*S-m*y)*R,t[15]=(p*S-u*g+f*y)*R,t):null}function s2(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],p=e[8],u=e[9],f=e[10],h=e[11],d=e[12],v=e[13],m=e[14],x=e[15];return t[0]=s*(f*x-h*m)-u*(c*x-l*m)+v*(c*h-l*f),t[1]=-(n*(f*x-h*m)-u*(r*x-i*m)+v*(r*h-i*f)),t[2]=n*(c*x-l*m)-s*(r*x-i*m)+v*(r*l-i*c),t[3]=-(n*(c*h-l*f)-s*(r*h-i*f)+u*(r*l-i*c)),t[4]=-(o*(f*x-h*m)-p*(c*x-l*m)+d*(c*h-l*f)),t[5]=a*(f*x-h*m)-p*(r*x-i*m)+d*(r*h-i*f),t[6]=-(a*(c*x-l*m)-o*(r*x-i*m)+d*(r*l-i*c)),t[7]=a*(c*h-l*f)-o*(r*h-i*f)+p*(r*l-i*c),t[8]=o*(u*x-h*v)-p*(s*x-l*v)+d*(s*h-l*u),t[9]=-(a*(u*x-h*v)-p*(n*x-i*v)+d*(n*h-i*u)),t[10]=a*(s*x-l*v)-o*(n*x-i*v)+d*(n*l-i*s),t[11]=-(a*(s*h-l*u)-o*(n*h-i*u)+p*(n*l-i*s)),t[12]=-(o*(u*m-f*v)-p*(s*m-c*v)+d*(s*f-c*u)),t[13]=a*(u*m-f*v)-p*(n*m-r*v)+d*(n*f-r*u),t[14]=-(a*(s*m-c*v)-o*(n*m-r*v)+d*(n*c-r*s)),t[15]=a*(s*f-c*u)-o*(n*f-r*u)+p*(n*c-r*s),t}function c2(t){var e=t[0],a=t[1],n=t[2],r=t[3],i=t[4],o=t[5],s=t[6],c=t[7],l=t[8],p=t[9],u=t[10],f=t[11],h=t[12],d=t[13],v=t[14],m=t[15],x=e*o-a*i,y=e*s-n*i,g=e*c-r*i,C=a*s-n*o,S=a*c-r*o,T=n*c-r*s,w=l*d-p*h,_=l*v-u*h,E=l*m-f*h,D=p*v-u*d,O=p*m-f*d,M=u*m-f*v;return x*M-y*O+g*D+C*E-S*_+T*w}function Ee(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],p=e[7],u=e[8],f=e[9],h=e[10],d=e[11],v=e[12],m=e[13],x=e[14],y=e[15],g=a[0],C=a[1],S=a[2],T=a[3];return t[0]=g*n+C*s+S*u+T*v,t[1]=g*r+C*c+S*f+T*m,t[2]=g*i+C*l+S*h+T*x,t[3]=g*o+C*p+S*d+T*y,g=a[4],C=a[5],S=a[6],T=a[7],t[4]=g*n+C*s+S*u+T*v,t[5]=g*r+C*c+S*f+T*m,t[6]=g*i+C*l+S*h+T*x,t[7]=g*o+C*p+S*d+T*y,g=a[8],C=a[9],S=a[10],T=a[11],t[8]=g*n+C*s+S*u+T*v,t[9]=g*r+C*c+S*f+T*m,t[10]=g*i+C*l+S*h+T*x,t[11]=g*o+C*p+S*d+T*y,g=a[12],C=a[13],S=a[14],T=a[15],t[12]=g*n+C*s+S*u+T*v,t[13]=g*r+C*c+S*f+T*m,t[14]=g*i+C*l+S*h+T*x,t[15]=g*o+C*p+S*d+T*y,t}function Ye(t,e,a){var n=a[0],r=a[1],i=a[2],o,s,c,l,p,u,f,h,d,v,m,x;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*i+e[12],t[13]=e[1]*n+e[5]*r+e[9]*i+e[13],t[14]=e[2]*n+e[6]*r+e[10]*i+e[14],t[15]=e[3]*n+e[7]*r+e[11]*i+e[15]):(o=e[0],s=e[1],c=e[2],l=e[3],p=e[4],u=e[5],f=e[6],h=e[7],d=e[8],v=e[9],m=e[10],x=e[11],t[0]=o,t[1]=s,t[2]=c,t[3]=l,t[4]=p,t[5]=u,t[6]=f,t[7]=h,t[8]=d,t[9]=v,t[10]=m,t[11]=x,t[12]=o*n+p*r+d*i+e[12],t[13]=s*n+u*r+v*i+e[13],t[14]=c*n+f*r+m*i+e[14],t[15]=l*n+h*r+x*i+e[15]),t}function An(t,e,a){var n=a[0],r=a[1],i=a[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function mt(t,e,a,n){var r=n[0],i=n[1],o=n[2],s=Math.hypot(r,i,o),c,l,p,u,f,h,d,v,m,x,y,g,C,S,T,w,_,E,D,O,M,N,R,B;return s<Pe?null:(s=1/s,r*=s,i*=s,o*=s,c=Math.sin(a),l=Math.cos(a),p=1-l,u=e[0],f=e[1],h=e[2],d=e[3],v=e[4],m=e[5],x=e[6],y=e[7],g=e[8],C=e[9],S=e[10],T=e[11],w=r*r*p+l,_=i*r*p+o*c,E=o*r*p-i*c,D=r*i*p-o*c,O=i*i*p+l,M=o*i*p+r*c,N=r*o*p+i*c,R=i*o*p-r*c,B=o*o*p+l,t[0]=u*w+v*_+g*E,t[1]=f*w+m*_+C*E,t[2]=h*w+x*_+S*E,t[3]=d*w+y*_+T*E,t[4]=u*D+v*O+g*M,t[5]=f*D+m*O+C*M,t[6]=h*D+x*O+S*M,t[7]=d*D+y*O+T*M,t[8]=u*N+v*R+g*B,t[9]=f*N+m*R+C*B,t[10]=h*N+x*R+S*B,t[11]=d*N+y*R+T*B,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function di(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[4],o=e[5],s=e[6],c=e[7],l=e[8],p=e[9],u=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+l*n,t[5]=o*r+p*n,t[6]=s*r+u*n,t[7]=c*r+f*n,t[8]=l*r-i*n,t[9]=p*r-o*n,t[10]=u*r-s*n,t[11]=f*r-c*n,t}function da(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[0],o=e[1],s=e[2],c=e[3],l=e[8],p=e[9],u=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r-l*n,t[1]=o*r-p*n,t[2]=s*r-u*n,t[3]=c*r-f*n,t[8]=i*n+l*r,t[9]=o*n+p*r,t[10]=s*n+u*r,t[11]=c*n+f*r,t}function vi(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[0],o=e[1],s=e[2],c=e[3],l=e[4],p=e[5],u=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+l*n,t[1]=o*r+p*n,t[2]=s*r+u*n,t[3]=c*r+f*n,t[4]=l*r-i*n,t[5]=p*r-o*n,t[6]=u*r-s*n,t[7]=f*r-c*n,t}function fs(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function yi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qc(t,e,a){var n=a[0],r=a[1],i=a[2],o=Math.hypot(n,r,i),s,c,l;return o<Pe?null:(o=1/o,n*=o,r*=o,i*=o,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=n*n*l+c,t[1]=r*n*l+i*s,t[2]=i*n*l-r*s,t[3]=0,t[4]=n*r*l-i*s,t[5]=r*r*l+c,t[6]=i*r*l+n*s,t[7]=0,t[8]=n*i*l+r*s,t[9]=r*i*l-n*s,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function u2(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l2(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f2(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yc(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,c=r+r,l=i+i,p=n*s,u=n*c,f=n*l,h=r*c,d=r*l,v=i*l,m=o*s,x=o*c,y=o*l;return t[0]=1-(h+v),t[1]=u+y,t[2]=f-x,t[3]=0,t[4]=u-y,t[5]=1-(p+v),t[6]=d+m,t[7]=0,t[8]=f+x,t[9]=d-m,t[10]=1-(p+h),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function p2(t,e){var a=new yt(3),n=-e[0],r=-e[1],i=-e[2],o=e[3],s=e[4],c=e[5],l=e[6],p=e[7],u=n*n+r*r+i*i+o*o;return u>0?(a[0]=(s*o+p*n+c*i-l*r)*2/u,a[1]=(c*o+p*r+l*n-s*i)*2/u,a[2]=(l*o+p*i+s*r-c*n)*2/u):(a[0]=(s*o+p*n+c*i-l*r)*2,a[1]=(c*o+p*r+l*n-s*i)*2,a[2]=(l*o+p*i+s*r-c*n)*2),Yc(t,e,a),t}function Jc(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function mi(t,e){var a=e[0],n=e[1],r=e[2],i=e[4],o=e[5],s=e[6],c=e[8],l=e[9],p=e[10];return t[0]=Math.hypot(a,n,r),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(c,l,p),t}function xi(t,e){var a=new yt(3);mi(a,e);var n=1/a[0],r=1/a[1],i=1/a[2],o=e[0]*n,s=e[1]*r,c=e[2]*i,l=e[4]*n,p=e[5]*r,u=e[6]*i,f=e[8]*n,h=e[9]*r,d=e[10]*i,v=o+p+d,m=0;return v>0?(m=Math.sqrt(v+1)*2,t[3]=.25*m,t[0]=(u-h)/m,t[1]=(f-c)/m,t[2]=(s-l)/m):o>p&&o>d?(m=Math.sqrt(1+o-p-d)*2,t[3]=(u-h)/m,t[0]=.25*m,t[1]=(s+l)/m,t[2]=(f+c)/m):p>d?(m=Math.sqrt(1+p-o-d)*2,t[3]=(f-c)/m,t[0]=(s+l)/m,t[1]=.25*m,t[2]=(u+h)/m):(m=Math.sqrt(1+d-o-p)*2,t[3]=(s-l)/m,t[0]=(f+c)/m,t[1]=(u+h)/m,t[2]=.25*m),t}function Zc(t,e,a,n){var r=e[0],i=e[1],o=e[2],s=e[3],c=r+r,l=i+i,p=o+o,u=r*c,f=r*l,h=r*p,d=i*l,v=i*p,m=o*p,x=s*c,y=s*l,g=s*p,C=n[0],S=n[1],T=n[2];return t[0]=(1-(d+m))*C,t[1]=(f+g)*C,t[2]=(h-y)*C,t[3]=0,t[4]=(f-g)*S,t[5]=(1-(u+m))*S,t[6]=(v+x)*S,t[7]=0,t[8]=(h+y)*T,t[9]=(v-x)*T,t[10]=(1-(u+d))*T,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function h2(t,e,a,n,r){var i=e[0],o=e[1],s=e[2],c=e[3],l=i+i,p=o+o,u=s+s,f=i*l,h=i*p,d=i*u,v=o*p,m=o*u,x=s*u,y=c*l,g=c*p,C=c*u,S=n[0],T=n[1],w=n[2],_=r[0],E=r[1],D=r[2],O=(1-(v+x))*S,M=(h+C)*S,N=(d-g)*S,R=(h-C)*T,B=(1-(f+x))*T,I=(m+y)*T,P=(d+g)*w,L=(m-y)*w,k=(1-(f+v))*w;return t[0]=O,t[1]=M,t[2]=N,t[3]=0,t[4]=R,t[5]=B,t[6]=I,t[7]=0,t[8]=P,t[9]=L,t[10]=k,t[11]=0,t[12]=a[0]+_-(O*_+R*E+P*D),t[13]=a[1]+E-(M*_+B*E+L*D),t[14]=a[2]+D-(N*_+I*E+k*D),t[15]=1,t}function Gr(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=a+a,s=n+n,c=r+r,l=a*o,p=n*o,u=n*s,f=r*o,h=r*s,d=r*c,v=i*o,m=i*s,x=i*c;return t[0]=1-u-d,t[1]=p+x,t[2]=f-m,t[3]=0,t[4]=p-x,t[5]=1-l-d,t[6]=h+v,t[7]=0,t[8]=f+m,t[9]=h-v,t[10]=1-l-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g2(t,e,a,n,r,i,o){var s=1/(a-e),c=1/(r-n),l=1/(i-o);return t[0]=i*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*c,t[6]=0,t[7]=0,t[8]=(a+e)*s,t[9]=(r+n)*c,t[10]=(o+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*l,t[15]=0,t}function Qc(t,e,a,n,r){var i=1/Math.tan(e/2),o;return t[0]=i/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t}var d2=Qc;function v2(t,e,a,n,r){var i=1/Math.tan(e/2),o;return t[0]=i/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(n-r),t[10]=r*o,t[14]=r*n*o):(t[10]=-1,t[14]=-n),t}function y2(t,e,a,n){var r=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(r+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((o-s)*c*.5),t[9]=(r-i)*l*.5,t[10]=n/(a-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a/(a-n),t[15]=0,t}function eu(t,e,a,n,r,i,o){var s=1/(e-a),c=1/(n-r),l=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+a)*s,t[13]=(r+n)*c,t[14]=(o+i)*l,t[15]=1,t}var tu=eu;function m2(t,e,a,n,r,i,o){var s=1/(e-a),c=1/(n-r),l=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+a)*s,t[13]=(r+n)*c,t[14]=i*l,t[15]=1,t}function nu(t,e,a,n){var r,i,o,s,c,l,p,u,f,h,d=e[0],v=e[1],m=e[2],x=n[0],y=n[1],g=n[2],C=a[0],S=a[1],T=a[2];return Math.abs(d-C)<Pe&&Math.abs(v-S)<Pe&&Math.abs(m-T)<Pe?Te(t):(p=d-C,u=v-S,f=m-T,h=1/Math.hypot(p,u,f),p*=h,u*=h,f*=h,r=y*f-g*u,i=g*p-x*f,o=x*u-y*p,h=Math.hypot(r,i,o),h?(h=1/h,r*=h,i*=h,o*=h):(r=0,i=0,o=0),s=u*o-f*i,c=f*r-p*o,l=p*i-u*r,h=Math.hypot(s,c,l),h?(h=1/h,s*=h,c*=h,l*=h):(s=0,c=0,l=0),t[0]=r,t[1]=s,t[2]=p,t[3]=0,t[4]=i,t[5]=c,t[6]=u,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*d+i*v+o*m),t[13]=-(s*d+c*v+l*m),t[14]=-(p*d+u*v+f*m),t[15]=1,t)}function x2(t,e,a,n){var r=e[0],i=e[1],o=e[2],s=n[0],c=n[1],l=n[2],p=r-a[0],u=i-a[1],f=o-a[2],h=p*p+u*u+f*f;h>0&&(h=1/Math.sqrt(h),p*=h,u*=h,f*=h);var d=c*f-l*u,v=l*p-s*f,m=s*u-c*p;return h=d*d+v*v+m*m,h>0&&(h=1/Math.sqrt(h),d*=h,v*=h,m*=h),t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=u*m-f*v,t[5]=f*d-p*m,t[6]=p*v-u*d,t[7]=0,t[8]=p,t[9]=u,t[10]=f,t[11]=0,t[12]=r,t[13]=i,t[14]=o,t[15]=1,t}function C2(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function S2(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function T2(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t[9]=e[9]+a[9],t[10]=e[10]+a[10],t[11]=e[11]+a[11],t[12]=e[12]+a[12],t[13]=e[13]+a[13],t[14]=e[14]+a[14],t[15]=e[15]+a[15],t}function ru(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t[9]=e[9]-a[9],t[10]=e[10]-a[10],t[11]=e[11]-a[11],t[12]=e[12]-a[12],t[13]=e[13]-a[13],t[14]=e[14]-a[14],t[15]=e[15]-a[15],t}function w2(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12]*a,t[13]=e[13]*a,t[14]=e[14]*a,t[15]=e[15]*a,t}function _2(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t[9]=e[9]+a[9]*n,t[10]=e[10]+a[10]*n,t[11]=e[11]+a[11]*n,t[12]=e[12]+a[12]*n,t[13]=e[13]+a[13]*n,t[14]=e[14]+a[14]*n,t[15]=e[15]+a[15]*n,t}function E2(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function D2(t,e){var a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],p=t[8],u=t[9],f=t[10],h=t[11],d=t[12],v=t[13],m=t[14],x=t[15],y=e[0],g=e[1],C=e[2],S=e[3],T=e[4],w=e[5],_=e[6],E=e[7],D=e[8],O=e[9],M=e[10],N=e[11],R=e[12],B=e[13],I=e[14],P=e[15];return Math.abs(a-y)<=Pe*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(n-g)<=Pe*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-C)<=Pe*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(i-S)<=Pe*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-T)<=Pe*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(s-w)<=Pe*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-_)<=Pe*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-E)<=Pe*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(p-D)<=Pe*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(u-O)<=Pe*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(f-M)<=Pe*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(h-N)<=Pe*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(d-R)<=Pe*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-B)<=Pe*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(m-I)<=Pe*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(x-P)<=Pe*Math.max(1,Math.abs(x),Math.abs(P))}var au=Ee,O2=ru;const va=Object.freeze(Object.defineProperty({__proto__:null,add:T2,adjoint:s2,clone:a2,copy:gt,create:Ur,determinant:c2,equals:D2,exactEquals:E2,frob:S2,fromQuat:Gr,fromQuat2:p2,fromRotation:qc,fromRotationTranslation:Yc,fromRotationTranslationScale:Zc,fromRotationTranslationScaleOrigin:h2,fromScaling:yi,fromTranslation:fs,fromValues:i2,fromXRotation:u2,fromYRotation:l2,fromZRotation:f2,frustum:g2,getRotation:xi,getScaling:mi,getTranslation:Jc,identity:Te,invert:Et,lookAt:nu,mul:au,multiply:Ee,multiplyScalar:w2,multiplyScalarAndAdd:_2,ortho:tu,orthoNO:eu,orthoZO:m2,perspective:d2,perspectiveFromFieldOfView:y2,perspectiveNO:Qc,perspectiveZO:v2,rotate:mt,rotateX:di,rotateY:da,rotateZ:vi,scale:An,set:o2,str:C2,sub:O2,subtract:ru,targetTo:x2,translate:Ye,transpose:We},Symbol.toStringTag,{value:"Module"}));function iu(){var t=new yt(3);return yt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ya(t){var e=t[0],a=t[1],n=t[2];return Math.hypot(e,a,n)}function Ci(t,e,a){var n=new yt(3);return n[0]=t,n[1]=e,n[2]=a,n}function Si(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function on(t,e,a,n){return t[0]=e,t[1]=a,t[2]=n,t}function Ti(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t}function sn(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t}function ou(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t}function Kt(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function b2(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.hypot(a,n,r)}function su(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function wi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function cn(t,e){var a=e[0],n=e[1],r=e[2],i=a*a+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function _i(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ir(t,e,a){var n=e[0],r=e[1],i=e[2],o=a[0],s=a[1],c=a[2];return t[0]=r*c-i*s,t[1]=i*o-n*c,t[2]=n*s-r*o,t}function _e(t,e,a){var n=e[0],r=e[1],i=e[2],o=a[3]*n+a[7]*r+a[11]*i+a[15];return o=o||1,t[0]=(a[0]*n+a[4]*r+a[8]*i+a[12])/o,t[1]=(a[1]*n+a[5]*r+a[9]*i+a[13])/o,t[2]=(a[2]*n+a[6]*r+a[10]*i+a[14])/o,t}function Ei(t,e,a){var n=e[0],r=e[1],i=e[2];return t[0]=n*a[0]+r*a[3]+i*a[6],t[1]=n*a[1]+r*a[4]+i*a[7],t[2]=n*a[2]+r*a[5]+i*a[8],t}function M2(t){return t[0]=0,t[1]=0,t[2]=0,t}function ma(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function cu(t,e){var a=t[0],n=t[1],r=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(a-i)<=Pe*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-o)<=Pe*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=Pe*Math.max(1,Math.abs(r),Math.abs(s))}var uu=sn,N2=ou,R2=b2,L2=ya;(function(){var t=iu();return function(e,a,n,r,i,o){var s,c;for(a||(a=3),n||(n=0),r?c=Math.min(r*a+n,e.length):c=e.length,s=n;s<c;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}})();function F2(){var t=new yt(4);return yt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function k2(t,e,a,n){var r=new yt(4);return r[0]=t,r[1]=e,r[2]=a,r[3]=n,r}function V2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function A2(t,e,a,n,r){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t}function B2(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],o=a*a+n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=a*o,t[1]=n*o,t[2]=r*o,t[3]=i*o,t}function er(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3];return t[0]=a[0]*n+a[4]*r+a[8]*i+a[12]*o,t[1]=a[1]*n+a[5]*r+a[9]*i+a[13]*o,t[2]=a[2]*n+a[6]*r+a[10]*i+a[14]*o,t[3]=a[3]*n+a[7]*r+a[11]*i+a[15]*o,t}(function(){var t=F2();return function(e,a,n,r,i,o){var s,c;for(a||(a=4),n||(n=0),r?c=Math.min(r*a+n,e.length):c=e.length,s=n;s<c;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function Bn(){var t=new yt(4);return yt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Di(t,e,a){a=a*.5;var n=Math.sin(a);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(a),t}function lu(t,e){var a=Math.acos(e[3])*2,n=Math.sin(a/2);return n>Pe?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),a}function Oi(t,e,a){var n=e[0],r=e[1],i=e[2],o=e[3],s=a[0],c=a[1],l=a[2],p=a[3];return t[0]=n*p+o*s+r*l-i*c,t[1]=r*p+o*c+i*s-n*l,t[2]=i*p+o*l+n*c-r*s,t[3]=o*p-n*s-r*c-i*l,t}function bi(t,e,a,n){var r=e[0],i=e[1],o=e[2],s=e[3],c=a[0],l=a[1],p=a[2],u=a[3],f,h,d,v,m;return h=r*c+i*l+o*p+s*u,h<0&&(h=-h,c=-c,l=-l,p=-p,u=-u),1-h>Pe?(f=Math.acos(h),d=Math.sin(f),v=Math.sin((1-n)*f)/d,m=Math.sin(n*f)/d):(v=1-n,m=n),t[0]=v*r+m*c,t[1]=v*i+m*l,t[2]=v*o+m*p,t[3]=v*s+m*u,t}function ps(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function U2(t,e){var a=e[0]+e[4]+e[8],n;if(a>0)n=Math.sqrt(a+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[i*3+i]-e[o*3+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[i*3+o]-e[o*3+i])*n,t[i]=(e[i*3+r]+e[r*3+i])*n,t[o]=(e[o*3+r]+e[r*3+o])*n}return t}var fu=k2,Mi=B2;(function(){var t=iu(),e=Ci(1,0,0),a=Ci(0,1,0);return function(n,r,i){var o=_i(r,i);return o<-.999999?(Ir(t,e,r),L2(t)<1e-6&&Ir(t,a,r),cn(t,t),Di(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Ir(t,r,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,Mi(n,n))}})(),function(){var t=Bn(),e=Bn();return function(a,n,r,i,o,s){return bi(t,n,o,s),bi(e,r,i,s),bi(a,t,e,2*s*(1-s)),a}}(),function(){var t=an();return function(e,a,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-a[0],t[5]=-a[1],t[8]=-a[2],Mi(e,U2(e,t))}}();var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(e,r);return new i}return e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),a}var hs=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=a.length)return!1;for(r=n;r--!==0;)if(!t(e[r],a[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(a).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!t(e[o],a[o]))return!1}return!0}return e!==e&&a!==a},pu=Object.prototype.toString,hu=function(e){var a=pu.call(e),n=a==="[object Arguments]";return n||(n=a!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&pu.call(e.callee)==="[object Function]"),n},gs,gu;function I2(){if(gu)return gs;gu=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,a=Object.prototype.toString,n=hu,r=Object.prototype.propertyIsEnumerable,i=!r.call({toString:null},"toString"),o=r.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(f){var h=f.constructor;return h&&h.prototype===f},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!l["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{c(window[f])}catch{return!0}}catch{return!0}return!1}(),u=function(f){if(typeof window>"u"||!p)return c(f);try{return c(f)}catch{return!1}};t=function(h){var d=h!==null&&typeof h=="object",v=a.call(h)==="[object Function]",m=n(h),x=d&&a.call(h)==="[object String]",y=[];if(!d&&!v&&!m)throw new TypeError("Object.keys called on a non-object");var g=o&&v;if(x&&h.length>0&&!e.call(h,0))for(var C=0;C<h.length;++C)y.push(String(C));if(m&&h.length>0)for(var S=0;S<h.length;++S)y.push(String(S));else for(var T in h)!(g&&T==="prototype")&&e.call(h,T)&&y.push(String(T));if(i)for(var w=u(h),_=0;_<s.length;++_)!(w&&s[_]==="constructor")&&e.call(h,s[_])&&y.push(s[_]);return y}}return gs=t,gs}var P2=Array.prototype.slice,z2=hu,du=Object.keys,Ni=du?function(e){return du(e)}:I2(),vu=Object.keys;Ni.shim=function(){if(Object.keys){var e=function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2);e||(Object.keys=function(n){return z2(n)?vu(P2.call(n)):vu(n)})}else Object.keys=Ni;return Object.keys||Ni};var j2=Ni,W2=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},a=Symbol("test"),n=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[a]=r;for(a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==a||!Object.prototype.propertyIsEnumerable.call(e,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,a);if(o.value!==r||o.enumerable!==!0)return!1}return!0},yu=typeof Symbol<"u"&&Symbol,$2=W2,H2=function(){return typeof yu!="function"||typeof Symbol!="function"||typeof yu("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$2()},K2="Function.prototype.bind called on incompatible ",ds=Array.prototype.slice,X2=Object.prototype.toString,q2="[object Function]",Y2=function(e){var a=this;if(typeof a!="function"||X2.call(a)!==q2)throw new TypeError(K2+a);for(var n=ds.call(arguments,1),r,i=function(){if(this instanceof r){var p=a.apply(this,n.concat(ds.call(arguments)));return Object(p)===p?p:this}else return a.apply(e,n.concat(ds.call(arguments)))},o=Math.max(0,a.length-n.length),s=[],c=0;c<o;c++)s.push("$"+c);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),a.prototype){var l=function(){};l.prototype=a.prototype,r.prototype=new l,l.prototype=null}return r},J2=Y2,mu=Function.prototype.bind||J2,Z2=mu,Q2=Z2.call(Function.call,Object.prototype.hasOwnProperty),Ue,Pr=SyntaxError,xu=Function,zr=TypeError,vs=function(t){try{return xu('"use strict"; return ('+t+").constructor;")()}catch{}},tr=Object.getOwnPropertyDescriptor;if(tr)try{tr({},"")}catch{tr=null}var ys=function(){throw new zr},e3=tr?function(){try{return arguments.callee,ys}catch{try{return tr(arguments,"callee").get}catch{return ys}}}():ys,jr=H2(),un=Object.getPrototypeOf||function(t){return t.__proto__},Wr={},t3=typeof Uint8Array>"u"?Ue:un(Uint8Array),nr={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":jr?un([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":Wr,"%AsyncGenerator%":Wr,"%AsyncGeneratorFunction%":Wr,"%AsyncIteratorPrototype%":Wr,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":xu,"%GeneratorFunction%":Wr,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":jr?un(un([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!jr?Ue:un(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!jr?Ue:un(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":jr?un(""[Symbol.iterator]()):Ue,"%Symbol%":jr?Symbol:Ue,"%SyntaxError%":Pr,"%ThrowTypeError%":e3,"%TypedArray%":t3,"%TypeError%":zr,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};try{null.error}catch(t){var n3=un(un(t));nr["%Error.prototype%"]=n3}var r3=function t(e){var a;if(e==="%AsyncFunction%")a=vs("async function () {}");else if(e==="%GeneratorFunction%")a=vs("function* () {}");else if(e==="%AsyncGeneratorFunction%")a=vs("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(a=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&(a=un(r.prototype))}return nr[e]=a,a},Cu={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xa=mu,Ri=Q2,a3=xa.call(Function.call,Array.prototype.concat),i3=xa.call(Function.apply,Array.prototype.splice),Su=xa.call(Function.call,String.prototype.replace),Li=xa.call(Function.call,String.prototype.slice),o3=xa.call(Function.call,RegExp.prototype.exec),s3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,c3=/\\(\\)?/g,u3=function(e){var a=Li(e,0,1),n=Li(e,-1);if(a==="%"&&n!=="%")throw new Pr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&a!=="%")throw new Pr("invalid intrinsic syntax, expected opening `%`");var r=[];return Su(e,s3,function(i,o,s,c){r[r.length]=s?Su(c,c3,"$1"):o||i}),r},l3=function(e,a){var n=e,r;if(Ri(Cu,n)&&(r=Cu[n],n="%"+r[0]+"%"),Ri(nr,n)){var i=nr[n];if(i===Wr&&(i=r3(n)),typeof i>"u"&&!a)throw new zr("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new Pr("intrinsic "+e+" does not exist!")},f3=function(e,a){if(typeof e!="string"||e.length===0)throw new zr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new zr('"allowMissing" argument must be a boolean');if(o3(/^%?[^%]*%?$/,e)===null)throw new Pr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=u3(e),r=n.length>0?n[0]:"",i=l3("%"+r+"%",a),o=i.name,s=i.value,c=!1,l=i.alias;l&&(r=l[0],i3(n,a3([0,1],l)));for(var p=1,u=!0;p<n.length;p+=1){var f=n[p],h=Li(f,0,1),d=Li(f,-1);if((h==='"'||h==="'"||h==="`"||d==='"'||d==="'"||d==="`")&&h!==d)throw new Pr("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(c=!0),r+="."+f,o="%"+r+"%",Ri(nr,o))s=nr[o];else if(s!=null){if(!(f in s)){if(!a)throw new zr("base intrinsic for "+e+" exists, but the property is not available.");return}if(tr&&p+1>=n.length){var v=tr(s,f);u=!!v,u&&"get"in v&&!("originalValue"in v.get)?s=v.get:s=s[f]}else u=Ri(s,f),s=s[f];u&&!c&&(nr[o]=s)}}return s},p3=f3,ms=p3("%Object.defineProperty%",!0),xs=function(){if(ms)try{return ms({},"a",{value:1}),!0}catch{return!1}return!1};xs.hasArrayLengthDefineBug=function(){if(!xs())return null;try{return ms([],"length",{value:1}).length!==1}catch{return!0}};var h3=xs,g3=j2,d3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",v3=Object.prototype.toString,y3=Array.prototype.concat,Tu=Object.defineProperty,m3=function(t){return typeof t=="function"&&v3.call(t)==="[object Function]"},x3=h3(),wu=Tu&&x3,C3=function(t,e,a,n){if(e in t){if(n===!0){if(t[e]===a)return}else if(!m3(n)||!n())return}wu?Tu(t,e,{configurable:!0,enumerable:!1,value:a,writable:!0}):t[e]=a},_u=function(t,e){var a=arguments.length>2?arguments[2]:{},n=g3(e);d3&&(n=y3.call(n,Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r+=1)C3(t,n[r],e[n[r]],a[n[r]])};_u.supportsDescriptors=!!wu;var Eu=_u,Fi={},Cs={get exports(){return Fi},set exports(t){Fi=t}};typeof self<"u"?Cs.exports=self:typeof window<"u"?Cs.exports=window:Cs.exports=Function("return this")();var S3=Fi,Du=function(){return typeof Vt!="object"||!Vt||Vt.Math!==Math||Vt.Array!==Array?S3:Vt},T3=Eu,w3=Du,_3=function(){var e=w3();if(T3.supportsDescriptors){var a=Object.getOwnPropertyDescriptor(e,"globalThis");(!a||a.configurable&&(a.enumerable||!a.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},E3=Eu,D3=Fi,Ou=Du,O3=_3,b3=Ou(),bu=function(){return b3};E3(bu,{getPolyfill:Ou,implementation:D3,shim:O3});var M3=bu;const Xt=M3(),Mu={vtkObject:()=>null};function wt(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Xt.console&&Xt.console.error&&Xt.console.error("Invalid VTK object"),null;const e=Mu[t.vtkClass];if(!e)return Xt.console&&Xt.console.error&&Xt.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const a={...t};Object.keys(a).forEach(r=>{a[r]&&typeof a[r]=="object"&&a[r].vtkClass&&(a[r]=wt(a[r]))});const n=e(a);return n&&n.modified&&n.modified(),n}function N3(t,e){Mu[t]=e}wt.register=N3;class Ss extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Ts=0;const Nu=t=>{throw new Error(`Named parameter '${t}' is missing`)},Ru=Symbol("void");function R3(){return Ts}const Lu={};function rr(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(t=>{Lu[t]=rr}),Xt.console=console.hasOwnProperty("log")?console:Lu;const Un={debug:rr,error:Xt.console.error||rr,info:Xt.console.info||rr,log:Xt.console.log||rr,warn:Xt.console.warn||rr};function Fu(t,e){Un[t]&&(Un[t]=e||rr)}function ku(){Un.log(...arguments)}function Vu(){Un.info(...arguments)}function ki(){Un.debug(...arguments)}function ze(){Un.error(...arguments)}function Vi(){Un.warn(...arguments)}const Au={};function Bu(t){Au[t]||(Un.error(t),Au[t]=!0)}const xt=Object.create(null);xt.Float32Array=Float32Array,xt.Float64Array=Float64Array,xt.Uint8Array=Uint8Array,xt.Int8Array=Int8Array,xt.Uint16Array=Uint16Array,xt.Int16Array=Int16Array,xt.Uint32Array=Uint32Array,xt.Int32Array=Int32Array,xt.Uint8ClampedArray=Uint8ClampedArray;try{xt.BigInt64Array=BigInt64Array,xt.BigUint64Array=BigUint64Array}catch{}function ar(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return new(xt[t]||Float64Array)(...a)}function Ai(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return(xt[t]||Float64Array).from(...a)}function $r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ot(t){return $r(t[0]==="_"?t.slice(1):t)}function Uu(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Gu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const n=["TB","GB","MB","KB"];let r=Number(t),i="B";for(;r>a;)r/=a,i=n.pop();return`${r.toFixed(e)} ${i}`}function Iu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const a=[];let n=t;for(;n>1e3;)a.push(`000${n%1e3}`.slice(-3)),n=Math.floor(n/1e3);return n>0&&a.push(n),a.reverse(),a.join(e)}function Pu(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function L3(t){return Object.values(xt).some(e=>t instanceof e)}function F3(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}return!1}function k3(t,e){return Object.keys(t).find(a=>t[a]===e)}function zu(t){return t&&t.isA?t.getState():t}function ws(t){setTimeout(t,0)}function ju(t,e){const a=performance.now();t.finally(()=>{const n=performance.now()-a;e(n)})}function ut(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Pu(e);const a=[];if(Number.isInteger(e.mtime)||(e.mtime=++Ts),!("classHierarchy"in e))e.classHierarchy=new Ss("vtkObject");else if(!(e.classHierarchy instanceof Ss)){const i=new Ss;for(let o=0;o<e.classHierarchy.length;o++)i.push(e.classHierarchy[o]);e.classHierarchy=i}function n(i){a[i]=null}function r(i){function o(){n(i)}return Object.freeze({unsubscribe:o})}return t.isDeleted=()=>!!e.deleted,t.modified=i=>{if(e.deleted){ze("instance deleted - cannot call any method");return}i&&i<t.getMTime()||(e.mtime=++Ts,a.forEach(o=>o&&o(t)))},t.onModified=i=>{if(e.deleted)return ze("instance deleted - cannot call any method"),null;const o=a.length;return a.push(i),r(o)},t.getMTime=()=>e.mtime,t.isA=i=>{let o=e.classHierarchy.length;for(;o--;)if(e.classHierarchy[o]===i)return!0;return!1},t.getClassName=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-i]},t.set=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=!1;return Object.keys(i).forEach(l=>{const p=s?null:t[`set${$r(l)}`];p&&Array.isArray(i[l])&&p.length>1?c=p(...i[l])||c:p?c=p(i[l])||c:(["mtime"].indexOf(l)===-1&&!o&&Vi(`Warning: Set value to model directly ${l}, ${i[l]}`),c=e[l]!==i[l]||c,e[l]=i[l])}),c},t.get=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(!o.length)return e;const c={};return o.forEach(l=>{c[l]=e[l]}),c},t.getReferenceByName=i=>e[i],t.delete=()=>{Object.keys(e).forEach(i=>delete e[i]),a.forEach((i,o)=>n(o)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const i={...e,vtkClass:t.getClassName()};Object.keys(i).forEach(s=>{i[s]===null||i[s]===void 0||s[0]==="_"?delete i[s]:i[s].isA?i[s]=i[s].getState():Array.isArray(i[s])?i[s]=i[s].map(zu):L3(i[s])&&(i[s]=Array.from(i[s]))});const o={};return Object.keys(i).sort().forEach(s=>{o[s]=i[s]}),o.mtime&&delete o.mtime,o},t.shallowCopy=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${i.getClassName()} into ${t.getClassName()}`);const s=i.get(),c=Object.keys(e).sort();Object.keys(s).sort().forEach(p=>{const u=c.indexOf(p);u===-1?o&&ki(`add ${p} in shallowCopy`):c.splice(u,1),e[p]=s[p]}),c.length&&o&&ki(`Untouched keys: ${c.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const V3={object(t,e,a){return function(){return{...e[a.name]}}}};function At(t,e,a){a.forEach(n=>{if(typeof n=="object"){const r=V3[n.type];r?t[`get${ot(n.name)}`]=r(t,e,n):t[`get${ot(n.name)}`]=()=>e[n.name]}else t[`get${ot(n)}`]=()=>e[n]})}const Wu={enum(t,e,a){const n=`_on${ot(a.name)}Changed`;return r=>{var i;if(typeof r=="string"){if(a.enum[r]!==void 0)return e[a.name]!==a.enum[r]?(e[a.name]=a.enum[r],t.modified(),!0):!1;throw ze(`Set Enum with invalid argument ${a}, ${r}`),new RangeError("Set Enum with invalid string argument")}if(typeof r=="number"){if(e[a.name]!==r){if(Object.keys(a.enum).map(o=>a.enum[o]).indexOf(r)!==-1){const o=e[a.name];return e[a.name]=r,(i=e[n])==null||i.call(e,t,e,r,o),t.modified(),!0}throw ze(`Set Enum outside numeric range ${a}, ${r}`),new RangeError("Set Enum outside numeric range")}return!1}throw ze(`Set Enum with invalid argument (String/Number) ${a}, ${r}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,a){var r;((r=a.params)==null?void 0:r.length)===1&&Vi('Setter of type "object" with a single "param" field is not supported');const n=`_on${ot(a.name)}Changed`;return function(){var l,p;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];let c;if(o.length>1&&((l=a.params)!=null&&l.length)?c=a.params.reduce((u,f,h)=>Object.assign(u,{[f]:o[h]}),{}):c=o[0],!hs(e[a.name],c)){const u=e[a.name];return e[a.name]=c,(p=e[n])==null||p.call(e,t,e,c,u),t.modified(),!0}return!1}}};function $u(t){if(typeof t=="object"){const e=Wu[t.type];if(e)return(a,n)=>e(a,n,t);throw ze(`No setter for field ${t}`),new TypeError("No setter for field")}return function(a,n){const r=`_on${ot(t)}Changed`;return function(o){var s;if(n.deleted)return ze("instance deleted - cannot call any method"),!1;if(n[t]!==o){const c=n[t.name];return n[t]=o,(s=n[r])==null||s.call(n,a,n,o,c),a.modified(),!0}return!1}}}function Ca(t,e,a){a.forEach(n=>{typeof n=="object"?t[`set${ot(n.name)}`]=$u(n)(t,e):t[`set${ot(n)}`]=$u(n)(t,e)})}function pt(t,e,a){At(t,e,a),Ca(t,e,a)}function Sa(t,e,a){a.forEach(n=>{t[`get${ot(n)}`]=()=>e[n]?Array.from(e[n]):e[n],t[`get${ot(n)}ByReference`]=()=>e[n]})}function _s(t,e,a,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;a.forEach(i=>{if(e[i]&&n&&e[i].length!==n)throw new RangeError(`Invalid initial number of values for array (${i})`);const o=`_on${ot(i)}Changed`;t[`set${ot(i)}`]=function(){var h;if(e.deleted)return ze("instance deleted - cannot call any method"),!1;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];let p=c,u,f=!1;if(p.length===1&&(p[0]==null||p[0].length>=0)&&(p=p[0],f=!0),p==null)u=e[i]!==p;else{if(n&&p.length!==n)if(p.length<n&&r!==void 0)for(p=Array.from(p),f=!1;p.length<n;)p.push(r);else throw new RangeError(`Invalid number of values for array setter (${i})`);u=e[i]==null||e[i].length!==p.length;for(let d=0;!u&&d<p.length;++d)u=e[i][d]!==p[d];u&&f&&(p=Array.from(p))}if(u){const d=e[i.name];e[i]=p,(h=e[o])==null||h.call(e,t,e,p,d),t.modified()}return u},t[`set${ot(i)}From`]=s=>{const c=e[i];s.forEach((l,p)=>{c[p]=l})}})}function Bi(t,e,a,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;Sa(t,e,a),_s(t,e,a,n,r)}function Ta(t,e,a){for(let n=0;n<a.length;n++){const r=a[n];e[r]!==void 0&&(e[`_${r}`]=e[r],delete e[r])}}function Es(t,e,a,n){e.inputData?e.inputData=e.inputData.map(wt):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(wt):e.inputConnection=[],e.output?e.output=e.output.map(wt):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(wt):e.inputArrayToProcess=[],e.numberOfInputs=a;function r(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){ze("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){ze(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[d]!==h||e.inputConnection[d])&&(e.inputData[d]=h,e.inputConnection[d]=null,t.modified&&t.modified())}function i(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[h]&&(e.inputData[h]=e.inputConnection[h]()),e.inputData[h]}function o(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){ze("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){let v=`algorithm ${t.getClassName()} only has `;v+=`${e.numberOfInputs}`,v+=" input ports. To add more input ports, use addInputConnection()",ze(v);return}e.inputData[d]=null,e.inputConnection[d]=h}function s(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[h]}function c(){let h=e.numberOfInputs;for(;h&&!e.inputData[h-1]&&!e.inputConnection[h-1];)h--;return h===e.numberOfInputs&&e.numberOfInputs++,h}function l(h){if(e.deleted){ze("instance deleted - cannot call any method");return}o(h,c())}function p(h){if(e.deleted){ze("instance deleted - cannot call any method");return}r(h,c())}function u(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(ze("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[h])}t.shouldUpdate=()=>{var m,x;const h=t.getMTime();let d=1/0,v=n;for(;v--;){if(!e.output[v]||e.output[v].isDeleted())return!0;const y=e.output[v].getMTime();if(y<h)return!0;y<d&&(d=y)}for(v=e.numberOfInputs;v--;)if((m=e.inputConnection[v])!=null&&m.filter.shouldUpdate()||((x=t.getInputData(v))==null?void 0:x.getMTime())>d)return!0;return!1};function f(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const d=()=>u(h);return d.filter=t,d}if(e.numberOfInputs){let h=e.numberOfInputs;for(;h--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=r,t.setInputConnection=o,t.addInputData=p,t.addInputConnection=l,t.getInputData=i,t.getInputConnection=s}n&&(t.getOutputData=u,t.getOutputPort=f),t.update=()=>{const h=[];if(e.numberOfInputs){let d=0;for(;d<e.numberOfInputs;)h[d]=t.getInputData(d),d++}t.requestData&&!t.isDeleted()&&t.shouldUpdate()&&t.requestData(h,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>n||e.output.length,t.getInputArrayToProcess=h=>{const d=e.inputArrayToProcess[h],v=e.inputData[h];return d&&v?v[`get${d.fieldAssociation}`]().getArray(d.arrayName):null},t.setInputArrayToProcess=function(h,d,v){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<h;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[h]={arrayName:d,fieldAssociation:v,attributeType:m}}}const Ds=Symbol("Event abort");function Hr(t,e,a){const n=[],r=t.delete;let i=1;function o(l){for(let p=0;p<n.length;++p){const[u]=n[p];if(u===l){n.splice(p,1);return}}}function s(l){function p(){o(l)}return Object.freeze({unsubscribe:p})}function c(){if(e.deleted){ze("instance deleted - cannot call any method");return}const l=n.slice();for(let p=0;p<l.length;++p){const[,u,f]=l[p];if(u){if(f<0)setTimeout(()=>u.apply(t,arguments),1-f);else if(u.apply(t,arguments)===Ds)break}}}t[`invoke${ot(a)}`]=c,t[`on${ot(a)}`]=function(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!l.apply)return console.error(`Invalid callback for event ${a}`),null;if(e.deleted)return ze("instance deleted - cannot call any method"),null;const u=i++;return n.push([u,l,p]),n.sort((f,h)=>h[2]-f[2]),s(u)},t.delete=()=>{r(),n.forEach(l=>{let[p]=l;return o(p)})}}function Je(t,e){const a=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},i={};return t(i,r,n),Object.freeze(i)};return e&&wt.register(e,a),a}function Gn(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.filter(o=>!!o).map(o=>o(...r))}}function Os(t){return t&&t.isA&&t.isA("vtkObject")}function wa(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Os(t)){if(n.indexOf(t)>=0)return a;n.push(t);const r=e(t);r!==void 0&&a.push(r);const i=t.get();Object.keys(i).forEach(o=>{const s=i[o];Array.isArray(s)?s.forEach(c=>{wa(c,e,a,n)}):wa(s,e,a,n)})}return a}function wn(t,e,a){var n=this;let r;const i=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];const l=n,p=()=>{r=null,a||t.apply(l,s)},u=a&&!r;clearTimeout(r),r=setTimeout(p,e),u&&t.apply(l,s)};return i.cancel=()=>clearTimeout(r),i}function Hu(t,e){let a=!1,n=null;function r(){a=!1,n!==null&&(i(...n),n=null)}function i(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];if(a){n=s;return}a=!0,t(...s),setTimeout(r,e)}return i}function bs(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},a),t.setKey=(n,r)=>{e.keystore[n]=r},t.getKey=n=>e.keystore[n],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=n=>delete e.keystore[n],t.clearKeystore=()=>t.getAllKeys().forEach(n=>delete e.keystore[n])}let A3=1;const Ui="__root__";function Ku(t,e){bs(t,e);const a=t.delete;e.proxyId=`${A3++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),At(t,e,["proxyId","proxyGroup","proxyName"]),pt(t,e,["proxyManager"]);const n={},r={};function i(l,p){r[p]||(r[p]=[]);const u=r[p];for(let f=0;f<l.length;f++)u.push(l[f].name),n[l[f].name]=l[f],l[f].children&&l[f].children.length&&i(l[f].children,l[f].name)}i(e.ui,Ui),t.updateUI=l=>{e.ui=JSON.parse(JSON.stringify(l||[])),Object.keys(n).forEach(p=>delete n[p]),Object.keys(r).forEach(p=>delete r[p]),i(e.ui,Ui),t.modified()};function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ui;return r[l]}t.updateProxyProperty=(l,p)=>{const u=n[l];u?Object.assign(u,p):n[l]={...p}},t.activate=()=>{if(e.proxyManager){const l=`setActive${ot(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[l]&&e.proxyManager[l](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(l,p)=>{p in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[p]=[]),e.propertyLinkSubscribers[p].push(l)},t.gcPropertyLinks=l=>{const p=e.propertyLinkSubscribers[l]||[];for(;p.length;)p.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[l])return e.propertyLinkMap[l];let u=null;const f=[];let h=0,d=!1;function v(C){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(d)return null;const T=[];let w=null;for(h=f.length;h--;){const E=f[h];E.instance===C?w=E:T.push(E)}if(!w)return null;const _=w.instance[`get${ot(w.propertyName)}`]();if(!F3(_,u)||S){for(u=_,d=!0;T.length;){const E=T.pop();E.instance.set({[E.propertyName]:u})}d=!1}return e.propertyLinkMap[l].persistent&&(e.propertyLinkMap[l].value=_),_}function m(C,S){const T=[];for(h=f.length;h--;){const w=f[h];w.instance===C&&(w.propertyName===S||S===void 0)&&(w.subscription.unsubscribe(),T.push(h))}for(;T.length;)f.splice(T.pop(),1)}function x(C,S){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const w=C.onModified(v),_=f[0];return f.push({instance:C,propertyName:S,subscription:w}),T&&(e.propertyLinkMap[l].persistent&&e.propertyLinkMap[l].value!==void 0?C.set({[S]:e.propertyLinkMap[l].value}):_&&v(_.instance,!0)),{unsubscribe:()=>m(C,S)}}function y(){for(;f.length;)f.pop().subscription.unsubscribe()}const g={bind:x,unbind:m,unsubscribe:y,persistent:p};return e.propertyLinkMap[l]=g,g};function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ui;const p=[],u=e.proxyId,f=o(l)||[];for(let h=0;h<f.length;h++){const d=f[h],v=t[`get${ot(d)}`],m=v?v():void 0,x={id:u,name:d,value:m},y=s(d);y.length&&(x.children=y),p.push(x)}return p}t.listPropertyNames=()=>s().map(l=>l.name),t.getPropertyByName=l=>s().find(p=>p.name===l),t.getPropertyDomainByName=l=>(n[l]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:s()}),t.delete=()=>{const l=Object.keys(e.propertyLinkMap);let p=l.length;for(;p--;)e.propertyLinkMap[l[p]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),a()},t.getState=()=>null;function c(){if(e.links)for(let l=0;l<e.links.length;l++){const{link:p,property:u,persistent:f,updateOnBind:h,type:d}=e.links[l];if(d==="application"){const v=e.proxyManager.getPropertyLink(p,f);t.registerPropertyLinkForGC(v,"application"),v.bind(t,u,h)}}}ws(c)}function Xu(t,e,a){const n=t.delete,r=[],i=Object.keys(a);let o=i.length;for(;o--;){const s=i[o],{modelKey:c,property:l,modified:p=!0}=a[s],u=ot(l),f=ot(s);t[`get${f}`]=e[c][`get${u}`],t[`set${f}`]=e[c][`set${u}`],p&&r.push(e[c].onModified(t.modified))}t.delete=()=>{for(;r.length;)r.pop().unsubscribe();n()}}function qu(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function r(s){const c=Object.keys(s);let l=c.length;for(;l--;){const p=c[l];e[p].set(s[p])}}const i=Object.keys(n);let o=i.length;for(;o--;){const s=i[o];e[s]=n[s];const c=a[s];t[`set${ot(s)}`]=l=>{if(l!==e[s]){e[s]=l;const p=c[l];r(p),t.modified()}}}i.length&&At(t,e,i)}const Yu=10,Ju=40,Zu=800;function Qu(t){let e=0,a=0,n=0,r=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=a,a=0),n=e*Yu,r=a*Yu,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||r)&&t.deltaMode&&(t.deltaMode===1?(n*=Ju,r*=Ju):(n*=Zu,r*=Zu)),n&&!e&&(e=n<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:e,spinY:a||e,pixelX:n,pixelY:r||n}}var V={algo:Es,capitalize:$r,chain:Gn,debounce:wn,enumToString:k3,event:Hr,EVENT_ABORT:Ds,formatBytesToProperUnit:Gu,formatNumbersWithThousandSeparator:Iu,get:At,getArray:Sa,getCurrentGlobalMTime:R3,getStateArrayMapFunc:zu,isVtkObject:Os,keystore:bs,measurePromiseExecution:ju,moveToProtected:Ta,newInstance:Je,newTypedArray:ar,newTypedArrayFrom:Ai,normalizeWheel:Qu,obj:ut,proxy:Ku,proxyPropertyMapping:Xu,proxyPropertyState:qu,safeArrays:Pu,set:Ca,setArray:_s,setGet:pt,setGetArray:Bi,setImmediate:ws,setLoggerFunction:Fu,throttle:Hu,traverseInstanceTree:wa,TYPED_ARRAYS:xt,uncapitalize:Uu,VOID:Ru,vtkDebugMacro:ki,vtkErrorMacro:ze,vtkInfoMacro:Vu,vtkLogMacro:ku,vtkOnceErrorMacro:Bu,vtkWarningMacro:Vi,objectSetterMap:Wu,requiredParam:Nu},Dt=Object.freeze({__proto__:null,requiredParam:Nu,VOID:Ru,setLoggerFunction:Fu,vtkLogMacro:ku,vtkInfoMacro:Vu,vtkDebugMacro:ki,vtkErrorMacro:ze,vtkWarningMacro:Vi,vtkOnceErrorMacro:Bu,TYPED_ARRAYS:xt,newTypedArray:ar,newTypedArrayFrom:Ai,capitalize:$r,_capitalize:ot,uncapitalize:Uu,formatBytesToProperUnit:Gu,formatNumbersWithThousandSeparator:Iu,setImmediateVTK:ws,measurePromiseExecution:ju,obj:ut,get:At,set:Ca,setGet:pt,getArray:Sa,setArray:_s,setGetArray:Bi,moveToProtected:Ta,algo:Es,EVENT_ABORT:Ds,event:Hr,newInstance:Je,chain:Gn,isVtkObject:Os,traverseInstanceTree:wa,debounce:wn,throttle:Hu,keystore:bs,proxy:Ku,proxyPropertyMapping:Xu,proxyPropertyState:qu,normalizeWheel:Qu,default:V});const{vtkErrorMacro:B3}=V,U3=["Build","Render"];function G3(t,e){e.classHierarchy.push("vtkViewNode");function a(r,i){for(let o=0;o<e.children.length;++o){const s=(i+1+o)%e.children.length;if(e.children[s]===r)return e.children[s]=e.children[i],e.children[i]=r,!0}return!1}t.build=r=>{},t.render=r=>{},t.traverse=r=>{const i=r.getTraverseOperation(),o=t[i];if(o){o(r);return}t.apply(r,!0);for(let s=0;s<e.children.length;s++)e.children[s].traverse(r);t.apply(r,!1)},t.apply=(r,i)=>{const o=t[r.getOperation()];o&&o(i,r)},t.getViewNodeFor=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(i&&i.renderable===r)return i;if(e.renderable===r)return t;for(let o=0;o<e.children.length;++o){const c=e.children[o].getViewNodeFor(r);if(c)return c}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const i=e._parent.getLastAncestorOfType(r);return i||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const i=e._renderableChildMap.get(r);if(i!==void 0)return i.setVisited(!0),i;const o=t.createViewNode(r);if(o)return o.setParent(t),o.setVisited(!0),e._renderableChildMap.set(r,o),e.children.push(o),o},t.addMissingNodes=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r||!r.length)return;let o;for(let s=0;s<r.length;++s){const c=r[s],l=t.addMissingNode(c);i&&l!==void 0&&(o===void 0?o=e.children.lastIndexOf(l):e.children[o]!==l&&a(e.children,l),o++)}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let i=0;i<r.length;++i){const o=r[i];if(e.children.indexOf(o)===-1){o.setParent(t),e.children.push(o);const c=o.getRenderable();c&&e._renderableChildMap.set(c,o)}o.setVisited(!0)}},t.removeNode=r=>{const i=e.children.findIndex(s=>s===r);if(i<0)return!1;const o=r.getRenderable();return o&&e._renderableChildMap.delete(o),r.delete(),e.children.splice(i,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let i=0;i<e.children.length;++i){const o=e.children[i];if(o.getVisited())e.children[r++]=o,o.setVisited(!1);else{const c=o.getRenderable();c&&e._renderableChildMap.delete(c),o.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return B3("Cannot create view nodes without my own factory"),null;const i=e.myFactory.createNode(r);return i&&i.setRenderable(r),i};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const I3={renderable:null,myFactory:null,children:[],visited:!1};function el(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I3,a),V.obj(t,e),V.event(t,e,"event"),e._renderableChildMap=new Map,V.get(t,e,["visited"]),V.setGet(t,e,["_parent","renderable","myFactory"]),V.getArray(t,e,["children"]),V.moveToProtected(t,e,["parent"]),G3(t,e)}var Ct={newInstance:V.newInstance(el,"vtkViewNode"),extend:el,PASS_TYPES:U3};function P3(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=a=>{if(a.isDeleted())return null;let n=0,r=a.getClassName(n++),i=!1;const o=Object.keys(e.overrides);for(;r&&!i;)o.indexOf(r)!==-1?i=!0:r=a.getClassName(n++);if(!i)return null;const s=e.overrides[r]();return s.setMyFactory(t),s}}const z3={};function tl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z3,a),V.obj(t,e),P3(t,e)}var j3={newInstance:V.newInstance(tl,"vtkViewNodeFactory"),extend:tl};const nl=Object.create(null);function st(t,e){nl[t]=e}function W3(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const $3={};function rl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$3,a),e.overrides=nl,j3.extend(t,e,a),W3(t,e)}var H3={newInstance:V.newInstance(rl,"vtkOpenGLViewNodeFactory"),extend:rl};function K3(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=a=>{if(a){const n=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),e.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=a=>{if(a!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||a.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){gt(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),Vn(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),Tn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),We(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const n=e._openGLRenderer.getAspectRatio();gt(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(n,-1,1)),We(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Ee(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=a}return e.keyMatrices}}const X3={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function q3(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X3,a),Ct.extend(t,e,a),e.keyMatrixTime={},ut(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},pt(t,e,["context","keyMatrixTime"]),K3(t,e)}const Y3=Je(q3);st("vtkCamera",Y3);const{vtkDebugMacro:J3}=Dt;function Z3(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=a=>{if(a){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps(),!0),t.removeUnusedNodes()}},t.updateLights=()=>{let a=0;const n=e.renderable.getLightsByReference();for(let r=0;r<n.length;++r)n[r].getSwitch()>0&&a++;return a||(J3("No lights are on, creating one."),e.renderable.createLight()),a},t.zBufferPass=a=>{if(a){let n=0;const r=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),n|=r.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.colorMask(!0,!0,!0,!0),n&&r.clear(n),r.enable(r.DEPTH_TEST)}},t.opaqueZBufferPass=a=>t.zBufferPass(a),t.cameraPass=a=>{a&&t.clear()},t.getAspectRatio=()=>{const a=e._parent.getSizeByReference(),n=e.renderable.getViewportByReference();return a[0]*(n[2]-n[0])/((n[3]-n[1])*a[1])},t.getTiledSizeAndOrigin=()=>{const a=e.renderable.getViewportByReference(),n=[0,0,1,1],r=a[0]-n[0],i=a[1]-n[1],o=e._parent.normalizedDisplayToDisplay(r,i),s=Math.round(o[0]),c=Math.round(o[1]),l=a[2]-n[0],p=a[3]-n[1],u=e._parent.normalizedDisplayToDisplay(l,p);let f=Math.round(u[0])-s,h=Math.round(u[1])-c;return f<0&&(f=0),h<0&&(h=0),{usize:f,vsize:h,lowerLeftU:s,lowerLeftV:c}},t.clear=()=>{let a=0;const n=e.context;if(!e.renderable.getTransparent()){const i=e.renderable.getBackgroundByReference();n.clearColor(i[0],i[1],i[2],i[3]),a|=n.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(n.clearDepth(1),a|=n.DEPTH_BUFFER_BIT,n.depthMask(!0)),n.colorMask(!0,!0,!0,!0);const r=t.getTiledSizeAndOrigin();n.enable(n.SCISSOR_TEST),n.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),n.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),a&&n.clear(a),n.enable(n.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(a=>{a.modified()})},t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))}}const Q3={context:null,_openGLRenderWindow:null,selector:null};function ev(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q3,a),Ct.extend(t,e,a),At(t,e,["shaderCache"]),pt(t,e,["selector"]),Ta(t,e,["openGLRenderWindow"]),Z3(t,e)}const tv=Je(ev,"vtkOpenGLRenderer");st("vtkRenderer",tv);function nv(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=a=>{if(a){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let n=0;n<e.children.length;n++){const r=e.children[n];r.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(r)):e.oglmapper=r}}},t.traverseZBufferPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseOpaqueZBufferPass=a=>t.traverseOpaquePass(a),t.traverseOpaquePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let a=0;a<e.ogltextures.length;a++){const n=e.ogltextures[a];n.render(),n.getHandle()&&e.activeTextures.push(n)}}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},t.zBufferPass=(a,n)=>t.opaquePass(a,n),t.opaqueZBufferPass=(a,n)=>t.opaquePass(a,n),t.opaquePass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.translucentPass=(a,n)=>{if(a)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),gt(e.keyMatrices.mcwc,e.renderable.getMatrix()),We(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?It(e.keyMatrices.normalMatrix):(Vn(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),Tn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Br(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const rv={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function av(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rv,a),Ct.extend(t,e,a),e.keyMatrixTime={},ut(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:It(new Float64Array(9)),mcwc:Te(new Float64Array(16))},pt(t,e,["context"]),At(t,e,["activeTextures"]),nv(t,e)}const iv=Je(av);st("vtkActor",iv);function ov(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=a=>{if(a){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let n=0;n<e.children.length;n++){const r=e.children[n];r.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(r)):e.oglmapper=r}}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementOverlayActorCount()}},t.traverseOpaquePass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseOverlayPass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let a=0;a<e.ogltextures.length;a++){const n=e.ogltextures[a];n.render(),n.getHandle()&&e.activeTextures.push(n)}}},t.opaquePass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.translucentPass=(a,n)=>{if(a)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.overlayPass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()}}const sv={context:null,activeTextures:null};function cv(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sv,a),Ct.extend(t,e,a),pt(t,e,["context"]),At(t,e,["activeTextures"]),ov(t,e)}const uv=Je(cv);st("vtkActor2D",uv);function Gi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function al(t){let e,a,n;t.length!==2?(e=Gi,a=(s,c)=>Gi(t(s),c),n=(s,c)=>t(s)-c):(e=t===Gi||t===lv?t:fv,a=t,n=t);function r(s,c,l=0,p=s.length){if(l<p){if(e(c,c)!==0)return p;do{const u=l+p>>>1;a(s[u],c)<0?l=u+1:p=u}while(l<p)}return l}function i(s,c,l=0,p=s.length){if(l<p){if(e(c,c)!==0)return p;do{const u=l+p>>>1;a(s[u],c)<=0?l=u+1:p=u}while(l<p)}return l}function o(s,c,l=0,p=s.length){const u=r(s,c,l,p-1);return u>l&&n(s[u-1],c)>-n(s[u],c)?u-1:u}return{left:r,center:o,right:i}}function fv(){return 0}function pv(t){return t===null?NaN:+t}const hv=al(Gi).right;al(pv).center;const gv=hv,dv=Math.sqrt(50),vv=Math.sqrt(10),yv=Math.sqrt(2);function Ii(t,e,a){const n=(e-t)/Math.max(0,a),r=Math.floor(Math.log10(n)),i=n/Math.pow(10,r),o=i>=dv?10:i>=vv?5:i>=yv?2:1;let s,c,l;return r<0?(l=Math.pow(10,-r)/o,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*o,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=a&&a<2?Ii(t,e,a*2):[s,c,l]}function mv(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const n=e<t,[r,i,o]=n?Ii(e,t,a):Ii(t,e,a);if(!(i>=r))return[];const s=i-r+1,c=new Array(s);if(n)if(o<0)for(let l=0;l<s;++l)c[l]=(i-l)/-o;else for(let l=0;l<s;++l)c[l]=(i-l)*o;else if(o<0)for(let l=0;l<s;++l)c[l]=(r+l)/-o;else for(let l=0;l<s;++l)c[l]=(r+l)*o;return c}function Ms(t,e,a){return e=+e,t=+t,a=+a,Ii(t,e,a)[2]}function xv(t,e,a){e=+e,t=+t,a=+a;const n=e<t,r=n?Ms(e,t,a):Ms(t,e,a);return(n?-1:1)*(r<0?1/-r:r)}function Cv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ns(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function il(t,e){var a=Object.create(t.prototype);for(var n in e)a[n]=e[n];return a}function _a(){}var Ea=.7,Pi=1/Ea,Kr="\\s*([+-]?\\d+)\\s*",Da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sv=/^#([0-9a-f]{3,8})$/,Tv=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),wv=new RegExp(`^rgb\\(${ln},${ln},${ln}\\)$`),_v=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${Da}\\)$`),Ev=new RegExp(`^rgba\\(${ln},${ln},${ln},${Da}\\)$`),Dv=new RegExp(`^hsl\\(${Da},${ln},${ln}\\)$`),Ov=new RegExp(`^hsla\\(${Da},${ln},${ln},${Da}\\)$`),ol={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ns(_a,Oa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sl,formatHex:sl,formatHex8:bv,formatHsl:Mv,formatRgb:cl,toString:cl});function sl(){return this.rgb().formatHex()}function bv(){return this.rgb().formatHex8()}function Mv(){return hl(this).formatHsl()}function cl(){return this.rgb().formatRgb()}function Oa(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Sv.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?ul(e):a===3?new kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?zi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?zi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tv.exec(t))?new kt(e[1],e[2],e[3],1):(e=wv.exec(t))?new kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_v.exec(t))?zi(e[1],e[2],e[3],e[4]):(e=Ev.exec(t))?zi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dv.exec(t))?pl(e[1],e[2]/100,e[3]/100,1):(e=Ov.exec(t))?pl(e[1],e[2]/100,e[3]/100,e[4]):ol.hasOwnProperty(t)?ul(ol[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function ul(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function zi(t,e,a,n){return n<=0&&(t=e=a=NaN),new kt(t,e,a,n)}function Nv(t){return t instanceof _a||(t=Oa(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function Rs(t,e,a,n){return arguments.length===1?Nv(t):new kt(t,e,a,n??1)}function kt(t,e,a,n){this.r=+t,this.g=+e,this.b=+a,this.opacity=+n}Ns(kt,Rs,il(_a,{brighter(t){return t=t==null?Pi:Math.pow(Pi,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ea:Math.pow(Ea,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kt(ir(this.r),ir(this.g),ir(this.b),ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ll,formatHex:ll,formatHex8:Rv,formatRgb:fl,toString:fl}));function ll(){return`#${or(this.r)}${or(this.g)}${or(this.b)}`}function Rv(){return`#${or(this.r)}${or(this.g)}${or(this.b)}${or((isNaN(this.opacity)?1:this.opacity)*255)}`}function fl(){const t=ji(this.opacity);return`${t===1?"rgb(":"rgba("}${ir(this.r)}, ${ir(this.g)}, ${ir(this.b)}${t===1?")":`, ${t})`}`}function ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ir(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function or(t){return t=ir(t),(t<16?"0":"")+t.toString(16)}function pl(t,e,a,n){return n<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new qt(t,e,a,n)}function hl(t){if(t instanceof qt)return new qt(t.h,t.s,t.l,t.opacity);if(t instanceof _a||(t=Oa(t)),!t)return new qt;if(t instanceof qt)return t;t=t.rgb();var e=t.r/255,a=t.g/255,n=t.b/255,r=Math.min(e,a,n),i=Math.max(e,a,n),o=NaN,s=i-r,c=(i+r)/2;return s?(e===i?o=(a-n)/s+(a<n)*6:a===i?o=(n-e)/s+2:o=(e-a)/s+4,s/=c<.5?i+r:2-i-r,o*=60):s=c>0&&c<1?0:o,new qt(o,s,c,t.opacity)}function Lv(t,e,a,n){return arguments.length===1?hl(t):new qt(t,e,a,n??1)}function qt(t,e,a,n){this.h=+t,this.s=+e,this.l=+a,this.opacity=+n}Ns(qt,Lv,il(_a,{brighter(t){return t=t==null?Pi:Math.pow(Pi,t),new qt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ea:Math.pow(Ea,t),new qt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*e,r=2*a-n;return new kt(Ls(t>=240?t-240:t+120,r,n),Ls(t,r,n),Ls(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new qt(gl(this.h),Wi(this.s),Wi(this.l),ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ji(this.opacity);return`${t===1?"hsl(":"hsla("}${gl(this.h)}, ${Wi(this.s)*100}%, ${Wi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gl(t){return t=(t||0)%360,t<0?t+360:t}function Wi(t){return Math.max(0,Math.min(1,t||0))}function Ls(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const Fs=t=>()=>t;function Fv(t,e){return function(a){return t+a*e}}function kv(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(n){return Math.pow(t+n*e,a)}}function Vv(t){return(t=+t)==1?dl:function(e,a){return a-e?kv(e,a,t):Fs(isNaN(e)?a:e)}}function dl(t,e){var a=e-t;return a?Fv(t,a):Fs(isNaN(t)?e:t)}const vl=function t(e){var a=Vv(e);function n(r,i){var o=a((r=Rs(r)).r,(i=Rs(i)).r),s=a(r.g,i.g),c=a(r.b,i.b),l=dl(r.opacity,i.opacity);return function(p){return r.r=o(p),r.g=s(p),r.b=c(p),r.opacity=l(p),r+""}}return n.gamma=t,n}(1);function Av(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,n=e.slice(),r;return function(i){for(r=0;r<a;++r)n[r]=t[r]*(1-i)+e[r]*i;return n}}function Bv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Uv(t,e){var a=e?e.length:0,n=t?Math.min(a,t.length):0,r=new Array(n),i=new Array(a),o;for(o=0;o<n;++o)r[o]=As(t[o],e[o]);for(;o<a;++o)i[o]=e[o];return function(s){for(o=0;o<n;++o)i[o]=r[o](s);return i}}function Gv(t,e){var a=new Date;return t=+t,e=+e,function(n){return a.setTime(t*(1-n)+e*n),a}}function $i(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function Iv(t,e){var a={},n={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?a[r]=As(t[r],e[r]):n[r]=e[r];return function(i){for(r in a)n[r]=a[r](i);return n}}var ks=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vs=new RegExp(ks.source,"g");function Pv(t){return function(){return t}}function zv(t){return function(e){return t(e)+""}}function jv(t,e){var a=ks.lastIndex=Vs.lastIndex=0,n,r,i,o=-1,s=[],c=[];for(t=t+"",e=e+"";(n=ks.exec(t))&&(r=Vs.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:$i(n,r)})),a=Vs.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?zv(c[0].x):Pv(e):(e=c.length,function(l){for(var p=0,u;p<e;++p)s[(u=c[p]).i]=u.x(l);return s.join("")})}function As(t,e){var a=typeof e,n;return e==null||a==="boolean"?Fs(e):(a==="number"?$i:a==="string"?(n=Oa(e))?(e=n,vl):jv:e instanceof Oa?vl:e instanceof Date?Gv:Bv(e)?Av:Array.isArray(e)?Uv:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Iv:$i)(t,e)}function Wv(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function $v(t){return function(){return t}}function Hv(t){return+t}var yl=[0,1];function Xr(t){return t}function Bs(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:$v(isNaN(e)?NaN:.5)}function Kv(t,e){var a;return t>e&&(a=t,t=e,e=a),function(n){return Math.max(t,Math.min(e,n))}}function Xv(t,e,a){var n=t[0],r=t[1],i=e[0],o=e[1];return r<n?(n=Bs(r,n),i=a(o,i)):(n=Bs(n,r),i=a(i,o)),function(s){return i(n(s))}}function qv(t,e,a){var n=Math.min(t.length,e.length)-1,r=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=Bs(t[o],t[o+1]),i[o]=a(e[o],e[o+1]);return function(s){var c=gv(t,s,1,n)-1;return i[c](r[c](s))}}function Yv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Jv(){var t=yl,e=yl,a=As,n,r,i,o=Xr,s,c,l;function p(){var f=Math.min(t.length,e.length);return o!==Xr&&(o=Kv(t[0],t[f-1])),s=f>2?qv:Xv,c=l=null,u}function u(f){return f==null||isNaN(f=+f)?i:(c||(c=s(t.map(n),e,a)))(n(o(f)))}return u.invert=function(f){return o(r((l||(l=s(e,t.map(n),$i)))(f)))},u.domain=function(f){return arguments.length?(t=Array.from(f,Hv),p()):t.slice()},u.range=function(f){return arguments.length?(e=Array.from(f),p()):e.slice()},u.rangeRound=function(f){return e=Array.from(f),a=Wv,p()},u.clamp=function(f){return arguments.length?(o=f?!0:Xr,p()):o!==Xr},u.interpolate=function(f){return arguments.length?(a=f,p()):a},u.unknown=function(f){return arguments.length?(i=f,u):i},function(f,h){return n=f,r=h,p()}}function Zv(){return Jv()(Xr,Xr)}function Qv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Hi(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,n=t.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+t.slice(a+1)]}function qr(t){return t=Hi(Math.abs(t)),t?t[1]:NaN}function ey(t,e){return function(a,n){for(var r=a.length,i=[],o=0,s=t[0],c=0;r>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(a.substring(r-=s,r+s)),!((c+=s+1)>n));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function ty(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var ny=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ki(t){if(!(e=ny.exec(t)))throw new Error("invalid format: "+t);var e;return new Us({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ki.prototype=Us.prototype;function Us(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Us.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ry(t){e:for(var e=t.length,a=1,n=-1,r;a<e;++a)switch(t[a]){case".":n=r=a;break;case"0":n===0&&(n=a),r=a;break;default:if(!+t[a])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(r+1):t}var ml;function ay(t,e){var a=Hi(t,e);if(!a)return t+"";var n=a[0],r=a[1],i=r-(ml=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Hi(t,Math.max(0,e+i-1))[0]}function xl(t,e){var a=Hi(t,e);if(!a)return t+"";var n=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const Cl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>xl(t*100,e),r:xl,s:ay,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Sl(t){return t}var Tl=Array.prototype.map,wl=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function iy(t){var e=t.grouping===void 0||t.thousands===void 0?Sl:ey(Tl.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Sl:ty(Tl.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(u){u=Ki(u);var f=u.fill,h=u.align,d=u.sign,v=u.symbol,m=u.zero,x=u.width,y=u.comma,g=u.precision,C=u.trim,S=u.type;S==="n"?(y=!0,S="g"):Cl[S]||(g===void 0&&(g=12),C=!0,S="g"),(m||f==="0"&&h==="=")&&(m=!0,f="0",h="=");var T=v==="$"?a:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=v==="$"?n:/[%p]/.test(S)?o:"",_=Cl[S],E=/[defgprs%]/.test(S);g=g===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function D(O){var M=T,N=w,R,B,I;if(S==="c")N=_(O)+N,O="";else{O=+O;var P=O<0||1/O<0;if(O=isNaN(O)?c:_(Math.abs(O),g),C&&(O=ry(O)),P&&+O==0&&d!=="+"&&(P=!1),M=(P?d==="("?d:s:d==="-"||d==="("?"":d)+M,N=(S==="s"?wl[8+ml/3]:"")+N+(P&&d==="("?")":""),E){for(R=-1,B=O.length;++R<B;)if(I=O.charCodeAt(R),48>I||I>57){N=(I===46?r+O.slice(R+1):O.slice(R))+N,O=O.slice(0,R);break}}}y&&!m&&(O=e(O,1/0));var L=M.length+O.length+N.length,k=L<x?new Array(x-L+1).join(f):"";switch(y&&m&&(O=e(k+O,k.length?x-N.length:1/0),k=""),h){case"<":O=M+O+N+k;break;case"=":O=M+k+O+N;break;case"^":O=k.slice(0,L=k.length>>1)+M+O+N+k.slice(L);break;default:O=k+M+O+N;break}return i(O)}return D.toString=function(){return u+""},D}function p(u,f){var h=l((u=Ki(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(qr(f)/3)))*3,v=Math.pow(10,-d),m=wl[8+d/3];return function(x){return h(v*x)+m}}return{format:l,formatPrefix:p}}var Xi,_l,El;oy({thousands:",",grouping:[3],currency:["$",""]});function oy(t){return Xi=iy(t),_l=Xi.format,El=Xi.formatPrefix,Xi}function sy(t){return Math.max(0,-qr(Math.abs(t)))}function cy(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qr(e)/3)))*3-qr(Math.abs(t)))}function uy(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qr(e)-qr(t))+1}function ly(t,e,a,n){var r=xv(t,e,a),i;switch(n=Ki(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=cy(r,o))&&(n.precision=i),El(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=uy(r,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=sy(r))&&(n.precision=i-(n.type==="%")*2);break}}return _l(n)}function fy(t){var e=t.domain;return t.ticks=function(a){var n=e();return mv(n[0],n[n.length-1],a??10)},t.tickFormat=function(a,n){var r=e();return ly(r[0],r[r.length-1],a??10,n)},t.nice=function(a){a==null&&(a=10);var n=e(),r=0,i=n.length-1,o=n[r],s=n[i],c,l,p=10;for(s<o&&(l=o,o=s,s=l,l=r,r=i,i=l);p-- >0;){if(l=Ms(o,s,a),l===c)return n[r]=o,n[i]=s,e(n);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;c=l}return t},t}function Gs(){var t=Zv();return t.copy=function(){return Yv(t,Gs())},Cv.apply(t,arguments),fy(t)}var Is={},py={get exports(){return Is},set exports(t){Is=t}};(function(t){(function(e,a,n){function r(c){var l=this,p=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=p(" "),l.s1=p(" "),l.s2=p(" "),l.s0-=p(c),l.s0<0&&(l.s0+=1),l.s1-=p(c),l.s1<0&&(l.s1+=1),l.s2-=p(c),l.s2<0&&(l.s2+=1),p=null}function i(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function o(c,l){var p=new r(c),u=l&&l.state,f=p.next;return f.int32=function(){return p.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,u&&(typeof u=="object"&&i(u,p),f.state=function(){return i(p,{})}),f}function s(){var c=4022871197,l=function(p){p=String(p);for(var u=0;u<p.length;u++){c+=p.charCodeAt(u);var f=.02519603282416938*c;c=f>>>0,f-=c,f*=c,c=f>>>0,f-=c,c+=f*4294967296}return(c>>>0)*23283064365386963e-26};return l}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(Vt,t,!1)})(py);var Ps={},hy={get exports(){return Ps},set exports(t){Ps=t}};(function(t){(function(e,a,n){function r(s){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var u=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^u^u>>>8},s===(s|0)?c.x=s:l+=s;for(var p=0;p<l.length+64;p++)c.x^=l.charCodeAt(p)|0,c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function o(s,c){var l=new r(s),p=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,p&&(typeof p=="object"&&i(p,l),u.state=function(){return i(l,{})}),u}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(Vt,t,!1)})(hy);var zs={},gy={get exports(){return zs},set exports(t){zs=t}};(function(t){(function(e,a,n){function r(s){var c=this,l="";c.next=function(){var u=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(u^u<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(s|0)?c.x=s:l+=s;for(var p=0;p<l.length+64;p++)c.x^=l.charCodeAt(p)|0,p==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function o(s,c){var l=new r(s),p=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,p&&(typeof p=="object"&&i(p,l),u.state=function(){return i(l,{})}),u}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(Vt,t,!1)})(gy);var js={},dy={get exports(){return js},set exports(t){js=t}};(function(t){(function(e,a,n){function r(s){var c=this;c.next=function(){var p=c.x,u=c.i,f,h;return f=p[u],f^=f>>>7,h=f^f<<24,f=p[u+1&7],h^=f^f>>>10,f=p[u+3&7],h^=f^f>>>3,f=p[u+4&7],h^=f^f<<7,f=p[u+7&7],f=f^f<<13,h^=f^f<<9,p[u]=h,c.i=u+1&7,h};function l(p,u){var f,h=[];if(u===(u|0))h[0]=u;else for(u=""+u,f=0;f<u.length;++f)h[f&7]=h[f&7]<<15^u.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],p.x=h,p.i=0,f=256;f>0;--f)p.next()}l(c,s)}function i(s,c){return c.x=s.x.slice(),c.i=s.i,c}function o(s,c){s==null&&(s=+new Date);var l=new r(s),p=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,p&&(p.x&&i(p,l),u.state=function(){return i(l,{})}),u}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(Vt,t,!1)})(dy);var Ws={},vy={get exports(){return Ws},set exports(t){Ws=t}};(function(t){(function(e,a,n){function r(s){var c=this;c.next=function(){var p=c.w,u=c.X,f=c.i,h,d;return c.w=p=p+1640531527|0,d=u[f+34&127],h=u[f=f+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,d=u[f]=d^h,c.i=f,d+(p^p>>>16)|0};function l(p,u){var f,h,d,v,m,x=[],y=128;for(u===(u|0)?(h=u,u=null):(u=u+"\0",h=0,y=Math.max(y,u.length)),d=0,v=-32;v<y;++v)u&&(h^=u.charCodeAt((v+32)%u.length)),v===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(m=m+1640531527|0,f=x[v&127]^=h+m,d=f==0?d+1:0);for(d>=128&&(x[(u&&u.length||0)&127]=-1),d=127,v=4*128;v>0;--v)h=x[d+34&127],f=x[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,x[d]=h^f;p.w=m,p.X=x,p.i=d}l(c,s)}function i(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function o(s,c){s==null&&(s=+new Date);var l=new r(s),p=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,p&&(p.X&&i(p,l),u.state=function(){return i(l,{})}),u}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(Vt,t,!1)})(vy);var $s={},yy={get exports(){return $s},set exports(t){$s=t}};(function(t){(function(e,a,n){function r(s){var c=this,l="";c.next=function(){var u=c.b,f=c.c,h=c.d,d=c.a;return u=u<<25^u>>>7^f,f=f-h|0,h=h<<24^h>>>8^d,d=d-u|0,c.b=u=u<<20^u>>>12^f,c.c=f=f-h|0,c.d=h<<16^f>>>16^d,c.a=d-u|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=s|0):l+=s;for(var p=0;p<l.length+20;p++)c.b^=l.charCodeAt(p)|0,c.next()}function i(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function o(s,c){var l=new r(s),p=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},u.int32=l.next,u.quick=u,p&&(typeof p=="object"&&i(p,l),u.state=function(){return i(l,{})}),u}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(Vt,t,!1)})(yy);var Hs={},my={get exports(){return Hs},set exports(t){Hs=t}};const xy=G2(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){(function(e,a,n){var r=256,i=6,o=52,s="random",c=n.pow(r,i),l=n.pow(2,o),p=l*2,u=r-1,f;function h(C,S,T){var w=[];S=S==!0?{entropy:!0}:S||{};var _=x(m(S.entropy?[C,g(a)]:C??y(),3),w),E=new d(w),D=function(){for(var O=E.g(i),M=c,N=0;O<l;)O=(O+N)*r,M*=r,N=E.g(1);for(;O>=p;)O/=2,M/=2,N>>>=1;return(O+N)/M};return D.int32=function(){return E.g(4)|0},D.quick=function(){return E.g(4)/4294967296},D.double=D,x(g(E.S),a),(S.pass||T||function(O,M,N,R){return R&&(R.S&&v(R,E),O.state=function(){return v(E,{})}),N?(n[s]=O,M):O})(D,_,"global"in S?S.global:this==n,S.state)}function d(C){var S,T=C.length,w=this,_=0,E=w.i=w.j=0,D=w.S=[];for(T||(C=[T++]);_<r;)D[_]=_++;for(_=0;_<r;_++)D[_]=D[E=u&E+C[_%T]+(S=D[_])],D[E]=S;(w.g=function(O){for(var M,N=0,R=w.i,B=w.j,I=w.S;O--;)M=I[R=u&R+1],N=N*r+I[u&(I[R]=I[B=u&B+M])+(I[B]=M)];return w.i=R,w.j=B,N})(r)}function v(C,S){return S.i=C.i,S.j=C.j,S.S=C.S.slice(),S}function m(C,S){var T=[],w=typeof C,_;if(S&&w=="object")for(_ in C)try{T.push(m(C[_],S-1))}catch{}return T.length?T:w=="string"?C:C+"\0"}function x(C,S){for(var T=C+"",w,_=0;_<T.length;)S[u&_]=u&(w^=S[u&_]*19)+T.charCodeAt(_++);return g(S)}function y(){try{var C;return f&&(C=f.randomBytes)?C=C(r):(C=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(C)),g(C)}catch{var S=e.navigator,T=S&&S.plugins;return[+new Date,e,T,e.screen,g(a)]}}function g(C){return String.fromCharCode.apply(0,C)}if(x(n.random(),a),t.exports){t.exports=h;try{f=xy}catch{}}else n["seed"+s]=h})(typeof self<"u"?self:Vt,[],Math)})(my);var Cy=Is,Sy=Ps,Ty=zs,wy=js,_y=Ws,Ey=$s,sr=Hs;sr.alea=Cy,sr.xor128=Sy,sr.xorwow=Ty,sr.xorshift7=wy,sr.xor4096=_y,sr.tychei=Ey;var Dl=sr;const Ks=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Dy=[1,0,0,0,1,0,0,0,1],Xs=1e-6,qs=1e-12,{vtkErrorMacro:Ol,vtkWarningMacro:cr}=V;let bl=0;const Ml=20;function ba(t){return()=>Ol(`vtkMath::${t} - NOT IMPLEMENTED`)}function Ma(t,e,a,n){let r;for(let i=0;i<e;i++)r=t[a*e+i],t[a*e+i]=t[n*e+i],t[n*e+i]=r}function Na(t,e,a,n){let r;for(let i=0;i<e;i++)r=t[i*e+a],t[i*e+a]=t[i*e+n],t[i*e+n]=r}function Ze(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let a=0;a<t;++a)e[a]=0;return e}const Oy=()=>Math.PI;function by(t,e){return e>1023?t*2**1023*2**(e-1023):e<-1074?t*2**-1074*2**(e+1074):t*2**e}function Qe(t){return t/180*Math.PI}function Ra(t){return t*180/Math.PI}const{round:La,floor:Ys,ceil:My,min:Ny,max:Ry}=Math;function Ly(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=1/0;for(let r=e,i=t.length;r<i;r+=a)t[r]<n&&(n=t[r]);return n}function Fy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=-1/0;for(let r=e,i=t.length;r<i;r+=a)n<t[r]&&(n=t[r]);return n}function ky(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=1/0,r=-1/0;for(let i=e,o=t.length;i<o;i+=a)t[i]<n&&(n=t[i]),r<t[i]&&(r=t[i]);return[n,r]}const Vy=ba("ceilLog2"),Ay=ba("factorial");function Pt(t){let e=1;for(;e<t;)e*=2;return e}function Fa(t){return t===Pt(t)}function By(t,e){let a=1;for(let n=1;n<=e;++n)a*=(t-n+1)/n;return Math.floor(a)}function Uy(t,e){if(t<e)return 0;const a=Ze(e);for(let n=0;n<e;++n)a[n]=n;return a}function Gy(t,e,a){let n=0;for(let r=e-1;r>=0;--r)if(a[r]<t-e+r){let i=a[r]+1;for(;r<e;)a[r++]=i++;n=1;break}return n}function Iy(t){Dl(`${t}`,{global:!0}),bl=t}function Py(){return bl}function qi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const a=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+a*Math.random()}const zy=ba("gaussian");function ur(t,e,a){return a[0]=t[0]+e[0],a[1]=t[1]+e[1],a[2]=t[2]+e[2],a}function He(t,e,a){return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],a}function Js(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Nl(t,e){return t[0]*=e,t[1]*=e,t}function Zs(t,e,a,n){return n[0]=t[0]+e[0]*a,n[1]=t[1]+e[1]*a,n[2]=t[2]+e[2]*a,n}function jy(t,e,a,n){return n[0]=t[0]+e[0]*a,n[1]=t[1]+e[1]*a,n}function xe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wy(t,e,a){a[0]=t[0]*e[0],a[1]=t[0]*e[1],a[2]=t[0]*e[2],a[3]=t[1]*e[0],a[4]=t[1]*e[1],a[5]=t[1]*e[2],a[6]=t[2]*e[0],a[7]=t[2]*e[1],a[8]=t[2]*e[2]}function et(t,e,a){const n=t[1]*e[2]-t[2]*e[1],r=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return a[0]=n,a[1]=r,a[2]=i,a}function St(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let a=0;for(let n=0;n<e;n++)a+=t[n]*t[n];return Math.sqrt(a)}}}function Ke(t){const e=St(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function $y(t){const e=St(t,3);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e),e}function Hy(t,e,a,n){const r=t[0]*t[0],i=t[1]*t[1],o=t[2]*t[2],s=Math.sqrt(r+i+o);let c,l,p;r>i&&r>o?(c=0,l=1,p=2):i>o?(c=1,l=2,p=0):(c=2,l=0,p=1);const u=t[c]/s,f=t[l]/s,h=t[p]/s,d=Math.sqrt(u*u+h*h);if(n!==0){const v=Math.sin(n),m=Math.cos(n);e&&(e[c]=(h*m-u*f*v)/d,e[l]=v*d,e[p]=(-(u*m)-f*h*v)/d),a&&(a[c]=(-(h*v)-u*f*m)/d,a[l]=m*d,a[p]=(u*v-f*h*m)/d)}else e&&(e[c]=h/d,e[l]=0,e[p]=-u/d),a&&(a[c]=-u*f/d,a[l]=d,a[p]=-f*h/d)}function Ky(t,e,a){const n=xe(e,e);if(n===0)return a[0]=0,a[1]=0,a[2]=0,!1;const r=xe(t,e)/n;for(let i=0;i<3;i++)a[i]=e[i];return Js(a,r),!0}function Qs(t,e){return t[0]*e[0]+t[1]*e[1]}function Xy(t,e,a){const n=Qs(e,e);if(n===0)return a[0]=0,a[1]=0,!1;const r=Qs(t,e)/n;for(let i=0;i<2;i++)a[i]=e[i];return Nl(a,r),!0}function dt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function qy(t,e){const a=[0,0,0];return et(t,e,a),Math.atan2(St(a),xe(t,e))}function Yy(t,e,a){const n=Math.abs(t-a);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(n**2)/(2*e))}function Jy(t,e,a){const n=Math.abs(t-a);return Math.exp(-(n**2)/(2*e))}function Zy(t,e,a){a[0]=t[0]*e[0],a[1]=t[0]*e[1],a[2]=t[1]*e[0],a[3]=t[1]*e[1]}function Rl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ll(t){const e=Rl(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function it(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function Qy(t,e){let a,n,r;const i=[0,0,0];for(let o=0;o<3;o++)r=Math.abs(t[o*3]),(n=Math.abs(t[o*3+1]))>r&&(r=n),(n=Math.abs(t[o*3+2]))>r&&(r=n),i[o]=1/r;r=i[0]*Math.abs(t[0]),a=0,(n=i[1]*Math.abs(t[3]))>=r&&(r=n,a=1),(n=i[2]*Math.abs(t[6]))>=r&&(a=2),a!==0&&(Ma(t,3,a,0),i[a]=i[0]),e[0]=a,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],r=i[1]*Math.abs(t[4]),a=1,(n=i[2]*Math.abs(t[7]))>=r&&(a=2,Ma(t,3,1,2),i[2]=i[1]),e[1]=a,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function em(t,e,a){let n=a[e[0]];a[e[0]]=a[0],a[0]=n,n=a[e[1]],a[e[1]]=a[1],a[1]=n-t[3]*a[0],n=a[e[2]],a[e[2]]=a[2],a[2]=n-t[6]*a[0]-t[7]*a[1],a[2]/=t[8],a[1]=(a[1]-t[5]*a[2])/t[4],a[0]=(a[0]-t[1]*a[1]-t[2]*a[2])/t[0]}function tm(t,e,a){const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],c=t[5],l=t[6],p=t[7],u=t[8],f=+it(s,p,c,u),h=-it(o,l,c,u),d=+it(o,l,s,p),v=-it(r,p,i,u),m=+it(n,l,i,u),x=-it(n,l,r,p),y=+it(r,s,i,c),g=-it(n,o,i,c),C=+it(n,o,r,s),S=n*f+r*h+i*d,T=f*e[0]+v*e[1]+y*e[2],w=h*e[0]+m*e[1]+g*e[2],_=d*e[0]+x*e[1]+C*e[2];a[0]=T/S,a[1]=w/S,a[2]=_/S}function Yi(t,e,a){const n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],r=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];a[0]=n,a[1]=r,a[2]=i}function e0(t,e,a){const n=[...t],r=[...e];for(let i=0;i<3;i++)a[i]=n[0]*r[i]+n[1]*r[i+3]+n[2]*r[i+6],a[i+3]=n[3]*r[i]+n[4]*r[i+3]+n[5]*r[i+6],a[i+6]=n[6]*r[i]+n[7]*r[i+3]+n[8]*r[i+6]}function nm(t,e,a,n,r,i,o){n!==r&&Ol("Number of columns of A must match number of rows of B.");const s=[...t],c=[...e];for(let l=0;l<a;l++)for(let p=0;p<i;p++){o[l*i+p]=0;for(let u=0;u<n;u++)o[l*i+p]+=s[l*n+u]*c[p+i*u]}}function Yr(t,e){let a;a=t[3],e[3]=t[1],e[1]=a,a=t[6],e[6]=t[2],e[2]=a,a=t[7],e[7]=t[5],e[5]=a,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function rm(t,e){const a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],p=t[8],u=+it(o,l,s,p),f=-it(i,c,s,p),h=+it(i,c,o,l),d=-it(n,l,r,p),v=+it(a,c,r,p),m=-it(a,c,n,l),x=+it(n,o,r,s),y=-it(a,i,r,s),g=+it(a,i,n,o),C=a*u+n*f+r*h;C===0&&cr("Matrix has 0 determinant"),e[0]=u/C,e[3]=f/C,e[6]=h/C,e[1]=d/C,e[4]=v/C,e[7]=m/C,e[2]=x/C,e[5]=y/C,e[8]=g/C}function Ji(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function Fl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xs;if(t.length!==e.length)return!1;function n(r,i){return Math.abs(r-e[i])<=a}return t.every(n)}const Jr=Fl;function kl(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function Vl(t,e){for(let a=0;a<t;a++){for(let n=0;n<t;n++)e[a*t+n]=0;e[a*t+a]=1}return e}function am(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xs;return Jr(t,Ks,e)}function im(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xs;return Jr(t,Dy,e)}function Al(t,e){const a=t[0]*t[0],n=t[0]*t[1],r=t[0]*t[2],i=t[0]*t[3],o=t[1]*t[1],s=t[2]*t[2],c=t[3]*t[3],l=t[1]*t[2],p=t[1]*t[3],u=t[2]*t[3],f=o+s+c;let h=1/(a+f);const d=(a-f)*h;h*=2,e[0]=o*h+d,e[3]=(l+i)*h,e[6]=(p-r)*h,e[1]=(l-i)*h,e[4]=s*h+d,e[7]=(u+n)*h,e[2]=(p+r)*h,e[5]=(u-n)*h,e[8]=c*h+d}function Zi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const a=`${t}`.split("e");let n="";return+a[1]+e>0&&(n="+"),+`${Math.round(`${+a[0]}e${n}${+a[1]+e}`)}e-${e}`}function t0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=Zi(t[0],a),e[1]=Zi(t[1],a),e[2]=Zi(t[2],a),e}function ka(t,e,a,n){let r,i,o,s,c,l,p,u,f,h,d,v,m,x,y,g;const C=Ze(e),S=Ze(e),T=(_,E,D)=>{x=_[E],m=_[D],_[E]=x-v*(m+x*h),_[D]=m+v*(x-m*h)};for(Vl(e,n),c=0;c<e;c++)C[c]=a[c]=t[c+c*e],S[c]=0;for(r=0;r<Ml;r++){for(d=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)d+=Math.abs(t[c*e+s]);if(d===0)break;for(r<3?p=.2*d/(e*e):p=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)if(x=100*Math.abs(t[c*e+s]),r>3&&Math.abs(a[c])+x===Math.abs(a[c])&&Math.abs(a[s])+x===Math.abs(a[s]))t[c*e+s]=0;else if(Math.abs(t[c*e+s])>p){for(m=a[s]-a[c],Math.abs(m)+x===Math.abs(m)?f=t[c*e+s]/m:(u=.5*m/t[c*e+s],f=1/(Math.abs(u)+Math.sqrt(1+u*u)),u<0&&(f=-f)),y=1/Math.sqrt(1+f*f),v=f*y,h=v/(1+y),m=f*t[c*e+s],S[c]-=m,S[s]+=m,a[c]-=m,a[s]+=m,t[c*e+s]=0,i=0;i<=c-1;i++)T(t,i*e+c,i*e+s);for(i=c+1;i<=s-1;i++)T(t,c*e+i,i*e+s);for(i=s+1;i<e;i++)T(t,c*e+i,s*e+i);for(i=0;i<e;i++)T(n,i*e+c,i*e+s)}for(c=0;c<e;c++)C[c]+=S[c],a[c]=C[c],S[c]=0}if(r>=Ml)return cr("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<e-1;i++){for(o=i,g=a[o],r=i+1;r<e;r++)(a[r]>=g||Math.abs(a[r]-g)<qs)&&(o=r,g=a[o]);o!==i&&(a[o]=a[i],a[i]=g,Na(n,e,i,o))}const w=(e>>1)+(e&1);for(l=0,r=0;r<e*e;r++)n[r]>=0&&l++;if(l<w)for(r=0;r<e;r++)n[r*e+i]*=-1;return 1}function Bl(t,e){const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a[0]=t[0]+t[4]+t[8],a[5]=t[0]-t[4]-t[8],a[10]=-t[0]+t[4]-t[8],a[15]=-t[0]-t[4]+t[8],a[1]=a[4]=t[7]-t[5],a[2]=a[8]=t[2]-t[6],a[3]=a[12]=t[3]-t[1],a[6]=a[9]=t[3]+t[1],a[7]=a[13]=t[2]+t[6],a[11]=a[14]=t[7]+t[5];const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],i=[...a];ka(i,4,r,n),e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12]}function om(t,e,a){const n=t[0]*e[0],r=t[0]*e[1],i=t[0]*e[2],o=t[0]*e[3],s=t[1]*e[0],c=t[1]*e[1],l=t[1]*e[2],p=t[1]*e[3],u=t[2]*e[0],f=t[2]*e[1],h=t[2]*e[2],d=t[2]*e[3],v=t[3]*e[0],m=t[3]*e[1],x=t[3]*e[2],y=t[3]*e[3];a[0]=n-c-h-y,a[1]=r+s+d-x,a[2]=i-p+u+m,a[3]=o+l-f+v}function Ul(t,e){for(let f=0;f<9;f++)e[f]=t[f];const a=Ze(3),n=Ze(3);let r;for(let f=0;f<3;f++){const h=Math.abs(e[f*3]),d=Math.abs(e[f*3+1]),v=Math.abs(e[f*3+2]);r=d>h?d:h,r=v>r?v:r,a[f]=1,r!==0&&(a[f]/=r)}const i=Math.abs(e[0])*a[0],o=Math.abs(e[3])*a[1],s=Math.abs(e[6])*a[2];n[0]=0,r=i,o>=r&&(r=o,n[0]=1),s>=r&&(n[0]=2),n[0]!==0&&(Na(e,3,n[0],0),a[n[0]]=a[0]);const c=Math.abs(e[4])*a[1],l=Math.abs(e[7])*a[2];n[1]=1,r=c,l>=r&&(n[1]=2,Na(e,3,1,2)),n[2]=2;let p=0;if(Ji(e)<0){p=1;for(let f=0;f<9;f++)e[f]=-e[f]}const u=Ze(4);if(Bl(e,u),Al(u,e),p)for(let f=0;f<9;f++)e[f]=-e[f];n[1]!==1&&Na(e,3,n[1],1),n[0]!==0&&Na(e,3,n[0],0)}function Gl(t,e,a){let n,r,i,o,s,c;const l=[...t];if(ka(l,3,e,a),e[0]===e[1]&&e[0]===e[2]){kl(a);return}for(Yr(a,a),n=0;n<3;n++)if(e[(n+1)%3]===e[(n+2)%3]){for(c=Math.abs(a[n*3]),o=0,r=1;r<3;r++)c<(s=Math.abs(a[n*3+r]))&&(c=s,o=r);o!==n&&(s=e[o],e[o]=e[n],e[n]=s,Ma(a,3,n,o)),a[o*3+o]<0&&(a[o*3]=-a[o*3],a[o*3+1]=-a[o*3+1],a[o*3+2]=-a[o*3+2]),r=(o+1)%3,i=(o+2)%3,a[r*3]=0,a[r*3+1]=0,a[r*3+2]=0,a[r*3+r]=1;const p=et([a[o*3],a[o*3+1],a[o*3+2]],[a[r*3],a[r*3+1],a[r*3+2]],[]);Ke(p);const u=et(p,[a[o*3],a[o*3+1],a[o*3+2]],[]);for(let f=0;f<3;f++)a[i*3+f]=p[f],a[r*3+f]=u[f];Yr(a,a);return}for(c=Math.abs(a[0]),o=0,n=1;n<3;n++)c<(s=Math.abs(a[n*3]))&&(c=s,o=n);if(o!==0){const p=e[o];e[o]=e[0],e[0]=p,Ma(a,3,o,0)}if(Math.abs(a[4])<Math.abs(a[7])){const p=e[2];e[2]=e[1],e[1]=p,Ma(a,3,1,2)}for(n=0;n<2;n++)a[n*3+n]<0&&(a[n*3]=-a[n*3],a[n*3+1]=-a[n*3+1],a[n*3+2]=-a[n*3+2]);Ji(a)<0&&(a[6]=-a[6],a[7]=-a[7],a[8]=-a[8]),Yr(a,a)}function sm(t,e,a,n){let r;const i=[...t],o=Ji(i);if(o<0)for(r=0;r<9;r++)i[r]=-i[r];Ul(i,e),Yr(i,i),e0(i,e,n),Gl(n,a,n),e0(e,n,e),Yr(n,n),o<0&&(a[0]=-a[0],a[1]=-a[1],a[2]=-a[2])}function n0(t,e,a){let n,r,i,o,s=0,c,l,p;const u=Ze(a);for(n=0;n<a;n++){for(o=0,r=0;r<a;r++)(p=Math.abs(t[n*a+r]))>o&&(o=p);if(o===0)return cr("Unable to factor linear system"),0;u[n]=1/o}for(r=0;r<a;r++){for(n=0;n<r;n++){for(c=t[n*a+r],i=0;i<n;i++)c-=t[n*a+i]*t[i*a+r];t[n*a+r]=c}for(o=0,n=r;n<a;n++){for(c=t[n*a+r],i=0;i<r;i++)c-=t[n*a+i]*t[i*a+r];t[n*a+r]=c,(l=u[n]*Math.abs(c))>=o&&(o=l,s=n)}if(r!==s){for(i=0;i<a;i++)l=t[s*a+i],t[s*a+i]=t[r*a+i],t[r*a+i]=l;u[s]=u[r]}if(e[r]=s,Math.abs(t[r*a+r])<=qs)return cr("Unable to factor linear system"),0;if(r!==a-1)for(l=1/t[r*a+r],n=r+1;n<a;n++)t[n*a+r]*=l}return 1}function r0(t,e,a,n){let r,i,o,s,c;for(o=-1,r=0;r<n;r++){if(s=e[r],c=a[s],a[s]=a[r],o>=0)for(i=o;i<=r-1;i++)c-=t[r*n+i]*a[i];else c!==0&&(o=r);a[r]=c}for(r=n-1;r>=0;r--){for(c=a[r],i=r+1;i<n;i++)c-=t[r*n+i]*a[i];a[r]=c/t[r*n+r]}}function Il(t,e,a){if(a===2){const r=Ze(2),i=it(t[0],t[1],t[2],t[3]);return i===0?0:(r[0]=(t[3]*e[0]-t[1]*e[1])/i,r[1]=(-(t[2]*e[0])+t[0]*e[1])/i,e[0]=r[0],e[1]=r[1],1)}if(a===1)return t[0]===0?0:(e[0]/=t[0],1);const n=Ze(a);return n0(t,n,a)===0?0:(r0(t,n,e,a),1)}function a0(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const i=n||Ze(a),o=r||Ze(a);if(n0(t,i,a)===0)return null;for(let s=0;s<a;s++){for(let c=0;c<a;c++)o[c]=0;o[s]=1,r0(t,i,o,a);for(let c=0;c<a;c++)e[c*a+s]=o[c]}return e}function cm(t,e){let a=+Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<e;r++)for(let i=r;i<e;i++)Math.abs(t[r*e+i])>n&&(n=Math.abs(t[r*e+i]));for(let r=0;r<e;r++)Math.abs(t[r*e+r])<a&&(a=Math.abs(t[r*e+r]));return a===0?Number.MAX_VALUE:n/a}function um(t,e,a){return ka(t,3,e,a)}function i0(t,e,a,n){if(t<a)return cr("Insufficient number of samples. Underdetermined."),0;let r,i,o;const s=Ze(a*a),c=Ze(a),l=Ze(a*a);for(o=0;o<t;o++)for(r=0;r<a;r++)for(i=r;i<a;i++)s[r*a+i]+=e[o*a+r]*e[o*a+i];for(r=0;r<a;r++)for(i=0;i<r;i++)s[r*a+i]=s[i*a+r];for(ka(s,a,c,l),r=0;r<a;r++)n[r]=l[r*a+a-1];return 1}function lm(t,e,a,n,r,i){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<a||t<r)return cr("Insufficient number of samples. Underdetermined."),0;const s=Ze(r);let c=1,l,p=0,u,f,h,d=0;if(o){for(f=0;f<r;f++)s[f]=1;for(u=0;u<t;u++)for(f=0;f<r;f++)Math.abs(n[u*r+f])>qs&&(c=0,s[f]=0);if(c&&r===1)return cr("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),i0(t,e,a,i);if(c)d=1;else for(f=0;f<r;f++)s[f]&&(d=1)}d&&(l=Ze(a),p=i0(t,e,a,l));const v=Ze(a*a),m=Ze(a*a),x=Ze(a*r);for(h=0;h<t;h++)for(u=0;u<a;u++){for(f=u;f<a;f++)v[u*a+f]+=e[h*a+u]*e[h*a+f];for(f=0;f<r;f++)x[u*r+f]+=e[h*a+u]*n[h*r+f]}for(u=0;u<a;u++)for(f=0;f<u;f++)v[u*a+f]=v[f*a+u];const y=a0(v,m,a);if(y)for(u=0;u<a;u++)for(f=0;f<r;f++)for(i[u*r+f]=0,h=0;h<a;h++)i[u*r+f]+=m[u*a+h]*x[h*r+f];if(d){for(f=0;f<r;f++)if(s[f])for(u=0;u<a;u++)i[u*r+f]=l[u*r]}return d?p&&y:y}function fm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function Va(t,e){let a,n;const[r,i,o]=t,s=1/3,c=1/6,l=2/3;let p=r,u=r;i>p?p=i:i<u&&(u=i),o>p?p=o:o<u&&(u=o);const f=p;f>0?n=(p-u)/p:n=0,n>0?(r===p?a=c*(i-o)/(p-u):i===p?a=s+c*(o-r)/(p-u):a=l+c*(r-i)/(p-u),a<0&&(a+=1)):a=0,e[0]=a,e[1]=n,e[2]=f}function lr(t,e){const[a,n,r]=t,i=1/3,o=1/6,s=2/3,c=5/6;let l,p,u;a>o&&a<=i?(p=1,l=(i-a)/o,u=0):a>i&&a<=.5?(p=1,u=(a-i)/o,l=0):a>.5&&a<=s?(u=1,p=(s-a)/o,l=0):a>s&&a<=c?(u=1,l=(a-s)/o,p=0):a>c&&a<=1?(l=1,u=(1-a)/o,p=0):(l=1,p=a/o,u=0),l=n*l+(1-n),p=n*p+(1-n),u=n*u+(1-n),l*=r,p*=r,u*=r,e[0]=l,e[1]=p,e[2]=u}function Pl(t,e){const[a,n,r]=t;let i=(a+16)/116,o=n/500+i,s=i-r/200;i**3>.008856?i**=3:i=(i-16/116)/7.787,o**3>.008856?o**=3:o=(o-16/116)/7.787,s**3>.008856?s**=3:s=(s-16/116)/7.787;const c=.9505,l=1,p=1.089;e[0]=c*o,e[1]=l*i,e[2]=p*s}function zl(t,e){const[a,n,r]=t,i=.9505,o=1,s=1.089;let c=a/i,l=n/o,p=r/s;c>.008856?c**=1/3:c=7.787*c+16/116,l>.008856?l**=1/3:l=7.787*l+16/116,p>.008856?p**=1/3:p=7.787*p+16/116,e[0]=116*l-16,e[1]=500*(c-l),e[2]=200*(l-p)}function jl(t,e){const[a,n,r]=t;let i=a*3.2406+n*-1.5372+r*-.4986,o=a*-.9689+n*1.8758+r*.0415,s=a*.0557+n*-.204+r*1.057;i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92,o>.0031308?o=1.055*o**(1/2.4)-.055:o*=12.92,s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92;let c=i;c<o&&(c=o),c<s&&(c=s),c>1&&(i/=c,o/=c,s/=c),i<0&&(i=0),o<0&&(o=0),s<0&&(s=0),e[0]=i,e[1]=o,e[2]=s}function Wl(t,e){let[a,n,r]=t;a>.04045?a=((a+.055)/1.055)**2.4:a/=12.92,n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,e[0]=a*.4124+n*.3576+r*.1805,e[1]=a*.2126+n*.7152+r*.0722,e[2]=a*.0193+n*.1192+r*.9505}function fr(t,e){const a=[0,0,0];Wl(t,a),zl(a,e)}function Qi(t,e){const a=[0,0,0];Pl(t,a),jl(a,e)}function o0(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function eo(t){return!(t[1]-t[0]<0)}function pm(t,e,a){return a[0]=Math.min(t[0],e[0]),a[1]=Math.max(t[0],e[0]),a[2]=Math.min(t[1],e[1]),a[3]=Math.max(t[1],e[1]),a[4]=Math.min(t[2],e[2]),a[5]=Math.max(t[2],e[2]),a}function Yt(t,e,a){return t<e?e:t>a?a:t}function s0(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return n[0]=Yt(t[0],e[0],a[0]),n[1]=Yt(t[1],e[1],a[1]),n[2]=Yt(t[2],e[2],a[2]),n}function hm(t,e){let a=0;return e[0]!==e[1]&&(t<e[0]?a=e[0]:t>e[1]?a=e[1]:a=t,a=(a-e[0])/(e[1]-e[0])),a}const gm=ba("GetScalarTypeFittingRange"),dm=ba("GetAdjustedScalarRange");function vm(t,e){if(!t||!e)return 0;for(let a=0;a<6;a+=2)if(t[a]<e[a]||t[a]>e[a+1]||t[a+1]<e[a]||t[a+1]>e[a+1])return 0;return 1}function ym(t,e,a){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]+a[n/2]<e[n]||t[n]-a[n/2]>e[n+1]||t[n+1]+a[n/2]<e[n]||t[n+1]-a[n/2]>e[n+1])return 0;return 1}function mm(t,e,a){if(!t||!e||!a)return 0;for(let n=0;n<3;n++)if(t[n]+a[n]<e[2*n]||t[n]-a[n]>e[2*n+1])return 0;return 1}function xm(t,e,a,n){const r=Ze(3),i=Ze(3),o=Ze(3),s=Ze(3),c=Ze(3),l=Ze(3);for(let C=0;C<3;++C)r[C]=t[C]-e[C],i[C]=e[C]-a[C],o[C]=a[C]-t[C],s[C]=-r[C],c[C]=-i[C],l[C]=-o[C];const p=St(s),u=St(c),f=St(o),h=Ze(3);et(r,i,h);const d=St(h),v=p*u*f/(2*d),m=2*d*d,x=u*u*xe(r,l)/m,y=f*f*xe(s,i)/m,g=p*p*xe(o,c)/m;for(let C=0;C<3;++C)n[C]=x*t[C]+y*e[C]+g*a[C];return v}const Cm=1/0,Sm=-1/0,$l=t=>!Number.isFinite(t),{isFinite:Tm,isNaN:c0}=Number,to=c0;function In(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function wm(t){let e=-1,a=-1;for(let n=0;n<t.length;n++){const r=Math.abs(t[n]);r>e&&(a=n,e=r)}return a}function Hl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const a=new Array(e),n=new Array(e);for(let i=0;i<e;++i)a[i]=i,n[i]=i;for(let i=e-1;i>0;i--){let o=-1/0,s=0,c=0;for(let l=0;l<=i;++l){const p=a[l];for(let u=0;u<=i;++u){const f=n[u],h=Math.abs(t[p+e*f]);h>o&&(o=h,s=l,c=u)}}[a[i],a[s]]=[a[s],a[i]],[n[i],n[c]]=[n[c],n[i]]}const r=new Array(e*e).fill(0);for(let i=0;i<e;++i){const o=a[i]+e*n[i];r[o]=t[o]<0?-1:1}return r}function Kl(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function _m(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(Kl).join("")}`}function no(t){return Math.round(t*255)}function Em(t){return t.length===3?`rgb(${t.map(no).join(", ")})`:`rgba(${no(t[0]||0)}, ${no(t[1]||0)}, ${no(t[2]||0)}, ${t[3]||0})`}var Mt={Pi:Oy,ldexp:by,radiansFromDegrees:Qe,degreesFromRadians:Ra,round:La,floor:Ys,ceil:My,ceilLog2:Vy,min:Ny,max:Ry,arrayMin:Ly,arrayMax:Fy,arrayRange:ky,isPowerOfTwo:Fa,nearestPowerOfTwo:Pt,factorial:Ay,binomial:By,beginCombination:Uy,nextCombination:Gy,randomSeed:Iy,getSeed:Py,random:qi,gaussian:zy,add:ur,subtract:He,multiplyScalar:Js,multiplyScalar2D:Nl,multiplyAccumulate:Zs,multiplyAccumulate2D:jy,dot:xe,outer:Wy,cross:et,norm:St,normalize:Ke,perpendiculars:Hy,projectVector:Ky,projectVector2D:Xy,distance2BetweenPoints:dt,angleBetweenVectors:qy,gaussianAmplitude:Yy,gaussianWeight:Jy,dot2D:Qs,outer2D:Zy,norm2D:Rl,normalize2D:Ll,determinant2x2:it,LUFactor3x3:Qy,LUSolve3x3:em,linearSolve3x3:tm,multiply3x3_vect3:Yi,multiply3x3_mat3:e0,multiplyMatrix:nm,transpose3x3:Yr,invert3x3:rm,identity3x3:kl,identity:Vl,isIdentity:am,isIdentity3x3:im,determinant3x3:Ji,quaternionToMatrix3x3:Al,areEquals:Fl,areMatricesEqual:Jr,roundNumber:Zi,roundVector:t0,matrix3x3ToQuaternion:Bl,multiplyQuaternion:om,orthogonalize3x3:Ul,diagonalize3x3:Gl,singularValueDecomposition3x3:sm,solveLinearSystem:Il,invertMatrix:a0,luFactorLinearSystem:n0,luSolveLinearSystem:r0,estimateMatrixCondition:cm,jacobi:um,jacobiN:ka,solveHomogeneousLeastSquares:i0,solveLeastSquares:lm,hex2float:fm,rgb2hsv:Va,hsv2rgb:lr,lab2xyz:Pl,xyz2lab:zl,xyz2rgb:jl,rgb2xyz:Wl,rgb2lab:fr,lab2rgb:Qi,uninitializeBounds:o0,areBoundsInitialized:eo,computeBoundsFromPoints:pm,clampValue:Yt,clampVector:s0,clampAndNormalizeValue:hm,getScalarTypeFittingRange:gm,getAdjustedScalarRange:dm,extentIsWithinOtherExtent:vm,boundsIsWithinOtherBounds:ym,pointIsWithinBounds:mm,solve3PointCircle:xm,inf:Cm,negInf:Sm,isInf:$l,isNan:c0,isNaN:c0,isFinite:Tm,createUninitializedBounds:In,getMajorAxisIndex:wm,getSparseOrthogonalMatrix:Hl,floatToHex2:Kl,floatRGB2HexCode:_m,float2CssRGBA:Em};function Dm(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=a=>{if(!e.transform)return t.evaluateFunction(a);const n=[];return e.transform.transformPoint(a,n),t.evaluateFunction(n)},t.evaluateFunction=a=>{V.vtkErrorMacro("not implemented")}}const Om={};function Xl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Om,a),V.obj(t,e),V.setGet(t,e,["transform"]),Dm(t,e)}var bm={newInstance:V.newInstance(Xl,"vtkImplicitFunction"),extend:Xl};const u0=1e-6,ql="coincide",Yl="disjoint";function Mm(t,e,a){return t[0]*(a[0]-e[0])+t[1]*(a[1]-e[1])+t[2]*(a[2]-e[2])}function Jl(t,e,a){const n=a[0]*(t[0]-e[0])+a[1]*(t[1]-e[1])+a[2]*(t[2]-e[2]);return Math.abs(n)}function Zl(t,e,a,n){const r=[];He(t,e,r);const i=xe(a,r);n[0]=t[0]-i*a[0],n[1]=t[1]-i*a[1],n[2]=t[2]-i*a[2]}function Ql(t,e,a){const n=xe(t,e);let r=xe(e,e);return r===0&&(r=1),a[0]=t[0]-n*e[0]/r,a[1]=t[1]-n*e[1]/r,a[2]=t[2]-n*e[2]/r,a}function ef(t,e,a,n){const r=[];He(t,e,r);const i=xe(a,r),o=xe(a,a);o!==0?(n[0]=t[0]-i*a[0]/o,n[1]=t[1]-i*a[1]/o,n[2]=t[2]-i*a[2]/o):(n[0]=t[0],n[1]=t[1],n[2]=t[2])}function tf(t,e,a,n){const r={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],o=[];He(e,t,i),He(a,t,o);const s=xe(n,o),c=xe(n,i);let l,p;return c<0?l=-c:l=c,s<0?p=-s*u0:p=s*u0,l<=p||(r.t=s/c,r.x[0]=t[0]+r.t*i[0],r.x[1]=t[1]+r.t*i[1],r.x[2]=t[2]+r.t*i[2],r.intersection=!0,r.betweenPoints=r.t>=0&&r.t<=1),r}function nf(t,e,a,n){const r={intersection:!1,l0:[],l1:[],error:null},i=[];et(e,n,i);const o=i.map(u=>Math.abs(u));if(o[0]+o[1]+o[2]<u0){const u=[];return He(t,a,u),xe(e,u)===0?r.error=ql:r.error=Yl,r}let s;o[0]>o[1]&&o[0]>o[2]?s="x":o[1]>o[2]?s="y":s="z";const c=[],l=-xe(e,t),p=-xe(n,a);switch(s){case"x":c[0]=0,c[1]=(p*e[2]-l*n[2])/i[0],c[2]=(l*n[1]-p*e[1])/i[0];break;case"y":c[0]=(l*n[2]-p*e[2])/i[1],c[1]=0,c[2]=(p*e[0]-l*n[0])/i[1];break;case"z":c[0]=(p*e[1]-l*n[1])/i[2],c[1]=(l*n[0]-p*e[0])/i[2],c[2]=0;break}return r.l0=c,ur(c,i,r.l1),r.intersection=!0,r}const Nm={evaluate:Mm,distanceToPlane:Jl,projectPoint:Zl,projectVector:Ql,generalizedProjectPoint:ef,intersectWithLine:tf,intersectWithPlane:nf,DISJOINT:Yl,COINCIDE:ql};function Rm(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=a=>Jl(a,e.origin,e.normal),t.projectPoint=(a,n)=>{Zl(a,e.origin,e.normal,n)},t.projectVector=(a,n)=>Ql(a,e.normal,n),t.push=a=>{if(a!==0)for(let n=0;n<3;n++)e.origin[n]+=a*e.normal[n]},t.generalizedProjectPoint=(a,n)=>{ef(a,e.origin,e.normal,n)},t.evaluateFunction=(a,n,r)=>Array.isArray(a)?e.normal[0]*(a[0]-e.origin[0])+e.normal[1]*(a[1]-e.origin[1])+e.normal[2]*(a[2]-e.origin[2]):e.normal[0]*(a-e.origin[0])+e.normal[1]*(n-e.origin[1])+e.normal[2]*(r-e.origin[2]),t.evaluateGradient=a=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(a,n)=>tf(a,n,e.origin,e.normal),t.intersectWithPlane=(a,n)=>nf(a,n,e.origin,e.normal)}const Lm={normal:[0,0,1],origin:[0,0,0]};function rf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lm,a),bm.extend(t,e,a),V.setGetArray(t,e,["normal","origin"],3),Rm(t,e)}var fn={newInstance:V.newInstance(rf,"vtkPlane"),extend:rf,...Nm};const ro=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function af(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function _n(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function l0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function f0(t){return l0(t,ro)}function ao(t,e,a,n){const[r,i,o,s,c,l]=t;return t[0]=r<e?r:e,t[1]=i>e?i:e,t[2]=o<a?o:a,t[3]=s>a?s:a,t[4]=c<n?c:n,t[5]=l>n?l:n,t}function p0(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let a=0;a<e.length;++a)ao(t,...e[a]);else for(let a=0;a<e.length;a+=3)ao(t,...e.slice(a,a+3));return t}function of(t,e,a,n,r,i,o){const[s,c,l,p,u,f]=t;return o===void 0?(t[0]=Math.min(e[0],s),t[1]=Math.max(e[1],c),t[2]=Math.min(e[2],l),t[3]=Math.max(e[3],p),t[4]=Math.min(e[4],u),t[5]=Math.max(e[5],f)):(t[0]=Math.min(e,s),t[1]=Math.max(a,c),t[2]=Math.min(n,l),t[3]=Math.max(r,p),t[4]=Math.min(i,u),t[5]=Math.max(o,f)),t}function sf(t,e,a,n){const[r,i,o,s,c,l]=t;return t[0]=e,t[1]=e>i?e:i,t[2]=a,t[3]=a>s?a:s,t[4]=n,t[5]=n>l?n:l,r!==e||o!==a||c!==n}function cf(t,e,a,n){const[r,i,o,s,c,l]=t;return t[0]=e<r?e:r,t[1]=e,t[2]=a<o?a:o,t[3]=a,t[4]=n<c?n:c,t[5]=n,i!==e||s!==a||l!==n}function h0(t,e){return e==null?Fm(t):(t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t)}function Fm(t){const e=[0,0,0];let a=-1,n=0,r=0;for(let i=0;i<3;++i)r=t[i*2+1]-t[i*2],r>n&&(n=r,a=i),e[i]=r>0?1:0;if(a<0)return h0(t,.5);for(let i=0;i<3;++i)if(!e[i]){const o=.005*n;t[i*2]-=o,t[i*2+1]+=o}return t}function g0(t,e,a,n){return _n(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),a>=0?(t[2]*=a,t[3]*=a):(t[2]=a*t[3],t[3]=a*t[2]),n>=0?(t[4]*=n,t[5]*=n):(t[4]=n*t[5],t[5]=n*t[4]),!0):!1}function d0(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function km(t,e,a,n){if(!_n(t))return!1;const r=d0(t);return t[0]-=r[0],t[1]-=r[0],t[2]-=r[1],t[3]-=r[1],t[4]-=r[2],t[5]-=r[2],g0(t,e,a,n),t[0]+=r[0],t[1]+=r[0],t[2]+=r[1],t[3]+=r[1],t[4]+=r[2],t[5]+=r[2],!0}function Aa(t,e){return t[e*2+1]-t[e*2]}function Ba(t){return[Aa(t,0),Aa(t,1),Aa(t,2)]}function uf(t){return t.slice(0,2)}function lf(t){return t.slice(2,4)}function ff(t){return t.slice(4,6)}function pf(t){const e=Ba(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function v0(t){if(_n(t)){const e=Ba(t);return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}return null}function hf(t){const e=v0(t);return e!==null?Math.sqrt(e):null}function io(t){return[t[0],t[2],t[4]]}function oo(t){return[t[1],t[3],t[5]]}function so(t,e){return t<=0&&e>=0||t>=0&&e<=0}function y0(t,e){return e[0]=[t[0],t[2],t[4]],e[1]=[t[0],t[2],t[5]],e[2]=[t[0],t[3],t[4]],e[3]=[t[0],t[3],t[5]],e[4]=[t[1],t[2],t[4]],e[5]=[t[1],t[2],t[5]],e[6]=[t[1],t[3],t[4]],e[7]=[t[1],t[3],t[5]],e}function gf(t,e,a){return e[0]=t[0],e[1]=t[2],e[2]=t[4],a[0]=t[1],a[1]=t[3],a[2]=t[5],e}function df(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const n=y0(t,[]);for(let r=0;r<n.length;++r)_e(n[r],n[r],e);return f0(a),p0(a,n)}function vf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function yf(t,e,a,n){const r=[].concat(ro),i=t.getData();for(let o=0;o<i.length;o+=3){const s=[i[o],i[o+1],i[o+2]],c=xe(s,e);r[0]=Math.min(c,r[0]),r[1]=Math.max(c,r[1]);const l=xe(s,a);r[2]=Math.min(l,r[2]),r[3]=Math.max(l,r[3]);const p=xe(s,n);r[4]=Math.min(p,r[4]),r[5]=Math.max(p,r[5])}return r}function mf(t,e,a,n,r){let i=!0;const o=[];let s=0;const c=[],l=[0,0,0],p=0,u=1,f=2;for(let h=0;h<3;h++)e[h]<t[2*h]?(o[h]=u,l[h]=t[2*h],i=!1):e[h]>t[2*h+1]?(o[h]=p,l[h]=t[2*h+1],i=!1):o[h]=f;if(i)return n[0]=e[0],n[1]=e[1],n[2]=e[2],r[0]=0,1;for(let h=0;h<3;h++)o[h]!==f&&a[h]!==0?c[h]=(l[h]-e[h])/a[h]:c[h]=-1;for(let h=0;h<3;h++)c[s]<c[h]&&(s=h);if(c[s]>1||c[s]<0)return 0;r[0]=c[s];for(let h=0;h<3;h++)if(s!==h){if(n[h]=e[h]+c[s]*a[h],n[h]<t[2*h]||n[h]>t[2*h+1])return 0}else n[h]=l[h];return 1}function xf(t,e,a){const n=[];let r=0,i=1,o=1;for(let s=4;s<=5;++s){n[2]=t[s];for(let c=2;c<=3;++c){n[1]=t[c];for(let l=0;l<=1;++l)if(n[0]=t[l],r=fn.evaluate(a,e,n),o&&(i=r>=0?1:-1,o=0),r===0||i>0&&r<0||i<0&&r>0)return 1}}return 0}function Cf(t,e){if(!(_n(t)&&_n(e)))return!1;const a=[0,0,0,0,0,0];let n;for(let r=0;r<3;r++)if(n=!1,e[r*2]>=t[r*2]&&e[r*2]<=t[r*2+1]?(n=!0,a[r*2]=e[r*2]):t[r*2]>=e[r*2]&&t[r*2]<=e[r*2+1]&&(n=!0,a[r*2]=t[r*2]),e[r*2+1]>=t[r*2]&&e[r*2+1]<=t[r*2+1]?(n=!0,a[r*2+1]=e[2*r+1]):t[r*2+1]>=e[r*2]&&t[r*2+1]<=e[r*2+1]&&(n=!0,a[r*2+1]=t[r*2+1]),!n)return!1;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],!0}function co(t,e){if(!(_n(t)&&_n(e)))return!1;for(let a=0;a<3;a++)if(!(e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1])&&!(t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1])&&!(e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1])&&!(t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]))return!1;return!0}function uo(t,e,a,n){return!(e<t[0]||e>t[1]||a<t[2]||a>t[3]||n<t[4]||n>t[5])}function Vm(t,e){return!(!co(t,e)||!uo(t,...io(e))||!uo(t,...oo(e)))}function Sf(t,e,a){const n=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],r=[0,0,0,0,0,0,0,0];let i=0;for(let u=0;u<2;u++)for(let f=2;f<4;f++)for(let h=4;h<6;h++){const d=[t[u],t[f],t[h]];r[i++]=fn.evaluate(a,e,d)}let o=2;for(;o--&&!(so(r[n[o][0]],r[n[o][4]])&&so(r[n[o][1]],r[n[o][5]])&&so(r[n[o][2]],r[n[o][6]])&&so(r[n[o][3]],r[n[o][7]])););if(o<0)return!1;const s=Math.sign(a[o]),c=Math.abs((t[o*2+1]-t[o*2])*a[o]);let l=s>0?1:0;for(let u=0;u<4;u++){if(c===0)continue;const f=Math.abs(r[n[o][u]])/c;s>0&&f<l&&(l=f),s<0&&f>l&&(l=f)}const p=(1-l)*t[o*2]+l*t[o*2+1];return s>0?t[o*2]=p:t[o*2+1]=p,!0}function Tf(t,e){for(let n=0;n<3;++n)e[n]=e[n]<1?1:e[n];let a=e[0]*e[1]*e[2];for(;a>t;){for(let n=0;n<3;++n)e[n]=e[n]>1?e[n]-1:1;a=e[0]*e[1]*e[2]}}function wf(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];e=e<=0?1:e;let r=0;const i=[0,0,0];let o=-1,s=0;const c=Ba(t),l=c[0]+c[1]+c[2],p=l*(.001/3);for(let v=0;v<3;++v)c[v]>s&&(o=v,s=c[v]),c[v]>p?(i[v]=1,r++):i[v]=0;const u=io(t),f=oo(t);if(r<1)return a[0]=1,a[1]=1,a[2]=1,n[0]=u[0]-.5,n[1]=f[0]+.5,n[2]=u[1]-.5,n[3]=f[1]+.5,n[4]=u[2]-.5,n[5]=f[2]+.5,1;let h=e;h/=i[0]?c[0]/l:1,h/=i[1]?c[1]/l:1,h/=i[2]?c[2]/l:1,h**=1/r;for(let v=0;v<3;++v)a[v]=i[v]?Math.floor(h*c[v]/l):1,a[v]=a[v]<1?1:a[v];Tf(e,a);const d=.5*c[o]/a[o];for(let v=0;v<3;++v)i[v]?(n[2*v]=u[v],n[2*v+1]=f[v]):(n[2*v]=u[v]-d,n[2*v+1]=f[v]+d);return a[0]*a[1]*a[2]}function _f(t,e){if(t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=e[2]&&t[1]<=e[3]&&t[2]>=e[4]&&t[2]<=e[5])return 0;const a=[0,0,0];return t[0]<e[0]?a[0]=e[0]-t[0]:t[0]>e[1]&&(a[0]=t[0]-e[1]),t[1]<e[2]?a[1]=e[2]-t[1]:t[1]>e[3]&&(a[1]=t[1]-e[3]),t[2]<e[4]?a[2]=e[4]-t[2]:t[2]>e[5]&&(a[2]=t[2]-e[5]),xe(a,a)}class Am{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(ro))}getBounds(){return this.bounds}equals(e){return af(this.bounds,e)}isValid(){return _n(this.bounds)}setBounds(e){return l0(this.bounds,e)}reset(){return f0(this.bounds)}addPoint(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return ao(this.bounds,...a)}addPoints(e){return p0(this.bounds,e)}addBounds(e,a,n,r,i,o){return of(this.bounds,e,a,n,r,i,o)}setMinPoint(e,a,n){return sf(this.bounds,e,a,n)}setMaxPoint(e,a,n){return cf(this.bounds,e,a,n)}inflate(e){return h0(this.bounds,e)}scale(e,a,n){return g0(this.bounds,e,a,n)}getCenter(){return d0(this.bounds)}getLength(e){return Aa(this.bounds,e)}getLengths(){return Ba(this.bounds)}getMaxLength(){return pf(this.bounds)}getDiagonalLength(){return hf(this.bounds)}getDiagonalLength2(){return v0(this.bounds)}getMinPoint(){return io(this.bounds)}getMaxPoint(){return oo(this.bounds)}getXRange(){return uf(this.bounds)}getYRange(){return lf(this.bounds)}getZRange(){return ff(this.bounds)}getCorners(e){return y0(this.bounds,e)}computeCornerPoints(e,a){return gf(this.bounds,e,a)}computeLocalBounds(e,a,n){return yf(this.bounds,e,a,n)}transformBounds(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return df(this.bounds,e,a)}computeScale3(e){return vf(this.bounds,e)}cutWithPlane(e,a){return Sf(this.bounds,e,a)}intersectBox(e,a,n,r){return mf(this.bounds,e,a,n,r)}intersectPlane(e,a){return xf(this.bounds,e,a)}intersect(e){return Cf(this.bounds,e)}intersects(e){return co(this.bounds,e)}containsPoint(e,a,n){return uo(this.bounds,e,a,n)}contains(e){return co(this.bounds,e)}computeDivisions(e,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return wf(this.bounds,e,a,n)}distance2ToBounds(e){return _f(e,this.bounds)}}function Bm(t){const e=t&&t.bounds;return new Am(e)}var we={newInstance:Bm,...{equals:af,isValid:_n,setBounds:l0,reset:f0,addPoint:ao,addPoints:p0,addBounds:of,setMinPoint:sf,setMaxPoint:cf,inflate:h0,scale:g0,scaleAboutCenter:km,getCenter:d0,getLength:Aa,getLengths:Ba,getMaxLength:pf,getDiagonalLength:hf,getDiagonalLength2:v0,getMinPoint:io,getMaxPoint:oo,getXRange:uf,getYRange:lf,getZRange:ff,getCorners:y0,computeCornerPoints:gf,computeLocalBounds:yf,transformBounds:df,computeScale3:vf,cutWithPlane:Sf,intersectBox:mf,intersectPlane:xf,intersect:Cf,intersects:co,containsPoint:uo,contains:Vm,computeDivisions:wf,clampDivisions:Tf,distance2ToBounds:_f,INIT_BOUNDS:ro}},Ef={CoordinateSystem:{DISPLAY:0,WORLD:1}};const{CoordinateSystem:m0}=Ef;function Df(t){return()=>V.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function Um(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let a=e.mtime;for(let n=0;n<e.textures.length;++n){const r=e.textures[n].getMTime();r>a&&(a=r)}return a},t.processSelectorPixelBuffers=(a,n)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=Df("pick"),t.hasKey=Df("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=a=>{e.estimatedRenderTime=a,e.savedEstimatedRenderTime=a},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=a=>{e.estimatedRenderTime+=a},t.setAllocatedRenderTime=a=>{e.allocatedRenderTime=a,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=a=>e.textures.indexOf(a)!==-1,t.addTexture=a=>{a&&!t.hasTexture(a)&&(e.textures=e.textures.concat(a),t.modified())},t.removeTexture=a=>{const n=e.textures.filter(r=>r!==a);e.textures.length!==n.length&&(e.textures=n,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(m0.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(m0.DISPLAY)}const Gm={allocatedRenderTime:10,coordinateSystem:m0.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Of(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Gm,a),V.obj(t,e),V.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),V.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),V.moveToProtected(t,e,["parentProp"]),Um(t,e)}var bf={newInstance:V.newInstance(Of,"vtkProp"),extend:Of,...Ef};const Im=1e-6;function Pm(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=n=>{e.position=e.position.map((r,i)=>r+n[i]),t.modified()},t.getOrientationWXYZ=()=>{const n=Bn();xi(n,e.rotation);const r=new Float64Array(3),i=lu(r,n);return[Ra(i),r[0],r[1],r[2]]},t.getOrientationQuaternion=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return xi(n,e.rotation)},t.rotateX=n=>{n!==0&&(di(e.rotation,e.rotation,Qe(n)),t.modified())},t.rotateY=n=>{n!==0&&(da(e.rotation,e.rotation,Qe(n)),t.modified())},t.rotateZ=n=>{n!==0&&(vi(e.rotation,e.rotation,Qe(n)),t.modified())},t.rotateWXYZ=(n,r,i,o)=>{if(n===0||r===0&&i===0&&o===0)return;const s=Qe(n),c=Bn();Di(c,[r,i,o],s);const l=new Float64Array(16);Gr(l,c),Ee(e.rotation,e.rotation,l),t.modified()},t.rotateQuaternion=n=>{if(Math.abs(n[3])>=1-Im)return;const r=Gr(new Float64Array(16),n);Ee(e.rotation,e.rotation,r),t.modified()},t.setOrientation=(n,r,i)=>n===e.orientation[0]&&r===e.orientation[1]&&i===e.orientation[2]?!1:(e.orientation=[n,r,i],Te(e.rotation),t.rotateZ(i),t.rotateX(n),t.rotateY(r),t.modified(),!0),t.setOrientationFromQuaternion=n=>{const r=Ur();return Gr(r,n),Jr(r,e.rotation)?!1:(e.rotation=r,t.modified(),!0)},t.setUserMatrix=n=>Jr(e.userMatrix,n)?!1:(gt(e.userMatrix,n),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Te(e.matrix),e.userMatrix&&Ee(e.matrix,e.matrix,e.userMatrix),Ye(e.matrix,e.matrix,e.origin),Ye(e.matrix,e.matrix,e.position),Ee(e.matrix,e.matrix,e.rotation),An(e.matrix,e.matrix,e.scale),Ye(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),We(e.matrix,e.matrix),e.isIdentity=!0;for(let n=0;n<4;++n)for(let r=0;r<4;++r)(n===r?1:0)!==e.matrix[n+r*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getBoundsByReference=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n,e.bounds=[...we.INIT_BOUNDS],e.boundsMTime.modified(),n;if(!e.mapperBounds||!n.every((r,i)=>n[i]===e.mapperBounds[i])||t.getMTime()>e.boundsMTime.getMTime()){V.vtkDebugMacro("Recomputing bounds..."),e.mapperBounds=n,t.computeMatrix();const r=new Float64Array(16);We(r,e.matrix),we.transformBounds(n,r,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBounds=()=>{const n=t.getBoundsByReference();try{return[...n]}catch{return n}},t.getCenter=()=>we.getCenter(e.bounds),t.getLength=()=>we.getLength(e.bounds),t.getXRange=()=>we.getXRange(e.bounds),t.getYRange=()=>we.getYRange(e.bounds),t.getZRange=()=>we.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function a(){t.computeMatrix()}t.onModified(a),t.getProperty=function(){var r;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.properties[n]==null&&(e.properties[n]=(r=t.makeProperty)==null?void 0:r.call(t)),e.properties[n]},t.getProperties=()=>{var n;return e.properties.length===0&&(e.properties[0]=(n=t.makeProperty)==null?void 0:n.call(t)),e.properties},t.setProperty=(n,r)=>{const i=Number.isInteger(n),[o,s]=i?[n,r]:[0,n];return e.properties[o]===s?!1:(e.properties[o]=s,!0)},t.getMTime=()=>{let n=e.mtime;return e.properties.forEach(r=>{if(r!==null){const i=r.getMTime();n=i>n?i:n}}),n}}const zm={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[...we.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Mf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zm,a),bf.extend(t,e,a),e.matrixMTime={},V.obj(e.matrixMTime),V.get(t,e,["isIdentity"]),V.getArray(t,e,["orientation"]),V.setGetArray(t,e,["origin","position","scale"],3),V.setGet(t,e,["properties"]),e.matrix=Te(new Float64Array(16)),e.rotation=Te(new Float64Array(16)),e.userMatrix=Te(new Float64Array(16)),e.transform=null,Pm(t,e)}var x0={newInstance:V.newInstance(Mf,"vtkProp3D"),extend:Mf};const Nf={FLAT:0,GOURAUD:1,PHONG:2},Jt={POINTS:0,WIREFRAME:1,SURFACE:2};var Rf={Shading:Nf,Representation:Jt,Interpolation:Nf};const{Representation:Ua,Interpolation:Ga}=Rf;function Lf(t){return()=>V.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function jm(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(a,n,r)=>{Array.isArray(a)?(e.color[0]!==a[0]||e.color[1]!==a[1]||e.color[2]!==a[2])&&(e.color[0]=a[0],e.color[1]=a[1],e.color[2]=a[2],t.modified()):(e.color[0]!==a||e.color[1]!==n||e.color[2]!==r)&&(e.color[0]=a,e.color[1]=n,e.color[2]=r,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=Lf("ComputeCompositeColor"),t.getColor=()=>{let a=0;e.ambient+e.diffuse+e.specular>0&&(a=1/(e.ambient+e.diffuse+e.specular));for(let n=0;n<3;n++)e.color[n]=a*(e.ambient*e.ambientColor[n]+e.diffuse*e.diffuseColor[n]+e.specular*e.specularColor[n]);return[].concat(e.color)},t.setSpecularPower=a=>{const n=1/Math.max(1,a);(e.roughness!==n||e.specularPower!==a)&&(e.specularPower=a,e.roughness=n,t.modified())},t.addShaderVariable=Lf("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Ga.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Ga.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Ga.PHONG),t.getInterpolationAsString=()=>V.enumToString(Ga,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Ua.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Ua.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Ua.POINTS),t.getRepresentationAsString=()=>V.enumToString(Ua,e.representation)}const Wm={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Ga.GOURAUD,representation:Ua.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function Ff(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wm,a),V.obj(t,e),V.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),V.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),jm(t,e)}var pr={newInstance:V.newInstance(Ff,"vtkProperty"),extend:Ff,...Rf};function $m(t,e){e.classHierarchy.push("vtkActor");const a={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let n=e.properties[0].getOpacity()>=1;return n=n&&(!e.texture||!e.texture.isTranslucent()),n=n&&(!e.mapper||e.mapper.getIsOpaque()),n},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.properties[0]||t.getProperty(),!t.getIsOpaque()),t.makeProperty=pr.newInstance,t.getMTime=()=>{let n=a.getMTime();if(e.backfaceProperty!==null){const r=e.backfaceProperty.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}return n},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(n,r)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(n,r)}}const Hm={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function kf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Hm,a),x0.extend(t,e,a),e.boundsMTime={},V.obj(e.boundsMTime),V.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),$m(t,e)}var pn={newInstance:V.newInstance(kf,"vtkActor"),extend:kf};const lo={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ne={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var Vf={DefaultDataType:Ne.FLOAT,DataTypeByteSize:lo,VtkDataTypes:Ne};const{vtkErrorMacro:Km}=Dt,{DefaultDataType:Xm}=Vf,qm=1e-6;function C0(t,e,a){const n=t.length;let r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o,s;for(s=e;s<n;s+=a)if(!Number.isNaN(t[s])){r=t[s],i=r;break}for(;s<n;s+=a)o=t[s],o<r?r=o:o>i&&(i=o);return{min:r,max:i}}function Ym(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,a=0,n=0;return{add(r){t>r&&(t=r),e<r&&(e=r),a++,n+=r},get(){return{min:t,max:e,count:a,sum:n,mean:n/a}},getRange(){return{min:t,max:e}}}}function Af(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&a>1){const r=t.length/a,i=new Float64Array(r);for(let o=0,s=0;o<r;++o){for(let c=s+a;s<c;++s)i[o]+=t[s]*t[s];i[o]**=.5}return C0(i,0,1)}return C0(t,e<0?0:e,a)}function Bf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=t||[];for(;a.length<=e;)a.push(null);return a}function S0(t){return Object.prototype.toString.call(t).slice(8,-1)}function Jm(t){const e=t.getNumberOfComponents();let a=0;const n=new Array(e);for(let r=0;r<t.getNumberOfTuples();++r){t.getTuple(r,n);const i=St(n,e);i>a&&(a=i)}return a}const Zm={computeRange:Af,createRangeHelper:Ym,fastComputeRange:C0,getDataType:S0,getMaxNorm:Jm};function Qm(t,e){e.classHierarchy.push("vtkDataArray");function a(n){if(n<0)return!1;const r=t.getNumberOfComponents(),i=e.values.length/(r>0?r:1);if(n===i)return!0;if(n>i){const o=e.values;return e.values=ar(e.dataType,(n+i)*r),e.values.set(o),!0}return e.size>n*r&&(e.size=n*r,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.allocate=n=>{a(t.getNumberOfTuples()+n)},t.resize=n=>{a(n);const r=n*t.getNumberOfComponents();return e.size!==r?(e.size=r,t.dataChange(),!0):!1},t.initialize=()=>(t.resize(0),t),t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[n*e.numberOfComponents+r]},t.setComponent=(n,r,i)=>{i!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=i,t.dataChange())},t.getValue=n=>{const r=n/e.numberOfComponents,i=n%e.numberOfComponents;return t.getComponent(r,i)},t.setValue=(n,r)=>{const i=n/e.numberOfComponents,o=n%e.numberOfComponents;t.setComponent(i,o,r)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,r=n;r<0&&(r=e.numberOfComponents===1?0:e.numberOfComponents);let i=null;return e.ranges||(e.ranges=Bf(e.ranges,e.numberOfComponents)),i=e.ranges[r],i?(e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple):(i=Af(t.getData(),n,e.numberOfComponents),e.ranges[r]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple)},t.setRange=(n,r)=>{e.ranges||(e.ranges=Bf(e.ranges,e.numberOfComponents));const i={min:n.min,max:n.max};return e.ranges[r]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple},t.getRanges=function(){if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0))return structuredClone(e.ranges);const r=[];for(let i=0;i<e.numberOfComponents;i++){const[o,s]=t.getRange(i),c={min:o,max:s};r.push(c)}if(e.numberOfComponents>1){const[i,o]=t.getRange(-1),s={min:i,max:o};r.push(s)}return r},t.setTuple=(n,r)=>{const i=n*e.numberOfComponents;for(let o=0;o<e.numberOfComponents;o++)e.values[i+o]=r[o]},t.setTuples=(n,r)=>{let i=n*e.numberOfComponents;const o=Math.min(r.length,e.size-i);for(let s=0;s<o;)e.values[i++]=r[s++]},t.insertTuple=(n,r)=>(e.size<=n*e.numberOfComponents&&(e.size=(n+1)*e.numberOfComponents,a(n+1)),t.setTuple(n,r),n),t.insertTuples=(n,r)=>{const i=n+r.length/e.numberOfComponents;return e.size<i*e.numberOfComponents&&(e.size=i*e.numberOfComponents,a(i)),t.setTuples(n,r),i},t.insertNextTuple=n=>{const r=e.size/e.numberOfComponents;return t.insertTuple(r,n)},t.insertNextTuples=n=>{const r=e.size/e.numberOfComponents;return t.insertTuples(r,n)},t.findTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qm;for(let i=0;i<e.size;i+=e.numberOfComponents)if(Math.abs(n[0]-e.values[i])<=r){let o=!0;for(let s=1;s<e.numberOfComponents;++s)if(Math.abs(n[s]-e.values[i+s])>r){o=!1;break}if(o)return i/e.numberOfComponents}return-1},t.getTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e.numberOfComponents||1,o=n*i;switch(i){case 4:r[3]=e.values[o+3];case 3:r[2]=e.values[o+2];case 2:r[1]=e.values[o+1];case 1:r[0]=e.values[o];break;default:for(let s=i-1;s>=0;--s)r[s]=e.values[o+s]}return r},t.getTuples=(n,r)=>{const i=(n??0)*e.numberOfComponents,o=(r??t.getNumberOfTuples())*e.numberOfComponents,s=t.getData().subarray(i,o);return s.length>0?s:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>Gf({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,e.dataType=S0(n),r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const n={...e,vtkClass:t.getClassName()};n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(i=>{n[i]||delete n[i]});const r={};return Object.keys(n).sort().forEach(i=>{r[i]=n[i]}),r.mtime&&delete r.mtime,r},t.deepCopy=n=>{const r=t.getDataType(),i=e.values;t.shallowCopy(n),e.ranges=structuredClone(n.getRanges()),(i==null?void 0:i.length)>=n.getNumberOfValues()&&r===n.getDataType()?(i.set(n.getData()),e.values=i,t.dataChange()):t.setData(n.getData().slice())},t.interpolateTuple=(n,r,i,o,s,c)=>{const l=e.numberOfComponents||1;(l!==r.getNumberOfComponents()||l!==o.getNumberOfComponents())&&Km("numberOfComponents must match");const p=r.getTuple(i),u=o.getTuple(s),f=[];switch(f.length=l,l){case 4:f[3]=p[3]+(u[3]-p[3])*c;case 3:f[2]=p[2]+(u[2]-p[2])*c;case 2:f[1]=p[1]+(u[1]-p[1])*c;case 1:f[0]=p[0]+(u[0]-p[0])*c;break;default:for(let h=0;h<l;h++)f[h]=p[h]+(u[h]-p[h])*c}return t.insertTuple(n,f)}}const e5={name:"",numberOfComponents:1,dataType:Xm,rangeTuple:[0,0]};function Uf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,e5,a),Array.isArray(a.values)&&a.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=Ai(e.dataType,e.values)):e.values=ar(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=S0(e.values)),ut(t,e),Ca(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");Qm(t,e)}const Gf=Je(Uf,"vtkDataArray");var pe={newInstance:Gf,extend:Uf,...Zm,...Vf};function t5(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=a=>a.isA("vtkPlane")?e.clippingPlanes.includes(a)?!1:(e.clippingPlanes.push(a),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=a=>{const n=e.clippingPlanes.indexOf(a);return n===-1?!1:(e.clippingPlanes.splice(n,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=a=>{if(a)if(!Array.isArray(a))t.addClippingPlane(a);else{const n=a.length;for(let r=0;r<n&&r<6;r++)t.addClippingPlane(a[r])}},t.getClippingPlaneInDataCoords=(a,n,r)=>{const i=e.clippingPlanes,o=a;if(i){const s=i.length;if(n>=0&&n<s){const c=i[n],l=c.getNormal(),p=c.getOrigin(),u=l[0],f=l[1],h=l[2],d=-(u*p[0]+f*p[1]+h*p[2]);r[0]=u*o[0]+f*o[4]+h*o[8]+d*o[12],r[1]=u*o[1]+f*o[5]+h*o[9]+d*o[13],r[2]=u*o[2]+f*o[6]+h*o[10]+d*o[14],r[3]=u*o[3]+f*o[7]+h*o[11]+d*o[15];return}}V.vtkErrorMacro(`Clipping plane index ${n} is out of range.`)}}const n5={clippingPlanes:[]};function r5(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n5,a),V.obj(t,e),V.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),t5(t,e)}var a5={extend:r5};function i5(t,e){t.getBounds=()=>(V.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),In()),t.getCenter=()=>{var n;const a=t.getBounds();return e.center=we.isValid(a)?we.getCenter(a):null,(n=e.center)==null?void 0:n.slice()},t.getLength=()=>{const a=t.getBounds();return we.getDiagonalLength(a)}}const o5=t=>({bounds:[...we.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function s5(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o5(a)),a5.extend(t,e,a),V.setGet(t,e,["viewSpecificProperties"]),i5(t,e)}var T0={extend:s5};const{vtkErrorMacro:If,vtkWarningMacro:c5}=V;function u5(t,e){e.classHierarchy.push("vtkFieldData");const a=t.getState;e.arrays&&(e.arrays=e.arrays.map(n=>({data:wt(n.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=n=>{t.initializeFields(),e.copyFieldFlags=n.getCopyFieldFlags().map(r=>r),e.arrays=n.getArrays().map(r=>({data:r}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=n=>{const r=n.getName(),{array:i,index:o}=t.getArrayWithIndex(r);return i!=null?(e.arrays[o]={data:n},o):(e.arrays=[].concat(e.arrays,{data:n}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=n=>{const r=e.arrays.findIndex(i=>i.data.getName()===n);return t.removeArrayByIndex(r)},t.removeArrayByIndex=n=>n!==-1&&n<e.arrays.length?(e.arrays.splice(n,1),!0):!1,t.getArrays=()=>e.arrays.map(n=>n.data),t.getArray=n=>typeof n=="number"?t.getArrayByIndex(n):t.getArrayByName(n),t.getArrayByName=n=>e.arrays.reduce((r,i,o)=>i.data.getName()===n?i.data:r,null),t.getArrayWithIndex=n=>{const r=e.arrays.findIndex(i=>i.data.getName()===n);return{array:r!==-1?e.arrays[r].data:null,index:r}},t.getArrayByIndex=n=>n>=0&&n<e.arrays.length?e.arrays[n].data:null,t.hasArray=n=>t.getArrayWithIndex(n).index>=0,t.getArrayName=n=>{const r=e.arrays[n];return r?r.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=n=>e.copyFieldFlags[n],t.passData=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;n.getArrays().forEach(o=>{const s=t.getFlag(o.getName());if(s!==!1&&!(e.doCopyAllOff&&s!==!0)&&o){let c=t.getArrayByName(o.getName());if(c)if(o.getNumberOfComponents()===c.getNumberOfComponents())if(r>-1&&r<o.getNumberOfTuples()){const l=i>-1?i:r;c.insertTuple(l,o.getTuple(r))}else c.insertTuples(0,o.getTuples());else If("Unhandled case in passData");else if(r<0||r>o.getNumberOfTuples())t.addArray(o),n.getAttributes(o).forEach(l=>{t.setAttribute(o,l)});else{const l=o.getNumberOfComponents();let p=o.getNumberOfValues();const u=i>-1?i:r;p<=u*l&&(p=(u+1)*l),c=pe.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:l,values:V.newTypedArray(o.getDataType(),p),size:0}),c.insertTuple(u,o.getTuple(r)),t.addArray(c),n.getAttributes(o).forEach(f=>{t.setAttribute(c,f)})}}})},t.interpolateData=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;n.getArrays().forEach(c=>{const l=t.getFlag(c.getName());if(l!==!1&&!(e.doCopyAllOff&&l!==!0)&&c){let p=t.getArrayByName(c.getName());if(p)if(c.getNumberOfComponents()===p.getNumberOfComponents())if(r>-1&&r<c.getNumberOfTuples()){const u=o>-1?o:r;p.interpolateTuple(u,c,r,c,i,s),c5("Unexpected case in interpolateData")}else p.insertTuples(c.getTuples());else If("Unhandled case in interpolateData");else if(r<0||i<0||r>c.getNumberOfTuples())t.addArray(c),n.getAttributes(c).forEach(u=>{t.setAttribute(c,u)});else{const u=c.getNumberOfComponents();let f=c.getNumberOfValues();const h=o>-1?o:r;f<=h*u&&(f=(h+1)*u),p=pe.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:u,values:V.newTypedArray(c.getDataType(),f),size:0}),p.interpolateTuple(h,c,r,c,i,s),t.addArray(p),n.getAttributes(c).forEach(d=>{t.setAttribute(p,d)})}}})},t.copyFieldOn=n=>{e.copyFieldFlags[n]=!0},t.copyFieldOff=n=>{e.copyFieldFlags[n]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=n=>{e.arrays=n.getArrays().map(r=>{const i=r.newClone();return i.deepCopy(r),{data:i}})},t.copyFlags=n=>n.getCopyFieldFlags().map(r=>r),t.reset=()=>e.arrays.forEach(n=>n.data.reset()),t.getMTime=()=>e.arrays.reduce((n,r)=>r.data.getMTime()>n?r.data.getMTime():n,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((n,r)=>n+r.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const n=a();return n&&(n.arrays=e.arrays.map(r=>({data:r.data.getState()}))),n}}const l5={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Pf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,l5,a),V.obj(t,e),u5(t,e)}var f5={newInstance:V.newInstance(Pf,"vtkFieldData"),extend:Pf};const zf={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},p5={MAX:0,EXACT:1,NOLIMIT:2},h5={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},g5={DUPLICATEPOINT:1,HIDDENPOINT:2},d5={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},v5="vtkGhostType",hr={DEFAULT:0,SINGLE:1,DOUBLE:2};var jf={AttributeCopyOperations:d5,AttributeLimitTypes:p5,AttributeTypes:zf,CellGhostTypes:h5,DesiredOutputPrecision:hr,PointGhostTypes:g5,ghostArrayName:v5};const{AttributeTypes:Pn,AttributeCopyOperations:gr}=jf,{vtkWarningMacro:fo}=V;function y5(t,e){const a=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function n(o){let s=a.find(c=>Pn[c.toUpperCase()]===o||typeof o!="number"&&c.toLowerCase()===o.toLowerCase());return typeof s>"u"&&(s=null),s}e.classHierarchy.push("vtkDataSetAttributes");const r={...t};t.checkNumberOfComponents=o=>!0,t.setAttribute=(o,s)=>{const c=n(s);if(o&&c.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return fo(`Cannot set attribute ${c}. The attribute must be a vtkDataArray.`),-1;if(o&&!t.checkNumberOfComponents(o,c))return fo(`Cannot set attribute ${c}. Incorrect number of components.`),-1;if(o){const l=t.addArray(o);e[`active${c}`]=l}else e[`active${c}`]=-1;return t.modified(),e[`active${c}`]},t.getAttributes=o=>a.filter(s=>t[`get${s}`]()===o),t.setActiveAttributeByName=(o,s)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,s),t.setActiveAttributeByIndex=(o,s)=>{const c=n(s);if(o>=0&&o<e.arrays.length){if(c.toUpperCase()!=="PEDIGREEIDS"){const l=t.getArrayByIndex(o);if(!l.isA("vtkDataArray"))return fo(`Cannot set attribute ${c}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(l,c))return fo(`Cannot set attribute ${c}. Incorrect number of components.`),-1}return e[`active${c}`]=o,t.modified(),o}return o===-1&&(e[`active${c}`]=o,t.modified()),-1},t.getActiveAttribute=o=>{const s=n(o);return t[`get${s}`]()},t.removeAllArrays=()=>{a.forEach(o=>{e[`active${o}`]=-1}),r.removeAllArrays()},t.removeArrayByIndex=o=>(o!==-1&&a.forEach(s=>{o===e[`active${s}`]?e[`active${s}`]=-1:o<e[`active${s}`]&&(e[`active${s}`]-=1)}),r.removeArrayByIndex(o)),a.forEach(o=>{const s=`active${o}`;t[`get${o}`]=()=>t.getArrayByIndex(e[s]),t[`set${o}`]=c=>t.setAttribute(c,o),t[`setActive${o}`]=c=>t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,o),t[`copy${o}Off`]=()=>{const c=o.toUpperCase();e.copyAttributeFlags[gr.PASSDATA][Pn[c]]=!1},t[`copy${o}On`]=()=>{const c=o.toUpperCase();e.copyAttributeFlags[gr.PASSDATA][Pn[c]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(gr).filter(o=>o!=="ALLCOPY").forEach(o=>{e.copyAttributeFlags[gr[o]]=Object.keys(Pn).filter(s=>s!=="NUM_ATTRIBUTES").reduce((s,c)=>(s[Pn[c]]=!0,s),[])}),e.copyAttributeFlags[gr.COPYTUPLE][Pn.GLOBALIDS]=!1,e.copyAttributeFlags[gr.INTERPOLATE][Pn.GLOBALIDS]=!1,e.copyAttributeFlags[gr.COPYTUPLE][Pn.PEDIGREEIDS]=!1},t.initialize=V.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(o=>{!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(pe.newInstance(e.dataArrays[o]))});const i=t.shallowCopy;t.shallowCopy=(o,s)=>{i(o,s),e.arrays=o.getArrays().map(c=>{const l=c.newClone();return l.shallowCopy(c,s),{data:l}})},t.initializeAttributeCopyFlags()}const m5={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Wf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m5,a),f5.extend(t,e,a),V.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),y5(t,e)}var $f={newInstance:V.newInstance(Wf,"vtkDataSetAttributes"),extend:Wf,...jf};const lt={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},w0={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var x5={FieldDataTypes:lt,FieldAssociations:w0};const Ia=["pointData","cellData","fieldData"];function C5(t,e){e.classHierarchy.push("vtkDataSet"),Ia.forEach(r=>{e[r]?e[r]=wt(e[r]):e[r]=$f.newInstance()}),t.computeBounds=()=>{if(e.modifiedTime&&e.computeTime&&e.modifiedTime>e.computeTime||!e.computeTime){const r=t.getPoints();r!=null&&r.getNumberOfPoints()?we.setBounds(e.bounds,r.getBoundsByReference()):e.bounds=Mt.createUninitializedBounds(),e.computeTime=V.getCurrentGlobalMTime()}},t.getLength2=()=>{const r=t.getBoundsByReference();return!r||r.length!==6?0:we.getDiagonalLength2(r)},t.getLength=()=>Math.sqrt(t.getLength2()),t.getCenter=()=>{const r=t.getBoundsByReference();return!r||r.length!==6?[0,0,0]:we.getCenter(r)},t.getCellBounds=r=>{const i=t.getCell(r);return i?i.getBounds():Mt.createUninitializedBounds()},t.getBounds=V.chain(()=>t.computeBounds,t.getBounds),t.getBoundsByReference=V.chain(()=>t.computeBounds,t.getBoundsByReference);const a=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a(r,i),Ia.forEach(o=>{e[o]=$f.newInstance(),e[o].shallowCopy(r.getReferenceByName(o))})};const n=t.getMTime;t.getMTime=()=>Ia.reduce((r,i)=>{var o;return Math.max(r,((o=e[i])==null?void 0:o.getMTime())??r)},n()),t.initialize=()=>(Ia.forEach(r=>{var i;return(i=e[r])==null?void 0:i.initialize()}),t)}const S5={};function Hf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S5,a),V.obj(t,e),V.setGet(t,e,Ia),V.getArray(t,e,["bounds"],6),C5(t,e)}var dr={newInstance:V.newInstance(Hf,"vtkDataSet"),extend:Hf,...x5};const zt={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var Kf={StructuredType:zt};const{StructuredType:En}=Kf;function T5(t){let e=0;for(let a=0;a<3;++a)t[a*2]<t[a*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?En.EMPTY:e===3?En.XYZ_GRID:e===2?t[0]===t[1]?En.YZ_PLANE:t[2]===t[3]?En.XZ_PLANE:En.XY_PLANE:e===1?t[0]<t[1]?En.X_LINE:t[2]<t[3]?En.Y_LINE:En.Z_LINE:En.SINGLE_POINT}var w5={getDataDescriptionFromExtent:T5,...Kf};const{vtkErrorMacro:vr}=V;function _5(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return vr("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r.length===1?r[0]:r;if(o.length!==6)return!1;const s=e.extent.some((c,l)=>c!==o[l]);return s&&(e.extent=o.slice(),e.dataDescription=w5.getDataDescriptionFromExtent(e.extent),t.modified()),s},t.setDimensions=function(){let n,r,i;if(e.deleted){vr("instance deleted - cannot call any method");return}if(arguments.length===1){const o=arguments.length<=0?void 0:arguments[0];n=o[0],r=o[1],i=o[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];else{vr("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,i-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let i=0;i<3;i++){if(n[i]===0)return 0;n[i]>1&&(r*=n[i]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return vr("Requesting a point from an empty image."),null;const i=new Float64Array(3);switch(e.dataDescription){case zt.EMPTY:return null;case zt.SINGLE_POINT:break;case zt.X_LINE:i[0]=n;break;case zt.Y_LINE:i[1]=n;break;case zt.Z_LINE:i[2]=n;break;case zt.XY_PLANE:i[0]=n%r[0],i[1]=n/r[0];break;case zt.YZ_PLANE:i[1]=n%r[1],i[2]=n/r[1];break;case zt.XZ_PLANE:i[0]=n%r[0],i[2]=n/r[0];break;case zt.XYZ_GRID:i[0]=n%r[0],i[1]=n/r[0]%r[1],i[2]=n/(r[0]*r[1]);break;default:vr("Invalid dataDescription");break}const o=[0,0,0];return t.indexToWorld(i,o),o},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>we.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>we.inflate([...e.extent],.5),t.computeTransforms=()=>{fs(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],An(e.indexToWorld,e.indexToWorld,e.spacing),Et(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _e(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _e(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return we.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return we.transformBounds(n,e.worldToIndex,r)},e._onOriginChanged=t.computeTransforms,e._onDirectionChanged=t.computeTransforms,e._onSpacingChanged=t.computeTransforms,t.computeTransforms(),t.getCenter=()=>we.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=[0,0,0,0,0,0];t.worldToIndexBounds(n,i);const o=[0,0,0],s=[0,0,0];we.computeCornerPoints(i,o,s),t0(o,o),t0(s,s);const c=t.getDimensions();s0(o,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],o),s0(s,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],s);const l=c[0],p=c[0]*c[1],u=t.getPointData().getScalars().getData();let f=-1/0,h=1/0,d=0,v=0,m=0;for(let C=o[2];C<=s[2];C++)for(let S=o[1];S<=s[1];S++){let T=o[0]+S*l+C*p;for(let w=o[0];w<=s[0];w++){if(!r||r([w,S,C],i)){const _=u[T];_>f&&(f=_),_<h&&(h=_),d+=_*_,v+=_,m+=1}++T}}const x=m>0?v/m:0,y=m?Math.abs(d/m-x*x):0,g=Math.sqrt(y);return{minimum:h,maximum:f,average:x,variance:y,sigma:g,count:m}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let o=r;for(let s=0;s<3;++s)i[s]=o,o*=n[s*2+1]-n[s*2]+1;return i},t.computeOffsetIndex=n=>{let[r,i,o]=n;const s=t.getExtent(),c=t.getPointData().getScalars().getNumberOfComponents(),l=t.computeIncrements(s,c);return Math.floor((Math.round(r)-s[0])*l[0]+(Math.round(i)-s[2])*l[1]+(Math.round(o)-s[4])*l[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),i=t.worldToIndex(n);for(let o=0;o<3;++o)if(i[o]<r[o*2]||i[o]>r[o*2+1])return vr(`GetScalarPointer: Pixel ${i} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(i)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=i)return vr(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${i}`),NaN;const o=t.getOffsetIndexFromWorld(n);return Number.isNaN(o)?o:t.getPointData().getScalars().getComponent(o,r)};const a=t.initialize;t.initialize=()=>(t.set({direction:It(e.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:zt.EMPTY}),a())}const E5={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:zt.EMPTY};function Xf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E5,a),dr.extend(t,e,a),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=It(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),V.get(t,e,["indexToWorld","worldToIndex"]),V.setGetArray(t,e,["origin","spacing"],3),V.setGetArray(t,e,["direction"],9),V.getArray(t,e,["extent"],6),_5(t,e)}var _0={newInstance:V.newInstance(Xf,"vtkImageData"),extend:Xf};const D5={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},E0={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var D0={VectorMode:D5,ScalarMappingTarget:E0,Scale:{LINEAR:0,LOG10:1}},O0={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};const{ScalarMappingTarget:qf,Scale:O5,VectorMode:hn}=D0,{VtkDataTypes:zn}=pe,{ColorMode:po}=O0,{vtkErrorMacro:Yf}=V;function b5(t){return t}function Jf(t){return Math.floor(t*255+.5)}function M5(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(hn.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(hn.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(hn.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(a,n)=>{if(!(a&&!n||!a&&n)){if(a&&n&&a.length!==n.length){Yf("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],n&&a){const r=n.length;for(let i=0;i<r;i++)e.annotationArray.push({value:a[i],annotation:String(n[i])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(a,n)=>{let r=t.checkForAnnotatedValue(a),i=!1;return r>=0?e.annotationArray[r].annotation!==n&&(e.annotationArray[r].annotation=n,i=!0):(e.annotationArray.push({value:a,annotation:n}),r=e.annotationArray.length-1,i=!0),i&&(t.updateAnnotatedValueMap(),t.modified()),r},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=a=>a<0||a>=e.annotationArray.length?null:e.annotationArray[a].value,t.getAnnotation=a=>e.annotationArray[a]===void 0?null:e.annotationArray[a].annotation,t.getAnnotatedValueIndex=a=>e.annotationArray.length?t.checkForAnnotatedValue(a):-1,t.removeAnnotation=a=>{const n=t.checkForAnnotatedValue(a),r=n>=0;return r&&(e.annotationArray.splice(n,1),t.updateAnnotatedValueMap(),t.modified()),r},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(a,n)=>{if(e.indexedLookup){const r=t.getAnnotatedValueIndex(a);t.getIndexedColor(r,n)}else t.getColor(parseFloat(a),n),n[3]=1},t.checkForAnnotatedValue=a=>t.getAnnotatedValueIndexInternal(a),t.getAnnotatedValueIndexInternal=a=>{if(e.annotatedValueMap[a]!==void 0){const n=e.annotationArray.length;return e.annotatedValueMap[a]%n}return-1},t.getIndexedColor=(a,n)=>{n[0]=0,n[1]=0,n[2]=0,n[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const a=e.annotationArray.length;for(let n=0;n<a;n++)e.annotatedValueMap[e.annotationArray[n].value]=n},t.mapScalars=(a,n,r)=>{const i=a.getNumberOfComponents();let o=null;if(n===po.DEFAULT&&(a.getDataType()===zn.UNSIGNED_CHAR||a.getDataType()===zn.UNSIGNED_CHAR_CLAMPED)||n===po.DIRECT_SCALARS&&a)o=t.convertToRGBA(a,i,a.getNumberOfTuples());else{const s={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:zn.UNSIGNED_CHAR},c=V.newTypedArray(s.dataType,4*a.getNumberOfTuples());s.values=c,s.size=c.length,o=pe.newInstance(s);let l=r;l<0&&i>1?t.mapVectorsThroughTable(a,o,qf.RGBA,-1,-1):(l<0&&(l=0),l>=i&&(l=i-1),t.mapScalarsThroughTable(a,o,qf.RGBA,l))}return o},t.mapVectorsToMagnitude=(a,n,r)=>{const i=a.getNumberOfTuples(),o=a.getNumberOfComponents(),s=n.getData(),c=a.getData();for(let l=0;l<i;l++){let p=0;for(let u=0;u<r;u++)p+=c[l*o+u]*c[l*o+u];s[l]=Math.sqrt(p)}},t.mapVectorsThroughTable=(a,n,r,i,o)=>{let s=t.getVectorMode(),c=o,l=i;const p=a.getNumberOfComponents();s===hn.COMPONENT?(l===-1&&(l=t.getVectorComponent()),l<0&&(l=0),l>=p&&(l=p-1)):(c===-1&&(c=t.getVectorSize()),c<=0?(l=0,c=p):(l<0&&(l=0),l>=p&&(l=p-1),l+c>p&&(c=p-l)),s===hn.MAGNITUDE&&(p===1||c===1)&&(s=hn.COMPONENT));let u=0;switch(l>0&&(u=l),s){case hn.COMPONENT:{t.mapScalarsThroughTable(a,n,r,u);break}case hn.RGBCOLORS:break;case hn.MAGNITUDE:default:{const f=pe.newInstance({numberOfComponents:1,values:new Float32Array(a.getNumberOfTuples())});t.mapVectorsToMagnitude(a,f,c),t.mapScalarsThroughTable(f,n,r,0);break}}},t.luminanceToRGBA=(a,n,r,i)=>{const o=i(r),s=n.getData(),c=a.getData(),l=s.length,p=0,u=1;let f=0;for(let h=p;h<l;h+=u){const d=i(s[h]);c[f*4]=d,c[f*4+1]=d,c[f*4+2]=d,c[f*4+3]=o,f++}},t.luminanceAlphaToRGBA=(a,n,r,i)=>{const o=n.getData(),s=a.getData(),c=o.length,l=0,p=2;let u=0;for(let f=l;f<c;f+=p){const h=i(o[f]);s[u]=h,s[u+1]=h,s[u+2]=h,s[u+3]=i(o[f+1])*r,u+=4}},t.rGBToRGBA=(a,n,r,i)=>{const o=Jf(r),s=n.getData(),c=a.getData(),l=s.length,p=0,u=3;let f=0;for(let h=p;h<l;h+=u)c[f*4]=i(s[h]),c[f*4+1]=i(s[h+1]),c[f*4+2]=i(s[h+2]),c[f*4+3]=o,f++},t.rGBAToRGBA=(a,n,r,i)=>{const o=n.getData(),s=a.getData(),c=o.length,l=0,p=4;let u=0;for(let f=l;f<c;f+=p)s[u*4]=i(o[f]),s[u*4+1]=i(o[f+1]),s[u*4+2]=i(o[f+2]),s[u*4+3]=i(o[f+3])*r,u++},t.convertToRGBA=(a,n,r)=>{let{alpha:i}=e;if(n===4&&i>=1&&a.getDataType()===zn.UNSIGNED_CHAR)return a;const o=pe.newInstance({numberOfComponents:4,empty:!0,size:4*r,dataType:zn.UNSIGNED_CHAR});if(r<=0)return o;i=i>0?i:0,i=i<1?i:1;let s=b5;switch((a.getDataType()===zn.FLOAT||a.getDataType()===zn.DOUBLE)&&(s=Jf),n){case 1:t.luminanceToRGBA(o,a,i,s);break;case 2:t.luminanceAlphaToRGBA(o,a,s);break;case 3:t.rGBToRGBA(o,a,i,s);break;case 4:t.rGBAToRGBA(o,a,i,s);break;default:return Yf("Cannot convert colors"),null}return o},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(a,n)=>t.setMappingRange(a,n),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(a,n,r)=>{if(!a)return t.isOpaque();const i=a.getNumberOfComponents();return n===po.DEFAULT&&a.getDataType()===zn.UNSIGNED_CHAR||n===po.DIRECT_SCALARS?i===3||i===1?e.alpha>=1:a.getRange(i-1)[0]===255:!0}}const N5={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:hn.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:O5.LINEAR};function Zf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N5,a),V.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],V.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),V.setArray(t,e,["mappingRange"],2),V.getArray(t,e,["mappingRange"]),M5(t,e)}var ho={newInstance:V.newInstance(Zf,"vtkScalarsToColors"),extend:Zf,...D0};const{vtkErrorMacro:Qf}=V,ep=0,tp=1,b0=2;function R5(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let a=!0;e.nanColor[3]<1&&(a=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(a=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(a=0);for(let n=3;n<e.table.length&&a;n+=4)e.table[n]<255&&(a=!1);e.opaqueFlag=a,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(a,n)=>{let r=0;const i=Number(a);return i<n.range[0]?r=n.maxIndex+ep+1.5:i>n.range[1]?r=n.maxIndex+tp+1.5:(r=(i+n.shift)*n.scale,r=r<n.maxIndex?r:n.maxIndex),Math.floor(r)},t.linearLookup=(a,n,r)=>{let i=0;to(a)?i=Math.floor(r.maxIndex+1.5+b0):i=t.linearIndexLookup(a,r);const o=4*i;return n.slice(o,o+4)},t.indexedLookupFunction=(a,n,r)=>{let i=t.getAnnotatedValueIndexInternal(a);i===-1&&(i=e.numberOfColors+b0);const o=4*i;return[n[o],n[o+1],n[o+2],n[o+3]]},t.lookupShiftAndScale=(a,n)=>{n.shift=-a[0],n.scale=Number.MAX_VALUE,a[1]>a[0]&&(n.scale=(n.maxIndex+1)/(a[1]-a[0]))},t.mapScalarsThroughTable=(a,n,r,i)=>{let o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);const s=t.getMappingRange(),c={maxIndex:t.getNumberOfColors()-1,range:s,shift:0,scale:0};t.lookupShiftAndScale(s,c);const l=t.getAlpha(),p=a.getNumberOfTuples(),u=a.getNumberOfComponents(),f=n.getData(),h=a.getData();if(l>=1){if(r===E0.RGBA)for(let d=0;d<p;d++){const v=o(h[d*u+i],e.table,c);f[d*4]=v[0],f[d*4+1]=v[1],f[d*4+2]=v[2],f[d*4+3]=v[3]}}else if(r===E0.RGBA)for(let d=0;d<p;d++){const v=o(h[d*u+i],e.table,c);f[d*4]=v[0],f[d*4+1]=v[1],f[d*4+2]=v[2],f[d*4+3]=Math.floor(v[3]*l+.5)}},t.forceBuild=()=>{let a=0,n=0,r=0,i=0;const o=e.numberOfColors-1;o&&(a=(e.hueRange[1]-e.hueRange[0])/o,n=(e.saturationRange[1]-e.saturationRange[0])/o,r=(e.valueRange[1]-e.valueRange[0])/o,i=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;const s=[],c=[];for(let l=0;l<=o;l++)s[0]=e.hueRange[0]+l*a,s[1]=e.saturationRange[0]+l*n,s[2]=e.valueRange[0]+l*r,lr(s,c),c[3]=e.alphaRange[0]+l*i,e.table[l*4]=c[0]*255+.5,e.table[l*4+1]=c[1]*255+.5,e.table[l*4+2]=c[2]*255+.5,e.table[l*4+3]=c[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=a=>{if(Array.isArray(a)){const r=a[0].length;e.numberOfColors=a.length;const i=4-r;let o=0;for(let s=0;s<e.numberOfColors;s++)e.table[s*4]=255,e.table[s*4+1]=255,e.table[s*4+2]=255,e.table[s*4+3]=255;for(let s=0;s<a.length;s++){const c=a[s];for(let l=0;l<r;l++)e.table[o++]=c[l];o+=i}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(a.getNumberOfComponents()!==4)return Qf("Expected 4 components for RGBA colors"),!1;if(a.getDataType()!==Ne.UNSIGNED_CHAR)return Qf("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=a.getNumberOfTuples();const n=a.getData();e.table.length=n.length;for(let r=0;r<n.length;r++)e.table[r]=n[r];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:a}=e,n=e.table;let r=(a+ep)*4;e.useBelowRangeColor||a===0?(n[r]=e.belowRangeColor[0]*255+.5,n[r+1]=e.belowRangeColor[1]*255+.5,n[r+2]=e.belowRangeColor[2]*255+.5,n[r+3]=e.belowRangeColor[3]*255+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=(a+tp)*4,e.useAboveRangeColor||a===0?(n[r]=e.aboveRangeColor[0]*255+.5,n[r+1]=e.aboveRangeColor[1]*255+.5,n[r+2]=e.aboveRangeColor[2]*255+.5,n[r+3]=e.aboveRangeColor[3]*255+.5):(n[r]=n[4*(a-1)+0],n[r+1]=n[4*(a-1)+1],n[r+2]=n[4*(a-1)+2],n[r+3]=n[4*(a-1)+3]),r=(a+b0)*4,n[r]=e.nanColor[0]*255+.5,n[r+1]=e.nanColor[1]*255+.5,n[r+2]=e.nanColor[2]*255+.5,n[r+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const L5={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function np(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L5,a),ho.extend(t,e,a),e.table||(e.table=[]),e.buildTime={},V.obj(e.buildTime),e.opaqueFlagBuildTime={},V.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},V.obj(e.insertTime,{mtime:0}),V.get(t,e,["buildTime"]),V.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),V.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),V.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),V.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),R5(t,e)}var rp={newInstance:V.newInstance(np,"vtkLookupTable"),extend:np};const Zt={Off:0,PolygonOffset:1};let M0=Zt.PolygonOffset,go=Zt.Off;const F5=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function k5(){return M0}function V5(t){const e=M0===t;return M0=t,e}function A5(){return go}function vo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=go===t;return go=t,e}function B5(){return vo(Zt.Off)}function U5(){return vo(Zt.Off)}function G5(){return vo(Zt.PolygonOffset)}function I5(){return F5[go]}var N0={Resolve:Zt,getResolveCoincidentTopologyAsString:I5,getResolveCoincidentTopologyPolygonOffsetFaces:k5,getResolveCoincidentTopology:A5,setResolveCoincidentTopology:vo,setResolveCoincidentTopologyPolygonOffsetFaces:V5,setResolveCoincidentTopologyToDefault:B5,setResolveCoincidentTopologyToOff:U5,setResolveCoincidentTopologyToPolygonOffset:G5};function ap(t,e,a){a.forEach(n=>{t[`get${n.method}`]=()=>e[n.key],t[`set${n.method}`]=V.objectSetterMap.object(t,e,{name:n.key,params:["factor","offset"]})})}const R0=["Polygon","Line","Point"],P5={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},yr={modified:()=>{}};ap(yr,P5,R0.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function z5(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),V.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(N0).forEach(a=>{t[a]=N0[a]}),Object.keys(yr).filter(a=>a!=="modified").forEach(a=>{t[a]=yr[a]}),ap(t,e.topologyOffset,R0.map(a=>({key:a,method:`RelativeCoincidentTopology${a}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const a=yr.getResolveCoincidentTopologyPolygonOffsetParameters(),n=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const a=yr.getResolveCoincidentTopologyLineOffsetParameters(),n=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const a=yr.getResolveCoincidentTopologyPointOffsetParameters(),n=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}}}var yo={implementCoincidentTopologyMethods:z5,staticOffsetAPI:yr,otherStaticMethods:N0,CATEGORIES:R0,Resolve:Zt};const Nt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var ip={PassTypes:Nt};const{FieldAssociations:op}=dr,{staticOffsetAPI:j5,otherStaticMethods:W5}=yo,{ColorMode:mo,ScalarMode:mr,GetArray:L0}=O0,{VectorMode:$5}=D0,{VtkDataTypes:H5}=pe;function Pa(t){return()=>V.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function K5(t,e){const a=t[1]%2===0?1:-1;if(t[0]+=a,t[0]>=e[0]||t[0]<0){const n=t[2]%2===0?1:-1;t[0]-=a,t[1]+=n,(t[1]>=e[1]||t[1]<0)&&(t[1]-=n,t[2]++)}}function X5(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function sp(t,e,a){const n=Math.floor(e),r=n%(2*a[0]);let i,o;r<a[0]?(t[0]=r,i=1,o=t[0]===a[0]-1):(t[0]=2*a[0]-1-r,i=-1,o=t[0]===0);const s=Math.floor(n/a[0]),c=s%(2*a[1]);let l,p;c<a[1]?(t[1]=c,l=1,p=t[1]===a[1]-1):(t[1]=2*a[1]-1-c,l=-1,p=t[1]===0),t[2]=Math.floor(s/a[1]);const u=e-n;o?p?t[2]+=u:t[1]+=l*u:t[0]+=i*u,t[0]=(t[0]+.5)/a[0],t[1]=(t[1]+.5)/a[1],t[2]=(t[2]+.5)/a[2]}const cp=new WeakMap;function q5(t,e,a,n,r,i,o){var M;const s=new Array(arguments.length);for(let N=0;N<arguments.length;++N){const R=arguments[N];s[N]=((M=R.getMTime)==null?void 0:M.call(R))??R}const c=s.join("/"),l=cp.get(t);if(l&&l.stringHash===c)return l.textureCoordinates;const p=(a[1]-a[0])/(r-1),[u,f]=[a[0]-p,a[1]+p],h=u-.5*p,d=1/(f-u+p),v=u,m=(r+1)/(f-u),x=t.getData(),y=t.getNumberOfTuples(),g=t.getNumberOfComponents(),C=e<0||e>=g,S=i[2]<=1?2:3,T=pe.newInstance({numberOfComponents:S,values:new Float32Array(y*S)}),w=T.getData(),_=[0,0,0];sp(_,r+2,i);let E=0,D=0;const O=[.5,.5,.5];for(let N=0;N<y;++N){let R;if(C){let B=0;for(let I=0;I<g;++I){const P=Number(x[E+I]);B+=P*P}R=Math.sqrt(B)}else R=Number(x[E+e]);if(n&&(R=Math.log10(R)),E+=g,to(R))O[0]=_[0],O[1]=_[1],O[2]=_[2];else if(o){let B=(R-v)*m;B<1?B=0:B>r&&(B=r+1),sp(O,B,i)}else{O[1]=.49;const B=(R-h)*d;B>1e3?O[0]=1e3:B<-1e3?O[0]=-1e3:O[0]=B}for(let B=0;B<S;++B)w[D++]=O[B]}return cp.set(t,{stringHash:c,textureCoordinates:T}),T}function Y5(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const a=t.getInputData();return a?(e.static||t.update(),e.bounds=a.getBounds()):e.bounds=In(),e.bounds},t.setForceCompileOnly=a=>{e.forceCompileOnly=a},t.setSelectionWebGLIdsToVTKIds=a=>{e.selectionWebGLIdsToVTKIds=a},t.createDefaultLookupTable=()=>{e.lookupTable=rp.newInstance()},t.getColorModeAsString=()=>V.enumToString(mo,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>V.enumToString(mr,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(a,n,r,i,o)=>{if(!a||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let s=null,c=!1;if(n===mr.DEFAULT)s=a.getPointData().getScalars(),s||(s=a.getCellData().getScalars(),c=!0);else if(n===mr.USE_POINT_DATA)s=a.getPointData().getScalars();else if(n===mr.USE_CELL_DATA)s=a.getCellData().getScalars(),c=!0;else if(n===mr.USE_POINT_FIELD_DATA){const l=a.getPointData();r===L0.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(n===mr.USE_CELL_FIELD_DATA){const l=a.getCellData();c=!0,r===L0.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(n===mr.USE_FIELD_DATA){const l=a.getFieldData();r===L0.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}return{scalars:s,cellFlag:c}},t.mapScalars=(a,n)=>{const{scalars:r,cellFlag:i}=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=i,!r){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const o=`${t.getMTime()}${r.getMTime()}${n}`;if(e.colorBuildString!==o){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(r,i))e.mapScalarsToTexture(r,i,n);else{e.colorCoordinates=null,e.colorTextureMap=null;const s=t.getLookupTable();s&&(s.build(),e.colorMapColors=s.mapScalars(r,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${r.getMTime()}${n}`}},e.mapScalarsToTexture=(a,n,r)=>{const i=e.lookupTable.getRange(),o=e.lookupTable.usingLogScale(),s=e.lookupTable.getAlpha(),c=o?[Math.log10(i[0]),Math.log10(i[1])]:i;if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==r){e.lookupTable.setAlpha(r),e.colorTextureMap=null,e.lookupTable.build();const p=e.lookupTable.getNumberOfAvailableColors(),u=2048,f=u**3-3,d=4096-2,v=2,m=n?f:d;e.numberOfColorsInRange=Math.min(Math.max(p,v),m);const x=e.numberOfColorsInRange+3,y=e.numberOfColorsInRange+2,g=n?[Math.min(Math.ceil(x/u**0),u),Math.min(Math.ceil(x/u**1),u),Math.min(Math.ceil(x/u**2),u)]:[y,2,1],C=g[0]*g[1]*g[2],S=new Float64Array(C);S.fill(NaN);const T=e.numberOfColorsInRange,w=T+2,_=[0,0,0],E=c[0],D=c[1]-c[0];for(let N=0;N<w;++N){const R=X5(_,g),B=E+D*(N-1)/(T-1),I=o?10**B:B;S[R]=I,K5(_,g)}const O=pe.newInstance({numberOfComponents:1,values:S}),M=e.lookupTable.mapScalars(O,e.colorMode,0);e.colorTextureMap=_0.newInstance(),e.colorTextureMap.setDimensions(g),e.colorTextureMap.getPointData().setScalars(M),e.lookupTable.setAlpha(s)}const l=e.lookupTable.getVectorMode()===$5.MAGNITUDE&&a.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=q5(a,l,c,o,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),n)},t.getIsOpaque=()=>{const a=t.getInputData(),r=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||r==null)return!0;const i=t.getLookupTable();return i?(i.build(),i.areScalarsOpaque(r,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(a,n)=>n&&e.colorMode!==mo.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!a||e.colorMode===mo.DEFAULT&&a.getDataType()===H5.UNSIGNED_CHAR||e.colorMode===mo.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let a=e.mtime;if(e.lookupTable!==null){const n=e.lookupTable.getMTime();a=n>a?n:a}return a},t.getPrimitiveCount=()=>{const a=t.getInputData();return{points:a.getPoints().getNumberOfValues()/3,verts:a.getVerts().getNumberOfValues()-a.getVerts().getNumberOfCells(),lines:a.getLines().getNumberOfValues()-2*a.getLines().getNumberOfCells(),triangles:a.getPolys().getNumberOfValues()-3*a.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=Pa("AcquireInvertibleLookupTable"),t.valueToColor=Pa("ValueToColor"),t.colorToValue=Pa("ColorToValue"),t.useInvertibleColorFor=Pa("UseInvertibleColorFor"),t.clearInvertibleColor=Pa("ClearInvertibleColor"),t.processSelectorPixelBuffers=(a,n)=>{if(!a||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const r=a.getRawPixelBuffer(Nt.ID_LOW24),i=a.getRawPixelBuffer(Nt.ID_HIGH24),o=a.getCurrentPass(),s=a.getFieldAssociation();let c=null;s===op.FIELD_ASSOCIATION_POINTS?c=e.selectionWebGLIdsToVTKIds.points:s===op.FIELD_ASSOCIATION_CELLS&&(c=e.selectionWebGLIdsToVTKIds.cells),c&&n.forEach(l=>{if(o===Nt.ID_LOW24){let p=0;i&&(p+=i[l],p*=256),p+=r[l+2],p*=256,p+=r[l+1],p*=256,p+=r[l];const u=c[p],f=a.getPixelBuffer(Nt.ID_LOW24);f[l]=u&255,f[l+1]=(u&65280)>>8,f[l+2]=(u&16711680)>>16}else if(o===Nt.ID_HIGH24&&i){let p=0;p+=i[l],p*=256,p+=r[l+2],p*=256,p+=r[l+1],p*=256,p+=r[l];const u=c[p],f=a.getPixelBuffer(Nt.ID_HIGH24);f[l]=(u&4278190080)>>24}})}}const J5={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function up(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J5,a),T0.extend(t,e,a),V.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),V.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),V.setGetArray(t,e,["scalarRange"],2),yo.implementCoincidentTopologyMethods(t,e),Y5(t,e)}var gn={newInstance:V.newInstance(up,"vtkMapper"),extend:up,...j5,...W5,...O0};const{isVtkObject:Z5}=V;function lp(t){let e=0;return t.filter((a,n)=>n===e?(e+=a+1,!0):!1)}function fp(t){let e=0;for(let a=0;a<t.length;)a+=t[a]+1,e++;return e}const Q5={extractCellSizes:lp,getNumberOfCells:fp};function e4(t,e){e.classHierarchy.push("vtkCellArray");const a={...t};t.getNumberOfCells=n=>(e.numberOfCells!==void 0&&!n||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=fp(t.getData())),e.numberOfCells),t.getCellSizes=n=>(e.cellSizes!==void 0&&!n||(e.cellSizes=lp(t.getData())),e.cellSizes),t.resize=n=>{const r=t.getNumberOfTuples();a.resize(n);const i=t.getNumberOfTuples();i<r&&(i===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=n=>{a.setData(n,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=n=>{let r=n;const i=e.values[r++];return e.values.subarray(r,r+i)},t.insertNextCell=n=>{let r;Z5(n)?r=n.getPointsIds():r=n;const i=t.getNumberOfCells();return t.insertNextTuples([r.length,...r]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),i},t.getMaxCellSize=()=>t.getCellSizes().reduce((n,r)=>Math.max(n,r),0)}function t4(t){return{empty:!0,numberOfComponents:1,dataType:Ne.UNSIGNED_INT,...t}}function pp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};pe.extend(t,e,t4(a)),e4(t,e)}var jn={newInstance:V.newInstance(pp,"vtkCellArray"),extend:pp,...Q5};const{vtkErrorMacro:n4}=V;function r4(t,e){let a=0;e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==i&&(e.size=i*o,e.values=V.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(o),t.modified())},t.setPoint=function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];t.setTuple(i,s)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(i,o,s)=>t.insertNextTuple([i,o,s]),t.insertPoint=(i,o)=>t.insertTuple(i,o);const n=t.getBounds;t.getBounds=()=>(a<e.mtime&&t.computeBounds(),n());const r=t.getBoundsByReference;t.getBoundsByReference=()=>(a<e.mtime&&t.computeBounds(),r()),t.computeBounds=()=>{if(t.getNumberOfComponents()===3){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const o=t.getRange(1);e.bounds[2]=o[0],e.bounds[3]=o[1];const s=t.getRange(2);e.bounds[4]=s[0],e.bounds[5]=s[1]}else if(t.getNumberOfComponents()===2){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const o=t.getRange(1);e.bounds[2]=o[0],e.bounds[3]=o[1],e.bounds[4]=0,e.bounds[5]=0}else n4(`getBounds called on an array with components of ${t.getNumberOfComponents()}`),o0(e.bounds);a=V.getCurrentGlobalMTime()},t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const a4={empty:!0,numberOfComponents:3,dataType:Ne.FLOAT,bounds:[1,-1,1,-1,1,-1]};function hp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a4,a),pe.extend(t,e,a),V.getArray(t,e,["bounds"],6),r4(t,e)}var dn={newInstance:V.newInstance(hp,"vtkPoints"),extend:hp};function i4(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(n){e.pointsIds=n;let r=e.points.getData();r.length!==3*e.pointsIds.length&&(r=V.newTypedArray(a.getDataType(),3*e.pointsIds.length));const i=a.getData();e.pointsIds.forEach((o,s)=>{let c=3*o,l=3*s;r[l]=i[c],r[++l]=i[++c],r[++l]=i[++c]}),e.points.setData(r)}else{e.points=a,e.pointsIds=new Array(a.getNumberOfPoints());for(let r=a.getNumberOfPoints()-1;r>=0;--r)e.pointsIds[r]=r}},t.getBounds=()=>e.points.getBounds(),t.getLength2=()=>{const a=we.getLengths(t.getBounds());return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]},t.getParametricDistance=a=>{let n,r=0;for(let i=0;i<3;i++)a[i]<0?n=-a[i]:a[i]>1?n=a[i]-1:n=0,n>r&&(r=n);return r},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=a=>{a.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(a,n,r,i,o,s,c)=>{},t.evaluatePosition=(a,n,r,i,o,s)=>{V.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const o4={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function gp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o4,a),V.obj(t,e),e.points||(e.points=dn.newInstance()),V.get(t,e,["points","pointsIds"]),i4(t,e)}var xr={newInstance:V.newInstance(gp,"vtkCell"),extend:gp};function s4(t,e){let a=e;for(e>=t.array.length&&(a+=t.array.length);a>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=a}function c4(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=a=>{const n=a.getPoints().getNumberOfPoints(),r=a.getNumberOfCells(),i=new Uint32Array(n);if(a.isA("vtkPolyData")){for(let o=0;o<r;++o){const{cellPointIds:s}=a.getCellPoints(o);s.forEach(c=>{t.incrementLinkCount(c)})}t.allocateLinks(n),e.maxId=n-1;for(let o=0;o<r;++o){const{cellPointIds:s}=a.getCellPoints(o);s.forEach(c=>{t.insertCellReference(c,i[c]++,o)})}}else{for(let o=0;o<r;o++)xr.newInstance().getPointsIds().forEach(c=>{t.incrementLinkCount(c)});t.allocateLinks(n),e.maxId=n-1;for(let o=0;o<r;++o)xr.newInstance().getPointsIds().forEach(c=>{t.insertCellReference(c,i[c]++,o)})}},t.allocate=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(a).fill().map(()=>({ncells:0,cells:null})),e.extend=n,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=a=>e.array[a],t.getNcells=a=>e.array[a].ncells,t.getCells=a=>e.array[a].cells,t.insertNextPoint=a=>{e.array.push({ncells:a,cells:Array(a)}),++e.maxId},t.insertNextCellReference=(a,n)=>{e.array[a].cells[e.array[a].ncells++]=n},t.deletePoint=a=>{e.array[a].ncells=0,e.array[a].cells=null},t.removeCellReference=(a,n)=>{e.array[n].cells=e.array[n].cells.filter(r=>r!==a),e.array[n].ncells=e.array[n].cells.length},t.addCellReference=(a,n)=>{e.array[n].cells[e.array[n].ncells++]=a},t.resizeCellList=(a,n)=>{e.array[a].cells.length=n},t.squeeze=()=>{s4(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=a=>{e.array=[...a.array],e.extend=a.extend,e.maxId=a.maxId},t.incrementLinkCount=a=>{++e.array[a].ncells},t.allocateLinks=a=>{for(let n=0;n<a;++n)e.array[n].cells=new Array(e.array[n].ncells)},t.insertCellReference=(a,n,r)=>{e.array[a].cells[n]=r}}const u4={array:null,maxId:0,extend:0};function dp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u4,a),V.obj(t,e),c4(t,e)}var l4={newInstance:V.newInstance(dp,"vtkCellLinks"),extend:dp};const $e={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},F0=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function f4(t){return t<F0.length?F0[t]:"UnknownClass"}function p4(t){return F0.findIndex(t)}function h4(t){return t<$e.VTK_QUADRATIC_EDGE||t===$e.VTK_CONVEX_POINT_SET||t===$e.VTK_POLYHEDRON}function g4(t){return t===$e.VTK_TRIANGLE_STRIP||t===$e.VTK_POLY_LINE||t===$e.VTK_POLY_VERTEX}const d4={getClassNameFromTypeId:f4,getTypeIdFromClassName:p4,isLinear:h4,hasSubCells:g4};function v4(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=a>0?a:1,e.extend=n>0?n:1,e.maxId=-1,e.typeArray=new Uint8Array(a),e.locationArray=new Uint32Array(a)},t.insertCell=(a,n,r)=>{e.typeArray[a]=n,e.locationArray[a]=r,a>e.maxId&&(e.maxId=a)},t.insertNextCell=(a,n)=>(t.insertCell(++e.maxId,a,n),e.maxId),t.setCellTypes=(a,n,r)=>{e.size=a,e.typeArray=n,e.locationArray=r,e.maxId=a-1},t.getCellLocation=a=>e.locationArray[a],t.deleteCell=a=>{e.typeArray[a]=$e.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=a=>{const n=t.getNumberOfTypes();for(let r=0;r<n;++r)if(a===t.getCellType(r))return!0;return!1},t.insertNextType=a=>t.insertNextCell(a,-1),t.getCellType=a=>e.typeArray[a],t.reset=()=>{e.maxId=-1},t.deepCopy=a=>{t.allocate(a.getSize(),a.getExtend()),e.typeArray.set(a.getTypeArray()),e.locationArray.set(a.getLocationArray()),e.maxId=a.getMaxId()}}const y4={size:0,maxId:-1,extend:1e3};function vp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y4,a),V.obj(t,e),V.get(t,e,["size","maxId","extend"]),V.getArray(t,e,["typeArray","locationArray"]),v4(t,e)}var m4={newInstance:V.newInstance(vp,"vtkCellTypes"),extend:vp,...d4};const yp={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var mp={IntersectionState:yp};const{IntersectionState:xo}=mp;function Zr(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const r={t:Number.MIN_VALUE,distance:0},i=[];let o;i[0]=a[0]-e[0],i[1]=a[1]-e[1],i[2]=a[2]-e[2];const s=i[0]*(t[0]-e[0])+i[1]*(t[1]-e[1])+i[2]*(t[2]-e[2]),c=xe(i,i);let l=1e-5*s;return c!==0&&(r.t=s/c),l<0&&(l=-l),-l<c&&c<l||c<=0||r.t<0?o=e:r.t>1?o=a:(o=i,i[0]=e[0]+r.t*i[0],i[1]=e[1]+r.t*i[1],i[2]=e[2]+r.t*i[2]),n&&(n[0]=o[0],n[1]=o[1],n[2]=o[2]),r.distance=dt(o,t),r}function xp(t,e,a,n,r,i){const o=[],s=[],c=[];r[0]=0,i[0]=0,He(e,t,o),He(n,a,s),He(a,t,c);const l=[xe(o,o),-xe(o,s),-xe(o,s),xe(s,s)],p=[];if(p[0]=xe(o,c),p[1]=-xe(s,c),Il(l,p,2)===0){let u=Number.MAX_VALUE;const f=[t,e,a,n],h=[a,a,t,t],d=[n,n,e,e];i[0],i[0],r[0],r[0],r[0],r[0],i[0],i[0];let v;for(let m=0;m<4;m++)v=Zr(f[m],h[m],d[m]),v.distance<u&&(u=v.distance,v.t);return xo.ON_LINE}return r[0]=p[0],i[0]=p[1],r[0]>=0&&r[0]<=1&&i[0]>=0&&i[0]<=1?xo.YES_INTERSECTION:xo.NO_INTERSECTION}const x4={distanceToLine:Zr,intersection:xp};function C4(t,e){e.classHierarchy.push("vtkLine");function a(n){return n>=0&&n<=1}t.getCellDimension=()=>1,t.intersectWithLine=(n,r,i,o,s)=>{const c={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};s[1]=0,s[2]=0;const l=[],p=[],u=[];e.points.getPoint(0,p),e.points.getPoint(1,u);const f=[],h=[],d=xp(n,r,p,u,f,h);if(c.t=f[0],c.betweenPoints=a(c.t),s[0]=h[0],d===xo.YES_INTERSECTION){for(let v=0;v<3;v++)o[v]=p[v]+s[0]*(u[v]-p[v]),l[v]=n[v]+c.t*(r[v]-n[v]);if(dt(o,l)<=i*i)return c.intersect=1,c}else{let v;if(c.t<0)return v=Zr(n,p,u,o),v.distance<=i*i&&(c.t=0,c.intersect=1,c.betweenPoints=!0),c;if(c.t>1)return v=Zr(r,p,u,o),v.distance<=i*i&&(c.t=1,c.intersect=1,c.betweenPoints=!0),c;if(s[0]<0)return s[0]=0,v=Zr(p,n,r,o),c.t=v.t,v.distance<=i*i&&(c.intersect=1),c;if(s[0]>1)return s[0]=1,v=Zr(u,n,r,o),c.t=v.t,v.distance<=i*i&&(c.intersect=1),c}return c},t.evaluateLocation=(n,r,i)=>{const o=[],s=[];e.points.getPoint(0,o),e.points.getPoint(1,s);for(let c=0;c<3;c++)r[c]=o[c]+n[0]*(s[c]-o[c]);i[0]=1-n[0],i[1]=n[0]},t.evaluateOrientation=(n,r,i)=>e.orientations?(bi(r,e.orientations[0],e.orientations[1],n[0]),i[0]=1-n[0],i[1]=n[0],!0):!1}const S4={orientations:null};function Cp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S4,a),xr.extend(t,e,a),V.setGet(t,e,["orientations"]),C4(t,e)}var Ot={newInstance:V.newInstance(Cp,"vtkLine"),extend:Cp,...x4,...mp};function T4(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=wt(e.points):e.points=dn.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const a=t.shallowCopy;t.shallowCopy=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a(i,o),e.points=dn.newInstance(),e.points.shallowCopy(i.getPoints())};const n=t.getMTime;t.getMTime=()=>{var o;const i=n();return Math.max(i,((o=e.points)==null?void 0:o.getMTime())??i)};const r=t.initialize;t.initialize=()=>{var i;return(i=e.points)==null||i.initialize(),r()}}const w4={};function Sp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,w4,a),dr.extend(t,e,a),V.setGet(t,e,["points"]),T4(t,e)}var _4={newInstance:V.newInstance(Sp,"vtkPointSet"),extend:Sp};function E4(t,e){e.classHierarchy.push("vtkPolyLine");const a=Ot.newInstance();a.getPoints().setNumberOfPoints(2),t.getCellDimension=()=>1,t.intersectWithLine=(n,r,i,o,s,c,l)=>{const p={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},u=t.getNumberOfPoints()-1;let f=Number.MAX_VALUE;for(let h=0;h<u;h++){const d=[0,0,0];a.getPoints().getData().set(e.points.getData().subarray(3*h,3*(h+2)));const v=a.intersectWithLine(i,o,s,c,l);if(v.intersect===1&&v.t<=p.t+s&&v.t>=n&&v.t<=r){p.intersect=1;const m=a.getParametricDistance(d);if(m<f||m===f&&v.t<p.t){p.subId=h,p.t=v.t,f=m;for(let x=0;x<3;x++)c[x],d[x]}}}return p},t.evaluateLocation=(n,r,i,o)=>(a.getPoints().getData().set(e.points.getData().subarray(3*n,3*(n+2))),a.evaluateLocation(r,i,o)),t.evaluateOrientation=(n,r,i,o)=>(e.orientations?a.setOrientations([e.orientations[n],e.orientations[n+1]]):a.setOrientations(null),a.evaluateOrientation(r,i,o)),t.getDistancesToFirstPoint=()=>{const n=e.distancesTime.getMTime();if(n<e.points.getMTime()||n<t.getMTime()){const r=t.getNumberOfPoints();if(e.distances?e.distances.length=r:e.distances=new Array(r),r>0){const i=new Array(3),o=new Array(3);let s=0;e.distances[0]=s,e.points.getPoint(0,i);for(let c=1;c<r;++c)e.points.getPoint(c,o),s+=e.distanceFunction(i,o),e.distances[c]=s,Si(i,o)}e.distancesTime.modified()}return e.distances},t.findPointIdAtDistanceFromFirstPoint=n=>{const r=t.getDistancesToFirstPoint();if(r.length<2)return-1;let i=0,o=r.length-1;if(n<r[i]||n>r[o]||r[o]===0)return-1;for(;o-i>1;){const s=Math.floor((i+o)/2);r[s]<=n?i=s:o=s}return i}}const D4={orientations:null,distanceFunction:R2};function Tp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D4,a),xr.extend(t,e,a),V.setGet(t,e,["orientations","distanceFunction"]),e.distancesTime={},V.obj(e.distancesTime,{mtime:0}),E4(t,e)}var O4={newInstance:V.newInstance(Tp,"vtkPolyLine"),extend:Tp};function b4(t,e){e.classHierarchy.push("vtkPriorityQueue"),t.push=(a,n)=>{const r=e.elements.findIndex(i=>i.priority>a);e.elements.splice(r,0,{priority:a,element:n})},t.pop=()=>e.elements.length>0?e.elements.shift().element:null,t.deleteById=a=>{e.elements=e.elements.filter(n=>{let{element:r}=n;return r.id!==a})},t.length=()=>e.elements.length}const M4={elements:[]};function wp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M4,a),V.obj(t,e),b4(t,e)}var N4={newInstance:V.newInstance(wp,"vtkPriorityQueue"),extend:wp};const Co=1e-6,_p=11920929e-14,R4=1e-8,Cr={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function Ep(t,e,a,n,r){return(n[t]-a[t])*(r[e]-a[e])-(r[t]-a[t])*(n[e]-a[e])}function L4(t,e,a,n){if(t[0]<a[0]||t[0]>a[1]||t[1]<a[2]||t[1]>a[3]||t[2]<a[4]||t[2]>a[5])return Cr.OUTSIDE;if(Ke(n)<=_p)return Cr.FAILURE;let r=R4*((a[1]-a[0])*(a[1]-a[0])+(a[3]-a[2])*(a[3]-a[2])+(a[5]-a[4])*(a[5]-a[4]));r*=r,r=r===0?_p:r;const i=[],o=[];for(let p=0;p<e.length;){if(i[0]=e[p++],i[1]=e[p++],i[2]=e[p++],dt(t,i)<=r)return Cr.INSIDE;const{distance:u,t:f}=Ot.distanceToLine(t,i,o);if(u<=r&&f>0&&f<1)return Cr.INSIDE}let s,c;Math.abs(n[0])>Math.abs(n[1])?Math.abs(n[0])>Math.abs(n[2])?(s=1,c=2):(s=0,c=1):Math.abs(n[1])>Math.abs(n[2])?(s=0,c=2):(s=0,c=1);let l=0;for(let p=0;p<e.length;)i[0]=e[p++],i[1]=e[p++],i[2]=e[p++],p<e.length?(o[0]=e[p],o[1]=e[p+1],o[2]=e[p+2]):(o[0]=e[0],o[1]=e[1],o[2]=e[2]),i[c]<=t[c]?o[c]>t[c]&&Ep(s,c,i,o,t)>0&&++l:o[c]<=t[c]&&Ep(s,c,i,o,t)<0&&--l;return l===0?Cr.OUTSIDE:Cr.INSIDE}function F4(t,e,a){const n=t.length,r=[];e.getPoint(t[0],r),a[0]=r[0],a[1]=r[0],a[2]=r[1],a[3]=r[1],a[4]=r[2],a[5]=r[2];for(let o=1;o<n;o++)e.getPoint(t[o],r),we.addPoint(a,...r);const i=we.getLengths(a);return xe(i,i)}function k4(t,e,a){a.length=3,a[0]=0,a[1]=0,a[2]=0;const n=[];let r=[],i=[];const o=[],s=[];e.getPoint(t[0],n),e.getPoint(t[1],r);for(let c=2;c<t.length;c++){e.getPoint(t[c],i),He(i,r,o),He(n,r,s);const l=[0,0,0];et(o,s,l),ur(a,l,a),[r,i]=[i,r]}return Ke(a)}function V4(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];a[0]=0,a[1]=0,a[2]=0;const n=t.length,r=[];for(let i=0;i<n;i++)e.getPoint(t[i],r),a[0]+=r[0],a[1]+=r[1],a[2]+=r[2];return a[0]/=n,a[1]/=n,a[2]/=n,a}const A4={PolygonWithPointIntersectionState:Cr,pointInPolygon:L4,getBounds:F4,getNormal:k4,computeCentroid:V4};function B4(t,e){e.classHierarchy.push("vtkPolygon");function a(){const s=[0,0,0],c=[0,0,0];e.normal=[0,0,0];const l=[...e.firstPoint.point];let p=e.firstPoint;for(let u=0;u<e.pointCount;u++){He(p.point,l,s),He(p.next.point,l,c);const f=[0,0,0];et(s,c,f),ur(e.normal,f,e.normal),p=p.next}return Ke(e.normal)}function n(s){const c=[0,0,0],l=[0,0,0],p=[0,0,0],u=[0,0,0];He(s.point,s.previous.point,c),He(s.next.point,s.point,l),He(s.previous.point,s.next.point,p),et(c,l,u);const f=xe(u,e.normal);if(f<=0)return-1;const h=St(c)+St(l)+St(p);return h*h/f}function r(s){if(e.pointCount<=3)return!0;const c=s.previous,l=s.next,p=[0,0,0];He(l.point,c.point,p);const u=[0,0,0];if(et(p,e.normal,u),Ke(u),St(u)===0)return!1;let f=fn.evaluate(u,c.point,l.next.point),h=f>Co?1:f<-Co?-1:0,d=h<0?1:0;for(let v=l.next.next;v.id!==c.id;v=v.next){const m=v.previous;f=fn.evaluate(u,c.point,v.point);const x=f>Co?1:f<-Co?-1:0;if(x!==h){if(d||(d=x<=0?1:0),Ot.intersection(c.point,l.point,v.point,m.point,[0],[0])===yp.YES_INTERSECTION)return!1;h=x}}return d===1}function i(s,c){e.pointCount-=1;const l=s.previous,p=s.next;e.tris=e.tris.concat(s.point),e.tris=e.tris.concat(p.point),e.tris=e.tris.concat(l.point),l.next=p,p.previous=l,c.deleteById(l.id),c.deleteById(p.id);const u=n(l);u>0&&c.push(u,l);const f=n(p);f>0&&c.push(f,p),s.id===e.firstPoint.id&&(e.firstPoint=p)}function o(){a();const s=N4.newInstance();let c=e.firstPoint;for(let l=0;l<e.pointCount;l++){const p=n(c);p>0&&s.push(p,c),c=c.next}for(;e.pointCount>2&&s.length()>0;)if(e.pointCount===s.length()){const l=s.pop();i(l,s)}else{const l=s.pop();r(l)&&i(l,s)}return e.pointCount<=2}t.triangulate=()=>e.firstPoint?o():null,t.setPoints=s=>{e.pointCount=s.length,e.firstPoint={id:0,point:s[0],next:null,previous:null};let c=e.firstPoint;for(let l=1;l<e.pointCount;l++)c.next={id:l,point:s[l],next:null,previous:c},c=c.next;e.firstPoint.previous=c,c.next=e.firstPoint},t.getPointArray=()=>e.tris}const U4={firstPoint:null,pointCount:0,tris:[]};function Dp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,U4,a),V.obj(t,e),B4(t,e)}var G4={newInstance:V.newInstance(Dp,"vtkPolygon"),extend:Dp,...A4};function k0(t,e,a,n){const r=a[0]-e[0],i=a[1]-e[1],o=a[2]-e[2],s=t[0]-e[0],c=t[1]-e[1],l=t[2]-e[2];n[0]=i*l-o*c,n[1]=o*s-r*l,n[2]=r*c-i*s}function za(t,e,a,n){k0(t,e,a,n);const r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r!==0&&(n[0]/=r,n[1]/=r,n[2]/=r)}function Op(t){t[0]=-1,t[1]=1,t[2]=0,t[3]=-1,t[4]=0,t[5]=1}function I4(t,e,a,n,r,i){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,s=!1;const c=[],l=[],p=[],u=[],f=[];za(t,e,a,u),za(n,r,i,f);const h=-xe(u,t),d=-xe(f,n),v=[xe(f,t)+d,xe(f,e)+d,xe(f,a)+d];if(v[0]*v[1]>o&&v[0]*v[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p};const m=[xe(u,n)+h,xe(u,r)+h,xe(u,i)+h];if(m[0]*m[1]>o&&m[0]*m[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p};if(Math.abs(u[0]-f[0])<1e-9&&Math.abs(u[1]-f[1])<1e-9&&Math.abs(u[2]-f[2])<1e-9&&Math.abs(h-d)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p};const x=[t,e,a],y=[n,r,i],g=xe(u,f),C=(h-d*g)/(g*g-1),S=(d-h*g)/(g*g-1),T=[C*u[0]+S*f[0],C*u[1]+S*f[1],C*u[2]+S*f[2]],w=et(u,f,[]);Ke(w);let _=0,E=0;const D=[],O=[];let M=50,N=50;for(let I=0;I<3;I++){const P=I,L=(I+1)%3,k=fn.intersectWithLine(x[P],x[L],n,f);k.intersection&&k.t>0-o&&k.t<1+o&&(k.t<1+o&&k.t>1-o&&(M=_),D[_++]=xe(k.x,w)-xe(T,w));const A=fn.intersectWithLine(y[P],y[L],t,u);A.intersection&&A.t>0-o&&A.t<1+o&&(A.t<1+o&&A.t>1-o&&(N=E),O[E++]=xe(A.x,w)-xe(T,w))}if(_>2){_--;const I=D[2];D[2]=D[M],D[M]=I}if(E>2){E--;const I=O[2];O[2]=O[N],O[N]=I}if(_!==2||E!==2)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p};if(Number.isNaN(D[0])||Number.isNaN(D[1])||Number.isNaN(O[0])||Number.isNaN(O[1]))return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p};if(D[0]>D[1]){const I=D[1];D[1]=D[0],D[0]=I}if(O[0]>O[1]){const I=O[1];O[1]=O[0],O[0]=I}let R,B;return D[1]<O[0]||O[1]<D[0]?{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:p}:(D[0]<O[0]?D[1]<O[1]?(p[0]=2,p[1]=1,R=O[0],B=D[1]):(p[0]=2,p[1]=2,R=O[0],B=O[1]):D[1]<O[1]?(p[0]=1,p[1]=1,R=D[0],B=D[1]):(p[0]=1,p[1]=2,R=D[0],B=O[1]),Zs(T,w,R,c),Zs(T,w,B,l),{intersect:!0,coplanar:s,pt1:c,pt2:l,surfaceId:p})}const P4={computeNormalDirection:k0,computeNormal:za,interpolationDerivs:Op,intersectWithTriangle:I4};function z4(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(a,n,r,i,o)=>{const s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;const c=[],l=r*r,p=[],u=[],f=[];e.points.getPoint(0,p),e.points.getPoint(1,u),e.points.getPoint(2,f);const h=[],d=[];if(za(p,u,f,h),h[0]!==0||h[1]!==0||h[2]!==0){const g=fn.intersectWithLine(a,n,p,h);if(s.betweenPoints=g.betweenPoints,s.t=g.t,i[0]=g.x[0],i[1]=g.x[1],i[2]=g.x[2],!g.intersection)return o[0]=0,o[1]=0,s.intersect=0,s;const C=t.evaluatePosition(i,c,o,d);if(C.evaluation>=0)return C.dist2<=l?(s.intersect=1,s):(s.intersect=C.evaluation,s)}const v=dt(p,u),m=dt(u,f),x=dt(f,p);e.line||(e.line=Ot.newInstance()),v>m&&v>x?(e.line.getPoints().setPoint(0,p),e.line.getPoints().setPoint(1,u)):m>x&&m>v?(e.line.getPoints().setPoint(0,u),e.line.getPoints().setPoint(1,f)):(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,p));const y=e.line.intersectWithLine(a,n,r,i,o);if(s.betweenPoints=y.betweenPoints,s.t=y.t,y.intersect){const g=[],C=[],S=[];for(let T=0;T<3;T++)g[T]=p[T]-f[T],C[T]=u[T]-f[T],S[T]=i[T]-f[T];return o[0]=xe(S,g)/x,o[1]=xe(S,C)/m,s.intersect=1,s}return o[0]=0,o[1]=0,s.intersect=0,s},t.evaluatePosition=(a,n,r,i)=>{const o={subId:0,dist2:0,evaluation:-1};let s,c;const l=[],p=[],u=[],f=[];let h;const d=[],v=[],m=[];let x=0,y=0;const g=[];let C,S,T,w=[];const _=[],E=[],D=[];o.subId=0,r[2]=0,e.points.getPoint(1,l),e.points.getPoint(2,p),e.points.getPoint(0,u),k0(l,p,u,f),fn.generalizedProjectPoint(a,l,f,D);let O=0;for(s=0;s<3;s++)f[s]<0?h=-f[s]:h=f[s],h>O&&(O=h,y=s);for(c=0,s=0;s<3;s++)s!==y&&(g[c++]=s);for(s=0;s<2;s++)d[s]=D[g[s]]-u[g[s]],v[s]=l[g[s]]-u[g[s]],m[s]=p[g[s]]-u[g[s]];if(x=it(v,m),x===0)return r[0]=0,r[1]=0,o.evaluation=-1,o;if(r[0]=it(d,m)/x,r[1]=it(v,d)/x,i[0]=1-(r[0]+r[1]),i[1]=r[0],i[2]=r[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)n&&(o.dist2=dt(D,a),n[0]=D[0],n[1]=D[1],n[2]=D[2]),o.evaluation=1;else{let M;if(n){if(i[1]<0&&i[2]<0)for(C=dt(a,u),S=Ot.distanceToLine(a,l,u,M,_),T=Ot.distanceToLine(a,u,p,M,E),C<S?(o.dist2=C,w=u):(o.dist2=S,w=_),T<o.dist2&&(o.dist2=T,w=E),s=0;s<3;s++)n[s]=w[s];else if(i[2]<0&&i[0]<0)for(C=dt(a,l),S=Ot.distanceToLine(a,l,u,M,_),T=Ot.distanceToLine(a,l,p,M,E),C<S?(o.dist2=C,w=l):(o.dist2=S,w=_),T<o.dist2&&(o.dist2=T,w=E),s=0;s<3;s++)n[s]=w[s];else if(i[1]<0&&i[0]<0)for(C=dt(a,p),S=Ot.distanceToLine(a,p,u,M,_),T=Ot.distanceToLine(a,l,p,M,E),C<S?(o.dist2=C,w=p):(o.dist2=S,w=_),T<o.dist2&&(o.dist2=T,w=E),s=0;s<3;s++)n[s]=w[s];else if(i[0]<0){const N=Ot.distanceToLine(a,l,p,n);o.dist2=N.distance}else if(i[1]<0){const N=Ot.distanceToLine(a,p,u,n);o.dist2=N.distance}else if(i[2]<0){const N=Ot.distanceToLine(a,l,u,n);o.dist2=N.distance}}o.evaluation=0}return o},t.evaluateLocation=(a,n,r)=>{const i=[],o=[],s=[];e.points.getPoint(0,i),e.points.getPoint(1,o),e.points.getPoint(2,s);const c=1-a[0]-a[1];for(let l=0;l<3;l++)n[l]=i[l]*c+o[l]*a[0]+s[l]*a[1];r[0]=c,r[1]=a[0],r[2]=a[1]},t.getParametricDistance=a=>{let n,r=0;const i=[];i[0]=a[0],i[1]=a[1],i[2]=1-a[0]-a[1];for(let o=0;o<3;o++)i[o]<0?n=-i[o]:i[o]>1?n=i[o]-1:n=0,n>r&&(r=n);return r},t.derivatives=(a,n,r,i,o)=>{const s=e.points.getPoint(0),c=e.points.getPoint(1),l=e.points.getPoint(2),p=[],u=[],f=[],h=[];za(s,c,l,p),He(c,s,u),He(l,s,h),et(p,u,f);const d=Ke(u);if(d<=0||Ke(f)<=0){for(let S=0;S<i;S++)for(let T=0;T<3;T++)o[S*i+T]=0;return}const v=[0,0],m=[d,0],x=[xe(h,u),xe(h,f)],y=new Array(6);Op(y);const g=[m[0]-v[0],m[1]-v[1],x[0]-v[0],x[1]-v[1]],C=V.newTypedArray(xt.Float64Array,4);a0(g,C,2);for(let S=0;S<i;S++){let T=0,w=0;for(let D=0;D<3;D++)T+=y[D]*r[i*D+S],w+=y[3+D]*r[i*D+S];const _=T*C[0]+w*C[1],E=T*C[2]+w*C[3];o[3*S]=_*u[0]+E*f[0],o[3*S+1]=_*u[1]+E*f[1],o[3*S+2]=_*u[2]+E*f[2]}},t.cellBoundary=(a,n,r)=>{const i=n[0]-n[1],o=.5*(1-n[0])-n[1],s=2*n[0]+n[1]-1;return i>=0&&o>=0?(r[0]=e.pointsIds[0],r[1]=e.pointsIds[1]):o<0&&s>=0?(r[0]=e.pointsIds[1],r[1]=e.pointsIds[2]):(r[0]=e.pointsIds[2],r[1]=e.pointsIds[0]),!(n[0]<0||n[1]<0||n[0]>1||n[1]>1||1-n[0]-n[1]<0)}}const j4={};function bp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j4,a),xr.extend(t,e,a),z4(t,e)}var V0={newInstance:V.newInstance(bp,"vtkTriangle"),extend:bp,...P4};function Mp(){return{intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1}}function W4(t,e){e.classHierarchy.push("vtkQuad"),t.getCellDimension=()=>2,t.getCellType=()=>$e.VTK_QUAD,t.getNumberOfEdges=()=>4,t.getNumberOfFaces=()=>0,t.intersectWithLine=(a,n,r,i,o)=>{let s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1},c;const l=e.points.getPoint(0,[]),p=e.points.getPoint(1,[]),u=e.points.getPoint(2,[]),f=e.points.getPoint(3,[]),h=dt(l,u),d=dt(p,f);if(h===d){let T,w=0,_=0;for(let E=0;E<4;E++)T=e.pointsIds[E],T>w&&(w=T,_=E);_===0||_===2?c=0:c=1}else h<d?c=0:c=1;let v=null;e.triangle?v=e.triangle.getPoints():(e.triangle=V0.newInstance(),v=dn.newInstance(),v.setNumberOfPoints(3),e.triangle.initialize(v));let m;const x=Mp();let y;const g=Mp();let C,S;switch(c){case 0:v.setPoint(0,...l),v.setPoint(1,...p),v.setPoint(2,...u),m=e.triangle.intersectWithLine(a,n,r,x.x,x.pCoords),v.setPoint(0,...u),v.setPoint(1,...f),v.setPoint(2,...l),y=e.triangle.intersectWithLine(a,n,r,g.x,g.pCoords),C=m.intersect&&y.intersect?m.t<=y.t:m.intersect,S=m.intersect&&y.intersect?y.t<m.t:y.intersect,C?(s=m,i[0]=x.x[0],i[1]=x.x[1],i[2]=x.x[2],o[0]=x.pCoords[0]+x.pCoords[1],o[1]=x.pCoords[1],o[2]=x.pCoords[2]):S&&(s=y,i[0]=g.x[0],i[1]=g.x[1],i[2]=g.x[2],o[0]=1-(g.pCoords[0]+g.pCoords[1]),o[1]=1-g.pCoords[1],o[2]=g.pCoords[2]);break;case 1:v.setPoint(0,...l),v.setPoint(1,...p),v.setPoint(2,...f),m=e.triangle.intersectWithLine(a,n,r,x.x,x.pCoords),v.setPoint(0,...u),v.setPoint(1,...f),v.setPoint(2,...p),y=e.triangle.intersectWithLine(a,n,r,g.x,g.pCoords),C=m.intersect&&y.intersect?m.t<=y.t:m.intersect,S=m.intersect&&y.intersect?y.t<m.t:y.intersect,C?(s=m,i[0]=x.x[0],i[1]=x.x[1],i[2]=x.x[2],o[0]=x.pCoords[0],o[1]=x.pCoords[1],o[2]=x.pCoords[2]):S&&(s=y,i[0]=g.x[0],i[1]=g.x[1],i[2]=g.x[2],o[0]=1-g.pCoords[0],o[1]=1-g.pCoords[1],o[2]=g.pCoords[2]);break}return s},t.interpolationFunctions=(a,n)=>{const r=1-a[0],i=1-a[1];n[0]=r*i,n[1]=a[0]*i,n[2]=a[0]*a[1],n[3]=r*a[1]},t.evaluateLocation=(a,n,r)=>{const i=[];t.interpolationFunctions(a,r),n[0]=0,n[1]=0,n[2]=0;for(let o=0;o<4;o++){e.points.getPoint(o,i);for(let s=0;s<3;s++)n[s]+=i[s]*r[o]}}}const $4={};function Np(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$4,a),xr.extend(t,e,a),W4(t,e)}var H4={newInstance:V.newInstance(Np,"vtkQuad"),extend:Np};const{vtkErrorMacro:Rp}=V;function Lp(t){return()=>Rp(`vtkTriangleStrip.${t} - NOT IMPLEMENTED`)}function K4(t,e){if(!Array.isArray(t)||t.length<3){Rp("decomposeStrip - Invalid points array");return}let a=t[0],n=t[1];for(let r=0;r<t.length-2;r++){const i=t[r+2];r%2?e.insertNextCell([n,a,i]):e.insertNextCell([a,n,i]),a=n,n=i}}const X4={decomposeStrip:K4};function q4(t,e){e.classHierarchy.push("vtkTriangleStrip");const a=t.initialize;t.initialize=(n,r)=>{e.triangle.initialize(n,r),a(n,r)},t.getCellType=()=>$e.VTK_TRIANGLE_STRIP,t.getCellDimension=()=>2,t.getNumberOfEdges=()=>e.pointsIds.length,t.getNumberOfFaces=()=>0,t.evaluatePosition=(n,r,i,o,s)=>{const c=[0,0,0];let l=Number.MAX_VALUE,p=0;const u=[],f=[],h=[];i[2]=0,f[0]=0,f[1]=0,f[2]=0;const d=e.triangle.getPoints();d.setNumberOfPoints(3);const m=e.triangle.getPointsIds().length;for(let x=0;x<m;x++)s[x]=0;for(let x=0;x<m-2;x++){const y=[];d.getPoint(x,y);const g=[];d.getPoint(x+1,g);const C=[];d.getPoint(x+2,C),d.setData(Float32Array.from([...y,...g,...C]),3);const S=e.triangle.evaluatePosition(n,h,c,u),T=S.dist2;S.evaluation>=0&&(T<l||T===l&&p===0)&&(p=S,r&&(r[0]=h[0],r[1]=h[1],r[2]=h[2]),i[0]=c[0],i[1]=c[1],l=T,f[0]=u[0],f[1]=u[1],f[2]=u[2])}return o[0]=l,s[0]=f[0],s[1]=f[1],s[2]=f[2],p},t.evaluateLocation=(n,r,i,o)=>{const s=[[0,1,2],[1,0,2]],c=n%2,l=e.pointsIds.length;for(let d=0;d<l;d++)o[d]=0;const p=1-r[0]-r[1];o[n]=p,o[n+1]=r[0],o[n+2]=r[1];const u=[];e.points.getPoint(n+s[c][0],u);const f=[];e.points.getPoint(n+s[c][1],f);const h=[];e.points.getPoint(n+s[c][2],h);for(let d=0;d<3;d++)i[d]=u[d]*o[n]+f[d]*o[n+1]+h[d]*o[n+2]},t.cellBoundary=(n,r,i)=>{const o=[[0,1,2],[1,0,2]],s=n%2,c=e.triangle.getPointsIds();return c[0]=e.pointsIds[o[s][0]],c[1]=e.pointsIds[o[s][1]],c[2]=e.pointsIds[o[s][2]],e.triangle.cellBoundary(0,r,i)},t.getEdge=n=>{let r,i;const o=e.pointsIds.length;return n===0?(r=0,i=1):n===o-1?(r=n-1,i=n):(r=n-1,i=n+1),e.line.getPointsIds()[0]=e.pointsIds[r],e.line.getPointsIds()[1]=e.pointsIds[i],e.line.getPoints().setPoint(0,e.points.getPoint(r)),e.line.getPoints().setPoint(1,e.points.getPoint(i)),e.line},t.intersectWithLine=(n,r,i,o,s)=>{const c=e.pointsIds.length-2,l=e.triangle.getPoints();l.setNumberOfPoints(3);for(let p=0;p<c;p++){const u=[];e.points.getPoint(e.pointsIds[p],u);const f=[];e.points.getPoint(e.pointsIds[p+1],f);const h=[];e.points.getPoint(e.pointsIds[p+2],h),l.setData(Float32Array.from([...u,...f,...h]),3);const d=e.triangle.intersectWithLine(n,r,i,o,s);if(d.intersect)return d}return!1},t.triangulate=()=>{const n=e.points.getNumberOfPoints()-2;e.tris=new Array(3*n);const r=[[0,1,2],[1,0,2]];for(let i=0;i<n;i++){const o=i%2;for(let s=0;s<3;s++)e.tris[i*3+s]=i+r[o][s]}return!0},t.getPointArray=()=>e.tris,t.derivatives=(n,r,i,o,s)=>{const c=[];e.points.getPoint(n,c);const l=[];e.points.getPoint(n+1,l);const p=[];e.points.getPoint(n+2,p);const u=e.triangle.getPoints();u.setPoint(0,...c),u.setPoint(1,...l),u.setPoint(2,...p),e.triangle.derivatives(0,r,i,o,s)},t.getParametricCenter=n=>(n[0]=.333333,n[1]=.333333,n[2]=0,Math.floor((e.pointsIds.length-2)/2)),t.contour=(n,r,i,o,s,c,l,p,u,f,h)=>Lp("contour")(),t.clip=(n,r,i,o,s,c,l,p,u,f)=>Lp("clip")()}const Y4={line:null,triangle:null,tris:null};function Fp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y4,a),xr.extend(t,e,a),e.line||(e.line=Ot.newInstance()),e.triangle||(e.triangle=V0.newInstance()),q4(t,e)}var J4={newInstance:V.newInstance(Fp,"vtkTriangleStrip"),extend:Fp,...X4};const Qr=["verts","lines","polys","strips"],{vtkWarningMacro:kp}=V,Z4={[$e.VTK_LINE]:Ot,[$e.VTK_QUAD]:H4,[$e.VTK_POLY_LINE]:Ot,[$e.VTK_TRIANGLE]:V0,[$e.VTK_TRIANGLE_STRIP]:J4,[$e.VTK_POLY_LINE]:O4,[$e.VTK_POLYGON]:G4};function Q4(t,e){e.classHierarchy.push("vtkPolyData");function a(s){return s.replace(/(?:^\w|[A-Z]|\b\w)/g,c=>c.toUpperCase()).replace(/\s+/g,"")}function n(){e.cells=void 0,e.links=void 0}Qr.forEach(s=>{t[`getNumberOf${a(s)}`]=()=>e[s].getNumberOfCells(),e[s]?e[s]=wt(e[s]):e[s]=jn.newInstance(),e[`_on${a(s)}Changed`]=n}),t.getNumberOfCells=()=>Qr.reduce((s,c)=>s+e[c].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(s,c),Qr.forEach(l=>{e[l]=jn.newInstance(),e[l].shallowCopy(s.getReferenceByName(l))})};const i=t.getMTime;t.getMTime=()=>Qr.reduce((s,c)=>{var l;return Math.max(s,((l=e[c])==null?void 0:l.getMTime())??s)},i());const o=t.initialize;t.initialize=()=>(Qr.forEach(s=>{var c;return(c=e[s])==null?void 0:c.initialize()}),n(),o()),t.buildCells=()=>{const s=t.getNumberOfVerts(),c=t.getNumberOfLines(),l=t.getNumberOfPolys(),p=t.getNumberOfStrips(),u=s+c+l+p,f=new Uint8Array(u);let h=f;const d=new Uint32Array(u);let v=d;if(s){let m=0;e.verts.getCellSizes().forEach((x,y)=>{v[y]=m,h[y]=x>1?$e.VTK_POLY_VERTEX:$e.VTK_VERTEX,m+=x+1}),v=v.subarray(s),h=h.subarray(s)}if(c){let m=0;e.lines.getCellSizes().forEach((x,y)=>{v[y]=m,h[y]=x>2?$e.VTK_POLY_LINE:$e.VTK_LINE,x===1&&kp("Building VTK_LINE ",y," with only one point, but VTK_LINE needs at least two points. Check the input."),m+=x+1}),v=v.subarray(c),h=h.subarray(c)}if(l){let m=0;e.polys.getCellSizes().forEach((x,y)=>{switch(v[y]=m,x){case 3:h[y]=$e.VTK_TRIANGLE;break;case 4:h[y]=$e.VTK_QUAD;break;default:h[y]=$e.VTK_POLYGON;break}x<3&&kp("Building VTK_TRIANGLE ",y," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),m+=x+1}),v+=v.subarray(l),h+=h.subarray(l)}if(p){let m=0;h.fill($e.VTK_TRIANGLE_STRIP,0,p),e.strips.getCellSizes().forEach((x,y)=>{v[y]=m,m+=x+1})}e.cells=m4.newInstance(),e.cells.setCellTypes(u,f,d)},t.buildLinks=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells==null&&t.buildCells(),e.links=l4.newInstance(),s>0?e.links.allocate(s):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=s=>e.cells.getCellType(s),t.getCellPoints=s=>{const c=t.getCellType(s);let l=null;switch(c){case $e.VTK_VERTEX:case $e.VTK_POLY_VERTEX:l=e.verts;break;case $e.VTK_LINE:case $e.VTK_POLY_LINE:l=e.lines;break;case $e.VTK_TRIANGLE:case $e.VTK_QUAD:case $e.VTK_POLYGON:l=e.polys;break;case $e.VTK_TRIANGLE_STRIP:l=e.strips;break;default:return l=null,{type:0,cellPointIds:null}}const p=e.cells.getCellLocation(s),u=l.getCell(p);return{cellType:c,cellPointIds:u}},t.getPointCells=s=>e.links.getCells(s),t.getCellEdgeNeighbors=(s,c,l)=>{const p=e.links.getLink(c),u=e.links.getLink(l);return p.cells.filter(f=>f!==s&&u.cells.indexOf(f)!==-1)},t.getCell=function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const l=t.getCellPoints(s),p=c||Z4[l.cellType].newInstance();return p.initialize(t.getPoints(),l.cellPointIds),p},t.getMaxCellSize=()=>Qr.reduce((s,c)=>{var l,p;return Math.max(s,((p=(l=e[c])==null?void 0:l.getMaxCellSize)==null?void 0:p.call(l))??0)},0)}const e9={};function Vp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e9,a),_4.extend(t,e,a),V.get(t,e,["cells","links"]),V.setGet(t,e,["verts","lines","polys","strips"]),Q4(t,e)}var Xe={newInstance:V.newInstance(Vp,"vtkPolyData"),extend:Vp};function t9(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=a=>{e.jsImageData!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.imageBitmap=null),e.jsImageData=a,e.imageLoaded=!0,t.modified())},t.setImageBitmap=a=>{e.imageBitmap!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.jsImageData=null),e.imageBitmap=a,e.imageLoaded=!0,t.modified())},t.setCanvas=a=>{e.canvas!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.imageBitmap=null,e.jsImageData=null),e.canvas=a,t.modified())},t.setImage=a=>{e.image!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null,e.imageBitmap=null),e.image=a,e.imageLoaded=!1,a.complete?t.imageLoaded():a.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let a=0,n=0,r=1;if(t.getInputData()){const o=t.getInputData();a=o.getDimensions()[0],n=o.getDimensions()[1],r=o.getDimensions()[2]}return e.jsImageData&&(a=e.jsImageData.width,n=e.jsImageData.height),e.canvas&&(a=e.canvas.width,n=e.canvas.height),e.image&&(a=e.image.width,n=e.image.height),e.imageBitmap&&(a=e.imageBitmap.width,n=e.imageBitmap.height),(a>1)+(n>1)+(r>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData;if(e.imageBitmap)return e.imageBitmap;if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const a=e.image.width,n=e.image.height,i=new OffscreenCanvas(a,n).getContext("2d");return i.translate(0,n),i.scale(1,-1),i.drawImage(e.image,0,0,a,n),i.getImageData(0,0,a,n)}return null}}const n9=(t,e,a)=>{const n=`
    @group(0) @binding(0) var inputTexture: texture_2d<f32>;
    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;

    @compute @workgroup_size(8, 8)
    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
      let texelCoord = vec2<i32>(global_id.xy);
      let outputSize = textureDimensions(outputTexture);

      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {
        return;
      }

      let inputSize = textureDimensions(inputTexture);
      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);

      // Compute the floating-point source coordinate
      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;

      // Get integer coordinates for the four surrounding texels
      let x0 = i32(floor(srcCoord.x));
      let x1 = min(x0 + 1, i32(inputSize.x) - 1);
      let y0 = i32(floor(srcCoord.y));
      let y1 = min(y0 + 1, i32(inputSize.y) - 1);

      // Compute the weights
      let wx = srcCoord.x - f32(x0);
      let wy = srcCoord.y - f32(y0);

      // Fetch the four texels
      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);
      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);
      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);
      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);

      // Bilinear interpolation
      let color = mix(
        mix(c00, c10, wx),
        mix(c01, c11, wx),
        wy
      );

      textureStore(outputTexture, texelCoord, color);
    }
  `,r=t.createShaderModule({code:n}),i=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),o=t.createPipelineLayout({bindGroupLayouts:[i]}),s=t.createComputePipeline({label:"ComputeMipmapPipeline",layout:o,compute:{module:r,entryPoint:"main"}}),c=t.createSampler({magFilter:"linear",minFilter:"linear"});for(let l=1;l<a;l++){const p=e.createView({baseMipLevel:l-1,mipLevelCount:1}),u=e.createView({baseMipLevel:l,mipLevelCount:1}),f=t.createBindGroup({layout:s.getBindGroupLayout(0),entries:[{binding:0,resource:p},{binding:1,resource:u},{binding:2,resource:c}]}),h=t.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),d=h.beginComputePass();d.setPipeline(s),d.setBindGroup(0,f);const v=Math.max(1,e.width>>l),m=Math.max(1,e.height>>l),x=Math.ceil(v/8),y=Math.ceil(m/8);d.dispatchWorkgroups(x,y),d.end(),t.queue.submit([h.finish()])}},r9={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function Ap(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r9,a),V.obj(t,e),V.algo(t,e,6,0),V.get(t,e,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),V.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),t9(t,e)}var A0={newInstance:V.newInstance(Ap,"vtkTexture"),extend:Ap,...{generateMipmaps:n9}};const a9=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Bp=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],So=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Up=[0,1,0,1,0,1,0,1,2,2,2,2],rt=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],be=new Float64Array(3),To=new Float64Array(3),qe=new Float64Array(3),Sr=new Float64Array(3),Tr=new Float64Array(3),wo=new Float64Array(3),B0=new Float64Array(16);function U0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function Gp(t){const e=[],a=[];for(let n=0;n<3;n++){const r=Gs().domain([t[n*2],t[n*2+1]]);e[n]=r.ticks(5);const i=r.tickFormat(5);a[n]=e[n].map(i)}return{ticks:e,tickStrings:a}}function i9(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=a=>{e.renderable!==a&&(e.renderable=a,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),t.modified())},t.createPolyDataForOneLabel=(a,n,r,i,o,s,c)=>{const l=e.renderable.get_tmAtlas().get(a);if(!l)return;const p=e.renderable.getTextPolyData().getPoints().getData(),u=e.lastSize;be[0]=p[n*3],be[1]=p[n*3+1],be[2]=p[n*3+2],_e(qe,be,r),qe[0]+=.1,_e(To,qe,i),sn(Tr,To,be),qe[0]-=.1,qe[1]+=.1,_e(To,qe,i),sn(wo,To,be);for(let d=0;d<3;d++)Tr[d]/=.5*.1*u[0],wo[d]/=.5*.1*u[1];let f=c.ptIdx,h=c.cellIdx;be[0]=p[n*3],be[1]=p[n*3+1],be[2]=p[n*3+2],o[0]<-.5?Kt(qe,Tr,o[0]*s-l.width):o[0]>.5?Kt(qe,Tr,o[0]*s):Kt(qe,Tr,o[0]*s-l.width/2),Ti(be,be,qe),Kt(qe,wo,o[1]*s-l.height/2),Ti(be,be,qe),c.points[f*3]=be[0],c.points[f*3+1]=be[1],c.points[f*3+2]=be[2],c.tcoords[f*2]=l.tcoords[0],c.tcoords[f*2+1]=l.tcoords[1],f++,Kt(qe,Tr,l.width),Ti(be,be,qe),c.points[f*3]=be[0],c.points[f*3+1]=be[1],c.points[f*3+2]=be[2],c.tcoords[f*2]=l.tcoords[2],c.tcoords[f*2+1]=l.tcoords[3],f++,Kt(qe,wo,l.height),Ti(be,be,qe),c.points[f*3]=be[0],c.points[f*3+1]=be[1],c.points[f*3+2]=be[2],c.tcoords[f*2]=l.tcoords[4],c.tcoords[f*2+1]=l.tcoords[5],f++,Kt(qe,Tr,l.width),sn(be,be,qe),c.points[f*3]=be[0],c.points[f*3+1]=be[1],c.points[f*3+2]=be[2],c.tcoords[f*2]=l.tcoords[6],c.tcoords[f*2+1]=l.tcoords[7],f++,c.polys[h*4]=3,c.polys[h*4+1]=f-4,c.polys[h*4+2]=f-3,c.polys[h*4+3]=f-2,h++,c.polys[h*4]=3,c.polys[h*4+1]=f-4,c.polys[h*4+2]=f-2,c.polys[h*4+3]=f-1,c.ptIdx+=4,c.cellIdx+=2},t.updateTexturePolyData=()=>{const a=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);We(a,a);const n=e.renderable.getTextValues().length,r=n*4,i=n*2,o=new Float64Array(r*3),s=new Uint16Array(i*4),c=new Float32Array(r*2);Et(B0,a);const l={ptIdx:0,cellIdx:0,polys:s,points:o,tcoords:c};let p=0,u=0,f=0;const h=e.renderable.getTextPolyData().getPoints().getData(),d=e.renderable.getTextValues();for(;p<h.length/3;){be[0]=h[p*3],be[1]=h[p*3+1],be[2]=h[p*3+2],_e(qe,be,a),be[0]=h[p*3+3],be[1]=h[p*3+4],be[2]=h[p*3+5],_e(Sr,be,a),sn(qe,qe,Sr);const m=[qe[0],qe[1]];Ll(m),t.createPolyDataForOneLabel(d[u],p,a,B0,m,e.renderable.getAxisTitlePixelOffset(),l),p+=2,u++;for(let x=0;x<e.renderable.getTickCounts()[f];x++)t.createPolyDataForOneLabel(d[u],p,a,B0,m,e.renderable.getTickLabelPixelOffset(),l),p++,u++;f++}const v=pe.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(v),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(s,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(a,n,r)=>{(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0),e.camera=n,t.updateTexturePolyData()}}const o9=V.newInstance(function(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},a),V.obj(t,e),e.tmPolyData=Xe.newInstance(),e.tmMapper=gn.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=pn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),V.setGet(t,e,["renderable"]),V.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},V.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],i9(t,e)},"vtkCubeAxesActorHelper");function s9(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=n=>{e.camera!==n&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=n,n&&(e.cameraModifiedSub=n.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const n=e.camera.getViewMatrix();We(n,n);let r=!1;const i=we.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let s=0;s<6;s++){let c=!1;const l=Math.floor(s/2),p=(l+1)%3,u=(l+2)%3;e.dataBounds[p*2]!==e.dataBounds[p*2+1]&&e.dataBounds[u*2]!==e.dataBounds[u*2+1]&&(be[l]=e.dataBounds[s]-.1*i*a9[s][l],be[p]=.5*(e.dataBounds[p*2]+e.dataBounds[p*2+1]),be[u]=.5*(e.dataBounds[u*2]+e.dataBounds[u*2+1]),_e(qe,be,n),be[l]=e.dataBounds[s],_e(Sr,be,n),sn(qe,Sr,qe),cn(qe,qe),c=qe[2]>o,e.camera.getParallelProjection()||(cn(Sr,Sr),c=_i(Sr,qe)>o)),c!==e.lastFacesToDraw[s]&&(e.lastFacesToDraw[s]=c,r=!0)}return r},t.updatePolyData=(n,r,i)=>{let o=0,s=0;o+=8;let c=0;for(let h=0;h<12;h++)r[h]>0&&c++;if(s+=c,e.gridLines)for(let h=0;h<6;h++)n[h]&&(o+=i[rt[h][0]].length*2+i[rt[h][1]].length*2,s+=i[rt[h][0]].length+i[rt[h][1]].length);const l=new Float64Array(o*3),p=new Uint32Array(s*3);let u=0,f=0;for(let h=0;h<2;h++)for(let d=0;d<2;d++)for(let v=0;v<2;v++)l[u*3]=e.dataBounds[v],l[u*3+1]=e.dataBounds[2+d],l[u*3+2]=e.dataBounds[4+h],u++;for(let h=0;h<12;h++)r[h]>0&&(p[f*3]=2,p[f*3+1]=So[h][0],p[f*3+2]=So[h][1],f++);if(e.gridLines){for(let h=0;h<6;h++)if(n[h]){const d=Math.floor(h/2);let v=i[rt[h][0]];for(let m=0;m<v.length;m++)l[u*3+d]=e.dataBounds[h],l[u*3+rt[h][0]]=v[m],l[u*3+rt[h][1]]=e.dataBounds[rt[h][1]*2],u++,l[u*3+d]=e.dataBounds[h],l[u*3+rt[h][0]]=v[m],l[u*3+rt[h][1]]=e.dataBounds[rt[h][1]*2+1],u++,p[f*3]=2,p[f*3+1]=u-2,p[f*3+2]=u-1,f++;v=i[rt[h][1]];for(let m=0;m<v.length;m++)l[u*3+d]=e.dataBounds[h],l[u*3+rt[h][1]]=v[m],l[u*3+rt[h][0]]=e.dataBounds[rt[h][0]*2],u++,l[u*3+d]=e.dataBounds[h],l[u*3+rt[h][1]]=v[m],l[u*3+rt[h][0]]=e.dataBounds[rt[h][0]*2+1],u++,p[f*3]=2,p[f*3+1]=u-2,p[f*3+2]=u-1,f++}}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(p,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(n,r,i,o)=>{let s=0;for(let h=0;h<12;h++)r[h]===1&&(s+=2,s+=i[Up[h]].length);const c=e.polyData.getPoints().getData(),l=new Float64Array(s*3);let p=0,u=0,f=0;for(let h=0;h<6;h++)if(n[h])for(let d=0;d<4;d++){const v=Bp[h][d];if(r[v]===1){const m=Up[v],x=So[v][0]*3,y=So[v][1]*3;l[p*3]=.5*(c[x]+c[y]),l[p*3+1]=.5*(c[x+1]+c[y+1]),l[p*3+2]=.5*(c[x+2]+c[y+2]),p++;const g=Math.floor(h/2);l[p*3+g]=e.dataBounds[h],l[p*3+rt[h][0]]=.5*(e.dataBounds[rt[h][0]*2]+e.dataBounds[rt[h][0]*2+1]),l[p*3+rt[h][1]]=.5*(e.dataBounds[rt[h][1]*2]+e.dataBounds[rt[h][1]*2+1]),p++,e.textValues[u]=e.axisLabels[m],u++;const C=(m+1)%3,S=(m+2)%3,T=i[m],w=o[m];e.tickCounts[f]=T.length;for(let _=0;_<T.length;_++)l[p*3+m]=T[_],l[p*3+C]=c[x+C],l[p*3+S]=c[x+S],p++,e.textValues[u]=w[_],u++;f++}}e.textPolyData.getPoints().setData(l,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const n=t.computeFacesToDraw(),r=e.lastFacesToDraw;let i=!1;for(let o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(i=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(n||i||e.forceUpdate){const o=new Array(12).fill(0);for(let c=0;c<6;c++)if(r[c])for(let l=0;l<4;l++)o[Bp[c][l]]++;const s=e.generateTicks(e.dataBounds);t.updatePolyData(r,o,s.ticks),t.updateTextData(r,o,s.ticks,s.tickStrings),(i||e.forceUpdate)&&t.updateTextureAtlas(s.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=n=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let r=0,i=1;for(let o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){U0(e.tmContext,e.axisTextStyle);const s=e.tmContext.measureText(e.axisLabels[o]),c={height:s.actualBoundingBoxAscent+2,startingHeight:i,width:s.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],c),i+=c.height,r<c.width&&(r=c.width)}U0(e.tmContext,e.tickTextStyle);for(let s=0;s<n[o].length;s++)if(!e._tmAtlas.has(n[o][s])){const c=e.tmContext.measureText(n[o][s]),l={height:c.actualBoundingBoxAscent+2,startingHeight:i,width:c.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(n[o][s],l),i+=l.height,r<l.width&&(r=l.width)}}r=Pt(r),i=Pt(i),e._tmAtlas.forEach(o=>{o.tcoords=[0,(i-o.startingHeight-o.height)/i,o.width/r,(i-o.startingHeight-o.height)/i,o.width/r,(i-o.startingHeight)/i,0,(i-o.startingHeight)/i]}),e.tmCanvas.width=r,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,r,i),e._tmAtlas.forEach((o,s)=>{U0(e.tmContext,o.textStyle),e.tmContext.fillText(s,1,o.startingHeight+o.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),we.setBounds(e.bounds,e.gridActor.getBounds()),we.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const a=V.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=n=>a(n)[0]}function c9(t,e,a){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...we.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:Gp,...a,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...a==null?void 0:a.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...a==null?void 0:a.tickTextStyle}}}function Ip(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};pn.extend(t,e,c9(t,e,a)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=A0.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=gn.newInstance(),e.polyData=Xe.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=pn.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=Xe.newInstance(),V.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),V.setGetArray(t,e,["dataBounds"],6),V.setGetArray(t,e,["axisLabels"],3),V.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),s9(t,e)}var G0={newInstance:V.newInstance(Ip,"vtkCubeAxesActor"),extend:Ip,newCubeAxesActorHelper:o9,defaultGenerateTicks:Gp};function u9(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(a,n)=>{if(a){const r=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],r,e._openGLRenderWindow.getRenderable())}}}const l9={};function f9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,l9,a),Ct.extend(t,e,a),e.CubeAxesActorHelper=G0.newCubeAxesActorHelper(),u9(t,e)}const p9=Je(f9,"vtkOpenGLCubeAxesActor");st("vtkCubeAxesActor",p9);const Dn={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var Pp={ObjectType:Dn};const{ObjectType:_o}=Pp,h9={};function g9(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function a(s){switch(s){case _o.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case _o.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case _o.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let n=null,r=null,i=!0,o="";t.getType=()=>n,t.setType=s=>{n=s},t.getHandle=()=>r,t.isReady=()=>i===!1,t.generateBuffer=s=>{const c=a(s);return r===null&&(r=e.context.createBuffer(),n=s),a(n)===c},t.upload=(s,c)=>t.generateBuffer(c)?(e.context.bindBuffer(a(n),r),e.context.bufferData(a(n),s,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=s.length*s.BYTES_PER_ELEMENT,i=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>r?(e.context.bindBuffer(a(n),r),!0):!1,t.release=()=>r?(e.context.bindBuffer(a(n),null),!0):!1,t.releaseGraphicsResources=()=>{r!==null&&(e.context.bindBuffer(a(n),null),e.context.deleteBuffer(r),r=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=s=>{e._openGLRenderWindow!==s&&(t.releaseGraphicsResources(),e._openGLRenderWindow=s,e.context=null,s&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>o}const d9={objectType:_o.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function zp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d9,a),V.obj(t,e),V.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),V.moveToProtected(t,e,["openGLRenderWindow"]),g9(t,e)}var On={newInstance:V.newInstance(zp),extend:zp,...h9,...Pp};function I0(t){let e=0,a=0;for(let r=0;r<3;++r){const i=t.getRange(r),o=i[1]-i[0];e+=o*o;const s=.5*(i[1]+i[0]);a+=s*s}const n=e>0&&(Math.abs(a)/e>1e6||Math.abs(Math.log10(e))>3||e===0&&a>1e6);if(n){const r=new Float64Array(3),i=new Float64Array(3);for(let o=0;o<3;++o){const s=t.getRange(o),c=s[1]-s[0];r[o]=.5*(s[1]+s[0]),i[o]=c>0?1/c:1}return{useShiftAndScale:n,coordShift:r,coordScale:i}}return{useShiftAndScale:n,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}function jp(t,e){const a=new Float64Array(3);wi(a,e);const n=new Float64Array(16);return Zc(n,Bn(),t,a),n}const{vtkErrorMacro:Wp}=V;function v9(t,e){return t===null||e===null?!1:!(ma(t,[0,0,0])&&ma(e,[1,1,1]))}function y9(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(Dn.ARRAY_BUFFER),t.createVBO=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!a.getData()||!a.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const s=i.points.getData();let c=null,l=null,p=null;const u=i.colors?i.colors.getNumberOfComponents():0,f=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,c=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(k=>{k&&(e.customData.push({data:k.getData(),offset:4*e.blockSize,components:k.getNumberOfComponents(),name:k.getName()}),e.blockSize+=k.getNumberOfComponents())}),i.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=f,e.blockSize+=f,l=i.tcoords.getData()),i.colors?(e.colorComponents=i.colors.getNumberOfComponents(),e.colorOffset=0,p=i.colors.getData(),e.colorBO||(e.colorBO=On.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let h=0,d=0,v=0,m=0,x=0,y=0,g;const C={anythingToPoints(k,A,j,H){for(let K=0;K<k;++K)g(A[j+K],H)},linesToWireframe(k,A,j,H){for(let K=0;K<k-1;++K)g(A[j+K],H),g(A[j+K+1],H)},polysToWireframe(k,A,j,H){if(k>2)for(let K=0;K<k;++K)g(A[j+K],H),g(A[j+(K+1)%k],H)},stripsToWireframe(k,A,j,H){if(k>2){for(let K=0;K<k-1;++K)g(A[j+K],H),g(A[j+K+1],H);for(let K=0;K<k-2;K++)g(A[j+K],H),g(A[j+K+2],H)}},polysToSurface(k,A,j,H){for(let K=0;K<k-2;K++)g(A[j+0],H),g(A[j+K+1],H),g(A[j+K+2],H)},stripsToSurface(k,A,j,H){for(let K=0;K<k-2;K++)g(A[j+K],H),g(A[j+K+1+K%2],H),g(A[j+K+1+(K+1)%2],H)}},S={anythingToPoints(k,A){return k},linesToWireframe(k,A){return k>1?(k-1)*2:0},polysToWireframe(k,A){return k>2?k*2:0},stripsToWireframe(k,A){return k>2?k*4-6:0},polysToSurface(k,A){return k>2?(k-2)*3:0},stripsToSurface(k,A,j){return k>2?(k-2)*3:0}};let T=null,w=null;r===Jt.POINTS||n==="verts"?(T=C.anythingToPoints,w=S.anythingToPoints):r===Jt.WIREFRAME||n==="lines"?(T=C[`${n}ToWireframe`],w=S[`${n}ToWireframe`]):(T=C[`${n}ToSurface`],w=S[`${n}ToSurface`]);const _=a.getData(),E=_.length;let D=0;for(let k=0;k<E;)D+=w(_[k],_),k+=_[k]+1;let O=null;const M=new Float32Array(D*e.blockSize);p&&(O=new Uint8Array(D*4));let N=0,R=0;const{useShiftAndScale:B,coordShift:I,coordScale:P}=I0(i.points);if(B?t.setCoordShiftAndScale(I,P):e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null),o)if(!o.points&&!o.cells)o.points=new Int32Array(D),o.cells=new Int32Array(D);else{const k=new Int32Array(D+o.points.length);k.set(o.points),o.points=k;const A=new Int32Array(D+o.cells.length);A.set(o.cells),o.cells=A}let L=i.vertexOffset;g=function(A,j){if(o&&(o.points[L]=A,o.cells[L]=y+i.cellOffset),++L,h=A*3,e.coordShiftAndScaleEnabled?(M[N++]=(s[h++]-e.coordShift[0])*e.coordScale[0],M[N++]=(s[h++]-e.coordShift[1])*e.coordScale[1],M[N++]=(s[h++]-e.coordShift[2])*e.coordScale[2]):(M[N++]=s[h++],M[N++]=s[h++],M[N++]=s[h++]),c!==null&&(i.haveCellNormals?d=(y+i.cellOffset)*3:d=A*3,M[N++]=c[d++],M[N++]=c[d++],M[N++]=c[d++]),e.customData.forEach(H=>{x=A*H.components;for(let K=0;K<H.components;++K)M[N++]=H.data[x++]}),l!==null){i.useTCoordsPerCell?v=j*f:v=A*f;for(let H=0;H<f;++H)M[N++]=l[v++]}p!==null&&(i.haveCellScalars?m=(y+i.cellOffset)*u:m=A*u,O[R++]=p[m++],O[R++]=p[m++],O[R++]=p[m++],O[R++]=u===4?p[m++]:255)};for(let k=0;k<E;k+=_[k]+1,y++)T(_[k],_,k+1,y+i.cellOffset);return e.elementCount=D,t.upload(M,Dn.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(O,Dn.ARRAY_BUFFER)),y},t.setCoordShiftAndScale=(a,n)=>{if(a!==null&&(a.constructor!==Float64Array||a.length!==3)){Wp("Wrong type for coordShift, expected vec3 or null");return}if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){Wp("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||a===null||!cu(a,e.coordShift))&&(e.coordShift=a),(e.coordScale===null||n===null||!cu(n,e.coordScale))&&(e.coordScale=n),e.coordShiftAndScaleEnabled=v9(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=jp(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const m9={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function $p(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m9,a),On.extend(t,e,a),V.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),V.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),y9(t,e)}var x9={newInstance:V.newInstance($p),extend:$p};const{vtkErrorMacro:C9}=V;function S9(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let a=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":a=e.context.FRAGMENT_SHADER;break;case"Vertex":default:a=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(a),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const r=e.context.getShaderInfoLog(e.handle);return C9(`Error compiling shader '${e.source}': ${r}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const T9={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function Hp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T9,a),V.obj(t,e),V.setGet(t,e,["shaderType","source","error","handle","context"]),S9(t,e)}var P0={newInstance:V.newInstance(Hp,"vtkShader"),extend:Hp};const{vtkErrorMacro:vn}=V;function w9(t,e,a,n){const r=typeof a=="string"?a:a.join(`
`),i=n===!1?e:new RegExp(e,"g"),o=t.replace(i,r);return{replace:o!==r,result:o}}function _9(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(vn(e.error),0):t.link()?(t.setCompiled(!0),1):(vn(`Links failed: ${e.error}`),0):(vn(e.fragmentShader.getSource().split(`
`).map((a,n)=>`${n}: ${a}`).join(`
`)),vn(e.fragmentShader.getError()),0):(vn(e.vertexShader.getSource().split(`
`).map((a,n)=>`${n}: ${a}`).join(`
`)),vn(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=a=>{e.vertexShader.setContext(a),e.fragmentShader.setContext(a),e.geometryShader.setContext(a)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const n=e.context.getProgramInfoLog(e.handle);return vn(`Error linking shader ${n}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;const i=new Float32Array(n);return e.context.uniformMatrix4fv(r,!1,i),!0},t.setUniformMatrix3x3=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;const i=new Float32Array(n);return e.context.uniformMatrix3fv(r,!1,i),!0},t.setUniformf=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1f(r,n),!0)},t.setUniformfv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1fv(r,n),!0)},t.setUniformi=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1i(r,n),!0)},t.setUniformiv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1iv(r,n),!0)},t.setUniform2f=(a,n,r)=>{const i=t.findUniform(a);if(i===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(r===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(i,n,r),!0},t.setUniform2fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform2fv(r,n),!0)},t.setUniform2i=(a,n,r)=>{const i=t.findUniform(a);if(i===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(r===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(i,n,r),!0},t.setUniform2iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform2iv(r,n),!0)},t.setUniform3f=(a,n,r,i)=>{const o=t.findUniform(a);if(o===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,n,r,i),!0},t.setUniform3fArray=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(!Array.isArray(n)||n.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(r,n[0],n[1],n[2]),!0},t.setUniform3fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform3fv(r,n),!0)},t.setUniform3i=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(n,s[0],s[1],s[2]),!0},t.setUniform3iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform3iv(r,n),!0)},t.setUniform4f=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(n,s[0],s[1],s[2],s[3]),!0},t.setUniform4fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform4fv(r,n),!0)},t.setUniform4i=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(n,s[0],s[1],s[2],s[3]),!0},t.setUniform4iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform4iv(r,n),!0)},t.findUniform=a=>{if(!a||!e.linked)return-1;let n=e.uniformLocs[a];return n!==void 0?n:(n=e.context.getUniformLocation(e.handle,a),n===null?(e.error=`Uniform ${a} not found in current shader program.`,e.uniformLocs[a]=-1,-1):(e.uniformLocs[a]=n,n))},t.isUniformUsed=a=>{if(!a)return!1;let n=e.uniformLocs[a];return n!==void 0?n!==null:e.linked?(n=e.context.getUniformLocation(e.handle,a),e.uniformLocs[a]=n,n!==null):(vn("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=a=>{if(!a)return!1;if(a in e.attributeLocs)return!0;if(!e.linked)return vn("attempt to find uniform when the shader program is not linked"),!1;const n=e.context.getAttribLocation(e.handle,a);return n===-1?!1:(e.attributeLocs[a]=n,!0)},t.attachShader=a=>{if(a.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(a.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const n=e.context.createProgram();if(n===0)return e.error="Could not create shader program.",!1;e.handle=n,e.linked=!1}return a.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=a.getHandle()),a.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=a.getHandle()),e.context.attachShader(e.handle,a.getHandle()),t.setLinked(!1),!0},t.detachShader=a=>{if(a.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(a.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),a.getShaderType()){case"Vertex":return e.vertexShaderHandle!==a.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,a.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==a.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,a.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=a=>{e.context=a,e.vertexShader.setContext(a),e.fragmentShader.setContext(a),e.geometryShader.setContext(a)},t.setLastCameraMTime=a=>{e.lastCameraMTime=a}}const E9={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function Kp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E9,a),e.attributesLocs={},e.uniformLocs={},e.vertexShader=P0.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=P0.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=P0.newInstance(),e.geometryShader.setShaderType("Geometry"),V.obj(t,e),V.get(t,e,["lastCameraMTime"]),V.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),_9(t,e)}var Q={newInstance:V.newInstance(Kp,"vtkShaderProgram"),extend:Kp,substitute:w9};function D9(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const a=e.context;for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];e.context.bindBuffer(a.ARRAY_BUFFER,r.buffer);for(let i=0;i<r.attributes.length;++i){const o=r.attributes[i],s=o.isMatrix?o.size:1;for(let c=0;c<s;++c)a.enableVertexAttribArray(o.index+c),a.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,1):a.vertexAttribDivisor(o.index+c,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const a=e.context;for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];e.context.bindBuffer(a.ARRAY_BUFFER,r.buffer);for(let i=0;i<r.attributes.length;++i){const o=r.attributes[i],s=o.isMatrix?o.size:1;for(let c=0;c<s;++c)a.enableVertexAttribArray(o.index+c),a.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,0):a.vertexAttribDivisor(o.index+c,0)),a.disableVertexAttribArray(o.index+c)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(a,n,r,i,o,s,c,l)=>t.addAttributeArrayWithDivisor(a,n,r,i,o,s,c,l,0,!1),t.addAttributeArrayWithDivisor=(a,n,r,i,o,s,c,l,p,u)=>{if(!a||!a.isBound()||n.getHandle()===0||n.getType()!==Dn.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=a.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==a.getHandle()))return!1;const f=e.context,h={};if(h.name=r,h.index=f.getAttribLocation(e.handleProgram,r),h.offset=i,h.stride=o,h.type=s,h.size=c,h.normalize=l,h.isMatrix=u,h.divisor=p,h.Index===-1)return!1;if(n.bind(),f.enableVertexAttribArray(h.index),f.vertexAttribPointer(h.index,h.size,h.type,h.normalize,h.stride,h.offset),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h.index,1):f.vertexAttribDivisor(h.index,1)),h.buffer=n.getHandle(),!e.supported){let d=!1;for(let v=0;v<e.buffers.length;++v){const m=e.buffers[v];if(m.buffer===h.buffer){d=!0;let x=!1;for(let y=0;y<m.attributes.length;++y)m.attributes[y].name===r&&(x=!0,m.attributes[y]=h);x||m.attributes.push(h)}}d||e.buffers.push({buffer:h.buffer,attributes:[h]})}return!0},t.addAttributeMatrixWithDivisor=(a,n,r,i,o,s,c,l,p)=>{const u=t.addAttributeArrayWithDivisor(a,n,r,i,o,s,c,l,p,!0);if(!u)return u;const f=e.context,h=f.getAttribLocation(e.handleProgram,r);for(let d=1;d<c;d++)f.enableVertexAttribArray(h+d),f.vertexAttribPointer(h+d,c,s,l,o,i+o*d/c),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h+d,1):f.vertexAttribDivisor(h+d,1));return!0},t.removeAttributeArray=a=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];for(let i=0;i<r.attributes.length;++i)if(r.attributes[i].name===a)return r.attributes.splice(i,1),r.attributes.length||e.buffers.splice(n,1),!0}return!0},t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))}}const O9={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function Xp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O9,a),e.buffers=[],V.obj(t,e),V.get(t,e,["supported"]),V.setGet(t,e,["forceEmulation"]),D9(t,e)}var ja={newInstance:V.newInstance(Xp,"vtkOpenGLVertexArrayObject"),extend:Xp};const yn={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function b9(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=a=>{e.context=a.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(a),e.CABO.setOpenGLRenderWindow(a)},t.releaseGraphicsResources=a=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(a,n,r,i)=>{if(e.CABO.getElementCount()){const o=t.getOpenGLMode(r),s=t.haveWideLines(a,n),c=e.context,l=c.getParameter(c.DEPTH_WRITEMASK);e.pointPicking&&c.depthMask(!1),o===c.LINES&&s?(t.updateShaders(a,n,i),c.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(n.getProperty().getLineWidth()))):(c.lineWidth(n.getProperty().getLineWidth()),t.updateShaders(a,n,i),c.drawArrays(o,0,e.CABO.getElementCount()),c.lineWidth(1));const u=(o===c.POINTS?1:0)||(o===c.LINES?2:3);return e.pointPicking&&c.depthMask(l),e.CABO.getElementCount()/u}return 0},t.getOpenGLMode=a=>{if(e.pointPicking)return e.context.POINTS;const n=e.primitiveType;return a===Jt.POINTS||n===yn.Points?e.context.POINTS:a===Jt.WIREFRAME||n===yn.Lines||n===yn.TrisEdges||n===yn.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(a,n)=>n.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=n.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(a,n,r)=>!!(r.getNeedToRebuildShaders(t,a,n)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<r.getMTime()||t.getShaderSourceTime().getMTime()<n.getMTime()),t.updateShaders=(a,n,r)=>{if(t.getNeedToRebuildShaders(a,n,r)){const i={Vertex:null,Fragment:null,Geometry:null};r.buildShaders(i,a,n);const o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),r.setMapperShaderParameters(t,a,n),r.setPropertyShaderParameters(t,a,n),r.setCameraShaderParameters(t,a,n),r.setLightingShaderParameters(t,a,n),r.invokeShaderCallbacks(t,a,n)},t.setMapperShaderParameters=(a,n,r)=>{if(t.haveWideLines(a,n)){t.getProgram().setUniform2f("viewportSize",r.usize,r.vsize);const i=parseFloat(n.getProperty().getLineWidth()),o=i/2;t.getProgram().setUniformf("lineWidthStepSize",i/Math.ceil(i)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===yn.Points||n.getProperty().getRepresentation()===Jt.POINTS?t.getProgram().setUniformf("pointSize",n.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(a,n,r)=>{let i=a.Vertex;i=Q.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,i=Q.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(r.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(n,r)&&(i=Q.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,i=Q.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),a.Vertex=i},t.getPointPickingPrimitiveSize=()=>e.primitiveType===yn.Points?2:e.primitiveType===yn.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const M9={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function qp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M9,a),V.obj(t,e),e.shaderSourceTime={},V.obj(e.shaderSourceTime),e.attributeUpdateTime={},V.obj(e.attributeUpdateTime),V.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=Q.newInstance(),e.VAO=ja.newInstance(),e.CABO=x9.newInstance(),b9(t,e)}var jt={newInstance:V.newInstance(qp),extend:qp,primTypes:yn};const Wa={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},me={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Yp={Wrap:Wa,Filter:me};const Jp=new Float32Array(1),N9=new Int32Array(Jp.buffer);function R9(t){Jp[0]=t;const e=N9[0];let a=e>>16&32768,n=e>>12&2047;const r=e>>23&255;return r<103?a:r>142?(a|=31744,a|=(r===255?0:1)&&e&8388607,a):r<113?(n|=2048,a|=(n>>114-r)+(n>>113-r&1),a):(a|=r-112<<10|n>>1,a+=n&1,a)}function L9(t){const e=(t&32768)>>15,a=(t&31744)>>10,n=t&1023;return a===0?(e?-1:1)*2**-14*(n/2**10):a===31?n?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(a-15)*(1+n/2**10)}var ea={fromHalf:L9,toHalf:R9};function F9(){try{const n=new Int16Array([0,32767]),r=[1,1],i=document.createElement("canvas");i.width=4,i.height=4;const o=i.getContext("webgl2");if(!o)return!1;const s=o.getExtension("EXT_texture_norm16");if(!s)return!1;const c=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,l=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,p=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(p,c),o.compileShader(p),!o.getShaderParameter(p,o.COMPILE_STATUS))return!1;const u=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(u,l),o.compileShader(u),!o.getShaderParameter(u,o.COMPILE_STATUS))return!1;const f=o.createProgram();if(o.attachShader(f,p),o.attachShader(f,u),o.linkProgram(f),!o.getProgramParameter(f,o.LINK_STATUS))return!1;const h=o.createTexture();o.bindTexture(o.TEXTURE_2D,h),o.texImage2D(o.TEXTURE_2D,0,s.R16_SNORM_EXT,2,1,0,o.RED,o.SHORT,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.useProgram(f),o.drawArrays(o.POINTS,0,1);const d=new Uint8Array(4);o.readPixels(r[0],r[1],1,1,o.RGBA,o.UNSIGNED_BYTE,d);const[v,m,x]=d,y=o.getExtension("WEBGL_lose_context");return y&&y.loseContext(),v===m&&m===x&&v!==0}catch{return!1}}let z0;function k9(){return z0===void 0&&(z0=F9()),z0}const{Wrap:bn,Filter:ht}=Yp,{VtkDataTypes:ke}=pe,{vtkDebugMacro:j0,vtkErrorMacro:wr,vtkWarningMacro:Zp,requiredParam:Ve}=Dt,{toHalf:V9}=ea;function A9(t,e){e.classHierarchy.push("vtkOpenGLTexture");function a(){return{internalFormat:e.internalFormat,format:e.format,openGLDataType:e.openGLDataType,width:e.width,height:e.height}}t.render=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(d?e._openGLRenderWindow=d:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(ht.LINEAR),t.setMagnificationFilter(ht.LINEAR)):(t.setMinificationFilter(ht.NEAREST),t.setMagnificationFilter(ht.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(bn.REPEAT),t.setWrapS(bn.REPEAT),t.setWrapT(bn.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImageBitmap()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR)),e.renderable.getImageBitmap()&&e.renderable.getImageLoaded()&&(t.create2DFromImageBitmap(e.renderable.getImageBitmap()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR));const m=e.renderable.getCanvas();t.create2DFromRaw({width:m.width,height:m.height,numComps:4,dataType:ke.UNSIGNED_CHAR,data:m,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const m=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw({width:m.width,height:m.height,numComps:4,dataType:ke.UNSIGNED_CHAR,data:m.data,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const v=e.renderable.getInputData(0);if(v&&v.getPointData().getScalars()){const m=v.getExtent(),x=v.getPointData().getScalars(),y=[];for(let g=0;g<e.renderable.getNumberOfInputPorts();++g){const C=e.renderable.getInputData(g),S=C?C.getPointData().getScalars().getData():null;S&&y.push(S)}e.renderable.getInterpolate()&&x.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(ht.LINEAR_MIPMAP_LINEAR)),y.length%6===0?t.createCubeFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:x.getNumberOfComponents(),dataType:x.getDataType(),data:y}):t.create2DFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:x.getNumberOfComponents(),dataType:x.getDataType(),data:x.getData()}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const n=()=>{if(!((e.minificationFilter===ht.LINEAR||e.magnificationFilter===ht.LINEAR)&&!k9()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=d=>{d&&e.handle&&(d.activateTexture(t),d.deactivateTexture(t),e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(d),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let d=!1;if(e.context&&e.handle){let v=0;switch(e.target){case e.context.TEXTURE_2D:v=e.context.TEXTURE_BINDING_2D;break;default:Zp("impossible case");break}d=e.context.getIntegerv(v)===e.handle}return d},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(d,v)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(d,v)),e.internalFormat||j0(`Unable to find suitable internal format for T=${d} NC= ${v}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&Zp("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(d,v)=>{let m=0;return m=e._openGLRenderWindow.getDefaultTextureInternalFormat(d,v,n(),t.useHalfFloat()),m||(m||(j0("Unsupported internal texture type!"),j0(`Unable to find suitable internal format for T=${d} NC= ${v}`)),m)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=d=>{e._forceInternalFormat=!0,d!==e.internalFormat&&(e.internalFormat=d,t.modified())},t.getFormat=(d,v)=>(e.format=t.getDefaultFormat(d,v),e.format),t.getDefaultFormat=(d,v)=>{if(e._openGLRenderWindow.getWebgl2())switch(v){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(v){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e._prevTexParams=null,e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=d=>{const v=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(d){case ke.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(n()&&!v&&ke.SHORT):return e.context.SHORT;case(n()&&!v&&ke.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(v&&ke.SHORT):return e.context.HALF_FLOAT;case(v&&ke.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case ke.FLOAT:case ke.VOID:default:return e.context.FLOAT}switch(d){case ke.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case ke.FLOAT:case ke.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const m=e.context.getExtension("OES_texture_half_float");if(m&&e.context.getExtension("OES_texture_half_float_linear"))return m.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(d){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||v)&&(e.openGLDataType=t.getDefaultDataType(d)),e.openGLDataType},t.getShiftAndScale=()=>{let d=0,v=1;switch(e.openGLDataType){case e.context.BYTE:v=127.5,d=v-128;break;case e.context.UNSIGNED_BYTE:v=255,d=0;break;case e.context.SHORT:v=32767.5,d=v-32768;break;case e.context.UNSIGNED_SHORT:v=65536,d=0;break;case e.context.INT:v=21474836475e-1,d=v-2147483648;break;case e.context.UNSIGNED_INT:v=4294967295,d=0;break;case e.context.FLOAT:}return{shift:d,scale:v}},t.getOpenGLFilterMode=d=>{switch(d){case ht.NEAREST:return e.context.NEAREST;case ht.LINEAR:return e.context.LINEAR;case ht.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case ht.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case ht.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case ht.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=d=>{switch(d){case bn.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case bn.REPEAT:return e.context.REPEAT;case bn.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function r(d){const[v,m,x,y,g,C]=d;return[m-v+1,y-x+1,C-g+1]}function i(d){const[v,m,x]=r(d);return v*m*x}function o(d,v,m,x,y){const[g,C,S,T,w,_]=m,[E,D]=v,O=E*D;let M=y;for(let N=w;N<=_;N++){const R=N*O;for(let B=S;B<=T;B++){const I=R+B*E;for(let P=I+g,L=I+C;P<=L;P++,M++)x[M]=d[P]}}}function s(d,v){const x=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||d.constructor,y=v.reduce((T,w)=>T+i(w),0),g=new x(y),C=[e.width,e.height,e.depth];let S=0;return v.forEach(T=>{o(d,C,T,g,S),S+=i(T)}),g}t.updateArrayDataTypeForGL=function(d,v){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const y=[];let g=e.width*e.height*e.components;m&&(g*=e.depth);const C=!!x.length;if(d!==ke.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let T=0;T<v.length;T++)if(v[T])if(C)y.push(s(v[T],x,Float32Array));else{const w=v[T].length>g?v[T].subarray(0,g):v[T];y.push(new Float32Array(w))}else y.push(null);if(d!==ke.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let T=0;T<v.length;T++)if(v[T])if(C)y.push(s(v[T],x,Uint8Array));else{const w=v[T].length>g?v[T].subarray(0,g):v[T];y.push(new Uint8Array(w))}else y.push(null);let S=!1;if(e._openGLRenderWindow.getWebgl2())S=e.openGLDataType===e.context.HALF_FLOAT;else{const T=e.context.getExtension("OES_texture_half_float");S=T&&e.openGLDataType===T.HALF_FLOAT_OES}if(S)for(let T=0;T<v.length;T++)if(v[T]){const w=C?s(v[T],x):v[T],_=new Uint16Array(C?w.length:g),E=_.length;for(let D=0;D<E;D++)_[D]=V9(w[D]);y.push(_)}else y.push(null);if(y.length===0)for(let T=0;T<v.length;T++)y.push(C&&v[T]?s(v[T],x):v[T]);return y};function c(d){if(e._openGLRenderWindow.getWebgl2())return d;const v=[],m=e.width,x=e.height,y=e.components;if(d&&(!Fa(m)||!Fa(x))){const g=e.context.getExtension("OES_texture_half_float"),C=Pt(m),S=Pt(x),T=C*S*e.components;for(let w=0;w<d.length;w++)if(d[w]!==null){let _=null;const E=x/S,D=m/C;let O=!1;e.openGLDataType===e.context.FLOAT?_=new Float32Array(T):g&&e.openGLDataType===g.HALF_FLOAT_OES?(_=new Uint16Array(T),O=!0):_=new Uint8Array(T);for(let M=0;M<S;M++){const N=M*C*y,R=M*E;let B=Math.floor(R),I=Math.ceil(R);I>=x&&(I=x-1);const P=R-B,L=1-P;B=B*m*y,I=I*m*y;for(let k=0;k<C;k++){const A=k*y,j=k*D;let H=Math.floor(j),K=Math.ceil(j);K>=m&&(K=m-1);const Y=j-H;H*=y,K*=y;for(let q=0;q<y;q++)O?_[N+A+q]=ea.toHalf(ea.fromHalf(d[w][B+H+q])*L*(1-Y)+ea.fromHalf(d[w][B+K+q])*L*Y+ea.fromHalf(d[w][I+H+q])*P*(1-Y)+ea.fromHalf(d[w][I+K+q])*P*Y):_[N+A+q]=d[w][B+H+q]*L*(1-Y)+d[w][B+K+q]*L*Y+d[w][I+H+q]*P*(1-Y)+d[w][I+K+q]*P*Y}}v.push(_),e.width=C,e.height=S}else v.push(null)}if(v.length===0)for(let g=0;g<d.length;g++)v.push(d[g]);return v}function l(d){var v;return e._openGLRenderWindow?e.resizable||(v=e.renderable)!=null&&v.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&n()&&(d===ke.UNSIGNED_SHORT||d===ke.SHORT)):!1:!1}t.create2DFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),numComps:m=Ve("numComps"),dataType:x=Ve("dataType"),data:y=Ve("data"),flip:g=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(x,!0),t.getInternalFormat(x,m),t.getFormat(x,m),!e.internalFormat||!e.format||!e.openGLDataType)return wr("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=m,e.width=d,e.height=v,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const C=[y],S=t.updateArrayDataTypeForGL(x,C),T=c(S);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,g),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),l(x)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),T[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,T[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,T[0]),e.generateMipmap&&e.context.generateMipmap(e.target),g&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*m*e._openGLRenderWindow.getDefaultTextureByteSize(x,n(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),numComps:m=Ve("numComps"),dataType:x=Ve("dataType"),data:y=Ve("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(x),t.getInternalFormat(x,m),t.getFormat(x,m),!e.internalFormat||!e.format||!e.openGLDataType)return wr("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=m,e.width=d,e.height=v,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=y.length/6-1,t.createTexture(),t.bind();const g=t.updateArrayDataTypeForGL(x,y),C=c(g),S=[];let T=e.width,w=e.height;for(let _=0;_<C.length;_++){_%6===0&&_!==0&&(T/=2,w/=2),S[_]=ar(x,w*T*e.components);for(let E=0;E<w;++E){const D=E*T*e.components,O=(w-E-1)*T*e.components;S[_].set(C[_].slice(O,O+T*e.components),D)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),l(x)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let _=0;_<6;_++){let E=0,D=e.width,O=e.height;for(;D>=1&&O>=1;){let M=null;E<=e.maxLevel&&(M=S[6*E+_]),l(x)?M!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,E,0,0,D,O,e.format,e.openGLDataType,M):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,E,e.internalFormat,D,O,0,e.format,e.openGLDataType,M),E++,D/=2,O/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*m*e._openGLRenderWindow.getDefaultTextureByteSize(x,n(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),dataType:m=Ve("dataType"),data:x=Ve("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.getOpenGLDataType(m),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?m===ke.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(wr("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=d,e.height=v,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),l(m)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),x!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,x)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,x),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(m,n(),t.useHalfFloat()),t.deactivate(),!0)},t.create2DFromImage=d=>{if(t.getOpenGLDataType(ke.UNSIGNED_CHAR),t.getInternalFormat(ke.UNSIGNED_CHAR,4),t.getFormat(ke.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return wr("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const v=!e._openGLRenderWindow.getWebgl2()&&(!Fa(d.width)||!Fa(d.height));let m=d,x=d.width,y=d.height,g=!0;const C=window.chrome;if(v||C){const S=new OffscreenCanvas(Pt(d.width),Pt(d.height));x=S.width,y=S.height;const T=S.getContext("2d");T.translate(0,S.height),T.scale(1,-1),T.drawImage(d,0,0,d.width,d.height,0,0,S.width,S.height),m=S,g=!1}return e.width=x,e.height=y,e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,g),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),l(ke.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,m)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,m),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(ke.UNSIGNED_CHAR,n(),t.useHalfFloat()),t.deactivate(),!0},t.create2DFromImageBitmap=d=>(t.getOpenGLDataType(ke.UNSIGNED_CHAR),t.getInternalFormat(ke.UNSIGNED_CHAR,4),t.getFormat(ke.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType?(wr("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),e.width=d.width,e.height=d.height,l(ke.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,d)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,d),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(ke.UNSIGNED_CHAR,n(),t.useHalfFloat()),t.deactivate(),!0));function p(d,v,m){const x=new Array(m),y=new Array(m);for(let g=0;g<m;++g)x[g]=d[g],y[g]=v[g]-d[g]||1;return{scale:y,offset:x}}function u(d,v){for(let m=0;m<d.length;m++){const x=d[m],y=v[m]+x;if(x<-2048||x>2048||y<-2048||y>2048)return!1}return!0}function f(d,v,m,x){t.getOpenGLDataType(d);const y=u(v,m)||x;let g=!1;if(e._openGLRenderWindow.getWebgl2())g=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&y||e.openGLDataType===e.context.HALF_FLOAT;else{const C=e.context.getExtension("OES_texture_half_float");g=C&&e.openGLDataType===C.HALF_FLOAT_OES}e.canUseHalfFloat=g&&y}function h(d,v){const m=d.getNumberOfComponents(),x=d.getDataType(),y=d.getData(),g=new Array(m),C=new Array(m);for(let T=0;T<m;++T){const[w,_]=d.getRange(T);g[T]=w,C[T]=_}const S=p(g,C,m);return f(x,S.offset,S.scale,v),t.useHalfFloat()||t.getOpenGLDataType(x,!0),{numComps:m,dataType:x,data:y,scaleOffsets:S}}t.create2DFilterableFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),numComps:m=Ve("numComps"),dataType:x=Ve("dataType"),data:y=Ve("data"),preferSizeOverAccuracy:g=!1,ranges:C=void 0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create2DFilterableFromDataArray({width:d,height:v,dataArray:pe.newInstance({numberOfComponents:m,dataType:x,values:y,ranges:C}),preferSizeOverAccuracy:g})},t.create2DFilterableFromDataArray=function(){let{width:d=Ve("width"),height:v=Ve("height"),dataArray:m=Ve("dataArray"),preferSizeOverAccuracy:x=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:y,dataType:g,data:C}=h(m,x);t.create2DFromRaw({width:d,height:v,numComps:y,dataType:g,data:C})},t.updateVolumeInfoForGL=(d,v)=>{var y,g;let m=!1;const x=t.useHalfFloat();(!((y=e.volumeInfo)!=null&&y.scale)||!((g=e.volumeInfo)!=null&&g.offset))&&(e.volumeInfo={scale:new Array(v),offset:new Array(v)});for(let C=0;C<v;++C)e.volumeInfo.scale[C]=1,e.volumeInfo.offset[C]=0;if(n()&&!x&&d===ke.SHORT){for(let C=0;C<v;++C)e.volumeInfo.scale[C]=32767;m=!0}if(n()&&!x&&d===ke.UNSIGNED_SHORT){for(let C=0;C<v;++C)e.volumeInfo.scale[C]=65535;m=!0}if(d===ke.UNSIGNED_CHAR){for(let C=0;C<v;++C)e.volumeInfo.scale[C]=255;m=!0}return(d===ke.FLOAT||x&&(d===ke.SHORT||d===ke.UNSIGNED_SHORT))&&(m=!0),m},t.create3DFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),depth:m=Ve("depth"),numComps:x=Ve("numComps"),dataType:y=Ve("dataType"),data:g=Ve("data"),updatedExtents:C=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=y,T=g;if(!t.updateVolumeInfoForGL(S,x)&&T){const N=d*v*m,R=structuredClone(e.volumeInfo),B=new Float32Array(N*x);e.volumeInfo.offset=R.offset,e.volumeInfo.scale=R.scale;let I=0;const P=R.scale.map(L=>1/L);for(let L=0;L<N;L++)for(let k=0;k<x;k++)B[I]=(T[I]-R.offset[k])*P[k],I++;S=ke.FLOAT,T=B}if(t.getOpenGLDataType(S),t.getInternalFormat(S,x),t.getFormat(S,x),!e.internalFormat||!e.format||!e.openGLDataType)return wr("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=x,e.width=d,e.height=v,e.depth=m,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const w=C.length>0,_=!w||!hs(e._prevTexParams,a()),E=[T],D=!0,O=t.updateArrayDataTypeForGL(S,E,D,_?[]:C),M=c(O);if(e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),_)l(S)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),M[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,M[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,M[0]),e._prevTexParams=a();else if(w){const N=M[0];let R=0;for(let B=0;B<C.length;B++){const I=C[B],P=r(I),L=i(I),k=new N.constructor(N.buffer,R,L);R+=k.byteLength,e.context.texSubImage3D(e.target,0,I[0],I[2],I[4],P[0],P[1],P[2],e.format,e.openGLDataType,k)}}return e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(S,n(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(){let{width:d=Ve("width"),height:v=Ve("height"),depth:m=Ve("depth"),numComps:x=Ve("numComps"),dataType:y=Ve("dataType"),data:g=Ve("data"),preferSizeOverAccuracy:C=!1,ranges:S=void 0,updatedExtents:T=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create3DFilterableFromDataArray({width:d,height:v,depth:m,dataArray:pe.newInstance({numberOfComponents:x,dataType:y,values:g,ranges:S}),preferSizeOverAccuracy:C,updatedExtents:T})},t.create3DFilterableFromDataArray=function(){let{width:d=Ve("width"),height:v=Ve("height"),depth:m=Ve("depth"),dataArray:x=Ve("dataArray"),preferSizeOverAccuracy:y=!1,updatedExtents:g=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:C,dataType:S,data:T,scaleOffsets:w}=h(x,y),_=[],E=[];for(let Z=0;Z<C;++Z)_[Z]=0,E[Z]=1;if(e.volumeInfo={scale:E,offset:_,dataComputedScale:w.scale,dataComputedOffset:w.offset,width:d,height:v,depth:m},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw({width:d,height:v,depth:m,numComps:C,dataType:S,data:T,updatedExtents:g});const D=d*v*m,O=structuredClone(w);let M=(Z,re,ae,ee,F)=>{Z[re]=ae},N=ke.UNSIGNED_CHAR;if(S===ke.UNSIGNED_CHAR)for(let Z=0;Z<C;++Z)O.offset[Z]=0,O.scale[Z]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(N=ke.FLOAT,M=(Z,re,ae,ee,F)=>{Z[re]=(ae-ee)/F}):(N=ke.UNSIGNED_CHAR,M=(Z,re,ae,ee,F)=>{Z[re]=255*(ae-ee)/F});if(t.getOpenGLDataType(N),t.getInternalFormat(N,C),t.getFormat(N,C),!e.internalFormat||!e.format||!e.openGLDataType)return wr("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=C,e.depth=1,e.numberOfDimensions=2;let R=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);R>4096&&(N===ke.FLOAT||C>=3)&&(R=4096);let B=1,I=1;D>R*R&&(B=Math.ceil(Math.sqrt(D/(R*R))),I=B);let P=Math.sqrt(D)/B;P=Pt(P);const L=Math.floor(P*B/d),k=Math.ceil(m/L),A=Pt(v*k/I);e.width=P,e.height=A,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=L,e.volumeInfo.yreps=k,e.volumeInfo.xstride=B,e.volumeInfo.ystride=I,e.volumeInfo.offset=O.offset,e.volumeInfo.scale=O.scale;let j;const H=P*A*C;N===ke.FLOAT?j=new Float32Array(H):j=new Uint8Array(H);let K=0;const Y=Math.floor(d/B),q=Math.floor(v/I);for(let Z=0;Z<k;Z++){const re=Math.min(L,m-Z*L),ae=C*(e.width-re*Math.floor(d/B));for(let ee=0;ee<q;ee++){for(let F=0;F<re;F++){const b=C*((Z*L+F)*d*v+I*ee*d);for(let G=0;G<Y;G++)for(let U=0;U<C;U++)M(j,K,T[b+B*G*C+U],O.offset[U],O.scale[U]),K++}K+=ae}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),l(N)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),j!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,j)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,j),t.deactivate(),!0},t.setOpenGLRenderWindow=d=>{e._openGLRenderWindow!==d&&(t.releaseGraphicsResources(),e._openGLRenderWindow=d,e.context=null,d&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=d=>d&&d.isCurrent()?d.getIntegerv(d.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=d=>{e.enableUseHalfFloat=d}}const B9={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:bn.CLAMP_TO_EDGE,wrapT:bn.CLAMP_TO_EDGE,wrapR:bn.CLAMP_TO_EDGE,minificationFilter:ht.NEAREST,magnificationFilter:ht.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Qp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B9,a),Ct.extend(t,e,a),e.sendParametersTime={},ut(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},ut(e.textureBuildTime,{mtime:0}),Ca(t,e,["format","openGLDataType"]),pt(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),At(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),Ta(t,e,["openGLRenderWindow"]),A9(t,e)}const eh=Je(Qp,"vtkOpenGLTexture");var Re={newInstance:eh,extend:Qp,...Yp};st("vtkTexture",eh);var W0=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,$a=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function U9(t,e){t.replaceShaderCoincidentOffset=(a,n,r)=>{const i=t.getCoincidentParameters(n,r);if(i&&(i.factor!==0||i.offset!==0)){let o=a.Fragment;o=Q.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(i.factor!==0?(o=Q.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(i.factor!==0?(o=Q.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),a.Fragment=o}}}function G9(t,e){t.applyShaderReplacements=(a,n,r)=>{let i=null;if(n&&(i=n.ShaderReplacements),i)for(let o=0;o<i.length;o++){const s=i[o];if(r&&s.replaceFirst||!r&&!s.replaceFirst){const c=s.shaderType,l=a[c],p=Q.substitute(l,s.originalValue,s.replacementValue,s.replaceAll);a[c]=p.result}}},t.buildShaders=(a,n,r)=>{t.getReplacedShaderTemplate(a,n,r),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(a);const i=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(a,i,!0),t.replaceShaderValues(a,n,r),t.applyShaderReplacements(a,i)},t.getReplacedShaderTemplate=(a,n,r)=>{const i=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(a,n,r);let o=a.Vertex;if(i){const l=i.VertexShaderCode;l!==void 0&&l!==""&&(o=l)}a.Vertex=o;let s=a.Fragment;if(i){const l=i.FragmentShaderCode;l!==void 0&&l!==""&&(s=l)}a.Fragment=s;let c=a.Geometry;if(i){const l=i.GeometryShaderCode;l!==void 0&&(c=l)}a.Geometry=c}}var mn={implementReplaceShaderCoincidentOffset:U9,implementBuildShadersWithReplacements:G9};const{FieldAssociations:$0}=dr,{primTypes:vt}=jt,{Representation:ta,Shading:th}=pr,{ScalarMode:Eo}=gn,{Filter:nh,Wrap:rh}=Re,{vtkErrorMacro:_r}=Dt,I9={type:"StartEvent"},P9={type:"EndEvent"},{CoordinateSystem:z9}=bf;function j9(t){const e=t.getSelector();return e?e.getCurrentPass():Nt.MIN_KNOWN_PASS-1}function W9(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=n=>{n&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.translucentPass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.opaquePass=n=>{n&&t.render()},t.render=()=>{const n=e._openGLRenderWindow.getContext();if(e.context!==n){e.context=n;for(let o=vt.Start;o<vt.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const r=e.openGLActor.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.getShaderTemplate=(n,r,i)=>{n.Vertex=W0,n.Fragment=$a,n.Geometry=""},t.replaceShaderColor=(n,r,i)=>{let o=n.Vertex,s=n.Geometry,c=n.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let p=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(p=p.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let u=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(u=u.concat(["  vec3 specularColor;","  float specularPower;"])),u=u.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(u=u.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(p=p.concat(["varying vec4 vertexColorVSOutput;"]),o=Q.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Q.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=Q.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Q.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?c=Q.substitute(c,"//VTK::Color::Impl",u.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?c=Q.substitute(c,"//VTK::Color::Impl",u.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!e.drawingEdges&&(p=p.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(p=p.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),u=u.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):u=u.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(p=p.concat(["uniform samplerBuffer texture1;"])),c=Q.substitute(c,"//VTK::Color::Impl",u).result),c=Q.substitute(c,"//VTK::Color::Dec",p).result,n.Vertex=o,n.Geometry=s,n.Fragment=c},t.replaceShaderLight=(n,r,i)=>{let o=n.Fragment;const s="",c=e.lastBoundBO.getReferenceByName("lastLightComplexity"),l=e.lastBoundBO.getReferenceByName("lastLightCount");let p=[];switch(c){case 0:o=Q.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=Q.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let u=0;u<l;++u)p=p.concat([`uniform vec3 lightColor${u};`,`uniform vec3 lightDirectionVC${u}; // normalized`,`uniform vec3 lightHalfAngleVC${u}; // normalized`]);o=Q.substitute(o,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let u=0;u<l;++u)p=p.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${u}));`,`  diffuseL += ((df${s}) * lightColor${u});`,`  if (dot(normalVCVSOutput, lightDirectionVC${u}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${u},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${s} * lightColor${u});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Q.substitute(o,"//VTK::Light::Impl",p,!1).result;break;case 3:for(let u=0;u<l;++u)p=p.concat([`uniform vec3 lightColor${u};`,`uniform vec3 lightDirectionVC${u}; // normalized`,`uniform vec3 lightHalfAngleVC${u}; // normalized`,`uniform vec3 lightPositionVC${u};`,`uniform vec3 lightAttenuation${u};`,`uniform float lightConeAngle${u};`,`uniform float lightExponent${u};`,`uniform int lightPositional${u};`]);o=Q.substitute(o,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let u=0;u<l;++u)p=p.concat(["  attenuation = 1.0;",`  if (lightPositional${u} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${u};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${u};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${u}.x`,`       + lightAttenuation${u}.y * distanceVC`,`       + lightAttenuation${u}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${u} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${u});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${u})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${u});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${s}) * lightColor${u});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${u},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${s}) * lightColor${u});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Q.substitute(o,"//VTK::Light::Impl",p,!1).result;break;default:_r("bad light complexity")}n.Fragment=o},t.replaceShaderNormal=(n,r,i)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let s=n.Vertex,c=n.Geometry,l=n.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(s=Q.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=Q.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,c=Q.substitute(c,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,c=Q.substitute(c,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,l=Q.substitute(l,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(l=Q.substitute(l,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES?(l=Q.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(l=Q.substitute(l,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,l=Q.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=s,n.Geometry=c,n.Fragment=l}},t.replaceShaderPositionVC=(n,r,i)=>{e.lastBoundBO.replaceShaderPositionVC(n,r,i);let o=n.Vertex,s=n.Geometry,c=n.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Q.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,c=Q.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=Q.substitute(c,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),n.Vertex=o,n.Geometry=s,n.Fragment=c},t.replaceShaderTCoord=(n,r,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=n.Vertex,s=n.Geometry,c=n.Fragment;if(e.drawingEdges)return;o=Q.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const l=e.openGLActor.getActiveTextures();let p=2,u=2;if(l&&l.length>0&&(p=l[0].getComponents(),l[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(u=3)),e.renderable.getColorTextureMap()&&(p=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),u=2),u===2){if(o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,s=Q.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=Q.substitute(c,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(p){case 1:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,s=Q.substitute(s,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=Q.substitute(c,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,p){case 1:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=Q.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}n.Vertex=o,n.Geometry=s,n.Fragment=c}},t.replaceShaderClip=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes();o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${c}];`,`varying float clipDistancesVSOutput[${c}];`]).result,o=Q.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${c}];`]).result,s=Q.substitute(s,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=o,n.Fragment=s},t.getCoincidentParameters=(n,r)=>{let i={factor:0,offset:0};const o=r.getProperty();if(e.renderable.getResolveCoincidentTopology()==Zt.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===ta.SURFACE){const c=e.lastBoundBO.getPrimitiveType();c===vt.Points||o.getRepresentation()===ta.POINTS?i=e.renderable.getCoincidentTopologyPointOffsetParameter():c===vt.Lines||o.getRepresentation()===ta.WIREFRAME?i=e.renderable.getCoincidentTopologyLineOffsetParameters():(c===vt.Tris||c===vt.TriStrips)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(c===vt.TrisEdges||c===vt.TriStripsEdges)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),i.factor/=2,i.offset/=2)}const s=e._openGLRenderer.getSelector();return s&&s.getFieldAssociation()===$0.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},t.replaceShaderPicking=(n,r,i)=>{let o=n.Fragment,s=n.Vertex;if(o=Q.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Nt.ID_LOW24||e.lastSelectionState===Nt.ID_HIGH24)&&(s=Q.substitute(s,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,s=Q.substitute(s,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=Q.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=Q.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Nt.ID_LOW24:o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Nt.ID_HIGH24:o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=Q.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}n.Fragment=o,n.Vertex=s}},t.replaceShaderValues=(n,r,i)=>{if(t.replaceShaderColor(n,r,i),t.replaceShaderNormal(n,r,i),t.replaceShaderLight(n,r,i),t.replaceShaderTCoord(n,r,i),t.replaceShaderPicking(n,r,i),t.replaceShaderClip(n,r,i),t.replaceShaderCoincidentOffset(n,r,i),t.replaceShaderPositionVC(n,r,i),e.haveSeenDepthRequest){let o=n.Fragment;o=Q.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Q.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=o}},t.getNeedToRebuildShaders=(n,r,i)=>{let o=0,s=0;const c=n.getPrimitiveType(),l=e.currentInput;let p=!1;const u=l.getPointData().getNormals(),f=l.getCellData().getNormals(),h=i.getProperty().getInterpolation()===th.FLAT,d=i.getProperty().getRepresentation(),v=n.getOpenGLMode(d,c);if((v===e.context.TRIANGLES||f&&!u||!h&&u||!h&&v===e.context.LINES)&&(p=!0),i.getProperty().getLighting()&&p){o=0;const g=r.getLightsByReference();for(let C=0;C<g.length;++C){const S=g[C];S.getSwitch()>0&&(s++,o===0&&(o=1)),o===1&&(s>1||S.getIntensity()!==1||!S.lightTypeIsHeadLight())&&(o=2),o<3&&S.getPositional()&&(o=3)}}let m=!1;const x=e.lastBoundBO.getReferenceByName("lastLightComplexity"),y=e.lastBoundBO.getReferenceByName("lastLightCount");return(x!==o||y!==s)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:s},!0),m=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(m=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||n.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||m?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(n,r,i)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,n,r,i)})},t.setMapperShaderParameters=(n,r,i)=>{if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),n.getProgram().isUniformUsed("VertexIDOffset")&&n.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||_r("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&c>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||_r("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((l,p)=>{n.getProgram().isAttributeUsed(`${l}MC`)&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),`${l}MC`,n.getCABO().getCustomData()[p].offset,n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getCustomData()[p].components,!1)||_r(`Error setting ${l}MC in shader VAO.`))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||_r("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||_r("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes(),l=[],u=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,f=u?gt(e.tmpMat4,i.getMatrix()):i.getMatrix();u&&(We(f,f),Ee(f,f,u),We(f,f));for(let h=0;h<c;h++){const d=[];e.renderable.getClippingPlaneInDataCoords(f,h,d);for(let v=0;v<4;v++)l.push(d[v])}n.getProgram().setUniformi("numClipPlanes",c),n.getProgram().setUniform4fv("clipPlanes",l)}e.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor.getActiveTextures();if(o)for(let c=0;c<o.length;++c){const p=o[c].getTextureUnit(),u=`texture${p+1}`;n.getProgram().isUniformUsed(u)&&n.getProgram().setUniformi(u,p)}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const c=t.getCoincidentParameters(r,i);n.getProgram().setUniformf("coffset",c.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",c.factor)}n.setMapperShaderParameters(r,i,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)},t.setLightingShaderParameters=(n,r,i)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const s=n.getProgram();let c=0;const l=r.getLightsByReference();for(let f=0;f<l.length;++f){const h=l[f];if(h.getSwitch()>0){const v=h.getColorByReference(),m=h.getIntensity();e.lightColor[0]=v[0]*m,e.lightColor[1]=v[1]*m,e.lightColor[2]=v[2]*m;const x=h.getDirection(),y=r.getActiveCamera().getViewMatrix(),g=[...x];h.lightTypeIsSceneLight()&&(g[0]=y[0]*x[0]+y[1]*x[1]+y[2]*x[2],g[1]=y[4]*x[0]+y[5]*x[1]+y[6]*x[2],g[2]=y[8]*x[0]+y[9]*x[1]+y[10]*x[2],Ke(g)),e.lightDirection[0]=g[0],e.lightDirection[1]=g[1],e.lightDirection[2]=g[2],Ke(e.lightDirection),s.setUniform3fArray(`lightColor${c}`,e.lightColor),s.setUniform3fArray(`lightDirectionVC${c}`,e.lightDirection),c++}}if(o<3)return;const u=r.getActiveCamera().getViewMatrix();We(u,u),c=0;for(let f=0;f<l.length;++f){const h=l[f];if(h.getSwitch()>0){const v=h.getTransformedPosition(),m=new Float64Array(3);_e(m,v,u),s.setUniform3fArray(`lightAttenuation${c}`,h.getAttenuationValuesByReference()),s.setUniformi(`lightPositional${c}`,h.getPositional()),s.setUniformf(`lightExponent${c}`,h.getExponent()),s.setUniformf(`lightConeAngle${c}`,h.getConeAngle()),s.setUniform3fArray(`lightPositionVC${c}`,[m[0],m[1],m[2]]),c++}}};function a(n,r,i){return r.identity(i),n.reduce((o,s,c)=>c===0?s?r.copy(o,s):r.identity(o):s?r.multiply(o,o,s):o,i)}t.setCameraShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=e.openGLCamera.getKeyMatrices(r),c=r.getActiveCamera(),l=e.openGLCamera.getKeyMatrixTime().getMTime(),p=o.getLastCameraMTime(),f=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,h=i.getIsIdentity(),d=h?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===z9.DISPLAY){const v=e._openGLRenderer.getTiledSizeAndOrigin();Te(e.tmpMat4),e.tmpMat4[0]=2/v.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/v.vsize,e.tmpMat4[13]=-1,Ee(e.tmpMat4,e.tmpMat4,f),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",a([s.wcpc,d.mcwc,f],va,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",a([s.wcvc,d.mcwc,f],va,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",a([s.normalMatrix,d.normalMatrix],r2,e.tmpMat3)),p!==l&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",c.getParallelProjection()),o.setLastCameraMTime(l)),h||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=(n,r,i)=>{const o=n.getProgram();let s=i.getProperty(),c=s.getOpacity(),l=e.drawingEdges?s.getEdgeColorByReference():s.getAmbientColorByReference(),p=e.drawingEdges?s.getEdgeColorByReference():s.getDiffuseColorByReference(),u=e.drawingEdges?1:s.getAmbient(),f=e.drawingEdges?0:s.getDiffuse(),h=e.drawingEdges?0:s.getSpecular();const d=s.getSpecularPower();o.setUniformf("opacityUniform",c),o.setUniform3fArray("ambientColorUniform",l),o.setUniform3fArray("diffuseColorUniform",p),o.setUniformf("ambient",u),o.setUniformf("diffuse",f);const v=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(v<1)return;let m=s.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",m),o.setUniformf("specularPowerUniform",d),o.setUniformf("specular",h),o.isUniformUsed("ambientIntensityBF")){if(s=i.getBackfaceProperty(),c=s.getOpacity(),l=s.getAmbientColor(),u=s.getAmbient(),p=s.getDiffuseColor(),f=s.getDiffuse(),m=s.getSpecularColor(),h=s.getSpecular(),o.setUniformf("ambientIntensityBF",u),o.setUniformf("diffuseIntensityBF",f),o.setUniformf("opacityUniformBF",c),o.setUniform3fArray("ambientColorUniformBF",l),o.setUniform3fArray("diffuseColorUniformBF",p),v<1)return;o.setUniformf("specularIntensityBF",h),o.setUniform3fArray("specularColorUniformBF",m),o.setUniformf("specularPowerUniformBF",d)}},t.updateMaximumPointCellIds=(n,r)=>{var s,c,l,p;const i=e._openGLRenderer.getSelector();if(!i)return;if((c=(s=e.selectionWebGLIdsToVTKIds)==null?void 0:s.points)!=null&&c.length){const u=e.selectionWebGLIdsToVTKIds.points.length;i.setMaximumPointId(u-1)}if((p=(l=e.selectionWebGLIdsToVTKIds)==null?void 0:l.cells)!=null&&p.length){const u=e.selectionWebGLIdsToVTKIds.cells.length;i.setMaximumCellId(u-1)}i.getFieldAssociation()===$0.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(n,r)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const i=j9(e._openGLRenderer);if(e.lastSelectionState!==i&&(e.selectionStateChanged.modified(),e.lastSelectionState=i),e._openGLRenderer.getSelector())switch(i){default:e._openGLRenderer.getSelector().renderProp(r)}t.updateBufferObjects(n,r),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation(),o=r.getProperty().getEdgeVisibility()&&i===ta.SURFACE,s=e._openGLRenderer.getSelector(),c=s&&s.getFieldAssociation()===$0.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Nt.ID_LOW24||e.lastSelectionState===Nt.ID_HIGH24);for(let l=vt.Start;l<vt.End;l++)e.primitives[l].setPointPicking(c),e.primitives[l].getCABO().getElementCount()&&(e.drawingEdges=o&&(l===vt.TrisEdges||l===vt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[l],e.primitiveIDOffset+=e.primitives[l].drawArrays(n,r,i,t),e.vertexIDOffset+=e.primitives[l].getCABO().getElementCount()))},t.renderPieceFinish=(n,r)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(n,r)=>{if(t.invokeEvent(I9),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(P9),!e.currentInput){_r("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context,o=r.getProperty().getBackfaceCulling(),s=r.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(n,r)=>{const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<r.getMTime()||i<e.currentInput.getMTime()},t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===Eo.USE_CELL_DATA||s===Eo.USE_CELL_FIELD_DATA||s===Eo.USE_FIELD_DATA||!i.getPointData().getScalars())&&s!==Eo.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);let c=r.getProperty().getInterpolation()!==th.FLAT?i.getPointData().getNormals():null;c===null&&i.getCellData().getNormals()&&(e.haveCellNormals=!0,c=i.getCellData().getNormals());const l=r.getProperty().getRepresentation();let p=i.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(p=null);let u=!1;if(e.renderable.getColorCoordinates()){p=e.renderable.getColorCoordinates(),u=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Re.newInstance({resizable:!0}));const h=e.internalColorTexture;h.setMinificationFilter(nh.NEAREST),h.setMagnificationFilter(nh.NEAREST),h.setWrapS(rh.CLAMP_TO_EDGE),h.setWrapT(rh.CLAMP_TO_EDGE),h.setOpenGLRenderWindow(e._openGLRenderWindow);const d=e.renderable.getColorTextureMap(),v=d.getExtent(),m=d.getPointData().getScalars();h.create2DFromRaw({width:v[1]-v[0]+1,height:v[3]-v[2]+1,numComps:m.getNumberOfComponents(),dataType:m.getDataType(),data:m.getData()}),h.activate(),h.sendParameters(),h.deactivate()}const f=`${i.getMTime()}A${l}B${i.getMTime()}C${c?c.getMTime():1}D${o?o.getMTime():1}E${r.getProperty().getEdgeVisibility()}F${p?p.getMTime():1}`;if(e.VBOBuildString!==f){const d={points:i.getPoints(),normals:c,tcoords:p,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:u,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(x=>i.getPointData().getArrayByName(x))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const v=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],m=r.getProperty().getEdgeVisibility()&&l===ta.SURFACE;for(let x=vt.Start;x<vt.End;x++)x!==vt.TrisEdges&&x!==vt.TriStripsEdges?(d.cellOffset+=e.primitives[x].getCABO().createVBO(v[x].cells,v[x].inRep,l,d,e.selectionWebGLIdsToVTKIds),d.vertexOffset+=e.primitives[x].getCABO().getElementCount()):m?e.primitives[x].getCABO().createVBO(v[x].cells,v[x].inRep,ta.WIREFRAME,{...d,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[x].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=f}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let n=0;return e.primitives.forEach(r=>{n+=r.getAllocatedGPUMemoryInBytes()}),n}}const $9={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Nt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function ah(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$9,a),Ct.extend(t,e,a),mn.implementReplaceShaderCoincidentOffset(t,e,a),mn.implementBuildShadersWithReplacements(t,e,a),e.primitives=[],e.primTypes=vt,e.tmpMat3=It(new Float64Array(9)),e.tmpMat4=Te(new Float64Array(16));for(let n=vt.Start;n<vt.End;n++)e.primitives[n]=jt.newInstance(),e.primitives[n].setPrimitiveType(n),e.primitives[n].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);pt(t,e,["context"]),e.VBOBuildTime={},ut(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},ut(e.selectionStateChanged,{mtime:0}),W9(t,e)}const ih=Je(ah,"vtkOpenGLPolyDataMapper");var Do={newInstance:ih,extend:ah};st("vtkMapper",ih);var H9=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,K9=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const X9={BACKGROUND:0,FOREGROUND:1},{primTypes:Qt}=jt,{Filter:oh,Wrap:sh}=Re,{vtkErrorMacro:Ha}=Dt,q9={type:"StartEvent"},Y9={type:"EndEvent"};function J9(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=n=>{n&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.overlayPass=n=>{n&&t.render()},t.getShaderTemplate=(n,r,i)=>{n.Vertex=K9,n.Fragment=H9,n.Geometry=""},t.render=()=>{const n=e._openGLRenderWindow.getContext();if(e.context!==n){e.context=n;for(let o=Qt.Start;o<Qt.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const r=e.openGLActor2D.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.renderPiece=(n,r)=>{if(t.invokeEvent(q9),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(Y9),!e.currentInput){Ha("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context;e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.renderPieceStart=(n,r)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(r)}e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),t.updateBufferObjects(n,r),e.lastBoundBO=null},t.getNeedToRebuildShaders=(n,r,i)=>n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>{const i=e.VBOBuildTime.getMTime();return!!(i<t.getMTime()||i<e._openGLRenderWindow.getMTime()||i<e.renderable.getMTime()||i<r.getMTime()||i<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&i<n.getMTime())},t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,r.getProperty().getOpacity());const o=e.renderable.getColorMapColors(),s=r.getProperty().getRepresentation();let c=i.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(c=null);let l=!1;if(e.renderable.getColorCoordinates()){c=e.renderable.getColorCoordinates(),l=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Re.newInstance({resizable:!0}));const d=e.internalColorTexture;d.setMinificationFilter(oh.NEAREST),d.setMagnificationFilter(oh.NEAREST),d.setWrapS(sh.CLAMP_TO_EDGE),d.setWrapT(sh.CLAMP_TO_EDGE),d.setOpenGLRenderWindow(e._openGLRenderWindow);const v=e.renderable.getColorTextureMap(),m=v.getExtent(),x=v.getPointData().getScalars();d.create2DFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:x.getNumberOfComponents(),dataType:x.getDataType(),data:x.getData()}),d.activate(),d.sendParameters(),d.deactivate()}const p=e.renderable.getTransformCoordinate(),f=n.getRenderWindow().getViews()[0].getViewportSize(n),h=`${i.getMTime()}A${s}B${i.getMTime()}C${o?o.getMTime():1}D${c?c.getMTime():1}E${p?n.getMTime():1}F${f}`;if(e.VBOBuildString!==h){let d=i.getPoints();if(p){const m=dn.newInstance(),x=d.getNumberOfPoints();m.setNumberOfPoints(x);const y=[];for(let g=0;g<x;++g){d.getPoint(g,y),p.setValue(y);const C=p.getComputedDoubleViewportValue(n);m.setPoint(g,C[0],C[1],0)}d=m}const v={points:d,tcoords:c,colors:o,cellOffset:0,useTCoordsPerCell:l,haveCellScalars:e.renderable.getAreScalarsMappedFromCells(),customAttributes:e.renderable.getCustomShaderAttributes().map(m=>i.getPointData().getArrayByName(m))};v.cellOffset+=e.primitives[Qt.Points].getCABO().createVBO(i.getVerts(),"verts",s,v),v.cellOffset+=e.primitives[Qt.Lines].getCABO().createVBO(i.getLines(),"lines",s,v),v.cellOffset+=e.primitives[Qt.Tris].getCABO().createVBO(i.getPolys(),"polys",s,v),v.cellOffset+=e.primitives[Qt.TriStrips].getCABO().createVBO(i.getStrips(),"strips",s,v),e.VBOBuildTime.modified(),e.VBOBuildString=h}},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation();e.context.depthMask(!0);for(let s=Qt.Start;s<Qt.End;s++)e.primitives[s].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[s],e.primitiveIDOffset+=e.primitives[s].drawArrays(n,r,i,t))},t.renderPieceFinish=(n,r)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.replaceShaderValues=(n,r,i)=>{t.replaceShaderColor(n,r,i),t.replaceShaderTCoord(n,r,i),t.replaceShaderPicking(n,r,i),t.replaceShaderPositionVC(n,r,i)},t.replaceShaderColor=(n,r,i)=>{let o=n.Vertex,s=n.Geometry,c=n.Fragment,l=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],p=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];e.lastBoundBO.getCABO().getColorComponents()!==0?(l=l.concat(["varying vec4 vertexColorVSOutput;"]),o=Q.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Q.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=Q.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Q.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,c=Q.substitute(c,"//VTK::Color::Impl",p.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):e.renderable.getAreScalarsMappedFromCells()&&(p=p.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),p=p.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),c=Q.substitute(c,"//VTK::Color::Dec",l).result,c=Q.substitute(c,"//VTK::Color::Impl",p).result,n.Vertex=o,n.Geometry=s,n.Fragment=c},t.replaceShaderTCoord=(n,r,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=n.Vertex,s=n.Geometry,c=n.Fragment;const l=e.lastBoundBO.getCABO().getTCoordComponents();l===1?(o=Q.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Q.substitute(s,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,s=Q.substitute(s,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=Q.substitute(c,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=Q.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):l===2&&(o=Q.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Q.substitute(s,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=Q.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=Q.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.renderable.getAreScalarsMappedFromCells()&&(s=Q.substitute(s,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),n.Vertex=o,n.Geometry=s,n.Fragment=c}},t.replaceShaderPicking=(n,r,i)=>{let o=n.Fragment;o=Q.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,n.Fragment=o},t.replaceShaderPositionVC=(n,r,i)=>{e.lastBoundBO.replaceShaderPositionVC(n,r,i)},t.invokeShaderCallbacks=(n,r,i)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,n,r,i)})},t.setMapperShaderParameters=(n,r,i)=>{if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),n.getProgram().isAttributeUsed("vertexWC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexWC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||Ha("Error setting vertexWC in shader VAO.")),n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((c,l)=>{n.getProgram().isAttributeUsed(`${c}MC`)&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),`${c}MC`,n.getCABO().getCustomData()[l].offset,n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getCustomData()[l].components,!1)||Ha(`Error setting ${c}MC in shader VAO.`))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||Ha("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Ha("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),e.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&e.internalColorTexture.getTextureUnit()>-1&&n.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor2D.getActiveTextures();if(o)for(let c=0;c<o.length;++c){const p=o[c].getTextureUnit(),u=`texture${p+1}`;n.getProgram().isUniformUsed(u)&&n.getProgram().setUniformi(u,p)}n.setMapperShaderParameters(r,i,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(n,r,i)=>{const o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){const s=n.getProgram(),c=i.getProperty(),l=c.getOpacity();s.setUniformf("opacityUniform",l);const p=c.getColor();s.setUniform3fArray("diffuseColorUniform",p)}},t.setLightingShaderParameters=(n,r,i)=>{};function a(n,r,i){return r.identity(i),n.reduce((o,s,c)=>c===0?s?r.copy(o,s):r.identity(o):s?r.multiply(o,o,s):o,i)}t.setCameraShaderParameters=(n,r,i)=>{const o=n.getProgram(),c=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,p=r.getRenderWindow().getViews()[0].getViewportSize(r),u=r.getViewport(),f=i.getActualPositionCoordinate().getComputedDoubleViewportValue(r),h=[0,0,1,1],d=[0,0,1,1];if(d[0]=u[0]>=h[0]?u[0]:h[0],d[1]=u[1]>=h[1]?u[1]:h[1],d[2]=u[2]<=h[2]?u[2]:h[2],d[3]=u[3]<=h[3]?u[3]:h[3],d[0]>=d[2]||d[1]>=d[3])return;p[0]=La(p[0]*(d[2]-d[0])/(u[2]-u[0])),p[1]=La(p[1]*(d[3]-d[1])/(u[3]-u[1]));const v=e._openGLRenderer.getParent().getSize(),m=La(f[0]-(d[0]-u[0])*v[0]),x=La(f[1]-(d[1]-u[1])*v[1]),y=-m;let g=-m+p[0];const C=-x;let S=-x+p[1];y===g&&(g=y+1),C===S&&(S=C+1);const T=Te(new Float64Array(16));T[0]=2/(g-y),T[1*4+1]=2/(S-C),T[0*4+3]=-1*(g+y)/(g-y),T[1*4+3]=-1*(S+C)/(S-C),T[2*4+2]=0,T[2*4+3]=i.getProperty().getDisplayLocation()===X9.FOREGROUND?-1:1,T[3*4+3]=1,We(T,T),o.setUniformMatrix("WCVCMatrix",a([T,c],va,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let n=0;return e.primitives.forEach(r=>{n+=r.getAllocatedGPUMemoryInBytes()}),n}}const Z9={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function Q9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z9,a),Ct.extend(t,e,a),mn.implementReplaceShaderCoincidentOffset(t,e,a),mn.implementBuildShadersWithReplacements(t,e,a),e.primitives=[],e.primTypes=Qt,e.tmpMat4=Te(new Float64Array(16));for(let n=Qt.Start;n<Qt.End;n++)e.primitives[n]=jt.newInstance(),e.primitives[n].setPrimitiveType(n),e.primitives[n].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);pt(t,e,["context"]),e.VBOBuildTime={},ut(e.VBOBuildTime,{mtime:0}),J9(t,e)}const e6=Je(Q9,"vtkOpenGLPolyDataMapper2D");st("vtkMapper2D",e6);var ch={Orientation:{HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"}};const{VectorMode:t6}=ho,{Orientation:Oo}=ch;function H0(t,e,a){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor;const n=e.fontSize??a;t.font=`${e.fontStyle} ${n}px ${e.fontFamily}`}function uh(t,e){return a=>{const n=a.getLastSize(),r=(n[0]/700)**.8,i=(n[1]/700)**.8,o=Math.min(r,i),s=a.getAxisTextStyle(),c=a.getTickTextStyle();Object.assign(s,e.axisTextStyle),Object.assign(c,e.tickTextStyle),s.fontSize===void 0&&(s.fontSize=Math.max(24*o,12)),c.fontSize===void 0&&(a.getLastAspectRatio()>1?c.fontSize=Math.max(20*o,10):c.fontSize=Math.max(16*o,10));const l=a.updateTextureAtlas();a.setTopTitle(!1);const p=a.getBoxSizeByReference();let u=!1;if(e.orientation===Oo.VERTICAL?u=!0:e.orientation===Oo.HORIZONTAL?u=!1:u=a.getLastAspectRatio()>1,u)a.setTickLabelPixelOffset(.3*c.fontSize),l.titleWidth<=l.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize?(a.setTopTitle(!0),a.setAxisTitlePixelOffset(.2*c.fontSize),p[0]=2*(l.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize)/n[0],a.setBoxPosition([.98-p[0],-.92])):(a.setAxisTitlePixelOffset(.2*c.fontSize),p[0]=2*(l.titleHeight+a.getAxisTitlePixelOffset()+l.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize)/n[0],a.setBoxPosition([.99-p[0],-.92])),p[1]=Math.max(1.2,Math.min(1.84/i,1.84));else{a.setAxisTitlePixelOffset(1.2*c.fontSize),a.setTickLabelPixelOffset(.1*c.fontSize);const f=2*(.8*c.fontSize+l.titleHeight+a.getAxisTitlePixelOffset())/n[1],h=2*l.tickWidth/n[0];p[0]=Math.min(1.9,Math.max(1.4,1.4*h*(a.getTicks().length+3))),p[1]=f,a.setBoxPosition([-.5*p[0],-.97])}a.recomputeBarSegments(l)}}function lh(t,e){return a=>{const n=a.getLastTickBounds(),r=Gs().domain([n[0],n[1]]),i=r.ticks(5),o=r.tickFormat(5);a.setTicks(i),a.setTickStrings(i.map(o))}}function n6(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=r=>{e.renderable!==r&&(e.renderable=r,e.barActor.setProperty(r.getProperty()),e.barActor.setParentProp(r),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(r.getProperty()),e.tmActor.setParentProp(r),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=r.generateTicks,e.axisTextStyle={...r.getAxisTextStyle()},e.tickTextStyle={...r.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(r,i,o)=>{(e.lastSize[0]!==r[0]||e.lastSize[1]!==r[1])&&(e.lastSize[0]=r[0],e.lastSize[1]=r[1],e.lastAspectRatio=r[0]/r[1],e.forceUpdate=!0);const s=e.renderable.getScalarsToColors();if(!(!s||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(s),e.camera=i,e.renderWindow=o,e.forceUpdate||Math.max(s.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const c=s.getMappingRange();if(e.lastTickBounds=[...c],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const l=t.updateTextureAtlas();t.recomputeBarSegments(l)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const r={},i=new Map;let o=0,s=1;H0(e.tmContext,e.axisTextStyle,18);let c=e.tmContext.measureText(e.renderable.getAxisLabel()),l={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.axisTextStyle};i.set(e.renderable.getAxisLabel(),l),s+=l.height,o=l.width,r.titleWidth=l.width,r.titleHeight=l.height,r.tickWidth=0,r.tickHeight=0,H0(e.tmContext,e.tickTextStyle,14);const p=[...t.getTickStrings(),"NaN","Below","Above"];for(let u=0;u<p.length;u++)i.has(p[u])||(c=e.tmContext.measureText(p[u]),l={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.tickTextStyle},i.set(p[u],l),s+=l.height,o<l.width&&(o=l.width),r.tickWidth<l.width&&(r.tickWidth=l.width),r.tickHeight<l.height&&(r.tickHeight=l.height));return o=Pt(o),s=Pt(s),i.forEach(u=>{u.tcoords=[0,(s-u.startingHeight-u.height)/s,u.width/o,(s-u.startingHeight-u.height)/s,u.width/o,(s-u.startingHeight)/s,0,(s-u.startingHeight)/s]}),e.tmCanvas.width=o,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,s),i.forEach((u,f)=>{const h=u.textStyle===e.axisTextStyle?18:14;H0(e.tmContext,u.textStyle,h),e.tmContext.fillText(f,1,u.startingHeight+u.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=i,r},t.computeBarSize=r=>{e.vertical=e.boxSize[1]>e.boxSize[0];const i=2*r.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){const s=2*(r.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-s,e.barSize[1]=e.boxSize[1]-c}else{const c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-c-s,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+s,e.barPosition[1]=e.boxPosition[1],o[1]=i}else{const s=(2*r.tickWidth-8)/e.lastSize[0],c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-c,e.barPosition[1]=e.boxPosition[1],o[0]=s}return o},t.recomputeBarSegments=r=>{var f,h,d,v;const i=t.computeBarSize(r);e.barSegments=[];const o=[0,0],s=e.vertical?1:0,c=e.vertical?.01:.02;function l(m,x){e.barSegments.push({corners:[[...o],[o[0]+i[0],o[1]],[o[0]+i[0],o[1]+i[1]],[o[0],o[1]+i[1]]],scalars:x,title:m}),o[s]+=i[s]+c}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&l("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((h=(f=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&h.call(f))&&l("Below",[-.1,-.1,-.1,-.1]);const p=(v=(d=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:v.call(d);o[s]+=c;const u=i[s];i[s]=p?1-2*c-i[s]-o[s]:1-c-o[s],l("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&p&&(i[s]=u,o[s]+=c,l("Above",[1.1,1.1,1.1,1.1]))};const a=new Float64Array(3);t.createPolyDataForOneLabel=(r,i,o,s,c,l)=>{const p=e._tmAtlas.get(r);if(!p)return;let u=l.ptIdx,f=l.cellIdx;a[0]=(.5*i[0]+.5)*e.lastSize[0],a[1]=(.5*i[1]+.5)*e.lastSize[1],a[2]=i[2],a[0]+=c[0],a[1]+=c[1];const h=[],d=s==="vertical"?[1,0]:[0,1];s==="vertical"?(h[0]=p.width,h[1]=-p.height,o[0]==="middle"?a[1]-=p.width/2:o[0]==="right"&&(a[1]-=p.width),o[1]==="middle"?a[0]+=p.height/2:o[1]==="top"&&(a[0]+=p.height)):(h[0]=p.width,h[1]=p.height,o[0]==="middle"?a[0]-=p.width/2:o[0]==="right"&&(a[0]-=p.width),o[1]==="middle"?a[1]-=p.height/2:o[1]==="top"&&(a[1]-=p.height)),l.points[u*3]=a[0],l.points[u*3+1]=a[1],l.points[u*3+2]=a[2],l.tcoords[u*2]=p.tcoords[0],l.tcoords[u*2+1]=p.tcoords[1],u++,a[d[0]]+=h[0],l.points[u*3]=a[0],l.points[u*3+1]=a[1],l.points[u*3+2]=a[2],l.tcoords[u*2]=p.tcoords[2],l.tcoords[u*2+1]=p.tcoords[3],u++,a[d[1]]+=h[1],l.points[u*3]=a[0],l.points[u*3+1]=a[1],l.points[u*3+2]=a[2],l.tcoords[u*2]=p.tcoords[4],l.tcoords[u*2+1]=p.tcoords[5],u++,a[d[0]]-=h[0],l.points[u*3]=a[0],l.points[u*3+1]=a[1],l.points[u*3+2]=a[2],l.tcoords[u*2]=p.tcoords[6],l.tcoords[u*2+1]=p.tcoords[7],u++,l.polys[f*4]=3,l.polys[f*4+1]=u-4,l.polys[f*4+2]=u-3,l.polys[f*4+3]=u-2,f++,l.polys[f*4]=3,l.polys[f*4+1]=u-4,l.polys[f*4+2]=u-2,l.polys[f*4+3]=u-1,l.ptIdx+=4,l.cellIdx+=2};const n=new Float64Array(3);t.updatePolyDataForLabels=()=>{const r=t.getTickStrings().length+e.barSegments.length,i=r*4,o=r*2,s=new Float64Array(i*3),c=new Uint16Array(o*4),l=new Float32Array(i*2),p={ptIdx:0,cellIdx:0,polys:c,points:s,tcoords:l},u=e.vertical?0:1,f=e.vertical?1:0;n[2]=-.99;const h=e.vertical?["right","middle"]:["middle","bottom"];let d=[0,1];const v=[0,0];e.vertical?(v[0]=-e.tickLabelPixelOffset,e.topTitle?(n[0]=e.boxPosition[0]+.5*e.boxSize[0],n[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)):(n[0]=e.barPosition[0]+e.barSize[0],n[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],p)),d=[-1,0]):(v[1]=e.tickLabelPixelOffset,n[0]=e.barPosition[0]+.5*e.barSize[0],n[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)),n[u]=e.barPosition[u]+(.5*d[u]+.5)*e.barSize[u],n[f]=e.barPosition[f]+e.barSize[f]*.5;let m=null;for(let w=0;w<e.barSegments.length;w++){const _=e.barSegments[w];_.title==="ticks"?m=_:(n[f]=e.barPosition[f]+.5*e.barSize[f]*(_.corners[2][f]+_.corners[0][f]),t.createPolyDataForOneLabel(_.title,n,h,"horizontal",v,p))}const x=e.barPosition[f]+e.barSize[f]*m.corners[0][f],y=e.barSize[f]*(m.corners[2][f]-m.corners[0][f]),g=t.getTicks(),C=t.getTickStrings(),S=t.getTickPositions();for(let w=0;w<g.length;w++){const _=S?S[w]:(g[w]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);n[f]=x+y*_,t.createPolyDataForOneLabel(C[w],n,h,"horizontal",v,p)}const T=pe.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(T),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var v,m;const r=e.renderable.getScalarsToColors();let i=0;e.renderable.getDrawNanAnnotation()&&r.getNanColor()&&(i+=1),e.renderable.getDrawBelowRangeSwatch()&&((v=r.getUseBelowRangeColor)!=null&&v.call(r))&&(i+=1),e.renderable.getDrawAboveRangeSwatch()&&((m=r.getUseAboveRangeColor)!=null&&m.call(r))&&(i+=1);const o=4*(1+i),s=o;let c=1;r.getVectorMode()===t6.COMPONENT&&(c=r.getVectorComponent()+1);const l=new Float64Array(o*3),p=new Uint16Array(s*5),u=new Float32Array(o*c);let f=0,h=0;for(let x=0;x<e.barSegments.length;x++){const y=e.barSegments[x];for(let g=0;g<4;g++){n[0]=e.barPosition[0]+y.corners[g][0]*e.barSize[0],n[1]=e.barPosition[1]+y.corners[g][1]*e.barSize[1],l[f*3]=(.5*n[0]+.5)*e.lastSize[0],l[f*3+1]=(.5*n[1]+.5)*e.lastSize[1],l[f*3+2]=n[2];for(let C=0;C<c;C++)u[f*c+C]=e.lastTickBounds[0]+y.scalars[g]*(e.lastTickBounds[1]-e.lastTickBounds[0]);f++}p[h*5]=4,p[h*5+1]=f-4,p[h*5+2]=f-3,p[h*5+3]=f-2,p[h*5+4]=f-1,h++}const d=pe.newInstance({numberOfComponents:c,values:u,name:"Scalars"});e.polyData.getPointData().setScalars(d),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(p,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const r6=V.newInstance(function(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},a),V.obj(t,e),V.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),V.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),V.getArray(t,e,["boxPosition","boxSize"]),V.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=gn.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=Xe.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=pn.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=Xe.newInstance(),e.tmMapper=gn.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=A0.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=pn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],n6(t,e)},"vtkScalarBarActorHelper");function a6(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=a=>{e.tickTextStyle={...e.tickTextStyle,...a},t.modified()},t.setAxisTextStyle=a=>{e.axisTextStyle={...e.axisTextStyle,...a},t.modified()},t.setOrientationToHorizontal=()=>t.setOrientation(Oo.HORIZONTAL),t.setOrientationToVertical=()=>t.setOrientation(Oo.VERTICAL),t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(uh(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(lh())}}function i6(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,orientation:null,...t}}function fh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i6(a)),e.autoLayout||(e.autoLayout=uh(t,e)),e.generateTicks||(e.generateTicks=lh()),pn.extend(t,e,a),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),V.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch","orientation"]),V.get(t,e,["axisTextStyle","tickTextStyle"]),V.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),V.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),a6(t,e)}var ph={newInstance:V.newInstance(fh,"vtkScalarBarActor"),extend:fh,newScalarBarActorHelper:r6,...ch};function o6(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(a,n)=>{if(a){const r=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],r,e._openGLRenderWindow.getRenderable())}}}const s6={};function c6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s6,a),Ct.extend(t,e,a),e.scalarBarActorHelper=ph.newScalarBarActorHelper(),o6(t,e)}const u6=Je(c6,"vtkOpenGLScalarBarActor");st("vtkScalarBarActor",u6);const{vtkErrorMacro:hh}=Dt;function l6(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=a=>{if(a){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const n=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(n.getActiveCamera(),e.openGLCamera)}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},t.opaquePass=(a,n)=>{if(a&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const r=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",r);const i=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(i),s=new Float64Array(16);if(Et(s,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",s),e.lastFormat==="box"){const c=i.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",c[0],c[1],c[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const n=new Float32Array(12);for(let s=0;s<4;s++)n[s*3]=s%2*2-1,n[s*3+1]=s>1?1:-1,n[s*3+2]=1;const r=pe.newInstance({numberOfComponents:3,values:n});r.setName("points");const i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;const o=pe.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(o,"polys",Jt.SURFACE,{points:r,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||hh("Error setting vertexMC in shader VAO."));const a=e.renderable.getTextures();a.length||hh("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==a[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(a[0]))}}const f6={context:null};function p6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f6,a),Ct.extend(t,e,a),e.openGLTexture=Re.newInstance(),e.tris=jt.newInstance(),e.keyMatrixTime={},ut(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:It(new Float64Array(9)),mcwc:Te(new Float64Array(16))},pt(t,e,["context"]),At(t,e,["activeTextures"]),l6(t,e)}const h6=Je(p6);st("vtkSkybox",h6);const{FieldAssociations:g6}=dr;function d6(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(a,n,r,i,o)=>{},t.selectAsync=async(a,n,r,i,o)=>{const s=await t.getSourceDataAsync(a,n,r,i,o);return s?s.generateSelection(n,r,i,o):[]}}const v6={fieldAssociation:g6.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function gh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v6,a),V.obj(t,e),V.setGet(t,e,["fieldAssociation","captureZValues"]),d6(t,e)}var y6={newInstance:V.newInstance(gh,"vtkHardwareSelector"),extend:gh};function m6(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=a=>{const n=typeof a<"u"?a:t.getBothMode();t.saveCurrentBindings(n),t.saveCurrentBuffers(n)},t.saveCurrentBindings=a=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const n=e.context;e.previousDrawBinding=n.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=a=>{},t.restorePreviousBindingsAndBuffers=a=>{const n=typeof a<"u"?a:t.getBothMode();t.restorePreviousBindings(n),t.restorePreviousBuffers(n)},t.restorePreviousBindings=a=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const n=e.context;n.bindFramebuffer(n.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=a=>{},t.bind=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;n===null&&(n=e.context.FRAMEBUFFER),e.context.bindFramebuffer(n,e.glFramebuffer);for(let r=0;r<e.colorBuffers.length;r++)e.colorBuffers[r].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(a,n)=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=a,e.glFramebuffer.height=n},t.setColorBuffer=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=e.context;if(!r){ze("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{ze("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[n]=a,r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,a.getHandle(),0)},t.removeColorBuffer=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=e.context;if(!n){ze("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let r=n.COLOR_ATTACHMENT0;if(a>0)if(e._openGLRenderWindow.getWebgl2())r+=a;else{ze("Using multiple framebuffer attachments requires WebGL 2");return}n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(a,1)},t.setDepthBuffer=a=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,a.getHandle(),0)}else ze("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const a=e.context;a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,null,0)}else ze("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){ze("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const a=e.context,n=Re.newInstance();n.setOpenGLRenderWindow(e._openGLRenderWindow),n.setMinificationFilter(me.LINEAR),n.setMagnificationFilter(me.LINEAR),n.create2DFromRaw({width:e.glFramebuffer.width,height:e.glFramebuffer.height,numComps:4,dataType:Ne.UNSIGNED_CHAR,data:null}),t.setColorBuffer(n),e.depthTexture=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,e.depthTexture),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const x6={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function dh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x6,a),ut(t,e),e.colorBuffers&&ze("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],Sa(t,e,["colorBuffers"]),m6(t,e)}var Er={newInstance:Je(dh,"vtkFramebuffer"),extend:dh},C6={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};function S6(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const T6={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function vh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T6,a),V.obj(t,e),e.properties={},V.setGet(t,e,["contentType","fieldType","properties","selectionList"]),S6(t,e)}var yh={newInstance:V.newInstance(vh,"vtkSelectionNode"),extend:vh,...C6};const{PassTypes:ft}=ip,{SelectionContent:w6,SelectionField:mh}=yh,{FieldAssociations:Ka}=dr,{vtkErrorMacro:xh}=V,Wn=1;function Ch(t){return`${t.propID} ${t.compositeID}`}function Sh(t,e,a,n){if(!a)return 0;const r=(e*(n[2]-n[0]+1)+t)*4;return a[r+3]}function Mn(t,e,a,n){if(!a)return 0;const r=(e*(n[2]-n[0]+1)+t)*4,i=a[r],o=a[r+1];return(a[r+2]*256+o)*256+i}function Th(t,e){let a=e;return a<<=24,a|=t,a}function na(t,e,a,n){const r=a<0?0:a;if(r===0){if(n[0]=e[0],n[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const c=[e[0]-t.area[0],e[1]-t.area[1]],l=Mn(c[0],c[1],t.pixBuffer[ft.ACTOR_PASS],t.area);if(l<=0||l-Wn>=t.props.length)return null;const p={};p.valid=!0,p.propID=l-Wn,p.prop=t.props[p.propID];let u=Mn(c[0],c[1],t.pixBuffer[ft.COMPOSITE_INDEX_PASS],t.area);if((u<0||u>16777215)&&(u=0),p.compositeID=u-Wn,t.captureZValues){const d=(c[1]*(t.area[2]-t.area[0]+1)+c[0])*4;p.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,p.displayPosition=e}if(t.pixBuffer[ft.ID_LOW24]&&Sh(c[0],c[1],t.pixBuffer[ft.ID_LOW24],t.area)===0)return p;const f=Mn(c[0],c[1],t.pixBuffer[ft.ID_LOW24],t.area),h=Mn(c[0],c[1],t.pixBuffer[ft.ID_HIGH24],t.area);return p.attributeID=Th(f,h),p}const i=[e[0],e[1]],o=[0,0];let s=na(t,e,0,n);if(s&&s.valid)return s;for(let c=1;c<r;++c){for(let l=i[1]>c?i[1]-c:0;l<=i[1]+c;++l)if(o[1]=l,i[0]>=c&&(o[0]=i[0]-c,s=na(t,o,0,n),s&&s.valid)||(o[0]=i[0]+c,s=na(t,o,0,n),s&&s.valid))return s;for(let l=i[0]>=c?i[0]-(c-1):0;l<=i[0]+(c-1);++l)if(o[0]=l,i[1]>=c&&(o[1]=i[1]-c,s=na(t,o,0,n),s&&s.valid)||(o[1]=i[1]+c,s=na(t,o,0,n),s&&s.valid))return s}return n[0]=e[0],n[1]=e[1],null}function wh(t,e,a,n,r){const i=[];let o=0;return e.forEach((s,c)=>{const l=yh.newInstance();switch(l.setContentType(w6.INDICES),t){case Ka.FIELD_ASSOCIATION_CELLS:l.setFieldType(mh.CELL);break;case Ka.FIELD_ASSOCIATION_POINTS:l.setFieldType(mh.POINT);break;default:xh("Unknown field association")}l.getProperties().propID=s.info.propID,l.getProperties().prop=s.info.prop,l.getProperties().compositeID=s.info.compositeID,l.getProperties().attributeID=s.info.attributeID,l.getProperties().pixelCount=s.pixelCount,a&&(l.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],l.getProperties().worldPosition=r.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,n)),l.setSelectionList(s.attributeIDs),i[o]=l,o++}),i}function _6(t,e,a,n,r){const i=Math.floor(e),o=Math.floor(a),s=Math.floor(n),c=Math.floor(r),l=new Map,p=[0,0];for(let u=o;u<=c;u++)for(let f=i;f<=s;f++){const d=na(t,[f,u],0,p);if(d&&d.valid){const v=Ch(d);if(!l.has(v))l.set(v,{info:d,pixelCount:1,attributeIDs:[d.attributeID]});else{const m=l.get(v);m.pixelCount++,t.captureZValues&&d.zValue<m.info.zValue&&(m.info=d),m.attributeIDs.indexOf(d.attributeID)===-1&&m.attributeIDs.push(d.attributeID)}}}return wh(t.fieldAssociation,l,t.captureZValues,t.renderer,t.openGLRenderWindow)}function E6(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e.maxAttributeId=0;const n=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Er.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(n[0],n[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const r=e.framebuffer.getSize();!r||r[0]!==n[0]||r[1]!==n[1]?(e.framebuffer.create(n[0],n[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===Ka.FIELD_ASSOCIATION_POINTS){const r=e._openGLRenderWindow.getContext(),i=r.isEnabled(r.BLEND);r.disable(r.BLEND),e._openGLRenderWindow.traverseAllPasses(),i&&r.enable(r.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const n=e._openGLRenderWindow.getContext();e.originalBlending=n.isEnabled(n.BLEND),n.disable(n.BLEND)},t.postCapturePass=()=>{const n=e._openGLRenderWindow.getContext();e.originalBlending&&n.enable(n.BLEND)},t.select=()=>{let n=null;return t.captureBuffers()&&(n=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),n},t.getSourceDataAsync=async(n,r,i,o,s)=>{if(e._renderer=n,r===void 0){const l=e._openGLRenderWindow.getSize();t.setArea(0,0,l[0]-1,l[1]-1)}else t.setArea(r,i,o,s);if(!t.captureBuffers())return!1;const c={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:n,openGLRenderWindow:e._openGLRenderWindow};return c.generateSelection=function(){for(var l=arguments.length,p=new Array(l),u=0;u<l;u++)p[u]=arguments[u];return _6(c,...p)},c},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return xh("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const n=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const r=[];for(e.currentPass=ft.MIN_KNOWN_PASS;e.currentPass<=ft.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===ft.ACTOR_PASS&&typeof n[0].requestDepth=="function"&&typeof n[0].getFramebuffer=="function"&&n[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),r.push(e.currentPass));return r.forEach(i=>{e.currentPass=i,t.processPixelBuffers()}),e.currentPass=ft.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((n,r)=>{t.isPropHit(r)&&n.processSelectorPixelBuffers(t,e.propPixels[r])})},t.passRequired=n=>{if(n===ft.ID_HIGH24){if(e.fieldAssociation===Ka.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===Ka.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=n=>{if(e.pixBuffer[n]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[n]){const r=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[n]=new Uint8Array(r),e.rawPixBuffer[n].set(e.pixBuffer[n])}if(n===ft.ACTOR_PASS){if(e.captureZValues){const r=e._openGLRenderWindow.getRenderPasses();if(typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"){const i=r[0].getFramebuffer();i.saveCurrentBindingsAndBuffers(),i.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),i.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[n])}},t.buildPropHitList=n=>{let r=0;for(let i=0;i<=e.area[3]-e.area[1];i++)for(let o=0;o<=e.area[2]-e.area[0];o++){let s=Mn(o,i,n,e.area);s>0&&(s--,s in e.hitProps||(e.hitProps[s]=!0,e.propPixels[s]=[]),e.propPixels[s].push(r*4)),++r}},t.renderProp=n=>{e.currentPass===ft.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Wn),e.props.push(n))},t.renderCompositeIndex=n=>{e.currentPass===ft.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(n+Wn)},t.renderAttributeId=n=>{n<0||(e.maxAttributeId=n>e.maxAttributeId?n:e.maxAttributeId)},t.passTypeToString=n=>V.enumToString(ft,n),t.isPropHit=n=>Boolean(e.hitProps[n]),t.setPropColorValueFromInt=n=>{e.propColorValue[0]=n%256/255,e.propColorValue[1]=Math.floor(n/256)%256/255,e.propColorValue[2]=Math.floor(n/65536)%256/255},t.getPixelInformation=(n,r,i)=>{const o=r<0?0:r;if(console.log("getPixelInformation called",o),o===0){if(i[0]=n[0],i[1]=n[1],n[0]<e.area[0]||n[0]>e.area[2]||n[1]<e.area[1]||n[1]>e.area[3])return null;console.log(n),console.log(e.area);const p=[n[0]-e.area[0],n[1]-e.area[1]];console.log("adjusted displayPosition",p);const u=Mn(p[0],p[1],e.pixBuffer[ft.ACTOR_PASS],e.area);if(console.log("actorid",u),u<=0||u-Wn>=e.props.length)return null;const f={};f.valid=!0,f.propID=u-Wn,f.prop=e.props[f.propID];let h=Mn(p[0],p[1],e.pixBuffer[ft.COMPOSITE_INDEX_PASS],e.area);if((h<0||h>16777215)&&(h=0),f.compositeID=h-Wn,e.captureZValues){const m=(p[1]*(e.area[2]-e.area[0]+1)+p[0])*4;f.zValue=(256*e.zBuffer[m]+e.zBuffer[m+1])/65535,f.displayPosition=n}if(e.pixBuffer[ft.ID_LOW24]&&Sh(p[0],p[1],e.pixBuffer[ft.ID_LOW24],e.area)===0)return f;const d=Mn(p[0],p[1],e.pixBuffer[ft.ID_LOW24],e.area),v=Mn(p[0],p[1],e.pixBuffer[ft.ID_HIGH24],e.area);return f.attributeID=Th(d,v),f}const s=[n[0],n[1]],c=[0,0];let l=t.getPixelInformation(n,0,i);if(l&&l.valid)return l;for(let p=1;p<o;++p){for(let u=s[1]>p?s[1]-p:0;u<=s[1]+p;++u)if(c[1]=u,s[0]>=p&&(c[0]=s[0]-p,l=t.getPixelInformation(c,0,i),l&&l.valid)||(c[0]=s[0]+p,l=t.getPixelInformation(c,0,i),l&&l.valid))return l;for(let u=s[0]>=p?s[0]-(p-1):0;u<=s[0]+(p-1);++u)if(c[0]=u,s[1]>=p&&(c[1]=s[1]-p,l=t.getPixelInformation(c,0,i),l&&l.valid)||(c[1]=s[1]+p,l=t.getPixelInformation(c,0,i),l&&l.valid))return l}return i[0]=n[0],i[1]=n[1],null},t.generateSelection=(n,r,i,o)=>{const s=Math.floor(n),c=Math.floor(r),l=Math.floor(i),p=Math.floor(o),u=new Map,f=[0,0];for(let h=c;h<=p;h++)for(let d=s;d<=l;d++){const v=[d,h],m=t.getPixelInformation(v,0,f);if(m&&m.valid){const x=Ch(m);if(!u.has(x))u.set(x,{info:m,pixelCount:1,attributeIDs:[m.attributeID]});else{const y=u.get(x);y.pixelCount++,e.captureZValues&&m.zValue<y.info.zValue&&(y.info=m),y.attributeIDs.indexOf(m.attributeID)===-1&&y.attributeIDs.push(m.attributeID)}}}return wh(e.fieldAssociation,u,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=n=>e.rawPixBuffer[n],t.getPixelBuffer=n=>e.pixBuffer[n],t.attach=(n,r)=>{e._openGLRenderWindow=n,e._renderer=r};const a=t.setArea;t.setArea=function(){return a(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const D6={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function _h(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D6,a),y6.extend(t,e,a),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),V.setGetArray(t,e,["area"],4),V.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),V.setGetArray(t,e,["propColorValue"],3),V.moveToProtected(t,e,["renderer","openGLRenderWindow"]),V.event(t,e,"event"),E6(t,e)}var Xa={newInstance:V.newInstance(_h,"vtkOpenGLHardwareSelector"),extend:_h,...ip};const{vtkErrorMacro:qa}=Dt,{Representation:O6}=pr,{ObjectType:bo}=On,{PassTypes:b6}=Xa,M6={type:"StartEvent"},N6={type:"EndEvent"},R6=64,L6=16;function F6(t,e){e.classHierarchy.push("vtkOpenGLGlyph3DMapper");const a={...t};t.renderPiece=(n,r)=>{if(t.invokeEvent(M6),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(1),t.invokeEvent(N6),!e.currentInput){qa("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context;e._openGLRenderWindow.getWebgl2()?(e.hardwareSupport=!0,e.extension=null):e.extension||(e.extension=e.context.getExtension("ANGLE_instanced_arrays"),e.hardwareSupport=!!e.extension);const o=r.getProperty().getBackfaceCulling(),s=r.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.multiply4x4WithOffset=(n,r,i,o)=>{const s=r[0],c=r[1],l=r[2],p=r[3],u=r[4],f=r[5],h=r[6],d=r[7],v=r[8],m=r[9],x=r[10],y=r[11],g=r[12],C=r[13],S=r[14],T=r[15];let w=i[o],_=i[o+1],E=i[o+2],D=i[o+3];n[0]=w*s+_*u+E*v+D*g,n[1]=w*c+_*f+E*m+D*C,n[2]=w*l+_*h+E*x+D*S,n[3]=w*p+_*d+E*y+D*T,w=i[o+4],_=i[o+5],E=i[o+6],D=i[o+7],n[4]=w*s+_*u+E*v+D*g,n[5]=w*c+_*f+E*m+D*C,n[6]=w*l+_*h+E*x+D*S,n[7]=w*p+_*d+E*y+D*T,w=i[o+8],_=i[o+9],E=i[o+10],D=i[o+11],n[8]=w*s+_*u+E*v+D*g,n[9]=w*c+_*f+E*m+D*C,n[10]=w*l+_*h+E*x+D*S,n[11]=w*p+_*d+E*y+D*T,w=i[o+12],_=i[o+13],E=i[o+14],D=i[o+15],n[12]=w*s+_*u+E*v+D*g,n[13]=w*c+_*f+E*m+D*C,n[14]=w*l+_*h+E*x+D*S,n[15]=w*p+_*d+E*y+D*T},t.replaceShaderNormal=(n,r,i)=>{if(e.hardwareSupport&&e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let s=n.Vertex;e.lastBoundBO.getCABO().getNormalOffset()&&(s=Q.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=Q.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),n.Vertex=s}a.replaceShaderNormal(n,r,i)},t.replaceShaderClip=(n,r,i)=>{if(e.hardwareSupport){let o=n.Vertex,s=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes();o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${c}];`,`varying float clipDistancesVSOutput[${c}];`]).result,o=Q.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    vec4 gVertex = gMatrix * vertexMC;","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], gVertex);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${c}];`]).result,s=Q.substitute(s,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=o,n.Fragment=s}a.replaceShaderClip(n,r,i)},t.replaceShaderColor=(n,r,i)=>{if(e.hardwareSupport&&e.renderable.getColorArray()){let o=n.Vertex,s=n.Geometry,c=n.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let p=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];l&&(p=p.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let u=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(u=u.concat(["  vec3 specularColor;","  float specularPower;"])),u=u.concat(["  opacity = opacityUniform;"]),l&&(u=u.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.drawingEdges||(p=p.concat(["varying vec4 vertexColorVSOutput;"]),o=Q.substitute(o,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,o=Q.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,s=Q.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Q.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,u=u.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),c=Q.substitute(c,"//VTK::Color::Impl",u).result,c=Q.substitute(c,"//VTK::Color::Dec",p).result,n.Vertex=o,n.Geometry=s,n.Fragment=c}a.replaceShaderColor(n,r,i)},t.replaceShaderPositionVC=(n,r,i)=>{if(e.hardwareSupport){let o=n.Vertex;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Q.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,o=Q.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(o=Q.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),n.Vertex=o}a.replaceShaderPositionVC(n,r,i)},t.replaceShaderPicking=(n,r,i)=>{if(e.hardwareSupport){let o=n.Fragment,s=n.Vertex;s=Q.substitute(s,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,s=Q.substitute(s,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,n.Vertex=s,o=Q.substitute(o,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Q.substitute(o,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,n.Fragment=o}else a.replaceShaderPicking(n,r,i)},t.updateGlyphShaderParameters=(n,r,i,o,s,c,l,p)=>{const u=i.getProgram();if(n){const f=e.normalMatrix,h=c,d=l*9,v=e.tmpMat3,m=f[0],x=f[1],y=f[2],g=f[3],C=f[4],S=f[5],T=f[6],w=f[7],_=f[8],E=h[d],D=h[d+1],O=h[d+2],M=h[d+3],N=h[d+4],R=h[d+5],B=h[d+6],I=h[d+7],P=h[d+8];v[0]=E*m+D*g+O*T,v[1]=E*x+D*C+O*w,v[2]=E*y+D*S+O*_,v[3]=M*m+N*g+R*T,v[4]=M*x+N*C+R*w,v[5]=M*y+N*S+R*_,v[6]=B*m+I*g+P*T,v[7]=B*x+I*C+P*w,v[8]=B*y+I*S+P*_,u.setUniformMatrix3x3("normalMatrix",e.tmpMat3)}if(t.multiply4x4WithOffset(e.tmpMat4,e.mcpcMatrix,s,l*16),u.setUniformMatrix("MCPCMatrix",e.tmpMat4),r&&(t.multiply4x4WithOffset(e.tmpMat4,e.mcvcMatrix,s,l*16),u.setUniformMatrix("MCVCMatrix",e.tmpMat4)),o){const f=o.getData();e.tmpColor[0]=f[l*4]/255,e.tmpColor[1]=f[l*4+1]/255,e.tmpColor[2]=f[l*4+2]/255,u.setUniform3fArray("ambientColorUniform",e.tmpColor),u.setUniform3fArray("diffuseColorUniform",e.tmpColor)}p&&u.setUniform3fArray("mapperIndex",p.getPropColorValue())},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation(),o=e.context,s=r.getProperty().getEdgeVisibility()&&i===O6.SURFACE,c=e.openGLCamera.getKeyMatrices(n),l=e.openGLActor.getKeyMatrices();Qn(e.normalMatrix,c.normalMatrix,l.normalMatrix),Ee(e.mcpcMatrix,c.wcpc,l.mcwc),Ee(e.mcvcMatrix,c.wcvc,l.mcwc);const p=e.renderable.getMatrixArray(),u=e.renderable.getNormalArray(),f=e.renderable.getColorArray(),h=p.length/16;let d=!1;e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().getCurrentPass()===b6.COMPOSITE_INDEX_PASS&&(d=!0);for(let v=e.primTypes.Start;v<e.primTypes.End;v++){const m=e.primitives[v].getCABO();if(m.getElementCount()){e.drawingEdges=s&&(v===e.primTypes.TrisEdges||v===e.primTypes.TriStripsEdges),e.lastBoundBO=e.primitives[v],e.primitives[v].updateShaders(n,r,t);const x=e.primitives[v].getProgram(),y=e.primitives[v].getOpenGLMode(i),g=x.isUniformUsed("normalMatrix"),C=x.isUniformUsed("MCVCMatrix");if(e.hardwareSupport)e.extension?e.extension.drawArraysInstancedANGLE(y,0,m.getElementCount(),h):o.drawArraysInstanced(y,0,m.getElementCount(),h);else for(let S=0;S<h;++S)d&&e._openGLRenderer.getSelector().renderCompositeIndex(S),t.updateGlyphShaderParameters(g,C,e.primitives[v],f,p,u,S,d?e._openGLRenderer.getSelector():null),o.drawArrays(y,0,m.getElementCount())}}},t.setMapperShaderParameters=(n,r,i)=>{if(n.getCABO().getElementCount()&&(e.glyphBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){n.getProgram().isAttributeUsed("gMatrix")?n.getVAO().addAttributeMatrixWithDivisor(n.getProgram(),e.matrixBuffer,"gMatrix",0,64,e.context.FLOAT,4,!1,1)||qa("Error setting gMatrix in shader VAO."):n.getVAO().removeAttributeArray("gMatrix"),n.getProgram().isAttributeUsed("gNormal")?n.getVAO().addAttributeMatrixWithDivisor(n.getProgram(),e.normalBuffer,"gNormal",0,36,e.context.FLOAT,3,!1,1)||qa("Error setting gNormal in shader VAO."):n.getVAO().removeAttributeArray("gNormal"),n.getProgram().isAttributeUsed("gColor")?n.getVAO().addAttributeArrayWithDivisor(n.getProgram(),e.colorBuffer,"gColor",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||qa("Error setting gColor in shader VAO."):n.getVAO().removeAttributeArray("gColor"),n.getProgram().isAttributeUsed("mapperIndexVS")?n.getVAO().addAttributeArrayWithDivisor(n.getProgram(),e.pickBuffer,"mapperIndexVS",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||qa("Error setting mapperIndexVS in shader VAO."):n.getVAO().removeAttributeArray("mapperIndexVS"),a.setMapperShaderParameters(n,r,i),n.getAttributeUpdateTime().modified();return}a.setMapperShaderParameters(n,r,i)},t.getNeedToRebuildBufferObjects=(n,r)=>(e.renderable.buildArrays(),e.VBOBuildTime.getMTime()<e.renderable.getBuildTime().getMTime()?!0:a.getNeedToRebuildBufferObjects(n,r)),t.getNeedToRebuildShaders=(n,r,i)=>!!(a.getNeedToRebuildShaders(n,r,i)||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime()),t.buildBufferObjects=(n,r)=>{const i=e.renderable.getMatrixArray(),o=e.renderable.getInputData(0).getPoints(),{useShiftAndScale:s,coordShift:c,coordScale:l}=I0(o);if(e.hardwareSupport){const p=e.renderable.getNormalArray(),u=e.renderable.getColorArray();if(e.matrixBuffer||(e.matrixBuffer=On.newInstance(),e.matrixBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.normalBuffer=On.newInstance(),e.normalBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorBuffer=On.newInstance(),e.colorBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.pickBuffer=On.newInstance(),e.pickBuffer.setOpenGLRenderWindow(e._openGLRenderWindow)),s){const f=i.buffer,h=jp(c,l);Et(h,h);for(let d=0;d<i.byteLength;d+=R6){const v=new Float32Array(f,d,L6);Ee(v,h,v)}}if(e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.matrixBuffer.upload(i,bo.ARRAY_BUFFER),e.normalBuffer.upload(p,bo.ARRAY_BUFFER),u?e.colorBuffer.upload(u.getData(),bo.ARRAY_BUFFER):e.colorBuffer.releaseGraphicsResources();const f=i.length/16,h=new Uint8Array(4*f);for(let d=0;d<f;++d){let v=d+1;const m=d*4;h[m]=v%256,v-=h[m],v/=256,h[m+1]=v%256,v-=h[m+1],v/=256,h[m+2]=v%256,h[m+3]=255}e.pickBuffer.upload(h,bo.ARRAY_BUFFER),e.glyphBOBuildTime.modified()}}if(a.buildBufferObjects(n,r),s)for(let p=yn.Start;p<yn.End;p++)e.primitives[p].getCABO().setCoordShiftAndScale(c,l)}}const k6={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function V6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k6,a),Do.extend(t,e,a),e.tmpMat3=It(new Float64Array(9)),e.normalMatrix=It(new Float64Array(9)),e.mcpcMatrix=Te(new Float64Array(16)),e.mcvcMatrix=Te(new Float64Array(16)),e.tmpColor=[],e.glyphBOBuildTime={},ut(e.glyphBOBuildTime,{mtime:0}),F6(t,e)}const A6=Je(V6,"vtkOpenGLGlyph3DMapper");st("vtkGlyph3DMapper",A6);const{vtkErrorMacro:B6}=V;class U6{constructor(){this.segmentMapping={},this.segments=[null],this.faces=[]}addSegment(e){const a=e[0],n=e[e.length-1];if(a===n||e.length<2)return;const r=this.segmentMapping[a],i=this.segmentMapping[n];if(r!==void 0&&i!==void 0)if(Math.abs(r)===Math.abs(i)){const o=r<i?i:r,s=this.segments[o];if(r>0)for(let c=1;c<e.length-1;c++)s.push(e[c]);else for(let c=1;c<e.length-1;c++)s.unshift(e[e.length-1-c]);this.faces.push(s),this.segments[o]=null,this.segmentMapping[a]=void 0,this.segmentMapping[n]=void 0}else{const o=Math.abs(r),s=Math.abs(i),c=this.segments[o],l=this.segments[s];this.segments[o]=null,this.segments[s]=null,this.segmentMapping[c[0]]=void 0,this.segmentMapping[l[0]]=void 0,this.segmentMapping[c[c.length-1]]=void 0,this.segmentMapping[l[l.length-1]]=void 0,this.addSegment(e),this.addSegment(c),this.addSegment(l)}else if(r!==void 0){if(r>0){const o=this.segments[r];for(let s=1;s<e.length;s++)o.push(e[s]);this.segmentMapping[n]=r}else{const o=this.segments[-r];this.segmentMapping[n]=r;for(let s=1;s<e.length;s++)o.unshift(e[s])}this.segmentMapping[a]=void 0}else if(i!==void 0){if(i>0){const o=this.segments[i];for(let s=1;s<e.length;s++)o.push(e[e.length-1-s]);this.segmentMapping[a]=i}else{const o=this.segments[-i];this.segmentMapping[a]=i;for(let s=1;s<e.length;s++)o.unshift(e[e.length-s-1])}this.segmentMapping[n]=void 0}else{const o=this.segments.length;this.segments.push(e),this.segmentMapping[a]=-o,this.segmentMapping[n]=o}}}function G6(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=(a,n)=>{var f;const r=a[0];if(!r){B6("Invalid or missing input");return}const i=((f=n[0])==null?void 0:f.initialize())||Xe.newInstance();i.shallowCopy(r);const o=new U6,s=r.getLines().getData();let c=0;for(;c<s.length;){const h=s[c++],d=[];for(let v=0;v<h;v++)d.push(s[c+v]);o.addSegment(d),c+=h}const{faces:l}=o;let p=l.length;for(let h=0;h<l.length;h++)p+=l[h].length;const u=new Uint16Array(p);c=0;for(let h=0;h<l.length;h++){const d=l[h];u[c++]=d.length;for(let v=0;v<d.length;v++)u[c++]=d[v]}i.setPolys(jn.newInstance({values:u,name:"faces"})),n[0]=i}}const I6={};function Eh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I6,a),V.obj(t,e),V.algo(t,e,1,1),G6(t,e)}var P6={newInstance:V.newInstance(Eh,"vtkClosedPolyLineToSurfaceFilter"),extend:Eh};const{vtkErrorMacro:Dh}=Dt;function z6(t){const e=t.getPolys().getData(),a=t.getStrips().getData(),n={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(n.polyIdx<e.length){n.cellSize=e[n.polyIdx];const r=n.polyIdx+1,i=r+n.cellSize;n.polyIdx=i;let o=0;for(let s=r;s<i;++s)n.cell[o++]=e[s]}else if(n.stripIdx<a.length){n.cellSize=3,n.remainingStripLength===0&&(n.remainingStripLength=a[n.stripIdx]-2,n.stripIdx+=3);const r=n.stripIdx-2,i=n.stripIdx+1;n.stripIdx++,n.remainingStripLength--;let o=0;for(let s=r;s<i;++s)n.cell[o++]=a[s]}else if(!n.done)n.done=!0;else throw new Error("Iterator is done")}};return n.next(),n}function j6(t,e){e.classHierarchy.push("vtkCutter");const a={...t};t.getMTime=()=>{let r=a.getMTime();return e.cutFunction&&(r=Math.max(r,e.cutFunction.getMTime())),r};function n(r,i){const o=r.getPoints(),s=o.getData(),c=r.getPointData(),l=o.getNumberOfPoints(),p=[],u=[],f=[],h={},d=c.getNumberOfArrays();for(let w=0;w<d;w++)h[c.getArrayName(w)]=[];(!e.cutScalars||e.cutScalars.length<l)&&(e.cutScalars=new Float32Array(l));let v=0,m=0;for(;v<s.length;)e.cutScalars[m++]=e.cutFunction.evaluateFunction(s[v++],s[v++],s[v++]);const x=[],y=new Array(3),g=new Array(3),C=[];for(const w=z6(r);!w.done;w.next()){if(w.cellSize<=2)continue;for(let M=0;M<w.cellSize;)C[M]=e.cutScalars[w.cell[M++]];const _=C[0]>0;let E=!0;for(let M=1;M<w.cell.length;M++)if(C[M]>0!==_){E=!1;break}if(E)continue;const D=[];for(let M=0;M<w.cellSize;M++){const N=M+1===w.cellSize?0:M+1,R=C[M]>0;if(C[N]>0===R)continue;let I=M,P=N,L=C[P]-C[I];L<=0&&(I=N,P=M,L*=-1);let k=0;L!==0&&(k=(e.cutValue-C[I])/L);const A=w.cell[I],j=w.cell[P];y[0]=s[A*3],y[1]=s[A*3+1],y[2]=s[A*3+2],g[0]=s[j*3],g[1]=s[j*3+1],g[2]=s[j*3+2];const H=[y[0]+k*(g[0]-y[0]),y[1]+k*(g[1]-y[1]),y[2]+k*(g[2]-y[2])],K={};for(let Y=0;Y<d;Y++){const q=c.getArrayByIndex(Y),Z=c.getArrayName(Y),re=q.getData(),ae=q.getNumberOfComponents(),ee=new Array(ae);for(let F=0;F<ae;F++){const b=re[ae*A+F],G=re[ae*j+F];ee.push(b+k*(G-b))}K[Z]=ee}D.push({pointEdge1:A,pointEdge2:j,intersectedPoint:H,intersectedArrays:K,newPointID:-1})}for(let M=0;M<D.length;M++){const N=D[M];let R=!1;for(let B=0;B<x.length;B++){const I=x[B],P=N.pointEdge1===I.pointEdge1&&N.pointEdge2===I.pointEdge2,L=N.intersectedPoint[0]===I.intersectedPoint[0]&&N.intersectedPoint[1]===I.intersectedPoint[1]&&N.intersectedPoint[2]===I.intersectedPoint[2];if(P||L){R=!0,D[M].newPointID=x[B].newPointID;break}}R||(p.push(N.intersectedPoint[0]),p.push(N.intersectedPoint[1]),p.push(N.intersectedPoint[2]),Object.keys(N.intersectedArrays).forEach(B=>{h[B].push(...N.intersectedArrays[B])}),D[M].newPointID=p.length/3-1,x.push(D[M]))}const O=D.length;O===2?u.push(O,D[0].newPointID,D[1].newPointID):O>2&&(f.push(O),D.forEach(M=>{f.push(M.newPointID)}))}i.getPoints().setData(Ai(o.getDataType(),p),3);const T=i.getPointData();for(let w=0;w<d;w++){const _=c.getArrayName(w),E=pe.newInstance({name:_,dataType:c.getArrayByIndex(w).getDataType(),values:h[_],numberOfComponents:c.getArrayByIndex(w).getNumberOfComponents()});T.addArray(E)}u.length!==0&&i.getLines().setData(Uint16Array.from(u)),f.length!==0&&i.getPolys().setData(Uint16Array.from(f))}t.requestData=(r,i)=>{var c;const o=r[0];if(!o){Dh("Invalid or missing input");return}if(!e.cutFunction){Dh("Missing cut function");return}const s=((c=i[0])==null?void 0:c.initialize())||Xe.newInstance();n(o,s),i[0]=s}}const W6={cutFunction:null,cutScalars:null,cutValue:0};function Oh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W6,a),ut(t,e),Es(t,e,1,1),pt(t,e,["cutFunction","cutValue"]),j6(t,e)}var $6={newInstance:Je(Oh,"vtkCutter"),extend:Oh};const H6=t=>t,bh=1e-6;class Mh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=Te(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?Ld:H6}rotateFromDirections(e,a){const n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16);on(n,e[0],e[1],e[2]),on(r,a[0],a[1],a[2]),cn(n,n),cn(r,r);const o=_i(n,r);return o>=1?this:(Ir(this.tmp,n,r),ya(this.tmp)<bh&&(Ir(this.tmp,[1,0,0],e),ya(this.tmp)<bh&&Ir(this.tmp,[0,1,0],e)),qc(i,Math.acos(o),this.tmp),Ee(this.matrix,this.matrix,i),this)}rotate(e,a){return on(this.tmp,...a),cn(this.tmp,this.tmp),mt(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return di(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return da(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return vi(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,a,n){return on(this.tmp,e,a,n),Ye(this.matrix,this.matrix,this.tmp),this}scale(e,a,n){return on(this.tmp,e,a,n),An(this.matrix,this.matrix,this.tmp),this}multiply(e){return Ee(this.matrix,this.matrix,e),this}multiply3x3(e){return Ee(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return Et(this.matrix,this.matrix),this}identity(){return Te(this.matrix),this}apply(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Jr(Ks,this.matrix))return this;const r=n===-1?e.length:a+n*3;for(let i=a;i<r;i+=3)on(this.tmp,e[i],e[i+1],e[i+2]),_e(this.tmp,this.tmp,this.matrix),e[i]=this.tmp[0],e[i+1]=this.tmp[1],e[i+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&gt(this.matrix,e),this}}function K6(){return new Mh(!0)}function X6(){return new Mh(!1)}var bt={buildFromDegree:K6,buildFromRadian:X6};const q6=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],Y6=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22];function J6(t,e){e.classHierarchy.push("vtkCubeSource"),t.requestData=(a,n)=>{var m;const r=((m=n[0])==null?void 0:m.initialize())||Xe.newInstance();n[0]=r;const i=24,o=V.newTypedArray(e.pointType,i*3);r.getPoints().setData(o,3);const s=V.newTypedArray(e.pointType,i*3),c=pe.newInstance({name:"Normals",values:s,numberOfComponents:3});r.getPointData().setNormals(c);let l=2;e.generate3DTextureCoordinates===!0&&(l=3);const p=V.newTypedArray(e.pointType,i*l),u=pe.newInstance({name:"TextureCoordinates",values:p,numberOfComponents:l});r.getPointData().setTCoords(u);const f=[0,0,0],h=[0,0,0],d=[0,0];let v=0;f[0]=-e.xLength/2,h[0]=-1,h[1]=0,h[2]=0;for(let x=0;x<2;x++){f[1]=-e.yLength/2;for(let y=0;y<2;y++){d[1]=f[1]+.5,f[2]=-e.zLength/2;for(let g=0;g<2;g++)d[0]=(f[2]+.5)*(1-2*x),o[v*3]=f[0],o[v*3+1]=f[1],o[v*3+2]=f[2],s[v*3]=h[0],s[v*3+1]=h[1],s[v*3+2]=h[2],l===2?(p[v*l]=d[0],p[v*l+1]=d[1]):(p[v*l]=2*x-1,p[v*l+1]=2*y-1,p[v*l+2]=2*g-1),v++,f[2]+=e.zLength;f[1]+=e.yLength}f[0]+=e.xLength,h[0]+=2}f[1]=-e.yLength/2,h[1]=-1,h[0]=0,h[2]=0;for(let x=0;x<2;x++){f[0]=-e.xLength/2;for(let y=0;y<2;y++){d[0]=(f[0]+.5)*(2*x-1),f[2]=-e.zLength/2;for(let g=0;g<2;g++)d[1]=(f[2]+.5)*-1,o[v*3]=f[0],o[v*3+1]=f[1],o[v*3+2]=f[2],s[v*3]=h[0],s[v*3+1]=h[1],s[v*3+2]=h[2],l===2?(p[v*l]=d[0],p[v*l+1]=d[1]):(p[v*l]=2*y-1,p[v*l+1]=2*x-1,p[v*l+2]=2*g-1),v++,f[2]+=e.zLength;f[0]+=e.xLength}f[1]+=e.yLength,h[1]+=2}f[2]=-e.zLength/2,h[2]=-1,h[0]=0,h[1]=0;for(let x=0;x<2;x++){f[1]=-e.yLength/2;for(let y=0;y<2;y++){d[1]=f[1]+.5,f[0]=-e.xLength/2;for(let g=0;g<2;g++)d[0]=(f[0]+.5)*(2*x-1),o[v*3]=f[0],o[v*3+1]=f[1],o[v*3+2]=f[2],s[v*3]=h[0],s[v*3+1]=h[1],s[v*3+2]=h[2],l===2?(p[v*l]=d[0],p[v*l+1]=d[1]):(p[v*l]=2*g-1,p[v*l+1]=2*y-1,p[v*l+2]=2*x-1),v++,f[0]+=e.xLength;f[1]+=e.yLength}f[2]+=e.zLength,h[2]+=2}if(e.rotations&&bt.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(o).apply(s),e.center&&bt.buildFromRadian().translate(...e.center).apply(o),e.matrix){bt.buildFromRadian().setMatrix(e.matrix).apply(o);const x=[e.matrix[0],e.matrix[1],e.matrix[2],0,e.matrix[4],e.matrix[5],e.matrix[6],0,e.matrix[8],e.matrix[9],e.matrix[10],0,0,0,0,1];bt.buildFromRadian().setMatrix(x).apply(s)}e.generateFaces?r.getPolys().deepCopy(e._polys):r.getPolys().initialize(),e.generateLines?(r.getLines().deepCopy(e._lineCells),r.getPointData().setNormals(null)):r.getLines().initialize(),r.modified()},t.setBounds=function(){let a=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))a=arguments.length<=0?void 0:arguments[0];else for(let n=0;n<arguments.length;n++)a.push(n<0||arguments.length<=n?void 0:arguments[n]);a.length===6&&(t.setXLength(a[1]-a[0]),t.setYLength(a[3]-a[2]),t.setZLength(a[5]-a[4]),t.setCenter([(a[0]+a[1])/2,(a[2]+a[3])/2,(a[4]+a[5])/2]))}}const Z6={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function Nh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z6,a),V.obj(t,e),V.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),V.setGetArray(t,e,["center","rotations"],3),V.setGetArray(t,e,["matrix"],16),e._polys=jn.newInstance({values:Uint16Array.from(Y6)}),e._lineCells=jn.newInstance({values:Uint16Array.from(q6)}),V.moveToProtected(t,e,["polys","lineCells"]),V.algo(t,e,0,1),J6(t,e)}var Q6={newInstance:V.newInstance(Nh,"vtkCubeSource"),extend:Nh};const{vtkErrorMacro:Rh}=V;function e8(t,e){e.classHierarchy.push("vtkImageDataOutlineFilter");const a={...t};t.requestData=(n,r)=>{const i=n[0];if(!i||!i.isA("vtkImageData")){Rh("Invalid or missing input");return}const o=i.getSpatialExtent();if(!o){Rh("Unable to fetch spatial extents of input image.");return}e._cubeSource.setBounds(o),e._cubeSource.setMatrix(i.getIndexToWorld()),r[0]=e._cubeSource.getOutputData()},t.getMTime=()=>Math.max(a.getMTime(),e._cubeSource.getMTime()),t.setGenerateFaces=e._cubeSource.setGenerateFaces,t.setGenerateLines=e._cubeSource.setGenerateLines,t.getGenerateFaces=e._cubeSource.getGenerateFaces,t.getGenerateLines=e._cubeSource.getGenerateLines}const t8={};function Lh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t8,a),V.obj(t,e),V.algo(t,e,1,1),e._cubeSource=Q6.newInstance(),V.moveToProtected(t,e,["cubeSource","tmpOut"]),e8(t,e)}var n8={newInstance:V.newInstance(Lh,"vtkImageDataOutlineFilter"),extend:Lh};const{vtkWarningMacro:r8}=V;let K0;function a8(t,e){e.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),t.transformPoint=(a,n)=>(_e(n,a,e.matrix),n),t.transformPoints=(a,n)=>{const r=new Float64Array(3),i=new Float64Array(3);for(let o=0;o<a.length;o+=3)r[0]=a[o],r[1]=a[o+1],r[2]=a[o+2],_e(i,r,e.matrix),n[o]=i[0],n[o+1]=i[1],n[o+2]=i[2];return n},t.preMultiply=()=>{t.setPreMultiplyFlag(!0)},t.postMultiply=()=>{t.setPreMultiplyFlag(!1)},t.transformMatrix=(a,n)=>(e.preMultiplyFlag?Ee(n,e.matrix,a):Ee(n,a,e.matrix),n),t.transformMatrices=(a,n)=>{const r=new Float64Array(16),i=new Float64Array(16),o=e.preMultiplyFlag?()=>Ee(i,e.matrix,r):()=>Ee(i,r,e.matrix);for(let s=0;s<a.length;s+=16){for(let c=0;c<16;++c)r[c]=a[s+c];o();for(let c=0;c<16;++c)n[s+c]=i[c]}return n},t.getInverse=()=>K0({matrix:Mt.invertMatrix(Array.from(e.matrix),[],4),preMultiplyFlag:e.preMultiplyFlag}),t.translate=(a,n,r)=>{if(a===0&&n===0&&r===0)return;const i=Ur();fs(i,[a,n,r]),e.preMultiplyFlag?Ee(e.matrix,e.matrix,i):Ee(e.matrix,i,e.matrix),t.modified()},t.rotateWXYZ=(a,n,r,i)=>{if(n===0&&r===0&&i===0){r8("No rotation applied, axis is zero vector.");return}if(a===0)return;const o=Mt.radiansFromDegrees(a),s=Bn();Di(s,[n,r,i],o);const c=new Float64Array(16);Gr(c,s),e.preMultiplyFlag?Ee(e.matrix,e.matrix,c):Ee(e.matrix,c,e.matrix),t.modified()},t.rotateX=a=>{t.rotateWXYZ(a,1,0,0)},t.rotateY=a=>{t.rotateWXYZ(a,0,1,0)},t.rotateZ=a=>{t.rotateWXYZ(a,0,0,1)},t.scale=(a,n,r)=>{if(a===1&&n===1&&r===1)return;const i=Ur();yi(i,[a,n,r]),e.preMultiplyFlag?Ee(e.matrix,e.matrix,i):Ee(e.matrix,i,e.matrix),t.modified()},t.transformNormal=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Vn(an(),e.matrix),i=an();Tn(i,r);const o=an();return Br(o,i),t.transformVector(a,n,o),Mt.normalize(n),n},t.transformNormals=(a,n)=>{const r=a.getData(),i=n.getData(),o=[0,0,0],s=Vn(an(),e.matrix),c=an();Tn(c,s);const l=an();Br(l,c);for(let p=0;p<r.length;p+=3)o[0]=r[p],o[1]=r[p+1],o[2]=r[p+2],t.transformVector(o,o,l),Mt.normalize(o),i[p]=o[0],i[p+1]=o[1],i[p+2]=o[2]},t.transformVector=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||Vn(an(),e.matrix);return Ei(n,a,i),n},t.transformVectors=(a,n)=>{const r=a.getData(),i=n.getData(),o=[0,0,0];for(let s=0;s<r.length;s+=3)o[0]=r[s],o[1]=r[s+1],o[2]=r[s+2],t.transformVector(o,o),Mt.normalize(o),i[s]=o[0],i[s+1]=o[1],i[s+2]=o[2]},t.transformPointsNormalsVectors=function(a,n,r,i,o,s){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;const p=a.getNumberOfPoints(),u=(c==null?void 0:c.length)??0,f=new Float64Array(3),h=new Float64Array(3),d=new Float64Array(3),v=new Float64Array(3);let m=!1,x=!1,y=!1;const g=[];for(let C=0;C<p;C++){if(a.getPoint(C,f),h.set(f),t.transformPoint(f,f),n.setPoint(C,...f),Mt.areEquals(h,f)||(m=!0),o){const S=o.getData(),T=s.getData();f[0]=S[C*3],f[1]=S[C*3+1],f[2]=S[C*3+2],d.set(f),t.transformVector(f,f),T[C*3]=f[0],T[C*3+1]=f[1],T[C*3+2]=f[2],Mt.areEquals(d,f)||(x=!0)}if(r){const S=r.getData(),T=i.getData();f[0]=S[C*3],f[1]=S[C*3+1],f[2]=S[C*3+2],v.set(f),t.transformNormal(f,f),T[C*3]=f[0],T[C*3+1]=f[1],T[C*3+2]=f[2],Mt.areEquals(v,f)||(y=!0)}if(c)for(let S=0;S<u;S++){const T=c[S].getData(),w=l[S].getData();f[0]=T[C*3],f[1]=T[C*3+1],f[2]=T[C*3+2],d.set(f),t.transformVector(f,f),w[C*3]=f[0],w[C*3+1]=f[1],w[C*3+2]=f[2],!Mt.arrayEqual(d,f)&&!g.includes(S)&&g.push(S)}}m&&n.modified(),x&&s.modified(),y&&i.modified(),g.forEach(C=>l[C].modified())}}const i8={preMultiplyFlag:!1,matrix:[...Ks]};function Fh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i8,a),V.obj(t,e),V.setGet(t,e,["preMultiplyFlag"]),V.setGetArray(t,e,["matrix"],16),a8(t,e)}K0=V.newInstance(Fh,"vtkTransform");var o8={newInstance:K0,extend:Fh};function $n(t,e,a){return t.length>0?`${t.map(n=>(n==null?void 0:n.getMTime())??"x").join("/")}-${e}-${a}`:"0"}function X0(t,e){return`${e.getMTime()}`}var s8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,c8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;const Dr={NEAREST:0,LINEAR:1};var u8={InterpolationType:Dr};const{vtkErrorMacro:Or}=Dt;function kh(t,e,a){return e.identity(a),t.reduce((n,r,i)=>i===0?r?e.copy(n,r):e.identity(n):r?e.multiply(n,n,r):n,a)}function l8(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper");const a=new Map;function n(c,l){if(!l)return;const u=(a.get(l)??0)-1;u<=0?(c.unregisterGraphicsResourceUser(l,t),a.delete(l)):a.set(l,u)}function r(c,l){if(!l)return;const p=a.get(l)??0,u=p+1;a.set(l,u),p<=0&&c.registerGraphicsResourceUser(l,t)}function i(c,l,p){l!==p&&(n(c,l),r(c,p))}function o(c){[...a.keys()].forEach(l=>c.unregisterGraphicsResourceUser(l,t))}t.buildPass=c=>{if(c){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const l=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(l.getActiveCamera(),e.openGLCamera);const p=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),p&&!p.isDeleted()&&p!==e._openGLRenderWindow&&o(p),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=(c,l)=>{c&&(e.currentRenderPass=l,t.render())},t.zBufferPass=c=>{c&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=c=>t.zBufferPass(c),t.opaquePass=c=>{c&&t.render()},t.getCoincidentParameters=(c,l)=>e.renderable.getResolveCoincidentTopology()==Zt.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const c=e._openGLImageSlice.getRenderable(),l=e._openGLRenderer.getRenderable();t.renderPiece(l,c)},t.renderPiece=(c,l)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update();const p=e.renderable.getNumberOfInputPorts();e.currentValidInputs=[];for(let d=0;d<p;++d){const v=e.renderable.getInputData(d);v&&!v.isDeleted()&&e.currentValidInputs.push({imageData:v,inputIndex:d})}const u=e.currentValidInputs.length;if(u<=0){Or("No input!");return}const h=e.currentValidInputs[0].imageData.getPointData().getScalars();e.multiTexturePerVolumeEnabled=u>1,e.numberOfComponents=e.multiTexturePerVolumeEnabled?u:h.getNumberOfComponents(),t.updateResliceGeometry(),t.renderPieceStart(c,l),t.renderPieceDraw(c,l),t.renderPieceFinish(c,l),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=(c,l)=>{t.updateBufferObjects(c,l);const p=l.getProperties();e.currentValidInputs.forEach(d=>{let{inputIndex:v}=d;const x=p[v].getInterpolationType(),y=e.scalarTextures[v];x===Dr.NEAREST?(y.setMinificationFilter(me.NEAREST),y.setMagnificationFilter(me.NEAREST)):(y.setMinificationFilter(me.LINEAR),y.setMagnificationFilter(me.LINEAR))});const u=e.currentValidInputs[0];p[u.inputIndex].getInterpolationType()===Dr.NEAREST?(e.colorTexture.setMinificationFilter(me.NEAREST),e.colorTexture.setMagnificationFilter(me.NEAREST),e.pwfTexture.setMinificationFilter(me.NEAREST),e.pwfTexture.setMagnificationFilter(me.NEAREST)):(e.colorTexture.setMinificationFilter(me.LINEAR),e.colorTexture.setMagnificationFilter(me.LINEAR),e.pwfTexture.setMinificationFilter(me.LINEAR),e.pwfTexture.setMagnificationFilter(me.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=(c,l)=>{const p=e.context,u=[...e.scalarTextures,e.colorTexture,e.pwfTexture];u.forEach(f=>f.activate()),t.updateShaders(e.tris,c,l),p.drawArrays(p.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),u.forEach(f=>f.deactivate())},t.renderPieceFinish=(c,l)=>{},t.updateBufferObjects=(c,l)=>{t.getNeedToRebuildBufferObjects(c,l)&&t.buildBufferObjects(c,l)},t.getNeedToRebuildBufferObjects=(c,l)=>{var p,u,f;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<l.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<((p=l.getProperty(e.currentValidInputs[0].inputIndex))==null?void 0:p.getMTime())||e.currentValidInputs.some(h=>{let{imageData:d}=h;return e.VBOBuildTime.getMTime()<d.getMTime()})||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime()||e.scalarTextures.length!==e.currentValidInputs.length||!e.scalarTextures.every(h=>!!(h!=null&&h.getHandle()))||!((u=e.colorTexture)!=null&&u.getHandle())||!((f=e.pwfTexture)!=null&&f.getHandle())},t.buildBufferObjects=(c,l)=>{var O,M;const p=l.getProperties();e.currentValidInputs.forEach((N,R)=>{var K;let{imageData:B}=N;const I=B.getPointData().getScalars(),P=e._openGLRenderWindow.getGraphicsResourceForObject(I),L=X0(B,I),k=!((K=P==null?void 0:P.oglObject)!=null&&K.getHandle())||(P==null?void 0:P.hash)!==L,A=p[R],j=A.getUpdatedExtents(),H=!!j.length;if(k&&!H){const Y=Re.newInstance();Y.setOpenGLRenderWindow(e._openGLRenderWindow);const q=B.getDimensions();Y.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),Y.resetFormatAndType(),Y.create3DFilterableFromDataArray({width:q[0],height:q[1],depth:q[2],dataArray:I}),e._openGLRenderWindow.setGraphicsResourceForObject(I,Y,L),e.scalarTextures[R]=Y}else e.scalarTextures[R]=P.oglObject;if(H){A.setUpdatedExtents([]);const Y=B.getDimensions();e.scalarTextures[R].create3DFilterableFromDataArray({width:Y[0],height:Y[1],depth:Y[2],dataArray:I,updatedExtents:j})}i(e._openGLRenderWindow,e._scalarTexturesCore[R],I),e._scalarTexturesCore[R]=I});const u=e.currentValidInputs[0],f=p[u.inputIndex],h=f.getIndependentComponents(),d=h?e.numberOfComponents:1,v=h?2*d:1,m=[];for(let N=0;N<d;++N)m.push(f.getRGBTransferFunction(N));const x=$n(m,h,d),y=f.getRGBTransferFunction(),g=e._openGLRenderWindow.getGraphicsResourceForObject(y);if(!((O=g==null?void 0:g.oglObject)!=null&&O.getHandle())||(g==null?void 0:g.hash)!==x){let N=e.renderable.getColorTextureWidth();N<=0&&(N=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const R=N*v*3,B=new Uint8ClampedArray(R),I=Re.newInstance();if(I.setOpenGLRenderWindow(e._openGLRenderWindow),y){const P=new Float32Array(N*3);for(let L=0;L<d;L++){const k=f.getRGBTransferFunction(L),A=k.getRange();if(k.getTable(A[0],A[1],N,P,1),h)for(let j=0;j<N*3;j++)B[L*N*6+j]=255*P[j],B[L*N*6+j+N*3]=255*P[j];else for(let j=0;j<N*3;j++)B[L*N*3+j]=255*P[j]}I.resetFormatAndType(),I.create2DFromRaw({width:N,height:v,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:B})}else{for(let P=0;P<N*3;++P){const L=255*P/((N-1)*3);for(let k=0;k<v;++k)B[k*N*3+P+0]=L,B[k*N*3+P+1]=L,B[k*N*3+P+2]=L}I.resetFormatAndType(),I.create2DFromRaw({width:N,height:1,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:B})}y&&e._openGLRenderWindow.setGraphicsResourceForObject(y,I,x),e.colorTexture=I}else e.colorTexture=g.oglObject;i(e._openGLRenderWindow,e._colorTextureCore,y),e._colorTextureCore=y;const S=[];for(let N=0;N<d;++N)S.push(f.getPiecewiseFunction(N));const T=$n(S,h,d),w=f.getPiecewiseFunction(),_=e._openGLRenderWindow.getGraphicsResourceForObject(w);if(!((M=_==null?void 0:_.oglObject)!=null&&M.getHandle())||(_==null?void 0:_.hash)!==T){let N=e.renderable.getOpacityTextureWidth();N<=0&&(N=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const R=N*v,B=new Uint8ClampedArray(R),I=Re.newInstance();if(I.setOpenGLRenderWindow(e._openGLRenderWindow),w){const P=new Float32Array(R),L=new Float32Array(N);for(let k=0;k<d;++k){const A=f.getPiecewiseFunction(k);if(A===null)P.fill(1);else{const j=A.getRange();if(A.getTable(j[0],j[1],N,L,1),h)for(let H=0;H<N;H++)P[k*N*2+H]=L[H],P[k*N*2+H+N]=L[H];else for(let H=0;H<N;H++)P[H]=L[H]}}I.resetFormatAndType(),I.create2DFromRaw({width:N,height:v,numComps:1,dataType:Ne.FLOAT,data:P})}else B.fill(255),I.resetFormatAndType(),I.create2DFromRaw({width:N,height:v,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:B});w&&e._openGLRenderWindow.setGraphicsResourceForObject(w,I,T),e.pwfTexture=I}else e.pwfTexture=_.oglObject;i(e._openGLRenderWindow,e._pwfTextureCore,w),e._pwfTextureCore=w;const D=`${e.resliceGeom.getMTime()}A${e.renderable.getSlabThickness()}`;if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==D){const N=pe.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});N.setName("points");const R=pe.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),B={points:N,cellOffset:0};if(e.renderable.getSlabThickness()>0){const I=e.resliceGeom.getPointData().getNormals();I?B.normals=I:Or("Slab mode requested without normals")}e.tris.getCABO().createVBO(R,"polys",Jt.SURFACE,B)}e.VBOBuildString=D,e.VBOBuildTime.modified()},t.updateShaders=(c,l,p)=>{if(e.lastBoundBO=c,t.getNeedToRebuildShaders(c,l,p)){const u={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(u,l,p);const f=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(u.Vertex,u.Fragment,u.Geometry);f!==c.getProgram()&&(c.setProgram(f),c.getVAO().releaseGraphicsResources()),c.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(c.getProgram());c.getVAO().bind(),t.setMapperShaderParameters(c,l,p),t.setCameraShaderParameters(c,l,p),t.setPropertyShaderParameters(c,l,p)},t.setMapperShaderParameters=(c,l,p)=>{const u=c.getProgram(),f=e.currentValidInputs[0].imageData;if(c.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>c.getAttributeUpdateTime().getMTime()||c.getShaderSourceTime().getMTime()>c.getAttributeUpdateTime().getMTime())){e.scalarTextures.forEach((v,m)=>{u.setUniformi(`volumeTexture[${m}]`,v.getTextureUnit())}),u.isAttributeUsed("vertexWC")&&(c.getVAO().addAttributeArray(u,c.getCABO(),"vertexWC",c.getCABO().getVertexOffset(),c.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Or("Error setting vertexWC in shader VAO.")),u.isAttributeUsed("normalWC")&&(c.getVAO().addAttributeArray(u,c.getCABO(),"normalWC",c.getCABO().getNormalOffset(),c.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Or("Error setting normalWC in shader VAO.")),u.isUniformUsed("slabThickness")&&u.setUniformf("slabThickness",e.renderable.getSlabThickness()),u.isUniformUsed("spacing")&&u.setUniform3fv("spacing",f.getSpacing()),u.isUniformUsed("slabType")&&u.setUniformi("slabType",e.renderable.getSlabType()),u.isUniformUsed("slabType")&&u.setUniformi("slabType",e.renderable.getSlabType()),u.isUniformUsed("slabTrapezoid")&&u.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());const d=c.getCABO().getCoordShiftAndScaleEnabled()?c.getCABO().getInverseShiftAndScaleMatrix():null;if(u.isUniformUsed("WCTCMatrix")){const v=f.getDimensions();gt(e.tmpMat4,f.getIndexToWorld()),Ye(e.tmpMat4,e.tmpMat4,[-.5,-.5,-.5]),An(e.tmpMat4,e.tmpMat4,v),Et(e.tmpMat4,e.tmpMat4),d&&Ee(e.tmpMat4,e.tmpMat4,d),u.setUniformMatrix("WCTCMatrix",e.tmpMat4)}u.isUniformUsed("vboScaling")&&u.setUniform3fv("vboScaling",c.getCABO().getCoordScale()??[1,1,1]),c.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&c.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),c.getProgram().isUniformUsed("coffset")){const h=t.getCoincidentParameters(l,p);c.getProgram().setUniformf("coffset",h.offset),c.getProgram().isUniformUsed("cfactor")&&c.getProgram().setUniformf("cfactor",h.factor)}},t.setCameraShaderParameters=(c,l,p)=>{const u=e._openGLCamera.getKeyMatrices(l),f=e._openGLImageSlice.getKeyMatrices(),d=c.getCABO().getCoordShiftAndScaleEnabled()?c.getCABO().getInverseShiftAndScaleMatrix():null,v=c.getProgram();v.isUniformUsed("MCPCMatrix")&&(Te(e.tmpMat4),v.setUniformMatrix("MCPCMatrix",kh([u.wcpc,f.mcwc,d],va,e.tmpMat4))),v.isUniformUsed("MCVCMatrix")&&(Te(e.tmpMat4),v.setUniformMatrix("MCVCMatrix",kh([u.wcvc,f.mcwc,d],va,e.tmpMat4)))},t.setPropertyShaderParameters=(c,l,p)=>{const u=c.getProgram(),f=p.getProperty(e.currentValidInputs[0].inputIndex),h=f.getOpacity();u.setUniformf("opacity",h);const d=e.numberOfComponents,v=f.getIndependentComponents();if(v)for(let y=0;y<d;++y)u.setUniformf(`mix${y}`,f.getComponentWeight(y));for(let y=0;y<d;y++){const g=e.multiTexturePerVolumeEnabled,C=g?y:0,S=g?0:y,w=e.scalarTextures[C].getVolumeInfo(),_=w.scale[S],E=w.offset[S],D=v?y:0;let O=f.getColorWindow(),M=f.getColorLevel();const N=f.getRGBTransferFunction(D);if(N&&f.getUseLookupTableScalarRange()){const k=N.getRange();O=k[1]-k[0],M=.5*(k[1]+k[0])}const R=_/O,B=(E-M)/O+.5;u.setUniformf(`cshift${y}`,B),u.setUniformf(`cscale${y}`,R);let I=1,P=0;const L=f.getPiecewiseFunction(D);if(L){const k=L.getRange(),A=k[1]-k[0],j=.5*(k[0]+k[1]);I=_/A,P=(E-j)/A+.5}u.setUniformf(`pwfshift${y}`,P),u.setUniformf(`pwfscale${y}`,I)}const m=e.colorTexture.getTextureUnit();u.setUniformi("colorTexture1",m);const x=e.pwfTexture.getTextureUnit();u.setUniformi("pwfTexture1",x),u.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=(c,l,p)=>{var m;const u=p.getProperty(e.currentValidInputs[0].inputIndex).getIndependentComponents(),f=e.renderable.getSlabThickness(),h=e.renderable.getSlabType(),d=e.renderable.getSlabTrapezoidIntegration();let v=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(v=!0),v||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastNumberOfComponents!==e.numberOfComponents||e.lastMultiTexturePerVolumeEnabled!==e.multiTexturePerVolumeEnabled||((m=c.getProgram())==null?void 0:m.getHandle())===0||e.lastIndependentComponents!==u||e.lastSlabThickness!==f||e.lastSlabType!==h||e.lastSlabTrapezoidIntegration!==d?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastNumberOfComponents=e.numberOfComponents,e.lastMultiTexturePerVolumeEnabled=e.multiTexturePerVolumeEnabled,e.lastIndependentComponents=u,e.lastSlabThickness=f,e.lastSlabType=h,e.lastSlabTrapezoidIntegration=d,!0):!1},t.getShaderTemplate=(c,l,p)=>{c.Vertex=s8,c.Fragment=c8,c.Geometry=""},t.replaceShaderValues=(c,l,p)=>{if(t.replaceShaderTCoord(c,l,p),t.replaceShaderPositionVC(c,l,p),e.haveSeenDepthRequest){let u=c.Fragment;u=Q.substitute(u,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,u=Q.substitute(u,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,c.Fragment=u}t.replaceShaderCoincidentOffset(c,l,p)},t.replaceShaderTCoord=(c,l,p)=>{let u=c.Vertex;const f=c.Geometry;let h=c.Fragment;const d=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],v=e.renderable.getSlabThickness();u=Q.substitute(u,"//VTK::TCoord::Dec",d).result;const m=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];u=Q.substitute(u,"//VTK::TCoord::Impl",m).result;const x=e.numberOfComponents,y=p.getProperty(e.currentValidInputs[0].inputIndex).getIndependentComponents();let g=["in vec3 fragTexCoord;",`uniform highp sampler3D volumeTexture[${e.scalarTextures.length}];`,"uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(g.push("vec4 rawSampleTexture(vec3 pos) {"),!e.multiTexturePerVolumeEnabled)g.push("return texture(volumeTexture[0], pos);","}");else{g.push("vec4 rawSample;");for(let S=0;S<e.scalarTextures.length;++S)g.push(`rawSample[${S}] = texture(volumeTexture[${S}], pos)[0];`);g.push("return rawSample;","}")}if(y){for(let S=1;S<x;S++)g=g.concat([`uniform float cshift${S};`,`uniform float cscale${S};`,`uniform float pwfshift${S};`,`uniform float pwfscale${S};`]);switch(x){case 1:g=g.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:g=g.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:g=g.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:g=g.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Or("Unsupported number of independent coordinates.")}}v>0&&(g=g.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"]),g=g.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),h=Q.substitute(h,"//VTK::TCoord::Dec",g).result;let C=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = rawSampleTexture(fragTexCoord);"];if(v>0&&(C=C.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = rawSampleTexture(fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = rawSampleTexture(fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),y){const S=["r","g","b","a"];for(let T=0;T<x;++T)C=C.concat([`vec3 tcolor${T} = texture2D(colorTexture1, vec2(tvalue.${S[T]} * cscale${T} + cshift${T}, height${T})).rgb;`,`float compWeight${T} = mix${T} * texture2D(pwfTexture1, vec2(tvalue.${S[T]} * pwfscale${T} + pwfshift${T}, height${T})).r;`]);switch(x){case 1:C=C.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:C=C.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:C=C.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:C=C.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Or("Unsupported number of independent coordinates.")}}else switch(x){case 1:C=C.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:C=C.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:C=C.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:C=C.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}h=Q.substitute(h,"//VTK::TCoord::Impl",C).result,c.Vertex=u,c.Fragment=h,c.Geometry=f},t.replaceShaderPositionVC=(c,l,p)=>{let u=c.Vertex;const f=c.Geometry;let h=c.Fragment;const d=e.renderable.getSlabThickness();let v=["attribute vec4 vertexWC;"];v=v.concat([`//${t.getMTime()}${e.resliceGeomUpdateString}`]),d>0&&(v=v.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),u=Q.substitute(u,"//VTK::PositionVC::Dec",v).result;let m=["gl_Position = MCPCMatrix * vertexWC;"];d>0&&(m=m.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),u=Q.substitute(u,"//VTK::PositionVC::Impl",m).result,u=Q.substitute(u,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;let x=[];d>0&&(x=x.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),h=Q.substitute(h,"//VTK::PositionVC::Dec",x).result,c.Vertex=u,c.Geometry=f,c.Fragment=h};function s(c){Mt.normalize(c);const l=[0,0,0];for(let p=0;p<3;++p){M2(l),l[p]=1;const u=Mt.dot(c,l);if(u<-.999999||u>.999999)return[!0,p]}return[!1,2]}t.updateResliceGeometry=()=>{var v;let c="";const l=e.currentValidInputs[0].imageData,p=l==null?void 0:l.getBounds();let u=!0,f=2;const h=e.renderable.getSlicePolyData(),d=e.renderable.getSlicePlane();if(h)c=c.concat(`PolyData${h.getMTime()}`);else if(d){c=c.concat(`Plane${d.getMTime()}`);const m=an();l&&(c=c.concat(`Image${l.getMTime()}`),Kc(m,...l.getDirection()),Tn(m,m));const x=[...d.getNormal()];Ei(x,x,m),[u,f]=s(x)}else{const m=fn.newInstance();m.setNormal(0,0,1);let x=[0,1,0,1,0,1];l&&(x=p),m.setOrigin(x[0],x[2],.5*(x[5]+x[4])),e.renderable.setSlicePlane(m),c=c.concat(`Plane${d==null?void 0:d.getMTime()}`),l&&(c=c.concat(`Image${l.getMTime()}`))}if(!e.resliceGeom||e.resliceGeomUpdateString!==c){if(h)e.resliceGeom||(e.resliceGeom=Xe.newInstance()),e.resliceGeom.getPoints().setData(h.getPoints().getData(),3),e.resliceGeom.getPolys().setData(h.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(h.getPointData().getNormals());else if(d)if(u){const m=new Float32Array(12),x=l.worldToIndex(d.getOrigin(),[0,0,0]),y=[(f+1)%3,(f+2)%3].sort(),g=l.getSpatialExtent();let C=0;for(let E=0;E<2;++E)for(let D=0;D<2;++D)m[C+f]=x[f],m[C+y[0]]=g[2*y[0]+D],m[C+y[1]]=g[2*y[1]+E],C+=3;e.transform.setMatrix(l.getIndexToWorld()),e.transform.transformPoints(m,m);const S=new Uint16Array(8);S[0]=3,S[1]=0,S[2]=1,S[3]=3,S[4]=3,S[5]=0,S[6]=3,S[7]=2;const T=d.getNormal();Mt.normalize(T);const w=new Float32Array(12);for(let E=0;E<4;++E)w[3*E]=T[0],w[3*E+1]=T[1],w[3*E+2]=T[2];e.resliceGeom||(e.resliceGeom=Xe.newInstance()),e.resliceGeom.getPoints().setData(m,3),e.resliceGeom.getPolys().setData(S,1);const _=pe.newInstance({numberOfComponents:3,values:w,name:"Normals"});e.resliceGeom.getPointData().setNormals(_)}else{e.outlineFilter.setInputData(l),e.cutter.setInputConnection(e.outlineFilter.getOutputPort()),e.cutter.setCutFunction(d),e.lineToSurfaceFilter.setInputConnection(e.cutter.getOutputPort()),e.lineToSurfaceFilter.update(),e.resliceGeom||(e.resliceGeom=Xe.newInstance());const m=e.lineToSurfaceFilter.getOutputData();e.resliceGeom.getPoints().setData(m.getPoints().getData(),3),e.resliceGeom.getPolys().setData(m.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(m.getPointData().getNormals());const x=d.getNormal(),y=e.resliceGeom.getNumberOfPoints();Mt.normalize(x);const g=new Float32Array(y*3);for(let S=0;S<y;++S)g[3*S]=x[0],g[3*S+1]=x[1],g[3*S+2]=x[2];const C=pe.newInstance({numberOfComponents:3,values:g,name:"Normals"});e.resliceGeom.getPointData().setNormals(C)}else Or("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=c,(v=e.resliceGeom)==null||v.modified()}},t.setScalarTextures=c=>{e.scalarTextures=[...c],e._externalOpenGLTexture=!0},t.delete=Gn(()=>{e._openGLRenderWindow&&o(e._openGLRenderWindow)},t.delete)}const f8={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastNumberOfComponents:0,lastMultiTexturePerVolumeEnabled:!1,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,scalarTextures:[],_scalarTexturesCore:[],colorTexture:null,_colorTextureCore:null,pwfTexture:null,_pwfTextureCore:null,_externalOpenGLTexture:!1,resliceGeom:null,resliceGeomUpdateString:null,tris:null};function p8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f8,a),Ct.extend(t,e,a),mn.implementReplaceShaderCoincidentOffset(t,e,a),mn.implementBuildShadersWithReplacements(t,e,a),e.tris=jt.newInstance(),e.scalarTextures=[],e.colorTexture=null,e.pwfTexture=null,e.VBOBuildTime={},ut(e.VBOBuildTime),e.tmpMat4=Te(new Float64Array(16)),e.outlineFilter=n8.newInstance(),e.outlineFilter.setGenerateFaces(!0),e.outlineFilter.setGenerateLines(!1),e.cubePolyData=Xe.newInstance(),e.cutter=$6.newInstance(),e.lineToSurfaceFilter=P6.newInstance(),e.transform=o8.newInstance(),At(t,e,["scalarTextures"]),l8(t,e)}const h8=Je(p8,"vtkOpenGLImageResliceMapper");st("vtkImageResliceMapper",h8);var q0={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}};const{vtkErrorMacro:ra}=Dt,{SlicingMode:Bt}=q0;function g8(t){const e=t.split(`
`),a=[];for(let n=0;n<e.length;++n){const r=e[n].trim();r.length>0&&a.push(r)}return a}function d8(t,e){e.classHierarchy.push("vtkOpenGLImageMapper");function a(n){e.openGLTexture.releaseGraphicsResources(n),[e._colorTransferFunc,e._pwFunc,e._labelOutlineThicknessArray,e._labelOutlineOpacity].forEach(r=>n.unregisterGraphicsResourceUser(r,t))}t.buildPass=n=>{if(n){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const r=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),r&&!r.isDeleted()&&r!==e._openGLRenderWindow&&a(r),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow);const i=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(i.getActiveCamera(),e.openGLCamera),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(i.getActiveCamera())}},t.translucentPass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.opaquePass=n=>{n&&t.render()},t.getCoincidentParameters=(n,r)=>e.renderable.getResolveCoincidentTopology()==Zt.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.getShaderTemplate=(n,r,i)=>{n.Vertex=W0,n.Fragment=$a,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const c=e.openGLTexture.getComponents(),l=i.getProperty().getIndependentComponents();let p=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(i.getProperty().getUseLabelOutline()&&(p=p.concat(["uniform sampler2D labelOutlineTexture1;","uniform sampler2D labelOutlineOpacityTexture1;"])),l){for(let f=1;f<c;f++)p=p.concat([`uniform float cshift${f};`,`uniform float cscale${f};`,`uniform float pwfshift${f};`,`uniform float pwfscale${f};`]);switch(c){case 1:p=p.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:p=p.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:ra("Unsupported number of independent coordinates.")}}if(s=Q.substitute(s,"//VTK::TCoord::Dec",p).result,i.getProperty().getUseLabelOutline()===!0&&(s=Q.substitute(s,"//VTK::LabelOutline::Dec",["uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;","uniform int sliceAxis;"]).result,s=Q.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,s=Q.substitute(s,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","vec2 getSliceCoords(vec3 coord, int axis) {","  if (axis == 0) return coord.yz;","  if (axis == 1) return coord.xz;","  if (axis == 2) return coord.xy;","}","#endif"]).result),l){const f=["r","g","b","a"];let h=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let d=0;d<c;d++)h=h.concat([`vec3 tcolor${d} = mix${d} * texture2D(colorTexture1, vec2(tvalue.${f[d]} * cscale${d} + cshift${d}, height${d})).rgb;`,`float compWeight${d} = mix${d} * texture2D(pwfTexture1, vec2(tvalue.${f[d]} * pwfscale${d} + pwfshift${d}, height${d})).r;`]);switch(c){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:ra("Unsupported number of independent coordinates.")}s=Q.substitute(s,"//VTK::TCoord::Impl",h).result}else switch(c){case 1:s=Q.substitute(s,"//VTK::TCoord::Impl",[...g8(`
                #ifdef vtkImageLabelOutlineOn
                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord);
                  float centerValue = texture2D(texture1, getSliceCoords(centerPosIS, sliceAxis)).r;
                  bool pixelOnBorder = false;
                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;
                  float opacityToUse = scalarOpacity * opacity;
                  int segmentIndex = int(centerValue * 255.0);
                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;
                  float outlineOpacity = texture2D(labelOutlineOpacityTexture1, vec2(textureCoordinate, 0.5)).r;
                  int actualThickness = int(textureValue * 255.0);

                  if (segmentIndex == 0){
                    gl_FragData[0] = vec4(0.0, 0.0, 0.0, 0.0);
                    return;
                  }

                  for (int i = -actualThickness; i <= actualThickness; i++) {
                    for (int j = -actualThickness; j <= actualThickness; j++) {
                      if (i == 0 || j == 0) {
                        continue;
                      }
                      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
                        gl_FragCoord.y + float(j),
                        gl_FragCoord.z, gl_FragCoord.w);
                      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
                      float value = texture2D(texture1, getSliceCoords(neighborPosIS, sliceAxis)).r;
                      if (value != centerValue) {
                        pixelOnBorder = true;
                        break;
                      }
                    }
                    if (pixelOnBorder == true) {
                      break;
                    }
                  }
                  if (pixelOnBorder == true) {
                    gl_FragData[0] = vec4(tColor, outlineOpacity);
                  }
                  else {
                    gl_FragData[0] = vec4(tColor, opacityToUse);
                  }
                #else
                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;
                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;
                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);
                #endif
                `)]).result;break;case 2:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=o,n.Fragment=s,t.replaceShaderClip(n,r,i),t.replaceShaderCoincidentOffset(n,r,i)},t.replaceShaderClip=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let c=e.renderable.getNumberOfClippingPlanes();c>6&&(ze("OpenGL has a limit of 6 clipping planes"),c=6),o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Q.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Q.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=o,n.Fragment=s},t.getNeedToRebuildShaders=(n,r,i)=>{var l;const o=e.openGLTexture.getComponents(),s=i.getProperty().getIndependentComponents();let c=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(c=!0),c||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((l=n.getProgram())==null?void 0:l.getHandle())===0||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||n.getShaderSourceTime().getMTime()<i.getProperty().getMTime()||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.updateShaders=(n,r,i)=>{if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,i)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,r,i);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,i),t.setCameraShaderParameters(n,r,i),t.setPropertyShaderParameters(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ra("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),e.context.FALSE)||ra("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());const o=e.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",o);const s=e.openGLTexture.getComponents(),c=i.getProperty().getIndependentComponents();if(c)for(let f=0;f<s;f++)n.getProgram().setUniformf(`mix${f}`,i.getProperty().getComponentWeight(f));const l=e.openGLTexture.getShiftAndScale();for(let f=0;f<s;f++){let h=i.getProperty().getColorWindow(),d=i.getProperty().getColorLevel();const v=c?f:0,m=i.getProperty().getRGBTransferFunction(v);if(m&&i.getProperty().getUseLookupTableScalarRange()){const g=m.getRange();h=g[1]-g[0],d=.5*(g[1]+g[0])}const x=l.scale/h,y=(l.shift-d)/h+.5;n.getProgram().setUniformf(`cshift${f}`,y),n.getProgram().setUniformf(`cscale${f}`,x)}for(let f=0;f<s;f++){let h=1,d=0;const v=c?f:0,m=i.getProperty().getPiecewiseFunction(v);if(m){const x=m.getRange(),y=x[1]-x[0],g=.5*(x[0]+x[1]);h=l.scale/y,d=(l.shift-g)/y+.5}n.getProgram().setUniformf(`pwfshift${f}`,d),n.getProgram().setUniformf(`pwfscale${f}`,h)}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const f=t.getCoincidentParameters(r,i);n.getProgram().setUniformf("coffset",f.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",f.factor)}const p=e.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",p);const u=e.pwfTexture.getTextureUnit();if(n.getProgram().setUniformi("pwfTexture1",u),i.getProperty().getUseLabelOutline()){const f=e.labelOutlineThicknessTexture.getTextureUnit();n.getProgram().setUniformi("labelOutlineTexture1",f);const h=e.labelOutlineOpacityTexture.getTextureUnit();n.getProgram().setUniformi("labelOutlineOpacityTexture1",h)}if(e.renderable.getNumberOfClippingPlanes()){let f=e.renderable.getNumberOfClippingPlanes();f>6&&(ze("OpenGL has a limit of 6 clipping planes"),f=6);const d=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,v=d?gt(e.imagematinv,i.getMatrix()):i.getMatrix();d&&(We(v,v),Ee(v,v,d),We(v,v)),We(e.imagemat,e.currentInput.getIndexToWorld()),Ee(e.imagematinv,v,e.imagemat);const m=[];for(let x=0;x<f;x++){const y=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,x,y);for(let g=0;g<4;g++)m.push(y[g])}n.getProgram().setUniformi("numClipPlanes",f),n.getProgram().setUniform4fv("clipPlanes",m)}},t.setCameraShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=e.openGLImageSlice.getKeyMatrices(),c=e.currentInput,l=c.getIndexToWorld();Ee(e.imagemat,s.mcwc,l);const p=e.openGLCamera.getKeyMatrices(r);if(Ee(e.imagemat,p.wcpc,e.imagemat),n.getCABO().getCoordShiftAndScaleEnabled()){const f=n.getCABO().getInverseShiftAndScaleMatrix();Ee(e.imagemat,e.imagemat,f)}if(o.setUniformMatrix("MCPCMatrix",e.imagemat),i.getProperty().getUseLabelOutline()===!0){const f=c.getWorldToIndex(),h=c.getDimensions();let d=e.renderable.getClosestIJKAxis().ijkMode;d===Bt.NONE&&(d=Bt.K),o.setUniform3i("imageDimensions",h[0],h[1],h[2]),o.setUniformi("sliceAxis",d),o.setUniformMatrix("vWCtoIDX",f);const v=e.openGLCamera.getKeyMatrices(r);Et(e.projectionToWorld,v.wcpc),e.openGLCamera.getKeyMatrices(r),o.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const m=t.getRenderTargetSize();o.setUniformf("vpWidth",m[0]),o.setUniformf("vpHeight",m[1]);const x=t.getRenderTargetOffset();o.setUniformf("vpOffsetX",x[0]/m[0]),o.setUniformf("vpOffsetY",x[1]/m[1])}},t.setPropertyShaderParameters=(n,r,i)=>{const o=n.getProgram(),c=i.getProperty().getOpacity();o.setUniformf("opacity",c)},t.renderPieceStart=(n,r)=>{t.updateBufferObjects(n,r),e.lastBoundBO=null},t.renderPieceDraw=(n,r)=>{const i=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),r.getProperty().getUseLabelOutline()&&(e.labelOutlineThicknessTexture.activate(),e.labelOutlineOpacityTexture.activate()),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),r.getProperty().getUseLabelOutline()&&(e.labelOutlineThicknessTexture.deactivate(),e.labelOutlineOpacityTexture.deactivate()),e.pwfTexture.deactivate()},t.renderPieceFinish=(n,r)=>{},t.renderPiece=(n,r)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){ra("No input!");return}t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>{var i,o,s,c,l;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||!((i=e.openGLTexture)!=null&&i.getHandle())||!((o=e.colorTexture)!=null&&o.getHandle())||r.getProperty().getUseLabelOutline()&&(!((s=e.labelOutlineThicknessTexture)!=null&&s.getHandle())||!((c=e.labelOutlineOpacityTexture)!=null&&c.getHandle()))||!((l=e.pwfTexture)!=null&&l.getHandle())},t.buildBufferObjects=(n,r)=>{var R,B,I,P;const i=e.currentInput;if(!i)return;const o=i.getPointData()&&i.getPointData().getScalars();if(!o)return;const s=o.getDataType(),c=o.getNumberOfComponents(),l=r.getProperty(),p=l.getInterpolationType(),u=l.getIndependentComponents(),f=u?c:1,h=u?2*f:1,d=[];for(let L=0;L<f;++L)d.push(l.getRGBTransferFunction(L));const v=$n(d,u,f),m=l.getRGBTransferFunction(),x=e._openGLRenderWindow.getGraphicsResourceForObject(m);if(!((R=x==null?void 0:x.oglObject)!=null&&R.getHandle())||(x==null?void 0:x.hash)!==v){e.colorTexture=Re.newInstance({resizable:!0}),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);let L=e.renderable.getColorTextureWidth();L<=0&&(L=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const k=L*h*3,A=new Uint8ClampedArray(k);if(p===Dr.NEAREST?(e.colorTexture.setMinificationFilter(me.NEAREST),e.colorTexture.setMagnificationFilter(me.NEAREST)):(e.colorTexture.setMinificationFilter(me.LINEAR),e.colorTexture.setMagnificationFilter(me.LINEAR)),m){const j=new Float32Array(L*3);for(let H=0;H<f;H++){const K=l.getRGBTransferFunction(H),Y=K.getRange();if(K.getTable(Y[0],Y[1],L,j,1),u)for(let q=0;q<L*3;q++)A[H*L*6+q]=255*j[q],A[H*L*6+q+L*3]=255*j[q];else for(let q=0;q<L*3;q++)A[H*L*6+q]=255*j[q]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw({width:L,height:h,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:A})}else{for(let j=0;j<L*3;++j)A[j]=255*j/((L-1)*3),A[j+1]=255*j/((L-1)*3),A[j+2]=255*j/((L-1)*3);e.colorTexture.create2DFromRaw({width:L,height:1,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:A})}m&&(e._openGLRenderWindow.setGraphicsResourceForObject(m,e.colorTexture,v),m!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(m,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=m)}else e.colorTexture=x.oglObject;const g=[];for(let L=0;L<f;++L)g.push(l.getPiecewiseFunction(L));const C=$n(g,u,f),S=l.getPiecewiseFunction(),T=e._openGLRenderWindow.getGraphicsResourceForObject(S);if(!((B=T==null?void 0:T.oglObject)!=null&&B.getHandle())||(T==null?void 0:T.hash)!==C){let L=e.renderable.getOpacityTextureWidth();L<=0&&(L=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const k=L*h,A=new Uint8ClampedArray(k);if(e.pwfTexture=Re.newInstance({resizable:!0}),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),p===Dr.NEAREST?(e.pwfTexture.setMinificationFilter(me.NEAREST),e.pwfTexture.setMagnificationFilter(me.NEAREST)):(e.pwfTexture.setMinificationFilter(me.LINEAR),e.pwfTexture.setMagnificationFilter(me.LINEAR)),S){const j=new Float32Array(k),H=new Float32Array(L);for(let K=0;K<f;++K){const Y=l.getPiecewiseFunction(K);if(Y===null)j.fill(1);else{const q=Y.getRange();if(Y.getTable(q[0],q[1],L,H,1),u)for(let Z=0;Z<L;Z++)j[K*L*2+Z]=H[Z],j[K*L*2+Z+L]=H[Z];else for(let Z=0;Z<L;Z++)j[K*L*2+Z]=H[Z]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw({width:L,height:h,numComps:1,dataType:Ne.FLOAT,data:j})}else A.fill(255),e.pwfTexture.create2DFromRaw({width:L,height:1,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:A});S&&(e._openGLRenderWindow.setGraphicsResourceForObject(S,e.pwfTexture,C),S!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(S,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=S)}else e.pwfTexture=T.oglObject;r.getProperty().getUseLabelOutline()&&(t.updatelabelOutlineThicknessTexture(r),t.updateLabelOutlineOpacityTexture(r));const{ijkMode:_}=e.renderable.getClosestIJKAxis();let E=e.renderable.getSlice();_!==e.renderable.getSlicingMode()&&(E=e.renderable.getSliceAtPosition(E));const D=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(E),O=i.getExtent();let M;_===Bt.I&&(M=D-O[0]),_===Bt.J&&(M=D-O[2]),(_===Bt.K||_===Bt.NONE)&&(M=D-O[4]);const N=`${E}A${i.getMTime()}A${o.getMTime()}B${t.getMTime()}C${e.renderable.getSlicingMode()}D${r.getProperty().getInterpolationType()}`;if(e.VBOBuildString!==N){const L=i.getDimensions();e.openGLTexture||(e.openGLTexture=Re.newInstance({resizable:!0})),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),p===Dr.NEAREST?(new Set([1,3,4]).has(c)&&s===Ne.UNSIGNED_CHAR&&!u&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(me.NEAREST),e.openGLTexture.setMagnificationFilter(me.NEAREST)):(c===4&&s===Ne.UNSIGNED_CHAR&&!u?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(me.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(me.LINEAR),e.openGLTexture.setMagnificationFilter(me.LINEAR)),e.openGLTexture.setWrapS(Wa.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(Wa.CLAMP_TO_EDGE);const k=L[0]*L[1]*c,A=new Float32Array(12),j=new Float32Array(8);for(let b=0;b<4;b++)j[b*2]=b%2?1:0,j[b*2+1]=b>1?1:0;const H=[Bt.X,Bt.Y,Bt.Z].includes(e.renderable.getSlicingMode())?E:D,K=i.getSpatialExtent(),Y=o.getData();let q=null;if(_===Bt.I){q=new Y.constructor(L[2]*L[1]*c);let b=0;for(let G=0;G<L[2];G++)for(let U=0;U<L[1];U++){let z=(M+U*L[0]+G*L[0]*L[1])*c;b=(G*L[1]+U)*c;const W=z+c;for(;z<W;)q[b++]=Y[z++]}L[0]=L[1],L[1]=L[2],A[0]=H,A[1]=K[2],A[2]=K[4],A[3]=H,A[4]=K[3],A[5]=K[4],A[6]=H,A[7]=K[2],A[8]=K[5],A[9]=H,A[10]=K[3],A[11]=K[5]}else if(_===Bt.J){q=new Y.constructor(L[2]*L[0]*c);let b=0;for(let G=0;G<L[2];G++)for(let U=0;U<L[0];U++){let z=(U+M*L[0]+G*L[0]*L[1])*c;b=(G*L[0]+U)*c;const W=z+c;for(;z<W;)q[b++]=Y[z++]}L[1]=L[2],A[0]=K[0],A[1]=H,A[2]=K[4],A[3]=K[1],A[4]=H,A[5]=K[4],A[6]=K[0],A[7]=H,A[8]=K[5],A[9]=K[1],A[10]=H,A[11]=K[5]}else _===Bt.K||_===Bt.NONE?(q=Y.subarray(M*k,(M+1)*k),A[0]=K[0],A[1]=K[2],A[2]=H,A[3]=K[1],A[4]=K[2],A[5]=H,A[6]=K[0],A[7]=K[3],A[8]=H,A[9]=K[1],A[10]=K[3],A[11]=H):ra("Reformat slicing not yet supported.");const Z=o.getRanges();e.openGLTexture.resetFormatAndType(),e.openGLTexture.create2DFilterableFromRaw({width:L[0],height:L[1],numComps:c,dataType:o.getDataType(),data:q,preferSizeOverAccuracy:!!((P=(I=e.renderable).getPreferSizeOverAccuracy)!=null&&P.call(I)),ranges:Z}),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();const re=pe.newInstance({numberOfComponents:3,values:A});re.setName("points");const ae=pe.newInstance({numberOfComponents:2,values:j});ae.setName("tcoords");const ee=new Uint16Array(8);ee[0]=3,ee[1]=0,ee[2]=1,ee[3]=3,ee[4]=3,ee[5]=0,ee[6]=3,ee[7]=2;const F=pe.newInstance({numberOfComponents:1,values:ee});e.tris.getCABO().createVBO(F,"polys",Jt.SURFACE,{points:re,tcoords:ae,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=N}},t.updateLabelOutlineOpacityTexture=n=>{var c,l;let r=n.getProperty().getLabelOutlineOpacity();typeof r=="number"&&(((c=e._cachedLabelOutlineOpacityObj)==null?void 0:c[0])===r?r=e._cachedLabelOutlineOpacityObj:r=[r],e._cachedLabelOutlineOpacityObj=r);const i=e._openGLRenderWindow.getGraphicsResourceForObject(r),o=`${r.join("-")}`;if(!((l=i==null?void 0:i.oglObject)!=null&&l.getHandle())||(i==null?void 0:i.hash)!==o){let p=e.renderable.getLabelOutlineTextureWidth();p<=0&&(p=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const u=1,f=p*u,h=new Float32Array(f);for(let d=0;d<p;++d)h[d]=r[d]??r[0];e.labelOutlineOpacityTexture=Re.newInstance({resizable:!1}),e.labelOutlineOpacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineOpacityTexture.resetFormatAndType(),e.labelOutlineOpacityTexture.setMinificationFilter(me.NEAREST),e.labelOutlineOpacityTexture.setMagnificationFilter(me.NEAREST),e.labelOutlineOpacityTexture.create2DFromRaw({width:p,height:u,numComps:1,dataType:Ne.FLOAT,data:h}),r&&(e._openGLRenderWindow.setGraphicsResourceForObject(r,e.labelOutlineOpacityTexture,o),r!==e._labelOutlineOpacity&&(e._openGLRenderWindow.registerGraphicsResourceUser(r,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineOpacity,t)),e._labelOutlineOpacity=r)}else e.labelOutlineOpacityTexture=i.oglObject},t.updatelabelOutlineThicknessTexture=n=>{var c;const r=n.getProperty().getLabelOutlineThicknessByReference(),i=e._openGLRenderWindow.getGraphicsResourceForObject(r),o=`${r.join("-")}`;if(!((c=i==null?void 0:i.oglObject)!=null&&c.getHandle())||(i==null?void 0:i.hash)!==o){let l=e.renderable.getLabelOutlineTextureWidth();l<=0&&(l=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const p=1,u=l*p,f=new Uint8Array(u);for(let h=0;h<l;++h){const d=typeof r[h]<"u"?r[h]:r[0];f[h]=d}e.labelOutlineThicknessTexture=Re.newInstance({resizable:!1}),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(me.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(me.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw({width:l,height:p,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:f}),r&&(e._openGLRenderWindow.setGraphicsResourceForObject(r,e.labelOutlineThicknessTexture,o),r!==e._labelOutlineThicknessArray&&(e._openGLRenderWindow.registerGraphicsResourceUser(r,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineThicknessArray,t)),e._labelOutlineThicknessArray=r)}else e.labelOutlineThicknessTexture=i.oglObject},t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:n,vsize:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]},t.getRenderTargetOffset=()=>{const{lowerLeftU:n,lowerLeftV:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]},t.delete=Gn(()=>{e._openGLRenderWindow&&a(e._openGLRenderWindow)},t.delete)}const v8={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineOpacityTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function y8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v8,a),Ct.extend(t,e,a),mn.implementReplaceShaderCoincidentOffset(t,e,a),mn.implementBuildShadersWithReplacements(t,e,a),e.tris=jt.newInstance(),e.imagemat=Te(new Float64Array(16)),e.imagematinv=Te(new Float64Array(16)),e.projectionToWorld=Te(new Float64Array(16)),e.idxToView=Te(new Float64Array(16)),e.idxNormalMatrix=It(new Float64Array(9)),e.modelToView=Te(new Float64Array(16)),e.projectionToView=Te(new Float64Array(16)),pt(t,e,[]),e.VBOBuildTime={},ut(e.VBOBuildTime),d8(t,e)}const m8=Je(y8,"vtkOpenGLImageMapper");st("vtkAbstractImageMapper",m8);const br={MAX:0,MIN:1,AVERAGE:2},{vtkErrorMacro:Mo}=V;function x8(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper");function a(n){[e._scalars,e._colorTransferFunc,e._pwFunc].forEach(r=>n.unregisterGraphicsResourceUser(r,t))}t.buildPass=n=>{if(n){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const r=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),r&&!r.isDeleted()&&r!==e._openGLRenderWindow&&a(r),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.opaquePass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.opaqueZBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=(n,r)=>e.renderable.getResolveCoincidentTopology()===Zt.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.renderPiece=(n,r)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r))},t.renderPieceStart=(n,r)=>{t.updateBufferObjects(n,r)},t.renderPieceDraw=(n,r)=>{const i=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(n,r)=>{},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r),r.getProperty().getInterpolationType()===Dr.NEAREST?(e.volumeTexture.setMinificationFilter(me.NEAREST),e.volumeTexture.setMagnificationFilter(me.NEAREST),e.colorTexture.setMinificationFilter(me.NEAREST),e.colorTexture.setMagnificationFilter(me.NEAREST),e.pwfTexture.setMinificationFilter(me.NEAREST),e.pwfTexture.setMagnificationFilter(me.NEAREST)):(e.volumeTexture.setMinificationFilter(me.LINEAR),e.volumeTexture.setMagnificationFilter(me.LINEAR),e.colorTexture.setMinificationFilter(me.LINEAR),e.colorTexture.setMagnificationFilter(me.LINEAR),e.pwfTexture.setMinificationFilter(me.LINEAR),e.pwfTexture.setMagnificationFilter(me.LINEAR))},t.getNeedToRebuildBufferObjects=(n,r)=>{var o;const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<r.getMTime()||i<e.currentImageDataInput.getMTime()||i<e.currentCenterlineInput.getMTime()||!((o=e.volumeTexture)!=null&&o.getHandle())},t.buildBufferObjects=(n,r)=>{var N,R,B,I;const i=e.currentImageDataInput,o=e.currentCenterlineInput,s=r.getProperty(),c=(N=i==null?void 0:i.getPointData())==null?void 0:N.getScalars();if(!c)return;const l=e._openGLRenderWindow.getGraphicsResourceForObject(c),p=X0(i,c),u=!((R=l==null?void 0:l.oglObject)!=null&&R.getHandle())||(l==null?void 0:l.hash)!==p,f=s.getUpdatedExtents(),h=!!f.length;if(u){e.volumeTexture=Re.newInstance(),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const P=i.getDimensions();e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromDataArray({width:P[0],height:P[1],depth:P[2],dataArray:c,preferSizeOverAccuracy:e.renderable.getPreferSizeOverAccuracy()}),e._openGLRenderWindow.setGraphicsResourceForObject(c,e.volumeTexture,p),c!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(c,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=c}else e.volumeTexture=l.oglObject;if(h){s.setUpdatedExtents([]);const P=i.getDimensions();e.volumeTexture.create3DFilterableFromDataArray({width:P[0],height:P[1],depth:P[2],dataArray:c,updatedExtents:f})}const d=c.getNumberOfComponents(),v=r.getProperty(),m=v.getIndependentComponents(),x=m?d:1,y=m?2*x:1,g=[];for(let P=0;P<x;++P)g.push(v.getRGBTransferFunction(P));const C=$n(g,m,x),S=v.getRGBTransferFunction(),T=e._openGLRenderWindow.getGraphicsResourceForObject(S);if(!((B=T==null?void 0:T.oglObject)!=null&&B.getHandle())||(T==null?void 0:T.hash)!==C){let P=e.renderable.getColorTextureWidth();P<=0&&(P=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const L=P*y*3,k=new Uint8ClampedArray(L);if(e.colorTexture=Re.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),S){const A=new Float32Array(P*3);for(let j=0;j<x;j++){const H=v.getRGBTransferFunction(j),K=H.getRange();if(H.getTable(K[0],K[1],P,A,1),m)for(let Y=0;Y<P*3;Y++)k[j*P*6+Y]=255*A[Y],k[j*P*6+Y+P*3]=255*A[Y];else for(let Y=0;Y<P*3;Y++)k[j*P*6+Y]=255*A[Y]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw({width:P,height:y,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:k})}else{for(let A=0;A<P*3;++A)k[A]=255*A/((P-1)*3),k[A+1]=255*A/((P-1)*3),k[A+2]=255*A/((P-1)*3);e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw({width:P,height:1,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:k})}S&&(e._openGLRenderWindow.setGraphicsResourceForObject(S,e.colorTexture,C),S!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(S,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=S)}else e.colorTexture=T.oglObject;const _=[];for(let P=0;P<x;++P)_.push(v.getPiecewiseFunction(P));const E=$n(_,m,x),D=v.getPiecewiseFunction(),O=e._openGLRenderWindow.getGraphicsResourceForObject(D);if(!((I=O==null?void 0:O.oglObject)!=null&&I.getHandle())||(O==null?void 0:O.hash)!==E){let P=e.renderable.getOpacityTextureWidth();P<=0&&(P=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const L=P*y,k=new Uint8ClampedArray(L);if(e.pwfTexture=Re.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),D){const A=new Float32Array(L),j=new Float32Array(P);for(let H=0;H<x;++H){const K=v.getPiecewiseFunction(H);if(K===null)A.fill(1);else{const Y=K.getRange();if(K.getTable(Y[0],Y[1],P,j,1),m)for(let q=0;q<P;q++)A[H*P*2+q]=j[q],A[H*P*2+q+P]=j[q];else for(let q=0;q<P;q++)A[H*P*2+q]=j[q]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw({width:P,height:y,numComps:1,dataType:Ne.FLOAT,data:A})}else k.fill(255),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw({width:P,height:1,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:k});D&&(e._openGLRenderWindow.setGraphicsResourceForObject(D,e.pwfTexture,E),D!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(D,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=D)}else e.pwfTexture=O.oglObject;if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<o.getMTime()){const P=o.getNumberOfPoints(),L=P<=1?0:P-1,k=o.getDistancesToFirstPoint(),A=e.renderable.getHeight(),j=4*L,H=new Float32Array(3*j),K=e.renderable.getWidth();for(let W=0,$=0;W<L;++W)H.set([0,A-k[W],0],$),$+=3,H.set([K,A-k[W],0],$),$+=3,H.set([K,A-k[W+1],0],$),$+=3,H.set([0,A-k[W+1],0],$),$+=3;const Y=pe.newInstance({numberOfComponents:3,values:H});Y.setName("points");const q=new Uint16Array(5*L);for(let W=0,$=0,J=0;W<L;++W)q.set([4,J+3,J+2,J+1,J],$),$+=5,J+=4;const Z=pe.newInstance({numberOfComponents:1,values:q}),re=o.getPoints(),ae=new Float32Array(3*j),ee=new Array(3),F=new Array(3);for(let W=0,$=0;W<L;++W)re.getPoint(W,ee),re.getPoint(W+1,F),ae.set(ee,$),$+=3,ae.set(ee,$),$+=3,ae.set(F,$),$+=3,ae.set(F,$),$+=3;const b=pe.newInstance({numberOfComponents:3,values:ae,name:"centerlinePosition"}),G=new Float32Array(j);for(let W=0,$=0;W<L;++W)G.set([0,1,3,2],$),$+=4;const U=pe.newInstance({numberOfComponents:1,values:G,name:"quadIndex"}),z=[b,U];if(!e.renderable.getUseUniformOrientation()){const W=e.renderable.getOrientedCenterline().getOrientations()??[],$=new Float32Array(4*j),J=new Float32Array(4*j);for(let ue=0;ue<L;++ue){const Ce=W[ue],ye=W[ue+1];for(let je=0;je<4;++je){const ge=4*(je+4*ue);$.set(Ce,ge),J.set(ye,ge)}}const ne=pe.newInstance({numberOfComponents:4,values:$,name:"centerlineTopOrientation"}),oe=pe.newInstance({numberOfComponents:4,values:J,name:"centerlineBotOrientation"});z.push(ne,oe)}e.tris.getCABO().createVBO(Z,"polys",Jt.SURFACE,{points:Y,customAttributes:z}),e.VBOBuildTime.modified()}},t.getNeedToRebuildShaders=(n,r,i)=>{const o=e.volumeTexture.getComponents(),s=i.getProperty().getIndependentComponents(),c=!!e.renderable.getCenterPoint(),l=e.renderable.getUseUniformOrientation(),p=e.renderable.isProjectionEnabled()&&e.renderable.getProjectionMode();return n.getProgram()===0||e.lastUseCenterPoint!==c||e.lastUseUniformOrientation!==l||e.lastProjectionMode!==p||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastUseCenterPoint=c,e.lastUseUniformOrientation=l,e.lastProjectionMode=p,e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.buildShaders=(n,r,i)=>{t.getShaderTemplate(n,r,i),t.replaceShaderValues(n,r,i)},t.replaceShaderValues=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;const c=["vec3 applyQuaternionToVec(vec4 q, vec3 v) {","  float uvx = q.y * v.z - q.z * v.y;","  float uvy = q.z * v.x - q.x * v.z;","  float uvz = q.x * v.y - q.y * v.x;","  float uuvx = q.y * uvz - q.z * uvy;","  float uuvy = q.z * uvx - q.x * uvz;","  float uuvz = q.x * uvy - q.y * uvx;","  float w2 = q.w * 2.0;","  uvx *= w2;","  uvy *= w2;","  uvz *= w2;","  uuvx *= 2.0;","  uuvy *= 2.0;","  uuvz *= 2.0;","  return vec3(v.x + uvx + uuvx, v.y + uvy + uuvy, v.z + uvz + uuvz);","}"];o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;const l=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],p=e.renderable.isProjectionEnabled(),u=e.renderable.getUseUniformOrientation();u?(l.push("out vec3 samplingDirVSOutput;","uniform vec4 centerlineOrientation;","uniform vec3 tangentDirection;",...c),p&&l.push("out vec3 projectionDirVSOutput;","uniform vec3 bitangentDirection;")):l.push("out vec4 centerlineTopOrientationVSOutput;","out vec4 centerlineBotOrientationVSOutput;","attribute vec4 centerlineTopOrientation;","attribute vec4 centerlineBotOrientation;"),o=Q.substitute(o,"//VTK::Color::Dec",l).result;const f=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];u?(f.push("samplingDirVSOutput = applyQuaternionToVec(centerlineOrientation, tangentDirection);"),p&&f.push("projectionDirVSOutput = applyQuaternionToVec(centerlineOrientation, bitangentDirection);")):f.push("centerlineTopOrientationVSOutput = centerlineTopOrientation;","centerlineBotOrientationVSOutput = centerlineBotOrientation;"),o=Q.substitute(o,"//VTK::Color::Impl",f).result;const h=e.volumeTexture.getComponents(),d=i.getProperty().getIndependentComponents();let v=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];p&&v.push("uniform vec3 volumeSizeMC;","uniform int projectionSlabNumberOfSamples;","uniform float projectionConstantOffset;","uniform float projectionStepLength;"),u?(v.push("in vec3 samplingDirVSOutput;"),p&&v.push("in vec3 projectionDirVSOutput;")):(v.push("uniform vec3 tangentDirection;","in vec4 centerlineTopOrientationVSOutput;","in vec4 centerlineBotOrientationVSOutput;",...c),p&&v.push("uniform vec3 bitangentDirection;"));const m=e.renderable.getCenterPoint();if(m&&v.push("uniform vec3 globalCenterPoint;"),d){for(let y=1;y<h;y++)v=v.concat([`uniform float cshift${y};`,`uniform float cscale${y};`,`uniform float pwfshift${y};`,`uniform float pwfscale${y};`]);switch(h){case 1:v=v.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:v=v.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:v=v.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:v=v.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Mo("Unsupported number of independent coordinates.")}}s=Q.substitute(s,"//VTK::TCoord::Dec",v).result;let x=[];if(u?(x.push("vec3 samplingDirection = samplingDirVSOutput;"),p&&x.push("vec3 projectionDirection = projectionDirVSOutput;")):(x.push("vec4 q0 = centerlineBotOrientationVSOutput;","vec4 q1 = centerlineTopOrientationVSOutput;","float qCosAngle = dot(q0, q1);","vec4 interpolatedOrientation;","if (qCosAngle > 0.999 || qCosAngle < -0.999) {","  // Use LERP instead of SLERP when the two quaternions are close or opposite","  interpolatedOrientation = normalize(mix(q0, q1, quadOffsetVSOutput.y));","} else {","  float omega = acos(qCosAngle);","  interpolatedOrientation = normalize(sin((1.0 - quadOffsetVSOutput.y) * omega) * q0 + sin(quadOffsetVSOutput.y * omega) * q1);","}","vec3 samplingDirection = applyQuaternionToVec(interpolatedOrientation, tangentDirection);"),p&&x.push("vec3 projectionDirection = applyQuaternionToVec(interpolatedOrientation, bitangentDirection);")),m?x.push("float baseOffset = dot(samplingDirection, globalCenterPoint - centerlinePosVSOutput);","float horizontalOffset = quadOffsetVSOutput.x + baseOffset;"):x.push("float horizontalOffset = quadOffsetVSOutput.x;"),x.push("vec3 volumePosMC = centerlinePosVSOutput + horizontalOffset * samplingDirection;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}"),p){const y=e.renderable.getProjectionMode();switch(y){case br.MIN:x.push("const vec4 initialProjectionTextureValue = vec4(1.0);");break;case br.MAX:case br.AVERAGE:default:x.push("const vec4 initialProjectionTextureValue = vec4(0.0);");break}switch(x.push("vec3 projectionScaledDirection = projectionDirection / volumeSizeMC;","vec3 projectionStep = projectionStepLength * projectionScaledDirection;","vec3 projectionStartPosition = volumePosTC + projectionConstantOffset * projectionScaledDirection;","vec4 tvalue = initialProjectionTextureValue;","for (int projectionSampleIdx = 0; projectionSampleIdx < projectionSlabNumberOfSamples; ++projectionSampleIdx) {","  vec3 projectionSamplePosition = projectionStartPosition + float(projectionSampleIdx) * projectionStep;","  vec4 sampledTextureValue = texture(volumeTexture, projectionSamplePosition);"),y){case br.MAX:x.push("  tvalue = max(tvalue, sampledTextureValue);");break;case br.MIN:x.push("  tvalue = min(tvalue, sampledTextureValue);");break;case br.AVERAGE:default:x.push("  tvalue = tvalue + sampledTextureValue;");break}x.push("}"),y===br.AVERAGE&&x.push("tvalue = tvalue / float(projectionSlabNumberOfSamples);")}else x.push("vec4 tvalue = texture(volumeTexture, volumePosTC);");if(d){const y=["r","g","b","a"];for(let g=0;g<h;++g)x=x.concat([`vec3 tcolor${g} = mix${g} * texture2D(colorTexture1, vec2(tvalue.${y[g]} * cscale${g} + cshift${g}, height${g})).rgb;`,`float compWeight${g} = mix${g} * texture2D(pwfTexture1, vec2(tvalue.${y[g]} * pwfscale${g} + pwfshift${g}, height${g})).r;`]);switch(h){case 1:x=x.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:x=x.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:x=x.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:x=x.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Mo("Unsupported number of independent coordinates.")}}else switch(h){case 1:x=x.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:x=x.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:x=x.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:x=x.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}s=Q.substitute(s,"//VTK::TCoord::Impl",x).result,e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=o,n.Fragment=s,t.replaceShaderClip(n,r,i),t.replaceShaderCoincidentOffset(n,r,i)},t.replaceShaderClip=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let c=e.renderable.getNumberOfClippingPlanes();c>6&&(V.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),c=6),o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Q.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Q.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=o,n.Fragment=s},t.getShaderTemplate=(n,r,i)=>{n.Vertex=W0,n.Fragment=$a,n.Geometry=""},t.setMapperShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=n.getCABO();s.getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(o.isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(o,s,"vertexMC",s.getVertexOffset(),s.getStride(),e.context.FLOAT,3,e.context.FALSE)||Mo("Error setting vertexMC in shader VAO.")),n.getCABO().getCustomData().forEach(h=>{h&&o.isAttributeUsed(h.name)&&!n.getVAO().addAttributeArray(o,s,h.name,h.offset,s.getStride(),e.context.FLOAT,h.components,e.context.FALSE)&&Mo(`Error setting ${h.name} in shader VAO.`)}),n.getAttributeUpdateTime().modified());const c=e.volumeTexture.getTextureUnit();if(o.setUniformi("volumeTexture",c),o.setUniformf("width",e.renderable.getWidth()),n.getProgram().setUniform4fv("backgroundColor",e.renderable.getBackgroundColor()),o.isUniformUsed("tangentDirection")){const h=e.renderable.getTangentDirection();n.getProgram().setUniform3fArray("tangentDirection",h)}if(o.isUniformUsed("bitangentDirection")){const h=e.renderable.getBitangentDirection();n.getProgram().setUniform3fArray("bitangentDirection",h)}if(o.isUniformUsed("centerlineOrientation")){const h=e.renderable.getUniformOrientation();n.getProgram().setUniform4fv("centerlineOrientation",h)}if(o.isUniformUsed("globalCenterPoint")){const h=e.renderable.getCenterPoint();o.setUniform3fArray("globalCenterPoint",h)}if(e.renderable.isProjectionEnabled()){const h=e.currentImageDataInput,d=h.getSpacing(),v=h.getDimensions(),m=e.renderable.getProjectionSlabThickness(),x=e.renderable.getProjectionSlabNumberOfSamples(),y=N2([],d,v);o.setUniform3fArray("volumeSizeMC",y),o.setUniformi("projectionSlabNumberOfSamples",x);const g=-.5*m;o.setUniformf("projectionConstantOffset",g);const C=m/(x-1);o.setUniformf("projectionStepLength",C)}const l=e.currentImageDataInput,p=l.getWorldToIndex(),u=yi(new Float32Array(16),wi([],l.getDimensions())),f=au(u,u,p);if(o.setUniformMatrix("MCTCMatrix",f),e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){let h=e.renderable.getNumberOfClippingPlanes();h>6&&(V.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),h=6);const v=s.getCoordShiftAndScaleEnabled()?s.getInverseShiftAndScaleMatrix():null,m=v?gt(e.imagematinv,i.getMatrix()):i.getMatrix();v&&(We(m,m),Ee(m,m,v),We(m,m)),We(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Ee(e.imagematinv,m,e.imagemat);const x=[];for(let y=0;y<h;y++){const g=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,y,g);for(let C=0;C<4;C++)x.push(g[C])}o.setUniformi("numClipPlanes",h),o.setUniform4fv("clipPlanes",x)}if(o.isUniformUsed("coffset")){const h=t.getCoincidentParameters(r,i);o.setUniformf("coffset",h.offset),o.isUniformUsed("cfactor")&&o.setUniformf("cfactor",h.factor)}},t.setCameraShaderParameters=(n,r,i)=>{const o=e.openGLImageSlice.getKeyMatrices().mcwc,s=e.openGLCamera.getKeyMatrices(r).wcpc;if(Ee(e.imagemat,s,o),n.getCABO().getCoordShiftAndScaleEnabled()){const c=n.getCABO().getInverseShiftAndScaleMatrix();Ee(e.imagemat,e.imagemat,c)}n.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=i.getProperty(),c=s.getOpacity();o.setUniformf("opacity",c);const l=e.volumeTexture.getComponents(),p=s.getIndependentComponents();if(p)for(let d=0;d<l;++d)o.setUniformf(`mix${d}`,s.getComponentWeight(d));const u=e.volumeTexture.getVolumeInfo();for(let d=0;d<l;d++){let v=s.getColorWindow(),m=s.getColorLevel();const x=p?d:0,y=s.getRGBTransferFunction(x);if(y&&s.getUseLookupTableScalarRange()){const S=y.getRange();v=S[1]-S[0],m=.5*(S[1]+S[0])}const g=u.scale[d]/v,C=(u.offset[d]-m)/v+.5;o.setUniformf(`cshift${d}`,C),o.setUniformf(`cscale${d}`,g)}const f=e.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",f);for(let d=0;d<l;d++){let v=1,m=0;const x=p?d:0,y=s.getPiecewiseFunction(x);if(y){const g=y.getRange(),C=g[1]-g[0],S=.5*(g[0]+g[1]);v=u.scale[d]/C,m=(u.offset[d]-S)/C+.5}o.setUniformf(`pwfshift${d}`,m),o.setUniformf(`pwfscale${d}`,v)}const h=e.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",h)},t.updateShaders=(n,r,i)=>{if(t.getNeedToRebuildShaders(n,r,i)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,r,i);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,i),t.setCameraShaderParameters(n,r,i),t.setPropertyShaderParameters(n,r,i)},t.delete=V.chain(()=>{e._openGLRenderWindow&&a(e._openGLRenderWindow)},t.delete)}const C8={currentRenderPass:null,volumeTexture:null,colorTexture:null,pwfTexture:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function S8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C8,a),Ct.extend(t,e,a),mn.implementReplaceShaderCoincidentOffset(t,e,a),V.algo(t,e,2,0),e.tris=jt.newInstance(),e.volumeTexture=null,e.colorTexture=null,e.pwfTexture=null,e.imagemat=Te(new Float64Array(16)),e.imagematinv=Te(new Float64Array(16)),e.VBOBuildTime={},V.obj(e.VBOBuildTime,{mtime:0}),x8(t,e)}const T8=V.newInstance(S8,"vtkOpenGLImageCPRMapper");st("vtkImageCPRMapper",T8);function w8(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=a=>{if(!(!e.renderable||!e.renderable.getVisibility())&&a){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.traverseOpaqueZBufferPass=a=>t.traverseOpaquePass(a),t.traverseOpaquePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},t.zBufferPass=(a,n)=>t.opaquePass(a,n),t.opaqueZBufferPass=(a,n)=>t.opaquePass(a,n),t.opaquePass=(a,n)=>{a&&e.context.depthMask(!0)},t.translucentPass=(a,n)=>{e.context.depthMask(!a)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(gt(e.keyMatrices.mcwc,e.renderable.getMatrix()),We(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices)}const _8={context:null,keyMatrixTime:null,keyMatrices:null};function E8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_8,a),Ct.extend(t,e,a),e.keyMatrixTime={},ut(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:Te(new Float64Array(16))},pt(t,e,["context"]),w8(t,e)}const D8=Je(E8,"vtkOpenGLImageSlice");st("vtkImageSlice",D8);function O8(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=a=>{!e.renderable||!e.renderable.getVisibility()||a&&(e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementVolumeCount()}},t.traverseVolumePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children[0].traverse(a),t.apply(a,!1))},t.volumePass=a=>{!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!a)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),gt(e.MCWCMatrix,e.renderable.getMatrix()),We(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?It(e.normalMatrix):(Vn(e.normalMatrix,e.MCWCMatrix),Tn(e.normalMatrix,e.normalMatrix),Br(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix})}const b8={};function M8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b8,a),Ct.extend(t,e,a),e.keyMatrixTime={},ut(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),pt(t,e,["context"]),O8(t,e)}const N8=Je(M8,"vtkOpenGLVolume");st("vtkVolume",N8);const Vh={NEAREST:0,LINEAR:1,FAST_LINEAR:2},Ah={FRACTIONAL:0,PROPORTIONAL:1},No={DEFAULT:0,ADDITIVE:1,COLORIZE:2,CUSTOM:3};var Bh={InterpolationType:Vh,OpacityMode:Ah,ColorMixPreset:No,FilterMode:{OFF:0,NORMALIZED:1,RAW:2}};const Ro={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6};var R8={BlendMode:Ro},L8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,F8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

const float infinity = 3.402823466e38;

// the output of this shader
//VTK::Output::Dec

in vec3 vertexVCVSOutput;

// From Sources\\Rendering\\Core\\VolumeProperty\\Constants.js
#define COMPOSITE_BLEND 0
#define MAXIMUM_INTENSITY_BLEND 1
#define MINIMUM_INTENSITY_BLEND 2
#define AVERAGE_INTENSITY_BLEND 3
#define ADDITIVE_INTENSITY_BLEND 4
#define RADON_TRANSFORM_BLEND 5
#define LABELMAP_EDGE_PROJECTION_BLEND 6

#define vtkNumberOfLights //VTK::NumberOfLights
#define vtkMaxLaoKernelSize //VTK::MaxLaoKernelSize
#define vtkNumberOfComponents //VTK::NumberOfComponents
#define vtkBlendMode //VTK::BlendMode
#define vtkMaximumNumberOfSamples //VTK::MaximumNumberOfSamples

//VTK::EnabledColorFunctions

//VTK::EnabledLightings

//VTK::EnabledMultiTexturePerVolume

//VTK::EnabledGradientOpacity

//VTK::EnabledIndependentComponents

//VTK::vtkProportionalComponents

//VTK::vtkForceNearestComponents

uniform int twoSidedLighting;

#if vtkMaxLaoKernelSize > 0
  vec2 kernelSample[vtkMaxLaoKernelSize];
#endif

// Textures
#ifdef EnabledMultiTexturePerVolume
  #define vtkNumberOfVolumeTextures vtkNumberOfComponents
#else
  #define vtkNumberOfVolumeTextures 1
#endif
uniform highp sampler3D volumeTexture[vtkNumberOfVolumeTextures];
uniform sampler2D colorTexture;
uniform sampler2D opacityTexture;
uniform sampler2D jtexture;
uniform sampler2D labelOutlineThicknessTexture;

struct Volume {
  // ---- Volume geometry settings ----

  vec3 originVC;          // in VC
  vec3 spacing;           // in VC per IC
  vec3 inverseSpacing;    // 1/spacing
  ivec3 dimensions;       // in IC
  vec3 inverseDimensions; // 1/vec3(dimensions)
  mat3 vecISToVCMatrix;   // convert from IS to VC without translation
  mat3 vecVCToISMatrix;   // convert from VC to IS without translation
  mat4 PCWCMatrix;
  mat4 worldToIndex;
  float diagonalLength; // in VC, this is: length(size)

  // ---- Texture settings ----

  // Texture shift and scale
  vec4 colorTextureScale;
  vec4 colorTextureShift;
  vec4 opacityTextureScale;
  vec4 opacityTextureShift;

  // The heights defined below are the locations for the up to four components
  // of the transfer functions. The transfer functions have a height of (2 *
  // numberOfComponents) pixels so the values are computed to hit the middle of
  // the two rows for that component
  vec4 transferFunctionsSampleHeight;

  // ---- Mode specific settings ----

  // Independent component default preset settings per component
  vec4 independentComponentMix;

  // Additive / average blending mode settings
  vec4 ipScalarRangeMin;
  vec4 ipScalarRangeMax;

  // ---- Rendering settings ----

  // Lighting
  float ambient;
  float diffuse;
  float specular;
  float specularPower;
  int computeNormalFromOpacity;

  // Gradient opacity
  vec4 gradientOpacityScale;
  vec4 gradientOpacityShift;
  vec4 gradientOpacityMin;
  vec4 gradientOpacityMax;

  // Volume shadow
  float volumetricScatteringBlending;
  float globalIlluminationReach;
  float anisotropy;
  float anisotropySquared;

  // LAO
  int kernelSize;
  int kernelRadius;

  // Label outline
  float outlineOpacity;
};
uniform Volume volume;

struct Light {
  vec3 color;
  vec3 positionVC;
  vec3 directionVC; // normalized
  vec3 halfAngleVC;
  vec3 attenuation;
  float exponent;
  float coneAngle;
  int isPositional;
};
#if vtkNumberOfLights > 0
  uniform Light lights[vtkNumberOfLights];
#endif

uniform float vpWidth;
uniform float vpHeight;
uniform float vpOffsetX;
uniform float vpOffsetY;

// Bitmasks for label outline
const int MAX_SEGMENT_INDEX = 256; // Define as per expected maximum
#define MAX_SEGMENTS 256
#define UINT_SIZE 32
// We add UINT_SIZE - 1, as we want the ceil of the division instead of the
// floor
#define BITMASK_SIZE ((MAX_SEGMENTS + UINT_SIZE - 1) / UINT_SIZE)
uint labelOutlineBitmasks[BITMASK_SIZE];

// Set the corresponding bit in the bitmask
void setLabelOutlineBit(int segmentIndex) {
  int arrayIndex = segmentIndex / UINT_SIZE;
  int bitIndex = segmentIndex % UINT_SIZE;
  labelOutlineBitmasks[arrayIndex] |= 1u << bitIndex;
}

// Check if a bit is set in the bitmask
bool isLabelOutlineBitSet(int segmentIndex) {
  int arrayIndex = segmentIndex / UINT_SIZE;
  int bitIndex = segmentIndex % UINT_SIZE;
  return ((labelOutlineBitmasks[arrayIndex] & (1u << bitIndex)) != 0u);
}

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

//VTK::ClipPlane::Dec

// A random number between 0 and 1 that only depends on the fragment
// It uses the jtexture, so this random seed repeats by blocks of 32 fragments
// in screen space
float fragmentSeed;

// sample texture is global
uniform float sampleDistance;
uniform float volumeShadowSampleDistance;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics
// rendering module is complete)
vec3 rayDirVC;

#define INV4PI 0.0796
#define EPSILON 0.001
#define PI 3.1415
#define PI2 9.8696

vec4 rawSampleTexture(vec3 pos) {
  #ifdef EnabledMultiTexturePerVolume
    vec4 rawSample;
    rawSample[0] = texture(volumeTexture[0], pos)[0];
  #if vtkNumberOfComponents > 1
    rawSample[1] = texture(volumeTexture[1], pos)[0];
  #endif
  #if vtkNumberOfComponents > 2
    rawSample[2] = texture(volumeTexture[2], pos)[0];
  #endif
  #if vtkNumberOfComponents > 3
    rawSample[3] = texture(volumeTexture[3], pos)[0];
  #endif
    return rawSample;
  #else
    return texture(volumeTexture[0], pos);
  #endif
}

vec4 rawFetchTexture(ivec3 pos) {
  #ifdef EnabledMultiTexturePerVolume
    vec4 rawSample;
    #if vtkNumberOfComponents > 0
      rawSample[0] = texelFetch(volumeTexture[0], pos, 0)[0];
    #endif
    #if vtkNumberOfComponents > 1
      rawSample[1] = texelFetch(volumeTexture[1], pos, 0)[0];
    #endif
    #if vtkNumberOfComponents > 2
      rawSample[2] = texelFetch(volumeTexture[2], pos, 0)[0];
    #endif
    #if vtkNumberOfComponents > 3
      rawSample[3] = texelFetch(volumeTexture[3], pos, 0)[0];
    #endif
    return rawSample;
  #else
    return texelFetch(volumeTexture[0], pos, 0);
  #endif
}

vec4 getTextureValue(vec3 pos) {
  vec4 tmp = rawSampleTexture(pos);

  // Force nearest
  #if defined(vtkComponent0ForceNearest) || \\
      defined(vtkComponent1ForceNearest) || \\
      defined(vtkComponent2ForceNearest) || \\
      defined(vtkComponent3ForceNearest)
    vec3 nearestPos = (floor(pos * vec3(volume.dimensions)) + 0.5) *
                      volume.inverseDimensions;
    vec4 nearestValue = rawSampleTexture(nearestPos);
    #ifdef vtkComponent0ForceNearest
      tmp[0] = nearestValue[0];
    #endif
    #ifdef vtkComponent1ForceNearest
      tmp[1] = nearestValue[1];
    #endif
    #ifdef vtkComponent2ForceNearest
      tmp[2] = nearestValue[2];
    #endif
    #ifdef vtkComponent3ForceNearest
      tmp[3] = nearestValue[3];
    #endif
  #endif

  // Set alpha when using dependent components
  #ifndef EnabledIndependentComponents
    #if vtkNumberOfComponents == 1
      tmp.a = tmp.r;
    #endif
    #if vtkNumberOfComponents == 2
      tmp.a = tmp.g;
    #endif
    #if vtkNumberOfComponents == 3
      tmp.a = length(tmp.rgb);
    #endif
  #endif

  return tmp;
}

// \`height\` is usually \`volume.transferFunctionsSampleHeight[component]\`
// when using independent component and \`0.5\` otherwise. Don't move the if
// statement in these function, as the callers usually already knows if it is
// using independent component or not
float getOpacityFromTexture(float scalar, int component, float height) {
  float scaledScalar = scalar * volume.opacityTextureScale[component] +
                       volume.opacityTextureShift[component];
  return texture2D(opacityTexture, vec2(scaledScalar, height)).r;
}
vec3 getColorFromTexture(float scalar, int component, float height) {
  float scaledScalar = scalar * volume.colorTextureScale[component] +
                       volume.colorTextureShift[component];
  return texture2D(colorTexture, vec2(scaledScalar, height)).rgb;
}

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
vec3 posIStoVC(vec3 posIS) {
  return volume.vecISToVCMatrix * posIS + volume.originVC;
}

// convert vector position from vc to idx
vec3 posVCtoIS(vec3 posVC) {
  return volume.vecVCToISMatrix * (posVC - volume.originVC);
}

// Rotate vector to view coordinate
vec3 vecISToVC(vec3 dirIS) {
  return volume.vecISToVCMatrix * dirIS;
}

// Rotate vector to idx coordinate
vec3 vecVCToIS(vec3 dirVC) {
  return volume.vecVCToISMatrix * dirVC;
}

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(float normalMag, int component) {
  float goscale = volume.gradientOpacityScale[component];
  float goshift = volume.gradientOpacityShift[component];
  float gomin = volume.gradientOpacityMin[component];
  float gomax = volume.gradientOpacityMax[component];
  return clamp(normalMag * goscale + goshift, gomin, gomax);
}

#ifdef vtkClippingPlanesOn
  bool isPointClipped(vec3 posVC) {
    for (int i = 0; i < clip_numPlanes; ++i) {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0) {
        return true;
      }
    }
    return false;
  }
#endif

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward
// difference

// The output normal is in VC
vec4 computeDensityNormal(vec3 opacityUCoords[2], float opacityTextureHeight,
                          float gradientOpacity, int component) {
  // Pass the scalars through the opacity functions
  vec4 opacityG;
  opacityG.x += getOpacityFromTexture(opacityUCoords[0].x, component,
                                      opacityTextureHeight);
  opacityG.y += getOpacityFromTexture(opacityUCoords[0].y, component,
                                      opacityTextureHeight);
  opacityG.z += getOpacityFromTexture(opacityUCoords[0].z, component,
                                      opacityTextureHeight);
  opacityG.x -= getOpacityFromTexture(opacityUCoords[1].x, component,
                                      opacityTextureHeight);
  opacityG.y -= getOpacityFromTexture(opacityUCoords[1].y, component,
                                      opacityTextureHeight);
  opacityG.z -= getOpacityFromTexture(opacityUCoords[1].z, component,
                                      opacityTextureHeight);

  // Divide by spacing and convert to VC
  opacityG.xyz *= gradientOpacity * volume.inverseSpacing;
  opacityG.w = length(opacityG.xyz);
  if (opacityG.w == 0.0) {
    return vec4(0.0);
  }

  // Normalize
  opacityG.xyz = normalize(vecISToVC(opacityG.xyz));

  return opacityG;
}

// The output normal is in VC
vec4 computeNormalForDensity(vec3 posIS, out vec3 scalarInterp[2],
                             const int opacityComponent) {
  vec3 offsetedPosIS;
  for (int axis = 0; axis < 3; ++axis) {
    // Positive direction
    offsetedPosIS = posIS;
    offsetedPosIS[axis] += volume.inverseDimensions[axis];
    scalarInterp[0][axis] =
        getTextureValue(offsetedPosIS)[opacityComponent];
    #ifdef vtkClippingPlanesOn
      if (isPointClipped(posIStoVC(offsetedPosIS))) {
        scalarInterp[0][axis] = 0.0;
      }
    #endif

    // Negative direction
    offsetedPosIS = posIS;
    offsetedPosIS[axis] -= volume.inverseDimensions[axis];
    scalarInterp[1][axis] =
        getTextureValue(offsetedPosIS)[opacityComponent];
    #ifdef vtkClippingPlanesOn
      if (isPointClipped(posIStoVC(offsetedPosIS))) {
        scalarInterp[1][axis] = 0.0;
      }
    #endif
  }

  vec4 result;
  result.xyz = (scalarInterp[0] - scalarInterp[1]) * volume.inverseSpacing;
  result.w = length(result.xyz);
  if (result.w == 0.0) {
    return vec4(0.0);
  }
  result.xyz = normalize(vecISToVC(result.xyz));
  return result;
}

vec4 fragCoordToPCPos(vec4 fragCoord) {
  return vec4((fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
              (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
              (fragCoord.z - 0.5) * 2.0, 1.0);
}

vec4 pcPosToWorldCoord(vec4 pcPos) {
  return volume.PCWCMatrix * pcPos;
}

vec3 fragCoordToIndexSpace(vec4 fragCoord) {
  vec4 pcPos = fragCoordToPCPos(fragCoord);
  vec4 worldCoord = pcPosToWorldCoord(pcPos);
  vec4 vertex = (worldCoord / worldCoord.w);

  vec3 index = (volume.worldToIndex * vertex).xyz;

  // half voxel fix for labelmapOutline
  return (index + vec3(0.5)) * volume.inverseDimensions;
}

vec3 fragCoordToWorld(vec4 fragCoord) {
  vec4 pcPos = fragCoordToPCPos(fragCoord);
  vec4 worldCoord = pcPosToWorldCoord(pcPos);
  return worldCoord.xyz;
}

//=======================================================================
// Compute the normals and gradient magnitudes for a position for independent
// components The output normals are in VC
mat4 computeMat4Normal(vec3 posIS, vec4 tValue) {
  vec3 xvec = vec3(volume.inverseDimensions.x, 0.0, 0.0);
  vec3 yvec = vec3(0.0, volume.inverseDimensions.y, 0.0);
  vec3 zvec = vec3(0.0, 0.0, volume.inverseDimensions.z);

  vec4 distX = getTextureValue(posIS + xvec) - getTextureValue(posIS - xvec);
  vec4 distY = getTextureValue(posIS + yvec) - getTextureValue(posIS - yvec);
  vec4 distZ = getTextureValue(posIS + zvec) - getTextureValue(posIS - zvec);

  // divide by spacing
  distX *= 0.5 * volume.inverseSpacing.x;
  distY *= 0.5 * volume.inverseSpacing.y;
  distZ *= 0.5 * volume.inverseSpacing.z;

  mat4 result;

  // optionally compute the 1st component
  #if vtkNumberOfComponents > 0 && !defined(vtkComponent0Proportional)
    {
      const int component = 0;
      vec3 normal = vec3(distX[component], distY[component], distZ[component]);
      float normalLength = length(normal);
      if (normalLength > 0.0) {
        normal = normalize(vecISToVC(normal));
      }
      result[component] = vec4(normal, normalLength);
    }
  #endif

  // optionally compute the 2nd component
  #if vtkNumberOfComponents > 1 && !defined(vtkComponent1Proportional)
    {
      const int component = 1;
      vec3 normal = vec3(distX[component], distY[component], distZ[component]);
      float normalLength = length(normal);
      if (normalLength > 0.0) {
        normal = normalize(vecISToVC(normal));
      }
      result[component] = vec4(normal, normalLength);
    }
  #endif

  // optionally compute the 3rd component
  #if vtkNumberOfComponents > 2 && !defined(vtkComponent2Proportional)
    {
      const int component = 2;
      vec3 normal = vec3(distX[component], distY[component], distZ[component]);
      float normalLength = length(normal);
      if (normalLength > 0.0) {
        normal = normalize(vecISToVC(normal));
      }
      result[component] = vec4(normal, normalLength);
    }
  #endif

  // optionally compute the 4th component
  #if vtkNumberOfComponents > 3 && !defined(vtkComponent3Proportional)
    {
      const int component = 3;
      vec3 normal = vec3(distX[component], distY[component], distZ[component]);
      float normalLength = length(normal);
      if (normalLength > 0.0) {
        normal = normalize(vecISToVC(normal));
      }
      result[component] = vec4(normal, normalLength);
    }
  #endif

  return result;
}

//=======================================================================
// global shadow - secondary ray

// henyey greenstein phase function
float phaseFunction(float cos_angle) {
  // divide by 2.0 instead of 4pi to increase intensity
  float anisotropy = volume.anisotropy;
  if (abs(anisotropy) <= EPSILON) {
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    return 0.5;
  }
  float anisotropy2 = volume.anisotropySquared;
  return ((1.0 - anisotropy2) /
          pow(1.0 + anisotropy2 - 2.0 * anisotropy * cos_angle, 1.5)) /
         2.0;
}

// Compute the two intersection distances of the ray with the volume in VC
// The entry point is \`rayOriginVC + distanceMin * rayDirVC\` and the exit point
// is \`rayOriginVC + distanceMax * rayDirVC\` If distanceMin < distanceMax, the
// volume is not intersected The ray origin is inside the box when distanceMin <
// 0.0 < distanceMax
vec2 rayIntersectVolumeDistances(vec3 rayOriginVC, vec3 rayDirVC) {
  // Compute origin and direction in IS
  vec3 rayOriginIS = posVCtoIS(rayOriginVC);
  vec3 rayDirIS = vecVCToIS(rayDirVC);
  // Don't check for infinity as the min/max combination afterward will always
  // find an intersection before infinity
  vec3 invDir = 1.0 / rayDirIS;

  // We have: bound = origin + t * dir
  // So: t = (1/dir) * (bound - origin)
  vec3 distancesTo0 = invDir * (vec3(0.0) - rayOriginIS);
  vec3 distancesTo1 = invDir * (vec3(1.0) - rayOriginIS);
  // Min and max distances to plane intersection per plane
  vec3 dMinPerAxis = min(distancesTo0, distancesTo1);
  vec3 dMaxPerAxis = max(distancesTo0, distancesTo1);
  // Overall first and last intersection
  float distanceMin = max(dMinPerAxis.x, max(dMinPerAxis.y, dMinPerAxis.z));
  float distanceMax = min(dMaxPerAxis.x, min(dMaxPerAxis.y, dMaxPerAxis.z));
  return vec2(distanceMin, distanceMax);
}

//=======================================================================
// local ambient occlusion
#if vtkMaxLaoKernelSize > 0

  // Return a random point on the unit sphere
  vec3 sampleDirectionUniform(int rayIndex) {
    // Each ray of each fragment should be different, two sources of randomness
    // are used. Only depends on ray index
    vec2 rayRandomness = kernelSample[rayIndex];
    // Only depends on fragment
    float fragmentRandomness = fragmentSeed;
    // Merge both source of randomness in a single uniform random variable using
    // the formula (x+y < 1 ? x+y : x+y-1). The simpler formula (x+y)/2 doesn't
    // result in a uniform distribution
    vec2 mergedRandom = rayRandomness + vec2(fragmentRandomness);
    mergedRandom -= vec2(greaterThanEqual(mergedRandom, vec2(1.0)));

    // Insipred by:
    // https://karthikkaranth.me/blog/generating-random-points-in-a-sphere/#better-choice-of-spherical-coordinates
    float u = mergedRandom[0];
    float v = mergedRandom[1];
    float theta = u * 2.0 * PI;
    float phi = acos(2.0 * v - 1.0);
    float sinTheta = sin(theta);
    float cosTheta = cos(theta);
    float sinPhi = sin(phi);
    float cosPhi = cos(phi);
    return vec3(sinPhi * cosTheta, sinPhi * sinTheta, cosPhi);
  }

  float computeLAO(vec3 posVC, vec4 normalVC, float originalOpacity) {
    // apply LAO only at selected locations, otherwise return full brightness
    if (normalVC.w <= 0.0 || originalOpacity <= 0.05) {
      return 1.0;
    }

    #ifdef EnabledGradientOpacity
      float gradientOpacityFactor = computeGradientOpacityFactor(normalVC.w, 0);
    #endif

    float visibilitySum = 0.0;
    float weightSum = 0.0;
    for (int i = 0; i < volume.kernelSize; i++) {
      // Only sample on an hemisphere around the normalVC.xyz axis, so
      // normalDotRay should be negative
      vec3 rayDirectionVC = sampleDirectionUniform(i);
      float normalDotRay = dot(normalVC.xyz, rayDirectionVC);
      if (normalDotRay > 0.0) {
        // Flip rayDirectionVC when it is in the wrong hemisphere
        rayDirectionVC = -rayDirectionVC;
        normalDotRay = -normalDotRay;
      }

      vec3 currPosIS = posVCtoIS(posVC);
      float visibility = 1.0;
      vec3 randomDirStepIS = vecVCToIS(rayDirectionVC * sampleDistance);
      for (int j = 0; j < volume.kernelRadius; j++) {
        currPosIS += randomDirStepIS;
        // If out of the volume, we are done
        if (any(lessThan(currPosIS, vec3(0.0))) ||
            any(greaterThan(currPosIS, vec3(1.0)))) {
          break;
        }
        float opacity = getOpacityFromTexture(getTextureValue(currPosIS).r, 0, 0.5);
        #ifdef EnabledGradientOpacity
          opacity *= gradientOpacityFactor;
        #endif
        visibility *= 1.0 - opacity;
        // If visibility is less than EPSILON, consider it to be 0
        if (visibility < EPSILON) {
          visibility = 0.0;
          break;
        }
      }
      float rayWeight = -normalDotRay;
      visibilitySum += visibility * rayWeight;
      weightSum += rayWeight;
    }

    // If no sample, LAO factor is one
    if (weightSum == 0.0) {
      return 1.0;
    }

    // LAO factor is the average visibility:
    // - visibility low => ambient low
    // - visibility high => ambient high
    float lao = visibilitySum / weightSum;

    // Reduce variance by clamping
    return clamp(lao, 0.3, 1.0);
  }
#endif

//=======================================================================
// Volume shadows
#if vtkNumberOfLights > 0

  // Non-memoised version
  float computeVolumeShadowWithoutCache(vec3 posVC, vec3 lightDirNormVC) {
    // modify sample distance with a random number between 1.5 and 3.0
    float rayStepLength =
        volumeShadowSampleDistance * mix(1.5, 3.0, fragmentSeed);

    // in case the first sample near surface has a very tiled light ray, we need
    // to offset start position
    vec3 initialPosVC = posVC + rayStepLength * lightDirNormVC;

    #ifdef vtkClippingPlanesOn
      float clippingPlanesMaxDistance = infinity;
      for (int i = 0; i < clip_numPlanes; ++i) {
        // Find distance of intersection with the plane
        // Points are clipped when:
        // dot(planeOrigin - (rayOrigin + distance * rayDirection), planeNormal) > 0
        // This is equivalent to:
        // dot(planeOrigin - rayOrigin, planeNormal) - distance * dot(rayDirection,
        // planeNormal) > 0.0
        // We precompute the dot products, so we clip ray points when:
        // dotOrigin - distance * dotDirection > 0.0
        float dotOrigin =
            dot(vClipPlaneOrigins[i] - initialPosVC, vClipPlaneNormals[i]);
        if (dotOrigin > 0.0) {
          // The initialPosVC is clipped by this plane
          return 1.0;
        }
        float dotDirection = dot(lightDirNormVC, vClipPlaneNormals[i]);
        if (dotDirection < 0.0) {
          // We only hit the plane if dotDirection is negative, as (distance is
          // positive)
          float intersectionDistance =
              dotOrigin / dotDirection; // negative divided by negative => positive
          clippingPlanesMaxDistance =
              min(clippingPlanesMaxDistance, intersectionDistance);
        }
      }
    #endif

    vec2 intersectionDistances =
        rayIntersectVolumeDistances(initialPosVC, lightDirNormVC);

    if (intersectionDistances[1] <= intersectionDistances[0] ||
        intersectionDistances[1] <= 0.0) {
      // Volume not hit or behind the ray
      return 1.0;
    }

    // When globalIlluminationReach is 0, no sample at all
    // When globalIlluminationReach is 1, the ray will go through the whole
    // volume
    float maxTravelDistance = mix(0.0, volume.diagonalLength,
                                  volume.globalIlluminationReach);
    float startDistance = max(intersectionDistances[0], 0.0);
    float endDistance = min(intersectionDistances[1], startDistance + maxTravelDistance);
    #ifdef vtkClippingPlanesOn
      endDistance = min(endDistance, clippingPlanesMaxDistance);
    #endif
    if (endDistance - startDistance < 0.0) {
      return 1.0;
    }

    // These two variables are used to compute posIS, without having to call
    // VCtoIS at each step
    vec3 initialPosIS = posVCtoIS(initialPosVC);
    // The light dir is scaled and rotated, but not translated, as it is a
    // vector (w = 0)
    vec3 scaledLightDirIS = vecVCToIS(lightDirNormVC);

    float shadow = 1.0;
    for (float currentDistance = startDistance; currentDistance <= endDistance;
          currentDistance += rayStepLength) {
      vec3 posIS = initialPosIS + currentDistance * scaledLightDirIS;
      vec4 scalar = getTextureValue(posIS);
      float opacity = getOpacityFromTexture(scalar.r, 0, 0.5);
      #if defined(EnabledGradientOpacity) && !defined(EnabledIndependentComponents)
        vec3 scalarInterp[2];
        vec4 normal = computeNormalForDensity(posIS, scalarInterp, 3);
        float opacityFactor = computeGradientOpacityFactor(normal.w, 0);
        opacity *= opacityFactor;
      #endif
      shadow *= 1.0 - opacity;

      // Early termination if shadow coeff is near 0.0
      if (shadow < EPSILON) {
        return 0.0;
      }
    }
    return shadow;
  }

  // Some cache for volume shadows
  struct {
    vec3 posVC;
    float shadow;
  } cachedShadows[vtkNumberOfLights];

  // Memoised version
  float computeVolumeShadow(vec3 posVC, vec3 lightDirNormVC, int lightIdx) {
    if (posVC == cachedShadows[lightIdx].posVC) {
      return cachedShadows[lightIdx].shadow;
    }
    float shadow = computeVolumeShadowWithoutCache(posVC, lightDirNormVC);
    cachedShadows[lightIdx].posVC = posVC;
    cachedShadows[lightIdx].shadow = shadow;
    return shadow;
  }

#endif

//=======================================================================
// surface light contribution
#if vtkNumberOfLights > 0
  vec3 applyLighting(vec3 tColor, vec4 normalVC) {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    for (int lightIdx = 0; lightIdx < vtkNumberOfLights; lightIdx++) {
      float df = dot(normalVC.xyz, lights[lightIdx].directionVC);
      if (df > 0.0) {
        diffuse += df * lights[lightIdx].color;
        float sf = dot(normalVC.xyz, -lights[lightIdx].halfAngleVC);
        if (sf > 0.0) {
          specular += pow(sf, volume.specularPower) * lights[lightIdx].color;
        }
      }
    }
    return tColor * (diffuse * volume.diffuse + volume.ambient) +
          specular * volume.specular;
  }

  vec3 applySurfaceShadowLighting(vec3 tColor, float alpha, vec3 posVC,
                                  vec4 normalVC) {
    // everything in VC
    vec3 diffuse = vec3(0.0);
    vec3 specular = vec3(0.0);
    for (int ligthIdx = 0; ligthIdx < vtkNumberOfLights; ligthIdx++) {
      vec3 vertLightDirection;
      float attenuation;
      if (lights[ligthIdx].isPositional == 1) {
        vertLightDirection = posVC - lights[ligthIdx].positionVC;
        float lightDistance = length(vertLightDirection);
        // Normalize with precomputed length
        vertLightDirection = vertLightDirection / lightDistance;
        // Base attenuation
        vec3 attenuationPolynom = lights[ligthIdx].attenuation;
        attenuation =
            1.0 / (attenuationPolynom[0] +
                  lightDistance * (attenuationPolynom[1] +
                                    lightDistance * attenuationPolynom[2]));
        // Cone attenuation
        float coneDot = dot(vertLightDirection, lights[ligthIdx].directionVC);
        // Per OpenGL standard cone angle is 90 or less for a spot light
        if (lights[ligthIdx].coneAngle <= 90.0) {
          if (coneDot >= cos(radians(lights[ligthIdx].coneAngle))) {
            // Inside the cone
            attenuation *= pow(coneDot, lights[ligthIdx].exponent);
          } else {
            // Outside the cone
            attenuation = 0.0;
          }
        }
      } else {
        vertLightDirection = lights[ligthIdx].directionVC;
        attenuation = 1.0;
      }

      float ndotL = dot(normalVC.xyz, vertLightDirection);
      if (ndotL < 0.0 && twoSidedLighting == 1) {
        ndotL = -ndotL;
      }
      if (ndotL > 0.0) {
        // Diffuse
        diffuse += ndotL * attenuation * lights[ligthIdx].color;
        // Specular
        float vdotR =
            dot(-rayDirVC, normalize(vertLightDirection - 2.0 * ndotL * normalVC.xyz));
        if (vdotR > 0.0) {
          specular += pow(vdotR, volume.specularPower) * attenuation *
                      lights[ligthIdx].color;
        }
      }
    }
    #if vtkMaxLaoKernelSize > 0
      float laoFactor = computeLAO(posVC, normalVC, alpha);
    #else
      const float laoFactor = 1.0;
    #endif
    return tColor * (diffuse * volume.diffuse +
                    volume.ambient * laoFactor) +
          specular * volume.specular;
  }

  vec3 applyVolumeShadowLighting(vec3 tColor, vec3 posVC) {
    // Here we have no effect of cones and no attenuation
    vec3 diffuse = vec3(0.0);
    for (int lightIdx = 0; lightIdx < vtkNumberOfLights; lightIdx++) {
      vec3 lightDirVC = lights[lightIdx].isPositional == 1
                            ? normalize(lights[lightIdx].positionVC - posVC)
                            : -lights[lightIdx].directionVC;
      float shadowCoeff = computeVolumeShadow(posVC, lightDirVC, lightIdx);
      float phaseAttenuation = phaseFunction(dot(rayDirVC, lightDirVC));
      diffuse += phaseAttenuation * shadowCoeff * lights[lightIdx].color;
    }
    return tColor * (diffuse * volume.diffuse + volume.ambient);
  }
#endif

// LAO of surface shadows and volume shadows only work with dependent components
vec3 applyAllLightning(vec3 tColor, float alpha, vec3 posVC,
                       vec4 surfaceNormalVC) {
  #if vtkNumberOfLights > 0
    // 0 <= volCoeff < EPSILON => only surface shadows
    // EPSILON <= volCoeff < 1 - EPSILON => mix of surface and volume shadows
    // 1 - EPSILON <= volCoeff => only volume shadows
    float volCoeff = volume.volumetricScatteringBlending *
                    (1.0 - alpha / 2.0) *
                    (1.0 - atan(surfaceNormalVC.w) * INV4PI);

    // Compute surface lighting if needed
    vec3 surfaceShadedColor = tColor;
    #ifdef EnableSurfaceLighting
      if (volCoeff < 1.0 - EPSILON) {
        surfaceShadedColor =
            applySurfaceShadowLighting(tColor, alpha, posVC, surfaceNormalVC);
      }
    #endif

    // Compute volume lighting if needed
    vec3 volumeShadedColor = tColor;
    #ifdef EnableVolumeLighting
      if (volCoeff >= EPSILON) {
        volumeShadedColor = applyVolumeShadowLighting(tColor, posVC);
      }
    #endif

    // Return the right mix
    if (volCoeff < EPSILON) {
      // Surface shadows
      return surfaceShadedColor;
    }
    if (volCoeff >= 1.0 - EPSILON) {
      // Volume shadows
      return volumeShadedColor;
    }
    // Mix of surface and volume shadows
    return mix(surfaceShadedColor, volumeShadedColor, volCoeff);
  #endif
  return tColor;
}

vec4 getColorForLabelOutline() {
  vec3 centerPosIS =
      fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = vec4(getColorFromTexture(centerValue.r, 0, 0.5),
                     getOpacityFromTexture(centerValue.r, 0, 0.5));

  int segmentIndex = int(centerValue.r * 255.0);

  // Use texture sampling for outlineThickness
  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
  float textureValue =
      texture2D(labelOutlineThicknessTexture, vec2(textureCoordinate, 0.5)).r;
  int actualThickness = int(textureValue * 255.0);

  // If it is the background (segment index 0), we should quickly bail out.
  // Previously, this was determined by tColor.a, which was incorrect as it
  // prevented the outline from appearing when the fill is 0.
  if (segmentIndex == 0) {
    return vec4(0, 0, 0, 0);
  }

  // Only perform outline check on fragments rendering voxels that aren't
  // invisible. Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  for (int i = -actualThickness; i <= actualThickness; i++) {
    for (int j = -actualThickness; j <= actualThickness; j++) {
      if (i == 0 || j == 0) {
        continue;
      }

      vec4 neighborPixelCoord =
          vec4(gl_FragCoord.x + float(i), gl_FragCoord.y + float(j),
               gl_FragCoord.z, gl_FragCoord.w);

      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
      vec4 value = getTextureValue(neighborPosIS);

      // If any of my neighbours are not the same value as I
      // am, this means I am on the border of the segment.
      // We can break the loops
      if (any(notEqual(value, centerValue))) {
        pixelOnBorder = true;
        break;
      }
    }

    if (pixelOnBorder == true) {
      break;
    }
  }

  // If I am on the border, I am displayed at full opacity
  if (pixelOnBorder == true) {
    tColor.a = volume.outlineOpacity;
  }

  return tColor;
}

vec4 getColorForAdditivePreset(vec4 tValue, vec3 posVC, vec3 posIS) {
  // compute normals
  mat4 normalMat = computeMat4Normal(posIS, tValue);
  vec4 normalLights[2];
  normalLights[0] = normalMat[0];
  normalLights[1] = normalMat[1];
  #if vtkNumberOfLights > 0
    if (volume.computeNormalFromOpacity == 1) {
      for (int component = 0; component < 2; ++component) {
        vec3 scalarInterp[2];
        float height = volume.transferFunctionsSampleHeight[component];
        computeNormalForDensity(posIS, scalarInterp, component);
        normalLights[component] =
            computeDensityNormal(scalarInterp, height, 1.0, component);
      }
    }
  #endif

  // compute opacities
  float opacities[2];
  opacities[0] = getOpacityFromTexture(
      tValue[0], 0, volume.transferFunctionsSampleHeight[0]);
  opacities[1] = getOpacityFromTexture(
      tValue[1], 1, volume.transferFunctionsSampleHeight[1]);
  #ifdef EnabledGradientOpacity
    for (int component = 0; component < 2; ++component) {
      opacities[component] *=
          computeGradientOpacityFactor(normalMat[component].a, component);
    }
  #endif
  float opacitySum = opacities[0] + opacities[1];
  if (opacitySum <= 0.0) {
    return vec4(0.0);
  }

  // mix the colors and opacities
  vec3 colors[2];
  for (int component = 0; component < 2; ++component) {
    float sampleHeight = volume.transferFunctionsSampleHeight[component];
    vec3 color = getColorFromTexture(tValue[component], component, sampleHeight);
    color = applyAllLightning(color, opacities[component], posVC,
                              normalLights[component]);
    colors[component] = color;
  }
  vec3 mixedColor =
      (opacities[0] * colors[0] + opacities[1] * colors[1]) / opacitySum;
  return vec4(mixedColor, min(1.0, opacitySum));
}

vec4 getColorForColorizePreset(vec4 tValue, vec3 posVC, vec3 posIS) {
  // compute normals
  mat4 normalMat = computeMat4Normal(posIS, tValue);
  vec4 normalLight = normalMat[0];
  #if vtkNumberOfLights > 0
    if (volume.computeNormalFromOpacity == 1) {
      vec3 scalarInterp[2];
      float height = volume.transferFunctionsSampleHeight[0];
      computeNormalForDensity(posIS, scalarInterp, 0);
      normalLight = computeDensityNormal(scalarInterp, height, 1.0, 0);
    }
  #endif

  // compute opacities
  float opacity = getOpacityFromTexture(
      tValue[0], 0, volume.transferFunctionsSampleHeight[0]);
  #ifdef EnabledGradientOpacity
    opacity *= computeGradientOpacityFactor(normalMat[0].a, 0);
  #endif

  // colorizing component
  vec3 colorizingColor = getColorFromTexture(
      tValue[0], 1, volume.transferFunctionsSampleHeight[1]);
  float colorizingOpacity = getOpacityFromTexture(
      tValue[1], 1, volume.transferFunctionsSampleHeight[1]);

  // mix the colors and opacities
  vec3 color =
      getColorFromTexture(tValue[0], 0,
                          volume.transferFunctionsSampleHeight[0]) *
      mix(vec3(1.0), colorizingColor, colorizingOpacity);
  color = applyAllLightning(color, opacity, posVC, normalLight);
  return vec4(color, opacity);
}

vec4 getColorForDefaultIndependentPreset(vec4 tValue, vec3 posIS) {

  // compute the normal vectors as needed
  #if defined(EnabledGradientOpacity) || vtkNumberOfLights > 0
    mat4 normalMat = computeMat4Normal(posIS, tValue);
  #endif

  // process color and opacity for each component
  // initial value of alpha is determined by wether the first component is
  // proportional or not
  #if defined(vtkComponent0Proportional)
    // when it is proportional, it starts at 1 (neutral for multiplications)
    float alpha = 1.0;
  #else
    // when it is not proportional, it starts at 0 (neutral for additions)
    float alpha = 0.0;
  #endif

  vec3 mixedColor = vec3(0.0);
  #if vtkNumberOfComponents > 0
    {
      const int component = 0;
      vec3 color = getColorFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      float opacity = getOpacityFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      #if !defined(vtkComponent0Proportional)
        float alphaContribution = volume.independentComponentMix[component] * opacity;
        #ifdef EnabledGradientOpacity
          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);
        #endif
        alpha += alphaContribution;
        #if vtkNumberOfLights > 0
          color = applyLighting(color, normalMat[component]);
        #endif
      #else
        color *= opacity;
        alpha *= mix(opacity, 1.0,
                    (1.0 - volume.independentComponentMix[component]));
      #endif
      mixedColor += volume.independentComponentMix[component] * color;
    }
  #endif
  #if vtkNumberOfComponents > 1
    {
      const int component = 1;
      vec3 color = getColorFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      float opacity = getOpacityFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      #if !defined(vtkComponent1Proportional)
        float alphaContribution = volume.independentComponentMix[component] * opacity;
        #ifdef EnabledGradientOpacity
          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);
        #endif
        alpha += alphaContribution;
        #if vtkNumberOfLights > 0
          color = applyLighting(color, normalMat[component]);
        #endif
      #else
        color *= opacity;
        alpha *= mix(opacity, 1.0,
                    (1.0 - volume.independentComponentMix[component]));
      #endif
      mixedColor += volume.independentComponentMix[component] * color;
    }
  #endif
  #if vtkNumberOfComponents > 2
    {
      const int component = 2;
      vec3 color = getColorFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      float opacity = getOpacityFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      #if !defined(vtkComponent2Proportional)
        float alphaContribution = volume.independentComponentMix[component] * opacity;
        #ifdef EnabledGradientOpacity
          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);
        #endif
        alpha += alphaContribution;
        #if vtkNumberOfLights > 0
          color = applyLighting(color, normalMat[component]);
        #endif
      #else
        color *= opacity;
        alpha *= mix(opacity, 1.0,
                    (1.0 - volume.independentComponentMix[component]));
      #endif
      mixedColor += volume.independentComponentMix[component] * color;
    }
  #endif
  #if vtkNumberOfComponents > 3
    {
      const int component = 3;
      vec3 color = getColorFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      float opacity = getOpacityFromTexture(
          tValue[component], component,
          volume.transferFunctionsSampleHeight[component]);
      #if !defined(vtkComponent3Proportional)
        float alphaContribution = volume.independentComponentMix[component] * opacity;
        #ifdef EnabledGradientOpacity
          alphaContribution *= computeGradientOpacityFactor(normalMat[component].a, component);
        #endif
        alpha += alphaContribution;
        #if vtkNumberOfLights > 0
          color = applyLighting(color, normalMat[component]);
        #endif
      #else
        color *= opacity;
        alpha *= mix(opacity, 1.0,
                    (1.0 - volume.independentComponentMix[component]));
      #endif
      mixedColor += volume.independentComponentMix[component] * color;
    }
  #endif

  return vec4(mixedColor, alpha);
}

vec4 getColorForDependentComponents(vec4 tValue, vec3 posVC, vec3 posIS) {
  #if defined(EnabledGradientOpacity) || vtkNumberOfLights > 0
    // use component 3 of the opacity texture as getTextureValue() sets alpha to
    // the opacity value
    vec3 scalarInterp[2];
    vec4 normal0 = computeNormalForDensity(posIS, scalarInterp, 3);
    float gradientOpacity = computeGradientOpacityFactor(normal0.a, 0);
  #endif

  // get color and opacity
  #if vtkNumberOfComponents == 1
    vec3 tColor = getColorFromTexture(tValue.r, 0, 0.5);
    float alpha = getOpacityFromTexture(tValue.r, 0, 0.5);
  #endif
  #if vtkNumberOfComponents == 2
    vec3 tColor = vec3(tValue.r * volume.colorTextureScale[0] +
                  volume.colorTextureShift[0]);
    float alpha = getOpacityFromTexture(tValue.a, 1, 0.5);
  #endif
  #if vtkNumberOfComponents == 3
      vec3 tColor = tValue.rgb * volume.colorTextureScale.rgb +
              volume.colorTextureShift.rgb;
      float alpha = getOpacityFromTexture(tValue.a, 0, 0.5);
  #endif
  #if vtkNumberOfComponents == 4
      vec3 tColor = tValue.rgb * volume.colorTextureScale.rgb +
              volume.colorTextureShift.rgb;
      float alpha = getOpacityFromTexture(tValue.a, 3, 0.5);
  #endif

  // Apply gradient opacity
  #if defined(EnabledGradientOpacity)
    alpha *= gradientOpacity;
  #endif

  #if vtkNumberOfComponents == 1
    if (alpha < EPSILON) {
      return vec4(0.0);
    }
  #endif

  // lighting
  #if vtkNumberOfLights > 0
    vec4 normalLight;
    if (volume.computeNormalFromOpacity == 1) {
      if (normal0[3] != 0.0) {
        normalLight =
            computeDensityNormal(scalarInterp, 0.5, gradientOpacity, 0);
        if (normalLight[3] == 0.0) {
          normalLight = normal0;
        }
      }
    } else {
      normalLight = normal0;
    }
    tColor = applyAllLightning(tColor, alpha, posVC, normalLight);
  #endif

  return vec4(tColor, alpha);
}

vec4 getColorForValue(vec4 tValue, vec3 posVC, vec3 posIS) {
  #ifdef EnableColorForValueFunctionId0
    return getColorForDependentComponents(tValue, posVC, posIS);
  #endif

  #ifdef EnableColorForValueFunctionId1
    return getColorForAdditivePreset(tValue, posVC, posIS);
  #endif

  #ifdef EnableColorForValueFunctionId2
    return getColorForColorizePreset(tValue, posVC, posIS);
  #endif

  #ifdef EnableColorForValueFunctionId3
    /*
      * Mix the color information from all the independent components to get a
      * single rgba output. See other shader functions like
      * \`getColorForAdditivePreset\` to learn how to create a custom color mix.
      * The custom color mix should return a value, but if it doesn't, it will
      * fallback on the default shading
      */
    //VTK::CustomColorMix
  #endif

  #if defined(EnableColorForValueFunctionId4) || defined(EnableColorForValueFunctionId3)
    return getColorForDefaultIndependentPreset(tValue, posIS);
  #endif

  #ifdef EnableColorForValueFunctionId5
    return getColorForLabelOutline();
  #endif
}

bool valueWithinScalarRange(vec4 val) {
  #if vtkNumberOfComponents > 1 && !defined(EnabledIndependentComponents)
    return false;
  #endif
  vec4 rangeMin = volume.ipScalarRangeMin;
  vec4 rangeMax = volume.ipScalarRangeMax;
  for (int component = 0; component < vtkNumberOfComponents; ++component) {
    if (val[component] < rangeMin[component] ||
        rangeMax[component] < val[component]) {
      return false;
    }
  }
  return true;
}

#if vtkBlendMode == LABELMAP_EDGE_PROJECTION_BLEND
  bool checkOnEdgeForNeighbor(int xFragmentOffset, int yFragmentOffset,
                              int segmentIndex, vec3 stepIS) {
    vec3 volumeDimensions = vec3(volume.dimensions);
    vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(xFragmentOffset),
                                  gl_FragCoord.y + float(yFragmentOffset),
                                  gl_FragCoord.z, gl_FragCoord.w);
    vec3 originalNeighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);

    vec3 neighborPosIS = originalNeighborPosIS;
    for (int k = 0; k < vtkMaximumNumberOfSamples / 2; ++k) {
      ivec3 texCoord = ivec3(neighborPosIS * volumeDimensions);
      vec4 texValue = rawFetchTexture(texCoord);
      if (int(texValue.g) == segmentIndex) {
        // not on edge
        return false;
      }
      neighborPosIS += stepIS;
    }

    neighborPosIS = originalNeighborPosIS;
    for (int k = 0; k < vtkMaximumNumberOfSamples / 2; ++k) {
      ivec3 texCoord = ivec3(neighborPosIS * volumeDimensions);
      vec4 texValue = rawFetchTexture(texCoord);
      if (int(texValue.g) == segmentIndex) {
        // not on edge
        return false;
      }
      neighborPosIS -= stepIS;
    }

    // onedge
    float sampleHeight = volume.transferFunctionsSampleHeight[1];
    vec3 tColorSegment =
        getColorFromTexture(float(segmentIndex), 1, sampleHeight);
    float pwfValueSegment =
        getOpacityFromTexture(float(segmentIndex), 1, sampleHeight);
    gl_FragData[0] = vec4(tColorSegment, pwfValueSegment);
    return true;
  }
#endif

vec4 getColorAtPos(vec3 posVC) {
  vec3 posIS = posVCtoIS(posVC);
  vec4 texValue = getTextureValue(posIS);
  return getColorForValue(texValue, posVC, posIS);
}

//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 rayOriginVC, vec3 rayDirVC, float minDistance,
                float maxDistance) {
  // start slightly inside and apply some jitter
  vec3 stepVC = rayDirVC * sampleDistance;
  float raySteps = (maxDistance - minDistance) / sampleDistance;

  // Avoid 0.0 jitter
  float jitter = 0.01 + 0.99 * fragmentSeed;

  #if vtkBlendMode == COMPOSITE_BLEND
    // now map through opacity and color
    vec3 firstPosVC = rayOriginVC + minDistance * rayDirVC;
    vec4 firstColor = getColorAtPos(firstPosVC);

    // handle very thin volumes
    if (raySteps <= 1.0) {
      firstColor.a = 1.0 - pow(1.0 - firstColor.a, raySteps);
      gl_FragData[0] = firstColor;
      return;
    }

    // first color only counts for \`jitter\` factor of the step
    firstColor.a = 1.0 - pow(1.0 - firstColor.a, jitter);
    vec4 color = vec4(firstColor.rgb * firstColor.a, firstColor.a);
    vec3 posVC = firstPosVC + jitter * stepVC;
    float stepsTraveled = jitter;

    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) {
        break;
      }
      vec4 tColor = getColorAtPos(posVC);

      color = color + vec4(tColor.rgb * tColor.a, tColor.a) * (1.0 - color.a);
      stepsTraveled++;
      posVC += stepVC;
      if (color.a > 0.99) {
        color.a = 1.0;
        break;
      }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0) {
      vec3 endPosVC = rayOriginVC + maxDistance * rayDirVC;
      vec4 tColor = getColorAtPos(endPosVC);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb * tColor.a, tColor.a) * mix;
    }

    gl_FragData[0] = vec4(color.rgb / color.a, color.a);
  #endif

  #if vtkBlendMode == MAXIMUM_INTENSITY_BLEND ||                                 \\
      vtkBlendMode == MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == MAXIMUM_INTENSITY_BLEND
      #define OP max
    #else
      #define OP min
    #endif

    vec3 posVC = rayOriginVC + minDistance * rayDirVC;
    float stepsTraveled = 0.0;

    // Find a value to initialize the selected variables
    vec4 selectedValue;
    vec3 selectedPosVC;
    vec3 selectedPosIS;
    {
      vec3 posIS = posVCtoIS(posVC);
      selectedValue = getTextureValue(posIS);
      selectedPosVC = posVC;
      selectedPosIS = posIS;
    }

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(selectedValue, selectedPosVC, selectedPosIS);
      return;
    }

    posVC += jitter * stepVC;
    stepsTraveled += jitter;

    // Sample along the ray until vtkMaximumNumberOfSamples,
    // ending slightly inside the total distance
    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) {
        break;
      }

      // Get selected values
      vec3 posIS = posVCtoIS(posVC);
      vec4 previousSelectedValue = selectedValue;
      vec4 currentValue = getTextureValue(posIS);
      selectedValue = OP(selectedValue, currentValue);
      if (previousSelectedValue != selectedValue) {
        selectedPosVC = posVC;
        selectedPosIS = posIS;
      }

      // Otherwise, continue along the ray
      stepsTraveled++;
      posVC += stepVC;
    }

    // Perform the last step along the ray using the
    // residual distance
    posVC = rayOriginVC + maxDistance * rayDirVC;
    {
      vec3 posIS = posVCtoIS(posVC);
      vec4 previousSelectedValue = selectedValue;
      vec4 currentValue = getTextureValue(posIS);
      selectedValue = OP(selectedValue, currentValue);
      if (previousSelectedValue != selectedValue) {
        selectedPosVC = posVC;
        selectedPosIS = posIS;
      }
    }

    gl_FragData[0] = getColorForValue(selectedValue, selectedPosVC, selectedPosIS);
  #endif

  #if vtkBlendMode == ADDITIVE_INTENSITY_BLEND ||                                \\
      vtkBlendMode == AVERAGE_INTENSITY_BLEND
    vec4 sum = vec4(0.);
    #if vtkBlendMode == AVERAGE_INTENSITY_BLEND
      float totalWeight = 0.0;
    #endif
    vec3 posVC = rayOriginVC + minDistance * rayDirVC;
    float stepsTraveled = 0.0;

    vec3 posIS = posVCtoIS(posVC);
    vec4 value = getTextureValue(posIS);

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(value * raySteps, posVC, posIS);
      return;
    }

    if (valueWithinScalarRange(value)) {
      sum += value * jitter;
      #if vtkBlendMode == AVERAGE_INTENSITY_BLEND
        totalWeight += jitter;
      #endif
    }
    posVC += jitter * stepVC;
    stepsTraveled += jitter;

    // Sample along the ray until vtkMaximumNumberOfSamples,
    // ending slightly inside the total distance
    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) {
        break;
      }

      posIS = posVCtoIS(posVC);
      value = getTextureValue(posIS);
      // One can control the scalar range by setting the AverageIPScalarRange to
      // disregard scalar values, not in the range of interest, from the average
      // computation. Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(value)) {
        sum += value;
        #if vtkBlendMode == AVERAGE_INTENSITY_BLEND
          totalWeight++;
        #endif
      }

      stepsTraveled++;
      posVC += stepVC;
    }

    // Perform the last step along the ray using the
    // residual distance
    posVC = rayOriginVC + maxDistance * rayDirVC;
    posIS = posVCtoIS(posVC);
    value = getTextureValue(posIS);
    if (valueWithinScalarRange(value)) {
      sum += value;
      #if vtkBlendMode == AVERAGE_INTENSITY_BLEND
        totalWeight += raySteps - stepsTraveled;
      #endif
    }

    #if vtkBlendMode == AVERAGE_INTENSITY_BLEND
      sum /= vec4(totalWeight, totalWeight, totalWeight, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posVC, posIS);
  #endif

  #if vtkBlendMode == RADON_TRANSFORM_BLEND
    float normalizedRayIntensity = 1.0;
    vec3 posVC = rayOriginVC + minDistance * rayDirVC;
    float stepsTraveled = 0.0;

    // handle very thin volumes
    if (raySteps <= 1.0) {
      vec3 posIS = posVCtoIS(posVC);
      vec4 tValue = getTextureValue(posIS);
      normalizedRayIntensity -= raySteps * sampleDistance *
                                getOpacityFromTexture(tValue.r, 0, 0.5);
      gl_FragData[0] =
          vec4(getColorFromTexture(normalizedRayIntensity, 0, 0.5), 1.0);
      return;
    }

    posVC += jitter * stepVC;
    stepsTraveled += jitter;

    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {
      if (stepsTraveled + 1.0 >= raySteps) {
        break;
      }

      vec3 posIS = posVCtoIS(posVC);
      vec4 value = getTextureValue(posIS);
      // Convert scalar value to normalizedRayIntensity coefficient and
      // accumulate normalizedRayIntensity
      normalizedRayIntensity -=
          sampleDistance * getOpacityFromTexture(value.r, 0, 0.5);

      posVC += stepVC;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] =
        vec4(getColorFromTexture(normalizedRayIntensity, 0, 0.5), 1.0);
  #endif

  #if vtkBlendMode == LABELMAP_EDGE_PROJECTION_BLEND
    // Only works with a single volume
    vec3 posVC = rayOriginVC + minDistance * rayDirVC;
    float stepsTraveled = 0.0;
    vec3 posIS = posVCtoIS(posVC);
    vec4 tValue = getTextureValue(posIS);
    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(tValue, posVC, posIS);
      return;
    }

    vec3 stepIS = vecVCToIS(stepVC);
    vec4 value = tValue;
    posIS += jitter * stepIS;
    stepsTraveled += jitter;
    vec3 maxPosIS = posIS; // Store the position of the max value
    int segmentIndex = int(value.g);
    bool originalPosHasSeenNonZero = false;

    if (segmentIndex != 0) {
      // Tried using the segment index in an boolean array but reading
      // from the array by dynamic indexing was horrondously slow
      // so use bit masking instead and assign 1 to the bit corresponding to the
      // segment index and later check if the bit is set via bit operations
      setLabelOutlineBit(segmentIndex);
    }

    // Sample along the ray until vtkMaximumNumberOfSamples,
    // ending slightly inside the total distance
    for (int i = 0; i < vtkMaximumNumberOfSamples; ++i) {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) {
        break;
      }

      // compute the scalar
      tValue = getTextureValue(posIS);
      segmentIndex = int(tValue.g);

      if (segmentIndex != 0) {
        originalPosHasSeenNonZero = true;
        setLabelOutlineBit(segmentIndex);
      }

      if (tValue.r > value.r) {
        value = tValue;   // Update the max value
        maxPosIS = posIS; // Update the position where max occurred
      }

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = posVCtoIS(rayOriginVC + maxDistance * rayDirVC);
    tValue = getTextureValue(posIS);

    if (tValue.r > value.r) {
      value = tValue;   // Update the max value
      maxPosIS = posIS; // Update the position where max occurred
    }

    // If we have not seen any non-zero segments, we can return early
    // and grab color from the actual center value first component (image)
    if (!originalPosHasSeenNonZero) {
      vec3 maxPosVC = posIStoVC(maxPosIS);
      gl_FragData[0] = getColorForValue(value, maxPosVC, maxPosIS);
      return;
    }

    vec3 neighborRayStepsIS = stepIS;
    float neighborRaySteps = raySteps;
    bool shouldLookInAllNeighbors = false;

    vec3 volumeSpacings = volume.spacing;
    float minVoxelSpacing =
        min(volumeSpacings[0], min(volumeSpacings[1], volumeSpacings[2]));
    vec4 base =
        vec4(gl_FragCoord.x, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);

    vec4 baseXPlus = vec4(gl_FragCoord.x + 1.0, gl_FragCoord.y, gl_FragCoord.z,
                          gl_FragCoord.w);
    vec4 baseYPlus = vec4(gl_FragCoord.x, gl_FragCoord.y + 1.0, gl_FragCoord.z,
                          gl_FragCoord.w);

    vec3 baseWorld = fragCoordToWorld(base);
    vec3 baseXPlusWorld = fragCoordToWorld(baseXPlus);
    vec3 baseYPlusWorld = fragCoordToWorld(baseYPlus);

    float XPlusDiff = length(baseXPlusWorld - baseWorld);
    float YPlusDiff = length(baseYPlusWorld - baseWorld);

    float minFragSpacingWorld = min(XPlusDiff, YPlusDiff);

    for (int s = 1; s < MAX_SEGMENT_INDEX; s++) {
      // bail out quickly if the segment index has not
      // been seen by the center segment
      if (!isLabelOutlineBitSet(s)) {
        continue;
      }

      // Use texture sampling for outlineThickness so that we can have
      // per segment thickness
      float textureCoordinate = float(s - 1) / 1024.0;
      float textureValue =
          texture2D(labelOutlineThicknessTexture, vec2(textureCoordinate, 0.5)).r;

      int actualThickness = int(textureValue * 255.0);

      // check the extreme points in the neighborhood since there is a better
      // chance of finding the edge there, so that we can bail out
      // faster if we find the edge
      bool onEdge = checkOnEdgeForNeighbor(-actualThickness, -actualThickness, s,
                                          stepIS) ||
                    checkOnEdgeForNeighbor(actualThickness, actualThickness, s,
                                          stepIS) ||
                    checkOnEdgeForNeighbor(actualThickness, -actualThickness, s,
                                          stepIS) ||
                    checkOnEdgeForNeighbor(-actualThickness, +actualThickness, s,
                                          stepIS);

      if (onEdge) {
        return;
      }

      // since the next step is computationally expensive, we need to perform
      // some optimizations to avoid it if possible. One of the optimizations
      // is to check the whether the minimum of the voxel spacing is greater than
      // the 2 * the thickness of the outline segment. If that is the case
      // then we can safely skip the next step since we can be sure that the
      // the previous 4 checks on the extreme points would caught the entirety
      // of the all the fragments inside. i.e., this happens when we zoom out,
      if (minVoxelSpacing >
          (2.0 * float(actualThickness) - 1.0) * minFragSpacingWorld) {
        continue;
      }

      // Loop through the rest, skipping the processed extremes and the center
      for (int i = -actualThickness; i <= actualThickness; i++) {
        for (int j = -actualThickness; j <= actualThickness; j++) {
          if (i == 0 && j == 0)
            continue; // Skip the center
          if (abs(i) == actualThickness && abs(j) == actualThickness)
            continue; // Skip corners
          if (checkOnEdgeForNeighbor(i, j, s, stepIS)) {
            return;
          }
        }
      }
    }

    float sampleHeight = volume.transferFunctionsSampleHeight[0];
    vec3 tColor0 = getColorFromTexture(value.r, 0, sampleHeight);
    float pwfValue0 = getOpacityFromTexture(value.r, 0, sampleHeight);
    gl_FragData[0] = vec4(tColor0, pwfValue0);
  #endif
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayOriginVC, vec3 rayDirVC) {
  vec2 dists = rayIntersectVolumeDistances(rayOriginVC, rayDirVC);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0, dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick / rayDirVC.z;
  dists.y = min(farDist, dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

float getFragmentSeed() {
  // This first noise has a diagonal pattern
  float firstNoise =
      fract(sin(dot(gl_FragCoord.xy, vec2(12.9898, 78.233))) * 43758.5453);
  // This second noise is made out of blocks of CPU generated noise
  float secondNoise = texture2D(jtexture, gl_FragCoord.xy / 32.0).r;
  // Combine the two sources of noise in a way that the distribution is uniform
  // in [0,1[
  float noiseSum = firstNoise + secondNoise;
  return noiseSum < 1.0 ? noiseSum : noiseSum - 1.0;
}

void main() {
  fragmentSeed = getFragmentSeed();

  if (cameraParallel == 1) {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 rayOriginVC = vertexVCVSOutput;
  vec2 rayStartEndDistancesVC = computeRayDistances(rayOriginVC, rayDirVC);
  if (rayStartEndDistancesVC[1] <= rayStartEndDistancesVC[0] ||
      rayStartEndDistancesVC[1] <= 0.0) {
    // Volume not hit or behind the ray
    discard;
  }

  // Perform the blending operation along the ray
  applyBlend(rayOriginVC, rayDirVC, rayStartEndDistancesVC[0], rayStartEndDistancesVC[1]);
}
`;const{vtkWarningMacro:k8,vtkErrorMacro:Uh}=Dt,V8={idxToView:Te(new Float64Array(16)),vecISToVCMatrix:It(new Float64Array(9)),modelToView:Te(new Float64Array(16)),projectionToView:Te(new Float64Array(16)),projectionToWorld:Te(new Float64Array(16))};function A8(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper");function a(l,p){const u=l.getIndependentComponents(),f=l.getColorMixPreset();return u&&p>=2||!!f}function n(l){return l.getUseLabelOutline()||e.renderable.getBlendMode()===Ro.LABELMAP_EDGE_PROJECTION_BLEND}const r=new Map;function i(l,p){if(!p)return;const f=(r.get(p)??0)-1;f<=0?(l.unregisterGraphicsResourceUser(p,t),r.delete(p)):r.set(p,f)}function o(l,p){if(!p)return;const u=r.get(p)??0,f=u+1;r.set(p,f),u<=0&&l.registerGraphicsResourceUser(p,t)}function s(l,p,u){p!==u&&(i(l,p),o(l,u))}function c(l){[...r.keys()].forEach(p=>l.unregisterGraphicsResourceUser(p,t))}t.buildPass=()=>{e.zBufferTexture=null},t.zBufferPass=(l,p)=>{if(l){const u=p.getZBufferTexture();u!==e.zBufferTexture&&(e.zBufferTexture=u)}},t.opaqueZBufferPass=(l,p)=>t.zBufferPass(l,p),t.volumePass=(l,p)=>{if(l){const u=e._openGLRenderWindow;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),u&&!u.isDeleted()&&u!==e._openGLRenderWindow&&c(u),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");const f=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const h=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(h.getActiveCamera(),e.openGLCamera),t.renderPiece(h,f)}},t.getShaderTemplate=(l,p,u)=>{l.Vertex=L8,l.Fragment=F8,l.Geometry=""},t.replaceShaderValues=(l,p,u)=>{let f=l.Fragment;f=Q.substitute(f,"//VTK::EnabledColorFunctions",`#define EnableColorForValueFunctionId${e.previousState.colorForValueFunctionId}`).result;const h=[];e.previousState.surfaceLightingEnabled&&h.push("Surface"),e.previousState.volumeLightingEnabled&&h.push("Volume"),f=Q.substitute(f,"//VTK::EnabledLightings",h.map(v=>`#define Enable${v}Lighting`)).result,e.previousState.multiTexturePerVolumeEnabled&&(f=Q.substitute(f,"//VTK::EnabledMultiTexturePerVolume","#define EnabledMultiTexturePerVolume").result),e.previousState.useIndependentComponents&&(f=Q.substitute(f,"//VTK::EnabledIndependentComponents","#define EnabledIndependentComponents").result),e.previousState.gradientOpacityEnabled&&(f=Q.substitute(f,"//VTK::EnabledGradientOpacity","#define EnabledGradientOpacity").result),f=Q.substitute(f,"//VTK::vtkProportionalComponents",e.previousState.proportionalComponents.map(v=>`#define vtkComponent${v}Proportional`).join(`
`)).result,f=Q.substitute(f,"//VTK::vtkForceNearestComponents",e.previousState.forceNearestComponents.map(v=>`#define vtkComponent${v}ForceNearest`).join(`
`)).result,e.previousState.hasZBufferTexture&&(f=Q.substitute(f,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,f=Q.substitute(f,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDirVC.z;","dists.y = min(zdepth,dists.y);"]).result),f=Q.substitute(f,"//VTK::BlendMode",`${e.previousState.blendMode}`).result,f=Q.substitute(f,"//VTK::NumberOfLights",`${e.previousState.numberOfLights}`).result,f=Q.substitute(f,"//VTK::MaxLaoKernelSize",`${e.previousState.maxLaoKernelSize}`).result,f=Q.substitute(f,"//VTK::NumberOfComponents",`${e.previousState.numberOfComponents}`).result,f=Q.substitute(f,"//VTK::MaximumNumberOfSamples",`${e.previousState.maximumNumberOfSamples}`).result,l.Fragment=f;const d=e.previousState.numberOfClippingPlanes;d>0&&(f=Q.substitute(f,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,f=Q.substitute(f,"//VTK::ClipPlane::Impl",[`for(int i = 0; i < ${d}; i++) {`,"  float rayDirRatio = dot(rayDirVC, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result),l.Fragment=f},t.getNeedToRebuildShaders=(l,p,u)=>{var K,Y,q;const f=!!e.zBufferTexture,h=e.currentValidInputs.length,d=e.numberOfLights,v=e.numberOfComponents,m=e.useIndependentComponents,x=u.getProperties(),y=e.currentValidInputs[0],g=x[y.inputIndex],C=h>1,S=y.imageData.getBounds(),T=we.getDiagonalLength(S),w=Math.ceil(T/t.getCurrentSampleDistance(p));w>e.renderable.getMaximumSamplesPerRay()&&k8(`The number of steps required ${w} is larger than the specified maximum number of steps ${e.renderable.getMaximumSamplesPerRay()}.
Please either change the volumeMapper sampleDistance or its maximum number of samples.`);const _=m?v:1;let E=!1;for(let Z=0;Z<_;++Z)if(g.getUseGradientOpacity(Z)){E=!0;break}let D=0;const O=g.getLAOKernelSize();O>D&&g.getLocalAmbientOcclusion()&&g.getAmbient()>0&&(D=O);const M=e.renderable.getClippingPlanes().length,N=(K=e.renderable.getViewSpecificProperties().OpenGL)==null?void 0:K.ShaderReplacements,R=(Y=e.currentRenderPass)==null?void 0:Y.getShaderReplacement(),B=e.renderable.getBlendMode(),I=(()=>{if(B!==Ro.LABELMAP_EDGE_PROJECTION_BLEND&&n(g))return 5;if(m)switch(g.getColorMixPreset()){case No.ADDITIVE:return 1;case No.COLORIZE:return 2;case No.CUSTOM:return 3;default:return 4}return 0})(),P=g.getVolumetricScatteringBlending()<1,L=g.getVolumetricScatteringBlending()>0;let k=!1;for(let Z=0;Z<v;++Z)if(g.getForceNearestInterpolation(Z)){k=!0;break}const A=[],j=[];for(let Z=0;Z<v;Z++)g.getOpacityMode(Z)===Ah.PROPORTIONAL&&A.push(Z),g.getForceNearestInterpolation(Z)&&j.push(Z);const H={numberOfComponents:v,useIndependentComponents:m,proportionalComponents:A,forceNearestComponents:j,blendMode:B,numberOfLights:d,numberOfValidInputs:h,maximumNumberOfSamples:w,hasZBufferTexture:f,maxLaoKernelSize:D,numberOfClippingPlanes:M,mapperShaderReplacements:N,renderPassShaderReplacements:R,colorForValueFunctionId:I,surfaceLightingEnabled:P,volumeLightingEnabled:L,forceNearestInterpolationEnabled:k,multiTexturePerVolumeEnabled:C,gradientOpacityEnabled:E};return((q=l.getProgram())==null?void 0:q.getHandle())===0||!e.previousState||!hs(e.previousState,H)?(e.previousState=H,!0):!1},t.updateShaders=(l,p,u)=>{if(t.getNeedToRebuildShaders(l,p,u)){const f={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(f,p,u);const h=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(f.Vertex,f.Fragment,f.Geometry);h!==l.getProgram()&&(l.setProgram(h),l.getVAO().releaseGraphicsResources()),l.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(l.getProgram());l.getVAO().bind(),t.setMapperShaderParameters(l,p,u),t.setCameraShaderParameters(l,p,u),t.setPropertyShaderParameters(l,p,u),t.getClippingPlaneShaderParameters(l,p,u)},t.setMapperShaderParameters=(l,p,u)=>{const f=l.getProgram();l.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>l.getAttributeUpdateTime().getMTime()||l.getShaderSourceTime().getMTime()>l.getAttributeUpdateTime().getMTime())&&(f.isAttributeUsed("vertexDC")&&(l.getVAO().addAttributeArray(f,l.getCABO(),"vertexDC",l.getCABO().getVertexOffset(),l.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Uh("Error setting vertexDC in shader VAO.")),l.getAttributeUpdateTime().modified());const h=t.getCurrentSampleDistance(p);f.setUniformf("sampleDistance",h);const d=h*e.renderable.getVolumeShadowSamplingDistFactor();f.setUniformf("volumeShadowSampleDistance",d),e.scalarTextures.forEach((w,_)=>{f.setUniformi(`volumeTexture[${_}]`,w.getTextureUnit())});const v=u.getProperties(),m=e.currentValidInputs[0],y=v[m.inputIndex].getIpScalarRange(),g=new Float32Array(4),C=new Float32Array(4),S=(w,_,E)=>{var D;(D=_==null?void 0:_.dataComputedScale)!=null&&D.length&&(g[w]=y[0]*_.dataComputedScale[E]+_.dataComputedOffset[E],C[w]=y[1]*_.dataComputedScale[E]+_.dataComputedOffset[E],g[w]=(g[w]-_.offset[E])/_.scale[E],C[w]=(C[w]-_.offset[E])/_.scale[E])};if(e.previousState.multiTexturePerVolumeEnabled)e.scalarTextures.forEach((w,_)=>{const E=w.getVolumeInfo();S(_,E,0)});else{const w=e.scalarTextures[0].getVolumeInfo();for(let _=0;_<4;++_)S(_,w,_)}const T="volume";if(f.setUniform4f(`${T}.ipScalarRangeMin`,g[0],g[1],g[2],g[3]),f.setUniform4f(`${T}.ipScalarRangeMax`,C[0],C[1],C[2],C[3]),e.zBufferTexture!==null){f.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());const w=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();f.setUniformf("vpZWidth",w[0]),f.setUniformf("vpZHeight",w[1])}},t.setCameraShaderParameters=(l,p,u)=>{const{idxToView:f,vecISToVCMatrix:h,modelToView:d,projectionToView:v,projectionToWorld:m}=V8,x=e.openGLCamera.getKeyMatrices(p),y=e.openGLVolume.getKeyMatrices();Ee(d,x.wcvc,y.mcwc);const g=l.getProgram(),C=e.openGLCamera.getRenderable(),S=C.getParallelProjection(),T=C.getClippingRange();g.setUniformf("camThick",T[1]-T[0]),g.setUniformf("camNear",T[0]),g.setUniformf("camFar",T[1]),g.setUniformi("cameraParallel",S);const w=e.currentValidInputs[0],_=w.imageData.getBounds(),D=we.getCorners(_,[]).map(F=>{if(_e(F,F,d),!S){const b=-T[0]/(F[2]*ya(F));Kt(F,F,b)}return _e(F,F,x.vcpc),F}),O=we.addPoints([...we.INIT_BOUNDS],D);g.setUniformf("dcxmin",O[0]),g.setUniformf("dcxmax",O[1]),g.setUniformf("dcymin",O[2]),g.setUniformf("dcymax",O[3]);const M=t.getRenderTargetSize();g.setUniformf("vpWidth",M[0]),g.setUniformf("vpHeight",M[1]);const N=t.getRenderTargetOffset();g.setUniformf("vpOffsetX",N[0]/M[0]),g.setUniformf("vpOffsetY",N[1]/M[1]),Et(v,x.vcpc),g.setUniformMatrix("PCVCMatrix",v),g.setUniformi("twoSidedLighting",p.getTwoSidedLighting());const R=new Array(2*e.previousState.maxLaoKernelSize);for(let F=0;F<e.previousState.maxLaoKernelSize;F++)R[F*2]=Math.random(),R[F*2+1]=Math.random();if(g.setUniform2fv("kernelSample",R),e.numberOfLights>0){let F=0;p.getLights().forEach(b=>{if(b.getSwitch()>0){const G=`lights[${F}]`,U=b.getColor(),z=b.getIntensity(),W=Kt([],U,z);g.setUniform3fv(`${G}.color`,W);const $=b.getTransformedPosition();_e($,$,d),g.setUniform3fv(`${G}.positionVC`,$);const J=[...b.getDirection()];Ei(J,J,x.normalMatrix),cn(J,J),g.setUniform3fv(`${G}.directionVC`,J);const ne=[-.5*J[0],-.5*J[1],-.5*(J[2]-1)];g.setUniform3fv(`${G}.halfAngleVC`,ne);const oe=b.getAttenuationValues();g.setUniform3fv(`${G}.attenuation`,oe);const ue=b.getExponent();g.setUniformf(`${G}.exponent`,ue);const Ce=b.getConeAngle();g.setUniformf(`${G}.coneAngle`,Ce);const ye=b.getPositional();g.setUniformi(`${G}.isPositional`,ye),F++}})}const B="volume",P=u.getProperties()[w.inputIndex],L=w.imageData,k=L.getSpatialExtent(),A=L.getSpacing(),j=L.getDimensions(),H=L.getIndexToWorld(),K=L.getWorldToIndex(),Y=L.getDirectionByReference();Ee(f,d,H),g.setUniform3fv(`${B}.spacing`,A);const q=wi([],A);g.setUniform3fv(`${B}.inverseSpacing`,q),g.setUniform3iv(`${B}.dimensions`,j),g.setUniform3fv(`${B}.inverseDimensions`,wi([],j)),g.setUniformMatrix(`${B}.worldToIndex`,K),h.fill(0);const Z=ou(new Float64Array(3),j,A);h[0]=Z[0],h[4]=Z[1],h[8]=Z[2],Qn(h,Y,h),Qn(h,y.normalMatrix,h),Qn(h,x.normalMatrix,h),g.setUniformMatrix3x3(`${B}.vecISToVCMatrix`,h),g.setUniformMatrix3x3(`${B}.vecVCToISMatrix`,Tn(new Float32Array(9),h));const re=Ci(k[0],k[2],k[4]),ae=_e(new Float64Array(3),re,f);g.setUniform3fv(`${B}.originVC`,ae);const ee=ya(Z);if(g.setUniformf(`${B}.diagonalLength`,ee),n(P)){const F=C.getDistance();C.setClippingRange(F,F+.1);const b=e.openGLCamera.getKeyMatrices(p);Et(m,b.wcpc),C.setClippingRange(T[0],T[1]),e.openGLCamera.getKeyMatrices(p),g.setUniformMatrix(`${B}.PCWCMatrix`,m)}if(P.getVolumetricScatteringBlending()>0&&(g.setUniformf(`${B}.globalIlluminationReach`,P.getGlobalIlluminationReach()),g.setUniformf(`${B}.volumetricScatteringBlending`,P.getVolumetricScatteringBlending()),g.setUniformf(`${B}.anisotropy`,P.getAnisotropy()),g.setUniformf(`${B}.anisotropySquared`,P.getAnisotropy()**2)),P.getLocalAmbientOcclusion()&&P.getAmbient()>0){const F=P.getLAOKernelSize();g.setUniformi(`${B}.kernelSize`,F);const b=P.getLAOKernelRadius();g.setUniformi(`${B}.kernelRadius`,b)}else g.setUniformi(`${B}.kernelSize`,0)},t.setPropertyShaderParameters=(l,p,u)=>{const f=l.getProgram();f.setUniformi("jtexture",e.jitterTexture.getTextureUnit());const h=u.getProperties();f.setUniformi("labelOutlineThicknessTexture",e.labelOutlineThicknessTexture.getTextureUnit()),f.setUniformi("opacityTexture",e.opacityTexture.getTextureUnit()),f.setUniformi("colorTexture",e.colorTexture.getTextureUnit());const d="volume",v=e.currentValidInputs[0],m=h[v.inputIndex],x=e.previousState.numberOfComponents,y=e.previousState.useIndependentComponents;if(y){const D=new Float32Array(4);for(let N=0;N<x;N++)D[N]=m.getComponentWeight(N);f.setUniform4fv(`${d}.independentComponentMix`,D);const O=new Float32Array(4),M=1/x;for(let N=0;N<x;++N)O[N]=(N+.5)*M;f.setUniform4fv(`${d}.transferFunctionsSampleHeight`,O)}const g=e.colorForValueFunctionId;f.setUniformi(`${d}.colorForValueFunctionId`,g);const C=m.getComputeNormalFromOpacity();f.setUniformi(`${d}.computeNormalFromOpacity`,C);const S=new Float32Array(4),T=new Float32Array(4),w=new Float32Array(4),_=new Float32Array(4);for(let D=0;D<x;D++){const O=e.previousState.multiTexturePerVolumeEnabled,M=O?D:0,N=O?0:D,B=e.scalarTextures[M].getVolumeInfo(),I=y?D:0,P=B.scale[N],k=m.getRGBTransferFunction(I).getRange();S[D]=P/(k[1]-k[0]),T[D]=(B.offset[N]-k[0])/(k[1]-k[0]);const j=m.getScalarOpacity(I).getRange();w[D]=P/(j[1]-j[0]),_[D]=(B.offset[N]-j[0])/(j[1]-j[0])}if(f.setUniform4fv(`${d}.colorTextureScale`,S),f.setUniform4fv(`${d}.colorTextureShift`,T),f.setUniform4fv(`${d}.opacityTextureScale`,w),f.setUniform4fv(`${d}.opacityTextureShift`,_),e.previousState.gradientOpacityEnabled){const D=new Array(4),O=new Array(4),M=new Array(4),N=new Array(4);if(y)for(let R=0;R<x;++R){const B=e.previousState.multiTexturePerVolumeEnabled,I=B?R:0,P=B?0:R,A=e.scalarTextures[I].getVolumeInfo().scale[P];if(m.getUseGradientOpacity(R)){const H=[m.getGradientOpacityMinimumOpacity(R),m.getGradientOpacityMaximumOpacity(R)],K=[m.getGradientOpacityMinimumValue(R),m.getGradientOpacityMaximumValue(R)];M[R]=H[0],N[R]=H[1],D[R]=A*(H[1]-H[0])/(K[1]-K[0]),O[R]=-K[0]*(H[1]-H[0])/(K[1]-K[0])+H[0]}else M[R]=1,N[R]=1,D[R]=0,O[R]=1}else{const R=x-1,B=e.previousState.multiTexturePerVolumeEnabled,I=B?R:0,P=B?0:R,A=e.scalarTextures[I].getVolumeInfo().scale[P],j=[m.getGradientOpacityMinimumOpacity(0),m.getGradientOpacityMaximumOpacity(0)],H=[m.getGradientOpacityMinimumValue(0),m.getGradientOpacityMaximumValue(0)];M[0]=j[0],N[0]=j[1],D[0]=A*(j[1]-j[0])/(H[1]-H[0]),O[0]=-H[0]*(j[1]-j[0])/(H[1]-H[0])+j[0]}f.setUniform4f(`${d}.gradientOpacityScale`,D),f.setUniform4f(`${d}.gradientOpacityShift`,O),f.setUniform4f(`${d}.gradientOpacityMin`,M),f.setUniform4f(`${d}.gradientOpacityMax`,N)}const E=m.getLabelOutlineOpacity();if(f.setUniformf(`${d}.outlineOpacity`,E),e.numberOfLights>0){f.setUniformf(`${d}.ambient`,m.getAmbient()),f.setUniformf(`${d}.diffuse`,m.getDiffuse()),f.setUniformf(`${d}.specular`,m.getSpecular());const D=m.getSpecularPower();f.setUniformf(`${d}.specularPower`,D===0?1:D)}},t.getClippingPlaneShaderParameters=(l,p,u)=>{if(e.renderable.getClippingPlanes().length>0){const f=e.openGLCamera.getKeyMatrices(p),h=[],d=[],v=[],m=e.renderable.getClippingPlanes(),x=m.length;for(let g=0;g<x;++g){const C=m[g].getNormal(),S=m[g].getOrigin();Ei(C,C,f.normalMatrix),_e(S,S,f.wcvc);const T=-1*_i(S,C);h.push(C[0]),h.push(C[1]),h.push(C[2]),d.push(T),v.push(S[0]),v.push(S[1]),v.push(S[2])}const y=l.getProgram();y.setUniform3fv("vClipPlaneNormals",h),y.setUniformfv("vClipPlaneDistances",d),y.setUniform3fv("vClipPlaneOrigins",v),y.setUniformi("clip_numPlanes",x)}},t.delete=Gn(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},()=>{e._openGLRenderWindow&&c(e._openGLRenderWindow)},t.delete),t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:l,vsize:p}=e._openGLRenderer.getTiledSizeAndOrigin();return[l,p]},t.getRenderTargetOffset=()=>{const{lowerLeftU:l,lowerLeftV:p}=e._openGLRenderer.getTiledSizeAndOrigin();return[l,p]},t.getCurrentSampleDistance=l=>{const p=l.getVTKWindow().getInteractor(),u=e.renderable.getSampleDistance();if(p.isAnimating()){const f=e.renderable.getInteractionSampleDistanceFactor();return u*f}return u},t.renderPieceStart=(l,p)=>{const u=l.getVTKWindow().getInteractor();if(e._lastScale||(e._lastScale=e.renderable.getInitialInteractionScale()),e._useSmallViewport=!1,u.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=u.onAnimationFrameRateUpdate(()=>{if(e.renderable.getAutoAdjustSampleDistances()){const h=u.getRecentAnimationFrameRate(),d=u.getDesiredUpdateRate()/h;(d>1.15||d<.85)&&(e._lastScale*=d),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance()})),e._useSmallViewport){const h=e._openGLRenderWindow.getFramebufferSize(),d=1/Math.sqrt(e._lastScale);if(e._smallViewportWidth=Math.ceil(d*h[0]),e._smallViewportHeight=Math.ceil(d*h[1]),e._smallViewportHeight>h[1]&&(e._smallViewportHeight=h[1]),e._smallViewportWidth>h[0]&&(e._smallViewportWidth=h[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(h[0],h[1]),e.framebuffer.populateFramebuffer();else{const m=e.framebuffer.getSize();(!m||m[0]!==h[0]||m[1]!==h[1])&&(e.framebuffer.create(h[0],h[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();const v=e.context;v.clearColor(0,0,0,0),v.colorMask(!0,!0,!0,!0),v.clear(v.COLOR_BUFFER_BIT),v.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/h[0],e._smallViewportHeight/h[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(l,p);const f=p.getProperties();e.currentValidInputs.forEach(h=>{let{inputIndex:d}=h;const m=f[d].getInterpolationType(),x=e.scalarTextures[d];m===Vh.NEAREST?(x.setMinificationFilter(me.NEAREST),x.setMagnificationFilter(me.NEAREST)):(x.setMinificationFilter(me.LINEAR),x.setMagnificationFilter(me.LINEAR))}),e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=(l,p)=>{const u=e.context,f=[...e.scalarTextures,e.colorTexture,e.opacityTexture,e.labelOutlineThicknessTexture,e.jitterTexture];f.forEach(h=>h.activate()),t.updateShaders(e.tris,l,p),u.drawArrays(u.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),f.forEach(h=>h.deactivate())},t.renderPieceFinish=(l,p)=>{if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");const d=e.copyShader;e.copyVAO=ja.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(d,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Uh("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);const u=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,u[0],u[1]);const f=e.framebuffer.getColorTexture();f.activate(),e.copyShader.setUniformi("texture",f.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);const h=e.context;h.blendFuncSeparate(h.ONE,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),f.deactivate(),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=(l,p)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update();const u=e.renderable.getNumberOfInputPorts();e.currentValidInputs=[];for(let h=0;h<u;++h){const d=e.renderable.getInputData(h);d&&!d.isDeleted()&&e.currentValidInputs.push({imageData:d,inputIndex:h})}let f=0;if(e.currentValidInputs.length>0){const h=p.getProperties(),d=e.currentValidInputs[0],m=d.imageData.getPointData().getScalars(),x=h[d.inputIndex];x.getShade()&&e.renderable.getBlendMode()===Ro.COMPOSITE_BLEND&&l.getLights().forEach(C=>{C.getSwitch()>0&&f++});const y=e.currentValidInputs.length,g=y>1;e.numberOfComponents=g?y:m.getNumberOfComponents(),e.useIndependentComponents=a(x,e.numberOfComponents)}f!==e.numberOfLights&&(e.numberOfLights=f,t.modified()),t.invokeEvent({type:"EndEvent"}),e.currentValidInputs.length!==0&&(t.renderPieceStart(l,p),t.renderPieceDraw(l,p),t.renderPieceFinish(l,p))},t.updateBufferObjects=(l,p)=>{t.getNeedToRebuildBufferObjects(l,p)&&t.buildBufferObjects(l,p)},t.getNeedToRebuildBufferObjects=(l,p)=>{var u,f,h,d,v;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<p.getMTime()||e.VBOBuildTime.getMTime()<((u=p.getProperty(e.currentValidInputs[0].inputIndex))==null?void 0:u.getMTime())||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.currentValidInputs.some(m=>{let{imageData:x}=m;return e.VBOBuildTime.getMTime()<x.getMTime()})||e.scalarTextures.length!==e.currentValidInputs.length||!e.scalarTextures.every(m=>!!(m!=null&&m.getHandle()))||!((f=e.colorTexture)!=null&&f.getHandle())||!((h=e.opacityTexture)!=null&&h.getHandle())||!((d=e.labelOutlineThicknessTexture)!=null&&d.getHandle())||!((v=e.jitterTexture)!=null&&v.getHandle())},t.buildBufferObjects=(l,p)=>{var B,I,P;if(!e.jitterTexture.getHandle()){const L=new Float32Array(1024);for(let k=0;k<32*32;++k)L[k]=Math.random();e.jitterTexture.setMinificationFilter(me.NEAREST),e.jitterTexture.setMagnificationFilter(me.NEAREST),e.jitterTexture.create2DFromRaw({width:32,height:32,numComps:1,dataType:Ne.FLOAT,data:L})}const u=p.getProperties(),f=e.currentValidInputs[0],h=u[f.inputIndex],d=e.numberOfComponents,v=e.useIndependentComponents,m=v?d:1,x=[];for(let L=0;L<m;++L)x.push(h.getScalarOpacity(L));const y=$n(x,v,m),g=h.getScalarOpacity(),C=e._openGLRenderWindow.getGraphicsResourceForObject(g);if(!((B=C==null?void 0:C.oglObject)!=null&&B.getHandle())||C.hash!==y){const L=Re.newInstance();L.setOpenGLRenderWindow(e._openGLRenderWindow);let k=e.renderable.getOpacityTextureWidth();k<=0&&(k=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const A=k*2*m,j=new Float32Array(A),H=new Float32Array(k);for(let K=0;K<m;++K){const Y=h.getScalarOpacity(K),q=t.getCurrentSampleDistance(l)/h.getScalarOpacityUnitDistance(K),Z=Y.getRange();Y.getTable(Z[0],Z[1],k,H,1);for(let re=0;re<k;++re)j[K*k*2+re]=1-(1-H[re])**q,j[K*k*2+re+k]=j[K*k*2+re]}if(L.resetFormatAndType(),L.setMinificationFilter(me.LINEAR),L.setMagnificationFilter(me.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))L.create2DFromRaw({width:k,height:2*m,numComps:1,dataType:Ne.FLOAT,data:j});else{const K=new Uint8ClampedArray(A);for(let Y=0;Y<A;++Y)K[Y]=255*j[Y];L.create2DFromRaw({width:k,height:2*m,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:K})}g&&e._openGLRenderWindow.setGraphicsResourceForObject(g,L,y),e.opacityTexture=L}else e.opacityTexture=C.oglObject;s(e._openGLRenderWindow,e._opacityTextureCore,g),e._opacityTextureCore=g;const T=[];for(let L=0;L<m;++L)T.push(h.getRGBTransferFunction(L));const w=$n(T,v,m),_=h.getRGBTransferFunction(),E=e._openGLRenderWindow.getGraphicsResourceForObject(_);if(!((I=E==null?void 0:E.oglObject)!=null&&I.getHandle())||(E==null?void 0:E.hash)!==w){const L=Re.newInstance();L.setOpenGLRenderWindow(e._openGLRenderWindow);let k=e.renderable.getColorTextureWidth();k<=0&&(k=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const A=k*2*m*3,j=new Uint8ClampedArray(A),H=new Float32Array(k*3);for(let K=0;K<m;++K){const Y=h.getRGBTransferFunction(K),q=Y.getRange();Y.getTable(q[0],q[1],k,H,1);for(let Z=0;Z<k*3;++Z)j[K*k*6+Z]=255*H[Z],j[K*k*6+Z+k*3]=255*H[Z]}L.resetFormatAndType(),L.setMinificationFilter(me.LINEAR),L.setMagnificationFilter(me.LINEAR),L.create2DFromRaw({width:k,height:2*m,numComps:3,dataType:Ne.UNSIGNED_CHAR,data:j}),e._openGLRenderWindow.setGraphicsResourceForObject(_,L,w),e.colorTexture=L}else e.colorTexture=E.oglObject;s(e._openGLRenderWindow,e._colorTextureCore,_),e._colorTextureCore=_,e.currentValidInputs.forEach((L,k)=>{var ee;let{imageData:A,inputIndex:j}=L;const H=u[j],K=A.getPointData().getScalars(),Y=e._openGLRenderWindow.getGraphicsResourceForObject(K),q=X0(A,K),Z=!((ee=Y==null?void 0:Y.oglObject)!=null&&ee.getHandle())||(Y==null?void 0:Y.hash)!==q,re=H.getUpdatedExtents(),ae=!!re.length;if(Z&&!ae){const F=Re.newInstance();F.setOpenGLRenderWindow(e._openGLRenderWindow);const b=A.getDimensions();F.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),F.resetFormatAndType(),F.create3DFilterableFromDataArray({width:b[0],height:b[1],depth:b[2],dataArray:K,preferSizeOverAccuracy:H.getPreferSizeOverAccuracy()}),e._openGLRenderWindow.setGraphicsResourceForObject(K,F,q),e.scalarTextures[k]=F}else e.scalarTextures[k]=Y.oglObject;if(ae){H.setUpdatedExtents([]);const F=A.getDimensions();e.scalarTextures[k].create3DFilterableFromDataArray({width:F[0],height:F[1],depth:F[2],dataArray:K,updatedExtents:re})}s(e._openGLRenderWindow,e._scalarTexturesCore[k],K),e._scalarTexturesCore[k]=K});const O=h.getLabelOutlineThickness(),M=e._openGLRenderWindow.getGraphicsResourceForObject(O),N=O.join("-");if(!((P=M==null?void 0:M.oglObject)!=null&&P.getHandle())||(M==null?void 0:M.hash)!==N){const L=Re.newInstance();L.setOpenGLRenderWindow(e._openGLRenderWindow);let k=e.renderable.getLabelOutlineTextureWidth();k<=0&&(k=e.context.getParameter(e.context.MAX_TEXTURE_SIZE));const A=1,j=k*A,H=new Uint8Array(j);for(let K=0;K<k;++K){const Y=typeof O[K]<"u"?O[K]:O[0];H[K]=Y}L.resetFormatAndType(),L.setMinificationFilter(me.NEAREST),L.setMagnificationFilter(me.NEAREST),L.create2DFromRaw({width:k,height:A,numComps:1,dataType:Ne.UNSIGNED_CHAR,data:H}),O&&e._openGLRenderWindow.setGraphicsResourceForObject(O,L,N),e.labelOutlineThicknessTexture=L}else e.labelOutlineThicknessTexture=M.oglObject;if(s(e._openGLRenderWindow,e._labelOutlineThicknessTextureCore,O),e._labelOutlineThicknessTextureCore=O,!e.tris.getCABO().getElementCount()){const L=new Float32Array(12);for(let H=0;H<4;H++)L[H*3]=H%2*2-1,L[H*3+1]=H>1?1:-1,L[H*3+2]=-1;const k=new Uint16Array(8);k[0]=3,k[1]=0,k[2]=1,k[3]=3,k[4]=3,k[5]=0,k[6]=3,k[7]=2;const A=pe.newInstance({numberOfComponents:3,values:L});A.setName("points");const j=pe.newInstance({numberOfComponents:1,values:k});e.tris.getCABO().createVBO(j,"polys",Jt.SURFACE,{points:A,cellOffset:0})}e.VBOBuildTime.modified()}}const B8={context:null,VBOBuildTime:null,scalarTextures:[],_scalarTexturesCore:[],opacityTexture:null,_opacityTextureCore:null,colorTexture:null,_colorTextureCore:null,labelOutlineThicknessTexture:null,_labelOutlineThicknessTextureCore:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,fullViewportTime:1,idxToView:null,vecISToVCMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function U8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B8,a),Ct.extend(t,e,a),mn.implementBuildShadersWithReplacements(t,e,a),e.VBOBuildTime={},ut(e.VBOBuildTime,{mtime:0}),e.tris=jt.newInstance(),e.jitterTexture=Re.newInstance(),e.jitterTexture.setWrapS(Wa.REPEAT),e.jitterTexture.setWrapT(Wa.REPEAT),e.framebuffer=Er.newInstance(),pt(t,e,["context"]),A8(t,e)}const G8=Je(U8,"vtkOpenGLVolumeMapper");st("vtkVolumeMapper",G8);const{vtkDebugMacro:I8}=Dt;function P8(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(a,n)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const r=e._openGLRenderer.getAspectRatio(),i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();let s=null;if(e.renderable.getUseZValues()){const c=n.getZBufferTexture(),l=Math.floor(c.getWidth()),p=Math.floor(c.getHeight()),u=e._openGLRenderWindow.getContext();c.bind();const f=n.getFramebuffer();f?f.saveCurrentBindingsAndBuffers():I8("No framebuffer to save/restore");const h=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,h),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,c.getHandle(),0),u.checkFramebufferStatus(u.FRAMEBUFFER)===u.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(l*p*4),u.viewport(0,0,l,p),u.readPixels(0,0,l,p,u.RGBA,u.UNSIGNED_BYTE,s)),f&&f.restorePreviousBindingsAndBuffers(),u.deleteFramebuffer(h)}e.renderable.invokeCallback(e.renderable.getInputData(),i,r,o,s)},t.queryPass=(a,n)=>{a&&e.renderable.getUseZValues()&&n.requestDepth()}}const z8={};function j8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z8,a),Ct.extend(t,e,a),P8(t,e)}const W8=Je(j8,"vtkOpenGLPixelSpaceCallbackMapper");st("vtkPixelSpaceCallbackMapper",W8);var $8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

/**
This shader initializes the convolution for the LIC computation.
*/

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texMaskVectors;
uniform sampler2D texNoise;
uniform sampler2D texLIC;

uniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds
uniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.
uniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent
uniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture

in vec2 tcoordVC;

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the *whole* domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value. this
// depends on the pass number.
vec2 getNoiseTC(vec2 vectc)
{
  // in pass 1 : convert from vector tc to noise tc
  // in pass 2 : use vector tc
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(vectc);
    }
  else
    {
    return vectc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the
// need to convert to noise texture coordinates.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

void main(void)
{
  vec2 vectc = tcoordVC.st;

  // lic => (convolution, mask, 0, step count)
  if (uStepNo == 0)
    {
    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);
    float maskFlag;
    if (maskCriteria <= uMaskThreshold)
      {
      maskFlag = 1.0;
      }
    else
      {
      maskFlag = 0.0;
      }
    float noise = getNoise(vectc);
    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);
    }
  else
    {
    LICOutput = texture2D(texLIC, vectc);
    }

  // initial seed
  SeedOutput = vec4(vectc, 0.0, 1.0);
}
`,H8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs1.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D  texVectors;
uniform sampler2D  texNoise;
uniform sampler2D  texLIC;
uniform sampler2D  texSeedPts;

uniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.
uniform float uStepSize;        // step size in parametric space

uniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture

in vec2 tcoordVC;

//VTK::LICVectorLookup::Impl

// We need to do this manually since CLAMP_TO_BORDER and and borderColor
// are very poorly supported in webgl
vec2 clampToBorder(vec2 uv){
  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)
  {
    return vec2(0.0, 0.0);
  }
  return getVector(uv);
}

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the whole domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value.
// in pass 1 repeatedly tile the noise texture across
// the computational domain.
vec2 getNoiseTC(vec2 tc)
{
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(tc);
    }
  else
    {
    return tc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the need
// to convert to either noise or lic texture coordinates in
// pass 1 and 2 respectively.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

// fourth-order Runge-Kutta streamline integration
// no bounds checks are made, therefore it's essential
// to have the entire texture initialized to 0
// and set clamp to border and have border color 0
// an integer is set if the step was taken, keeping
// an accurate step count is necessary to prevent
// boundary artifacts. Don't count the step if
// all vector lookups are identically 0. This is
// a proxy for "stepped outside valid domain"
vec2 rk4(vec2 pt0, float dt, out bool count)
{
  count=true;
  float dtHalf = dt * 0.5;
  vec2 pt1;

  vec2 v0 = clampToBorder(pt0);
  pt1 = pt0 + v0 * dtHalf;

  vec2 v1 = clampToBorder(pt1);
  pt1 = pt0 + v1 * dtHalf;

  vec2 v2 = clampToBorder(pt1);
  pt1 = pt0 + v2 * dt;

  vec2 v3 = clampToBorder(pt1);
  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;

  if (vSum == vec2(0.0, 0.0))
    {
      count = false;
    }

  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));

 return pt1;
}

void main(void)
{
  vec2 lictc = tcoordVC.st;
  vec4 lic = texture2D(texLIC, lictc);
  vec2 pt0 = texture2D(texSeedPts, lictc).st;

  bool count;
  vec2 pt1 = rk4(pt0, uStepSize, count);

  if (count)
    {
    // accumulate lic step
    // (lic, mask, 0, step count)
    float noise = getNoise(pt1);
    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);
    SeedOutput = vec4(pt1, 0.0, 1.0);
    }
  else
    {
    // keep existing values
    LICOutput = lic;
    SeedOutput = vec4(pt0, 0.0, 1.0);
    }
}
`,K8=` //VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LICN.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

/**
This shader finalizes the convolution for the LIC computation
applying the normalization. eg. if box kernel is used the this
is the number of steps taken.
*/

uniform sampler2D texLIC;

in vec2 tcoordVC;

void main(void)
{
  vec4 conv = texture2D(texLIC, tcoordVC.st);
  conv.r = conv.r/conv.a;
  // lic => (convolution, mask, 0, 1)
  LICOutput = vec4(conv.rg , 0.0, 1.0);
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,X8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// gray scale contrast enhance stage implemented via histogram stretching
// if the min and max are tweaked it can generate out-of-range values
// these will be clamped in 0 to 1

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;


uniform sampler2D texLIC;  // most recent lic pass
uniform float uMin;        // min gray scale color value
uniform float uMaxMinDiff; // max-min

in vec2 tcoordVC;

void main( void )
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g!=0.0)
    {
    LICOutput = lic;
    }
  else
    {
    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);
    LICOutput = vec4(CElic, lic.gb, 1.0);
    }
    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,q8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// high-pass filter stage employed by vtkLineIntegralConvolution2D
// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes
// noise for pass2.

// the output of this shader
layout(location = 0) out vec4 EEOutput;

uniform sampler2D texLIC; // most recent lic pass
uniform float     uDx;    // fragment size
uniform float     uDy;    // fragment size

in vec2 tcoordVC;

// kernel for simple laplace edge enhancement.
// p=Laplace(p)+p
float K[9] = float[9](
  -1.0, -1.0, -1.0,
  -1.0,  9.0, -1.0,
  -1.0, -1.0, -1.0
  );

// determine if the fragment was masked
bool Masked(float val) { return val != 0.0; }

void main(void)
{
  // tex coord neighbor offsets
  vec2 fragDx[9] = vec2[9](
    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),
    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),
    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)
    );

  vec2 lictc = tcoordVC.st;

  // compute the convolution but don't use convovled values if
  // any masked fragments on the stencil. Fragments outside
  // the valid domain are masked during initialization, and
  // texture wrap parameters are clamp to border with border
  // color that contains masked flag
  float conv = 0.0;
  bool dontUse = false;
  for (int i=0; i<9; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    vec4 lic = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic.g);
    conv = conv + K[i] * lic.r;
    }

  if (dontUse)
    {
    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);
    }
  else
    {
    conv = clamp(conv, 0.0, 1.0);
    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);
    }

}
`,Y8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAH.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// horizontal pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDx;    // fragment size

in vec2 tcoordVC;

// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));

  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,J8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_VT.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// move vector field to normalized image space
// pre-processing for vtkLineIntegralConvolution2D

// the output of this shader
//VTK::Output::Dec

// Fragment shader used by the gaussian blur filter render pass.

uniform sampler2D texVectors; // input texture
uniform vec2      uTexSize;   // size of texture

in vec2 tcoordVC;

void main(void)
{
  //VTK::LICComponentSelection::Impl
  V = V/uTexSize;
  gl_FragData[0] = vec4(V, 0.0, 1.0);
}
`,Z8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAV.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// vertical pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDy;    // fragment size

in vec2 tcoordVC;


// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));


  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDy[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,Gh=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtktextureObjectVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;
attribute vec2 tcoordDC;
varying vec2 tcoordVC;

void main()
{
  tcoordVC = tcoordDC;
  gl_Position = vertexDC;
}
`;const{Representation:Q8}=pr;function ex(t){const e=jt.newInstance();e.setOpenGLRenderWindow(t);const a=new Float32Array(12);for(let c=0;c<4;c++)a[c*3]=c%2*2-1,a[c*3+1]=c>1?1:-1,a[c*3+2]=0;const n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const o=pe.newInstance({numberOfComponents:1,values:r}),s=pe.newInstance({numberOfComponents:2,values:n});return e.getCABO().createVBO(o,"polys",Q8.SURFACE,{points:i,cellOffset:0,tcoords:s}),e}function Y0(t,e,a,n){let[r,i]=e;const o=t.getContext(),s=Re.newInstance({autoParameters:!1,wrapS:n,wrapT:n,minificationFilter:a,magnificationFilter:a,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0});return s.setOpenGLRenderWindow(t),s.setInternalFormat(o.RGBA32F),s.create2DFromRaw({width:r,height:i,numComps:4,dataType:"Float32Array",data:null}),s.activate(),s.sendParameters(),s.deactivate(),s}function Lo(t,e){return Y0(t,e,Re.Filter.NEAREST,Re.Wrap.CLAMP_TO_EDGE)}function tx(t,e){return Y0(t,e,Re.Filter.NEAREST,Re.Wrap.CLAMP_TO_EDGE)}function nx(t,e){return Y0(t,e,Re.Filter.LINEAR,Re.Wrap.CLAMP_TO_EDGE)}function rx(t,e){if(e.classHierarchy.push("vtkLICPingPongBufferManager"),!e._openGLRenderWindow){console.error("Pass renderwindow to ping pong manager");return}e.quad=ex(e._openGLRenderWindow),e.context=e._openGLRenderWindow.getContext(),e.licTexture0=Lo(e._openGLRenderWindow,e.size),e.seedTexture0=Lo(e._openGLRenderWindow,e.size),e.licTexture1=Lo(e._openGLRenderWindow,e.size),e.seedTexture1=Lo(e._openGLRenderWindow,e.size),e.eeTexture=e.doEEPass?tx(e._openGLRenderWindow,e.size):null,e.imageVectorTexture=e.doVTPass?nx(e._openGLRenderWindow,e.size):null,e.pingTextures[0]=e.licTexture0,e.pingTextures[1]=e.seedTexture0,e.pongTextures[0]=e.licTexture1,e.pongTextures[1]=e.seedTexture1,e.textures[0]=e.pingTextures,e.textures[1]=e.pongTextures,t.swap=()=>{e.readIndex=1-e.readIndex},t.renderQuad=(a,n)=>{const r=e.quad,i=e.context;let o=e.quadVAO;o||(o=ja.newInstance(),o.setOpenGLRenderWindow(e._openGLRenderWindow),e.quadVAO=o),e.previousProgramHash!==n.getMd5Hash()&&(o.shaderProgramChanged(),r.getCABO().bind(),o.addAttributeArray(n,r.getCABO(),"vertexDC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),o.addAttributeArray(n,r.getCABO(),"tcoordDC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=n.getMd5Hash()),i.drawArrays(i.TRIANGLES,0,r.getCABO().getElementCount()),o.release()},t.getLastLICBuffer=()=>e.readIndex===0?e.licTexture0:e.licTexture1,t.getLastSeedBuffer=()=>e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICBuffer=()=>1-e.readIndex===0?e.licTexture0:e.licTexture1,t.getSeedBuffer=()=>1-e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICTextureUnit=()=>{const a=e.textures[e.readIndex][0];return a.activate(),a.getTextureUnit()},t.getSeedTextureUnit=()=>{const a=e.textures[e.readIndex][1];return a.activate(),a.getTextureUnit()},t.getNoiseTextureUnit=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0)===0?(e.noiseTexture.activate(),e.noiseTexture.getTextureUnit()):(e.eeTexture.activate(),e.eeTexture.getTextureUnit())},t.getVectorTextureUnit=()=>(e.vectorTexture.activate(),e.vectorTexture.getTextureUnit()),t.getImageVectorTextureUnit=()=>e.imageVectorTexture?(e.imageVectorTexture.activate(),e.imageVectorTexture.getTextureUnit()):t.getVectorTextureUnit(),t.getMaskVectorTextureUnit=()=>e.maskVectorTexture?(e.maskVectorTexture.activate(),e.maskVectorTexture.getTextureUnit()):t.getImageVectorTextureUnit(),t.clearBuffers=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const n=e.framebuffer,r=e.context;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),n.setColorBuffer(e.licTexture0,0),n.setColorBuffer(e.seedTexture0,1),n.setColorBuffer(e.licTexture1,2),n.setColorBuffer(e.seedTexture1,3);const i=[r.COLOR_ATTACHMENT0,r.COLOR_ATTACHMENT1,r.COLOR_ATTACHMENT2,r.COLOR_ATTACHMENT3];a&&(n.removeColorBuffer(4),n.setColorBuffer(e.eeTexture,4),i.push(r.COLOR_ATTACHMENT4)),r.drawBuffers(i),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),a&&n.removeColorBuffer(4),r.drawBuffers([r.NONE])},t.clearBuffer=a=>{const n=e.framebuffer,r=e.context;n.removeColorBuffer(0),n.setColorBuffer(a,0),r.drawBuffers([r.COLOR_ATTACHMENT0]),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(a,0),r.drawBuffers([r.NONE])},t.activateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.activate():e.vectorTexture.activate(),e.maskVectorTexture&&e.maskVectorTexture.activate()},t.deactivateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.deactivate():e.vectorTexture.deactivate(),e.maskVectorTexture&&e.maskVectorTexture.deactivate()},t.activateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.activate();break;case 1:e.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},t.deactivateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.deactivate();break;case 1:e.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},t.attachLICBuffers=()=>{const a=e.textures[e.readIndex],n=e.textures[1-e.readIndex],r=e.framebuffer,i=e.context;a[0].activate(),a[1].activate(),r.removeColorBuffer(0),r.removeColorBuffer(1),r.setColorBuffer(n[0],0),r.setColorBuffer(n[1],1),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1])},t.detachLICBuffers=()=>{const a=e.textures[e.readIndex],n=e.context,r=e.framebuffer;a[0].deactivate(),a[1].deactivate(),r.removeColorBuffer(0),r.removeColorBuffer(1),n.drawBuffers([n.NONE])},t.attachImageVectorBuffer=()=>{const a=e.framebuffer,n=e.context;e.vectorTexture.activate(),a.removeColorBuffer(0),a.setColorBuffer(e.imageVectorTexture,0),n.drawBuffers([n.COLOR_ATTACHMENT0])},t.detachImageVectorBuffer=()=>{const a=e.context,n=e.framebuffer;e.vectorTexture.deactivate(),n.removeColorBuffer(0),a.drawBuffers([a.NONE])},t.attachEEBuffer=()=>{e.textures[e.readIndex][0].activate(),e.framebuffer.removeColorBuffer(0),e.framebuffer.setColorBuffer(e.eeTexture,0);const n=e.context;n.drawBuffers([n.COLOR_ATTACHMENT0])},t.detachEEBuffer=()=>{const a=e.context;e.framebuffer.removeColorBuffer(0),a.drawBuffers([a.NONE]),e.textures[e.readIndex][0].deactivate()},t.detachBuffers=()=>{const a=e.context,n=e.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),a.drawBuffers([a.NONE]);const r=e.textures[e.readIndex],i=e.textures[1-e.readIndex];r[0]&&r[0].deactivate(),r[1]&&r[1].deactivate(),i[0]&&i[0].deactivate(),i[1]&&i[1].deactivate(),e.eeTexture&&e.eeTexture.deactivate(),e.noiseTexture&&e.noiseTexture.deactivate()},t.getWriteIndex=()=>1-e.readIndex,t.detachBuffers()}const ax={vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function Ih(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ax,a),V.obj(t,e),V.get(t,e,["readIndex"]),V.setGet(t,e,["doEEPass","doVTPass","_openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),V.moveToProtected(t,e,["openGLRenderWindow"]),rx(t,e)}var ix={newInstance:V.newInstance(Ih,"vtkLICPingPongBufferManager"),extend:Ih};const Mr={NONE:0,LIC:1,COLOR:2,BOTH:3},J0={UNIFORM:0,GAUSSIAN:1},ox={BLEND:0,MULTIPLY:1};function sx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=`
    vec2 getVector( vec2 vectc )

      {

      vec2 V = texture2D( texVectors, vectc ).xy;

      // normalize if |V| not 0

      float lenV = length( V );

      if ( lenV > 1.0e-8 )

        {

        return V/lenV;

        }

      else

        {

        return vec2( 0.0, 0.0 );

        }

      }

    `,a=`
    vec2 getVector( vec2 vectc )

      {

      return texture2D( texVectors, vectc ).xy;

      }

    `;return t?e:a}function cx(t,e){e.classHierarchy.push("vtkLineIntegralConvolution2D"),t.buildAShader=r=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(Gh,r,""),t.dumpTextureValues=function(r,i){let[o,s]=i,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4;const u=Er.newInstance(),f=c;let h=null;return u.setOpenGLRenderWindow(l),u.saveCurrentBindingsAndBuffers(),u.create(o,s),u.populateFramebuffer(),u.setColorBuffer(r),h=new Float32Array(o*s*p),f.readPixels(0,0,o,s,p===4?f.RGBA:f.RGB,f.FLOAT,h),u.restorePreviousBindingsAndBuffers(),h},t.getTextureMinMax=function(r,i){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow;const c=t.dumpTextureValues(r,i,o,s,4);let l=Number.MAX_VALUE,p=Number.MIN_VALUE;for(let u=0;u<c.length;u+=4)if(c[u+1]===0){const f=c[u];f<l&&(l=f),f>p&&(p=f)}return{min:l,max:p}},t.getComponentSelectionProgram=r=>{const i="xyzw";return`.${i[r[0]]}${i[r[1]]}`},t.buildShaders=()=>{e.LIC0ShaderProgram=t.buildAShader($8);const r=Q.substitute(J8,"//VTK::LICComponentSelection::Impl",`vec2 V = texture2D(texVectors, tcoordVC.st)${t.getComponentSelectionProgram(e.componentIds)};`).result;e.VTProgram=t.buildAShader(r);const i=Q.substitute(H8,"//VTK::LICVectorLookup::Impl",sx(e.normalizeVectors),!0).result;e.LICIShaderProgram=t.buildAShader(i),e.LICNShaderProgram=t.buildAShader(K8),e.CEProgram=t.buildAShader(X8),e.EEProgram=t.buildAShader(q8),e.AAHProgram=t.buildAShader(Y8),e.AAVProgram=t.buildAShader(Z8)};function a(r,i){r.setUniformi("texLIC",i.getLICTextureUnit()),r.setUniformi("texSeedPts",i.getSeedTextureUnit())}function n(r,i,o){r.attachLICBuffers(),r.renderQuad(i,o),r.detachLICBuffers(),r.swap()}t.executeLIC=(r,i,o,s,c,l)=>{if(e._openGLRenderWindow=c,e.context=c.getContext(),Object.assign(e,l),r[0]<=0||r[1]<=0)return null;const p=[1/r[0],1/r[1]];let u=e.stepSize*Math.sqrt(p[0]*p[0]+p[1]*p[1]);u<=0&&(u=1e-10);const f=e.context;let h=e.framebuffer;const d=h==null?void 0:h.getSize();(!h||!d||r[0]!==d||r[1]!==d)&&(h=Er.newInstance(),h.setOpenGLRenderWindow(e._openGLRenderWindow),h.saveCurrentBindingsAndBuffers(),h.create(...r),h.populateFramebuffer(),h.restorePreviousBindingsAndBuffers(),e.framebuffer=h),h.saveCurrentBindingsAndBuffers(),h.bind(),f.viewport(0,0,...r),f.scissor(0,0,...r),e.shadersNeedBuild&&(t.buildShaders(),e.shadersNeedBuild=!1),e.bufs?(e.bufs.setVectorTexture(i),e.bufs.setMaskVectorTexture(o),e.bufs.setNoiseTexture(s)):e.bufs=ix.newInstance({openGLRenderWindow:c,doEEPass:e.enhancedLIC,doVTPass:e.transformVectors,vectorTexture:i,maskVectorTexture:o,noiseTexture:s,framebuffer:h,size:r});const v=[(s.getWidth()+1)/r[0],(s.getHeight()+1)/r[1]],m=1/r[0],x=1/r[1],y=e._openGLRenderWindow.getShaderCache();if(e.transformVectors){const T=e.VTProgram;y.readyShaderProgram(T),e.bufs.attachImageVectorBuffer(),T.setUniform2f("uTexSize",...r),T.setUniformi("texVectors",e.bufs.getVectorTextureUnit()),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),e.bufs.renderQuad(r,T),e.bufs.detachImageVectorBuffer()}e.bufs.clearBuffers(e.enhancedLIC),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(0);const{LIC0ShaderProgram:g}=e;y.readyShaderProgram(g),g.setUniformi("uStepNo",0),g.setUniformi("uPassNo",0),g.setUniformf("uMaskThreshold",e.maskThreshold),g.setUniform2f("uNoiseBoundsPt1",...v),g.setUniformi("texMaskVectors",e.bufs.getMaskVectorTextureUnit()),g.setUniformi("texLIC",e.bufs.getLICTextureUnit()),g.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0)),n(e.bufs,r,g);const{LICIShaderProgram:C}=e;y.readyShaderProgram(C),C.setUniformi("uPassNo",0),C.setUniformf("uStepSize",-u),C.setUniform2f("uNoiseBoundsPt1",...v),C.setUniformi("texVectors",e.bufs.getImageVectorTextureUnit()),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0));for(let T=0;T<e.numberOfSteps;++T)a(C,e.bufs),n(e.bufs,r,C);y.readyShaderProgram(g),g.setUniformi("uStepNo",1),a(g,e.bufs),n(e.bufs,r,g),y.readyShaderProgram(C),C.setUniformf("uStepSize",u);for(let T=0;T<e.numberOfSteps;++T)a(C,e.bufs),n(e.bufs,r,C);e.bufs.deactivateNoiseTexture(0),e.bufs.deactivateVectorTextures();const{LICNShaderProgram:S}=e;if(y.readyShaderProgram(S),S.setUniformi("texLIC",e.bufs.getLICTextureUnit()),n(e.bufs,r,S),e.enhancedLIC){(e.enhanceContrast===Mr.LIC||e.enhanceContrast===Mr.BOTH)&&t.contrastEnhance(!1,r),e.bufs.attachEEBuffer();const{EEProgram:T}=e;y.readyShaderProgram(T),T.setUniformi("texLIC",e.bufs.getLICTextureUnit()),T.setUniformf("uDx",m),T.setUniformf("uDy",x),e.bufs.renderQuad(r,T),e.bufs.detachEEBuffer(),e.bufs.detachBuffers(),e.bufs.clearBuffers(!1),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(1),y.readyShaderProgram(g),g.setUniformi("uStepNo",0),g.setUniformi("uPassNo",1),a(g,e.bufs),g.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1)),n(e.bufs,r,g),y.readyShaderProgram(C),C.setUniformi("uPassNo",1),C.setUniformf("uStepSize",-u),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1));const w=e.numberOfSteps/2;for(let _=0;_<w;++_)a(C,e.bufs),n(e.bufs,r,C);y.readyShaderProgram(g),g.setUniformi("uStepNo",1),a(g,e.bufs),n(e.bufs,r,g),y.readyShaderProgram(C),C.setUniformf("uStepSize",u);for(let _=0;_<w;++_)a(C,e.bufs),n(e.bufs,r,C);e.bufs.deactivateNoiseTexture(1),e.bufs.deactivateVectorTextures(),y.readyShaderProgram(S),S.setUniformi("texLIC",e.bufs.getLICTextureUnit()),S.setUniformi("texSeedPts",e.bufs.getSeedTextureUnit()),n(e.bufs,r,S)}if(e.antiAlias){const T=e.AAHProgram;y.readyShaderProgram(T),T.setUniformi("texLIC",e.bufs.getLICTextureUnit()),T.setUniformf("uDx",m);const w=e.AAVProgram;y.readyShaderProgram(w),w.setUniformi("texLIC",e.bufs.getLICTextureUnit()),w.setUniformf("uDy",x);for(let _=0;_<e.antiAlias;++_)y.readyShaderProgram(T),a(T,e.bufs),n(e.bufs,r,T),y.readyShaderProgram(w),a(w,e.bufs),n(e.bufs,r,w)}return(e.enhanceContrast===Mr.LIC||e.enhanceContrast===Mr.BOTH)&&t.contrastEnhance(!0,r),e.bufs.detachBuffers(),h.restorePreviousBindingsAndBuffers(),e.bufs.getLastLICBuffer()},t.contrastEnhance=(r,i)=>{const o=e._openGLRenderWindow.getShaderCache();let{min:s,max:c}=t.getTextureMinMax(e.bufs.getLastLICBuffer(),i,e.context,e._openGLRenderWindow);(c<=s||c>1||s<0)&&(console.error("Invalid color range: ",s,c),s=0,c=1);let l=c-s;r&&(s+=l*e.lowLICContrastEnhancementFactor,c-=l*e.highLICContrastEnhancementFactor,l=c-s);const{CEProgram:p}=e;o.readyShaderProgram(p),p.setUniformi("texLIC",e.bufs.getLICTextureUnit()),p.setUniformf("uMin",s),p.setUniformf("uMaxMinDiff",l),n(e.bufs,i,p)}}const ux={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function Ph(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ux,a),V.obj(t,e),V.setGet(t,e,["context","_openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),V.moveToProtected(t,e,["openGLRenderWindow"]),cx(t,e)}var lx={newInstance:V.newInstance(Ph,"vtkLineIntegralConvolution2D"),extend:Ph},fx=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader combines surface geometry, LIC, and  scalar colors.

// the output of this shader
layout(location = 0) out vec4 RGBOutput;
layout(location = 1) out vec4 HSLOutput;

uniform sampler2D texVectors;       // vectors, depth
uniform sampler2D texGeomColors;    // scalar colors + lighting
uniform sampler2D texLIC;           // image lic
uniform int       uScalarColorMode; // select between blend, and map shader
uniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors
uniform float     uMapBias;         // map shader: adjust the brightness of the result
uniform float     uMaskIntensity;   // blending factor for mask color
uniform vec3      uMaskColor;       // color for the masked out fragments

in vec2 tcoordVC;

/**
Convert from RGB color space into HSL colorspace.
*/
vec3 RGBToHSL(vec3 RGB)
{
  vec3 HSL = vec3(0.0, 0.0, 0.0);

  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);
  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);
  float RGBMaxMinDiff = RGBMax - RGBMin;

  HSL.z = (RGBMax + RGBMin) / 2.0;

  if (RGBMaxMinDiff == 0.0)
    {
    // Gray scale
    HSL.x = 0.0;
    HSL.y = 0.0;
    }
  else
    {
    // Color
    if (HSL.z < 0.5)
      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);
    else
      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);

    float dR
      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dG
      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dB
      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;

    if (RGB.r == RGBMax)
      HSL.x = dB - dG;
    else
    if (RGB.g == RGBMax)
      HSL.x = (1.0 / 3.0) + dR - dB;
    else
    if (RGB.b == RGBMax)
      HSL.x = (2.0 / 3.0) + dG - dR;

    if (HSL.x < 0.0)
      HSL.x += 1.0;

    if (HSL.x > 1.0)
      HSL.x -= 1.0;
    }

  return HSL;
}

/**
Helper for HSL to RGB conversion.
*/
float Util(float v1, float v2, float vH)
{
  if (vH < 0.0)
    vH += 1.0;

  if (vH > 1.0)
     vH -= 1.0;

  if ((6.0 * vH) < 1.0)
    return (v1 + (v2 - v1) * 6.0 * vH);

  if ((2.0 * vH) < 1.0)
    return (v2);

  if ((3.0 * vH) < 2.0)
    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);

  return v1;
}

/**
Convert from HSL space into RGB space.
*/
vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  if (HSL.y == 0.0)
    {
    // Gray
    RGB.r = HSL.z;
    RGB.g = HSL.z;
    RGB.b = HSL.z;
    }
  else
    {
    // Chromatic
    float v2;
    if (HSL.z < 0.5)
      v2 = HSL.z * (1.0 + HSL.y);
    else
      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);

    float v1 = 2.0 * HSL.z - v2;

    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));
    RGB.g = Util(v1, v2, HSL.x);
    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));
    }

  return RGB.rgb;
}

void main()
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);

  // depth is used to determine which fragment belong to us
  // and we can change
  float depth = texture2D(texVectors, tcoordVC.st).a;

  vec3 fragColorRGB;
  float valid;
  if (depth > 1.0e-3)
    {
    // we own it
    // shade LIC'ed geometry, or apply mask
    if (lic.g!=0.0)
      {
      // it's masked
      // apply fragment mask
      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;
      valid = 0.0;
      }
    else
      {
      if (uScalarColorMode==0)
        {
        // blend with scalars
        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);
        }
      else
        {
        // multiply with scalars
        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);
        }
      if (lic.b != 0.0)
        {
        // didn't have the required guard pixels
        // don't consider it in min max estimation
        // for histpgram stretching
        valid = 0.0;
        }
      else
        {
        // ok to use in min/max estimates for histogram
        // stretching
        valid = 1.0;
        }
      }
    }
  else
    {
    // we don't own it
    // pass through scalars
    fragColorRGB = geomColor.rgb;
    valid = 0.0;
    }

  // if no further stages this texture is
  // copied to the screen
  RGBOutput = vec4(fragColorRGB, geomColor.a);

  // if further stages, move to hsl space for contrast
  // enhancement. encoding validity saves moving a texture to the cpu
  vec3 fragColorHSL = RGBToHSL(fragColorRGB);
  HSLOutput = vec4(fragColorHSL, valid);
}
`,px=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_DCpy.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader copies fragments and depths to the output buffer

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texDepth;     // z values from vertex shader
uniform sampler2D texRGBColors; // final rgb LIC colors

in vec2 tcoordVC;

void main()
{
  gl_FragDepth = texture2D(texDepth, tcoordVC).x;
  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);

  // since we render a screen aligned quad
  // we're going to be writing fragments
  // not touched by the original geometry
  // it's critical not to modify those
  // fragments.
  if (gl_FragDepth == 1.0)
    {
    discard;
    }
}
`,hx=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// color contrast enhance stage implemented via histogram stretching
// on lightness channel. if the min and max are tweaked it can generate
// out-of-range values these will be clamped in 0 to 1

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texGeomColors; // scalars + lighting
uniform sampler2D texLIC;        // image lic, mask
uniform sampler2D texHSLColors;  // hsla colors

uniform float     uLMin;         // min lightness over all fragments
uniform float     uLMaxMinDiff;  // max - min lightness over all fragments

in vec2 tcoordVC;

vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  float v;
  float h = HSL.x;
  float sl = HSL.y;
  float l = HSL.z;

  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);
  if (v <= 0.0) {
    RGB = vec3(0.0,0.0,0.0);
  } else {
    float m;
    int sextant;
    float fract, vsf, mid1, mid2;

    m = l + l - v;
    h *= 6.0;
    sextant = int(h);
    fract = h - float(sextant);

    vsf = (v - m) * fract;
    mid1 = m + vsf;
    mid2 = v - vsf;
    switch (sextant) {
      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;
      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;
      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;
      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;
      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;
      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;
    }
  }
  return RGB;
}

void main()
{
  // lookup hsl color , mask
  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);

  // don't modify masked fragments (masked => lic.g==1)
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g==0.0)
    {
    // normalize lightness channel
    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);
    }

  // back into rgb space
  fragColor.rgb = HSLToRGB(fragColor.xyz);

  // add alpha
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);
  fragColor.a = geomColor.a;

  gl_FragData[0] = fragColor;
}
`;function gx(t,e){e.classHierarchy.push("vtkSurfaceLICInterface")}const dx={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:Mr.NONE,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:ox.BLEND,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:J0.GAUSSIAN,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function zh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dx,a),V.obj(t,e),V.setGet(t,e,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),gx(t,e)}var jh={newInstance:V.newInstance(zh,"vtkSurfaceLICInterface"),extend:zh};const{Representation:vx}=pr;function yx(t){const e=jt.newInstance();e.setOpenGLRenderWindow(t);const a=new Float32Array(12);for(let c=0;c<4;c++)a[c*3]=c%2*2-1,a[c*3+1]=c>1?1:-1,a[c*3+2]=0;const n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const o=pe.newInstance({numberOfComponents:1,values:r}),s=pe.newInstance({numberOfComponents:2,values:n});return e.getCABO().createVBO(o,"polys",vx.SURFACE,{points:i,cellOffset:0,tcoords:s}),e}function mx(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),t.renderQuad=(r,i)=>{const o=e.licQuad,s=e.context;let c=e.licQuadVAO;c||(c=ja.newInstance(),c.setOpenGLRenderWindow(e._openGLRenderWindow),e.licQuadVAO=c),e.previousProgramHash!==i.getMd5Hash()&&(c.shaderProgramChanged(),o.getCABO().bind(),c.addAttributeArray(i,o.getCABO(),"vertexDC",o.getCABO().getVertexOffset(),o.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),c.addAttributeArray(i,o.getCABO(),"tcoordDC",o.getCABO().getTCoordOffset(),o.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=i.getMd5Hash()),s.drawArrays(s.TRIANGLES,0,o.getCABO().getElementCount()),c.release()};function a(r,i,o,s,c,l){const u=Math.max(0,Math.min(1,o)),f=Float32Array.from({length:r*r},()=>{let g=0;if(u===1||Math.random()>1-u)for(let C=0;C<2048;++C)g+=Math.random();return g});let h=0,d=2048+1;f.forEach(g=>{u===1?d=g<d?g:d:d=g<d&&g>0?g:d,h=g>h?g:h});let v=h-d;v===0&&(d=0,h===0?v=1:v=h);const m=i-1,x=m!==0?1/m:0,y=l-c;return f.map(g=>{const C=g<d?g:(g-d)/v,S=Math.floor(C*i),T=S>m?m:S;return g>=d?i===1?l:c+T*x*y:s})}function n(r,i,o,s){let[c,l]=r;const p=s-o;return Float32Array.from({length:c*l},()=>{let u=Math.random();return u=Math.floor(u*i)/i,u=u*p+o,u>1?1:u<0?0:u})}t.generateNoiseTexture=r=>{if(!e.noiseTexture||e.licInterface.getRebuildNoiseTexture()){e.licInterface.setRebuildNoiseTexture(!1),e.noiseTexture&&e.noiseTexture.releaseGraphicsResources(),Dl(e.noiseGeneratorSeed,{global:!0});let i=[];const{noiseTextureType:o,noiseGrainSize:s,numberOfNoiseLevels:c,noiseImpulseProbability:l,noiseImpulseBackgroundValue:p,minNoiseValue:u,maxNoiseValue:f}=e.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue");switch(o){case J0.GAUSSIAN:i=a(Math.floor(r/s),c,l,p,u,f);break;case J0.UNIFORM:default:i=n([Math.ceil(r/s),Math.ceil(r/s)],c,u,f)}const h=1/s,d=Float32Array.from({length:r*r*4},(m,x)=>{const y=x/4;if(x%4===0){const g=Math.floor(y%r*h),C=Math.floor(y/r*h);return i[C*(r/s)+g]}return x%4===1||x%4===3?1:0}),v=Re.newInstance({wrapS:Re.Wrap.REPEAT,wrapT:Re.Wrap.REPEAT,minificationFilter:Re.Filter.NEAREST,magnificationFilter:Re.Filter.NEAREST,generateMipMap:!1,openGLDataType:e.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});v.setOpenGLRenderWindow(e._openGLRenderWindow),v.create2DFromRaw({width:r,height:r,numComps:4,dataType:"Float32Array",data:d}),v.activate(),v.sendParameters(),v.deactivate(),e.noiseTexture=v}},t.buildAShader=r=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(Gh,r,""),t.allocateTextures=()=>{const r=Re.Filter.NEAREST,i=Re.Filter.LINEAR,o=e._openGLRenderWindow;e.geometryImage||(e.geometryImage=t.allocateTexture(o,r)),e.vectorImage||(e.vectorImage=t.allocateTexture(o,i)),e.maskVectorImage||(e.maskVectorImage=t.allocateTexture(o,i)),e.LICImage||(e.LICImage=t.allocateTexture(o,r)),e.RGBColorImage||(e.RGBColorImage=t.allocateTexture(o,r)),e.HSLColorImage||(e.HSLColorImage=t.allocateTexture(o,r)),e.depthTexture||(e.depthTexture=t.allocateDepthTexture(o))},t.allocateTexture=(r,i)=>{const o=e.context,s=Re.newInstance({wrapS:Re.Wrap.CLAMP_TO_EDGE,wrapT:Re.Wrap.CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:i,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return s.setOpenGLRenderWindow(r),s.setInternalFormat(o.RGBA32F),s.create2DFromRaw({width:e.size[0],height:e.size[1],numComps:4,dataType:"Float32Array",data:null}),s.activate(),s.sendParameters(),s.deactivate(),s},t.allocateDepthTexture=r=>{const i=e.context,o=Re.newInstance({generateMipmap:!1,openGLDataType:i.FLOAT,autoParameters:!1});return o.setOpenGLRenderWindow(r),o.createDepthFromRaw({width:e.size[0],height:e.size[1],dataType:"Float32Array",data:null}),o.activate(),o.sendParameters(),o.deactivate(),o},t.createFBO=()=>{if(!e.framebuffer){e.licHelper=null;const r=Er.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.saveCurrentBindingsAndBuffers(),r.create(...e.size),r.populateFramebuffer(),e.framebuffer=r,r.restorePreviousBindingsAndBuffers()}},t.completedGeometry=()=>{const r=e.context,i=e.framebuffer;i.removeColorBuffer(0),i.removeColorBuffer(1),i.removeColorBuffer(2),i.removeDepthBuffer(),r.drawBuffers([r.NONE]),i.restorePreviousBindingsAndBuffers()},t.buildAllShaders=()=>{e.shadersNeedBuilding&&(e.licColorPass=t.buildAShader(fx),e.licCopyPass=t.buildAShader(px),e.enhanceContrastPass=t.buildAShader(hx),e.shadersNeedBuilding=!1)},t.initializeResources=()=>{t.createFBO(),t.generateNoiseTexture(e.licInterface.getNoiseTextureSize()),t.allocateTextures(),t.buildAllShaders(),e.licQuad||(e.licQuad=yx(e._openGLRenderWindow)),e.licHelper||(e.licHelper=lx.newInstance())},t.prepareForGeometry=()=>{const r=e.framebuffer;r.saveCurrentBindingsAndBuffers(),r.bind(),e.geometryImage.activate(),e.vectorImage.activate(),e.maskVectorImage.activate(),r.removeColorBuffer(0),r.removeColorBuffer(2),r.removeColorBuffer(3),r.setColorBuffer(e.geometryImage,0),r.setColorBuffer(e.vectorImage,2),r.setColorBuffer(e.maskVectorImage,3),r.setDepthBuffer(e.depthTexture);const i=e.context;i.drawBuffers([i.COLOR_ATTACHMENT0,i.NONE,i.COLOR_ATTACHMENT2,i.COLOR_ATTACHMENT3]),i.viewport(0,0,...e.size),i.scissor(0,0,...e.size),i.disable(i.BLEND),i.disable(i.DEPTH_TEST),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT)},t.copyToScreen=r=>{e.RGBColorImage.activate(),e.depthTexture.activate(),e.licCopyPass||t.initializeResources();const i=e.licCopyPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(i);const o=e.context;o.viewport(0,0,...r),o.scissor(0,0,...r),o.disable(o.BLEND),o.enable(o.DEPTH_TEST),o.disable(o.SCISSOR_TEST),i.setUniformi("texDepth",e.depthTexture.getTextureUnit()),i.setUniformi("texRGBColors",e.RGBColorImage.getTextureUnit()),t.renderQuad(r,i),e.RGBColorImage.deactivate(),e.depthTexture.deactivate()},t.combineColorsAndLIC=()=>{const r=e.context,i=e.framebuffer;i.saveCurrentBindingsAndBuffers(),i.bind(),i.create(...e.size),i.removeColorBuffer(0),i.removeColorBuffer(1),i.setColorBuffer(e.RGBColorImage,0),i.setColorBuffer(e.HSLColorImage,1),r.drawBuffers([r.COLOR_ATTACHMENT0,r.COLOR_ATTACHMENT1]),r.disable(r.DEPTH_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),e.vectorImage.activate(),e.geometryImage.activate(),e.LICImage.activate(),e.licColorPass||t.initializeResources();const o=e.licColorPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(o),o.setUniformi("texVectors",e.vectorImage.getTextureUnit()),o.setUniformi("texGeomColors",e.geometryImage.getTextureUnit());const{colorMode:s,LICIntensity:c,mapModeBias:l,maskIntensity:p,maskColor:u,enhanceContrast:f,lowColorContrastEnhancementFactor:h,highColorContrastEnhancementFactor:d}=e.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor");if(o.setUniformi("texLIC",e.LICImage.getTextureUnit()),o.setUniformi("uScalarColorMode",s),o.setUniformf("uLICIntensity",c),o.setUniformf("uMapBias",l),o.setUniformf("uMaskIntensity",p),o.setUniform3f("uMaskColor",...u),t.renderQuad(e.size,o),e.vectorImage.deactivate(),e.geometryImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),i.removeColorBuffer(1),r.drawBuffers([r.NONE]),f===Mr.COLOR||f===Mr.BOTH){let v=0,m=1,x=m-v;v+=x*h,m-=x*d,x=m-v,i.setColorBuffer(e.RGBColorImage),r.drawBuffers([r.COLOR_ATTACHMENT0]),e.geometryImage.activate(),e.HSLColorImage.activate(),e.LICImage.activate(),e.enhanceContrastPass||t.initializeResources();const{enhanceContrastPass:y}=e;e._openGLRenderWindow.getShaderCache().readyShaderProgram(y),y.setUniformi("texGeomColors",e.geometryImage.getTextureUnit()),y.setUniformi("texHSLColors",e.HSLColorImage.getTextureUnit()),y.setUniformi("texLIC",e.LICImage.getTextureUnit()),y.setUniformf("uLMin",v),y.setUniformf("uLMaxMinDiff",x),t.renderQuad(e.size,y),e.geometryImage.deactivate(),e.HSLColorImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),r.drawBuffers([r.NONE])}i.restorePreviousBindingsAndBuffers()},t.applyLIC=()=>{const r=e.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),i=e.licHelper.executeLIC(e.size,e.vectorImage,e.maskVectorImage,e.noiseTexture,e._openGLRenderWindow,r);if(!i){console.error("Failed to compute image LIC"),e.LICImage=null;return}e.LICImage=i},t.setSize=r=>{Array.isArray(r)&&r.length===2&&(!e.size||e.size[0]!==r[0]||e.size[1]!==r[1])&&(e.size=r,t.releaseGraphicsResources())},t.releaseGraphicsResources=()=>{e.geometryImage&&(e.geometryImage.releaseGraphicsResources(),e.geometryImage=null),e.vectorImage&&(e.vectorImage.releaseGraphicsResources(),e.vectorImage=null),e.maskVectorImage&&(e.maskVectorImage.releaseGraphicsResources(),e.maskVectorImage=null),e.LICImage&&(e.LICImage.releaseGraphicsResources(),e.LICImage=null),e.RGBColorImage&&(e.RGBColorImage.releaseGraphicsResources(),e.RGBColorImage=null),e.HSLColorImage&&(e.HSLColorImage.releaseGraphicsResources(),e.HSLColorImage=null),e.depthTexture&&(e.depthTexture.releaseGraphicsResources(),e.depthTexture=null),e.framebuffer&&(e.framebuffer.releaseGraphicsResources(),e.framebuffer=null)}}const xx={context:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function Wh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xx,a),jh.extend(t,e,a),V.obj(t,e),V.setGet(t,e,["context","_openGLRenderWindow","reallocateTextures","licInterface","size"]),V.moveToProtected(t,e,["openGLRenderWindow"]),mx(t,e)}var Cx={newInstance:V.newInstance(Wh,"vtkSurfaceLICInterface"),extend:Wh};const{vtkErrorMacro:Fo}=Dt;function Sx(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICMapper");const a={...t};t.getNeedToRebuildShaders=(n,r,i)=>e.rebuildLICShaders||a.getNeedToRebuildShaders(n,r,i),t.replaceShaderValues=(n,r,i)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");let s=n.Vertex,c=n.Fragment;const l=e.renderable.getInputArrayToProcess(0);if(l&&e.canDrawLIC){c=Q.substitute(c,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 2) out vec4 vectorTexture;","layout(location = 3) out vec4 maskVectorTexture;"]).result;const u=`${l.getName()}MC`;o===0&&e.lastBoundBO.set({lastLightComplexity:1},!0),s=Q.substitute(s,"//VTK::TCoord::Dec",[`attribute vec3 ${u};`,"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl",[`licOutput = ${u};`,"//VTK::TCoord::Impl"]).result,c=Q.substitute(c,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,c=Q.substitute(c,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,n.Vertex=s}e.rebuildLICShaders=!1,n.Fragment=c,a.replaceShaderValues(n,r,i),o>0&&e.lastBoundBO.set({lastLightComplexity:o},!0)},t.setMapperShaderParameters=(n,r,i)=>{a.setMapperShaderParameters(n,r,i),e.canDrawLIC&&n.getProgram().setUniformi("uMaskOnSurface",e.maskOnSurface)},t.getNeedToRebuildBufferObjects=(n,r)=>e.rebuildLICBuffers||a.getNeedToRebuildBufferObjects(n,r),t.buildBufferObjects=(n,r)=>{if(e.canDrawLIC){const i=e.renderable.getInputArrayToProcess(0);i&&i.getNumberOfComponents()>1&&e.renderable.setCustomShaderAttributes([i.getName()])}e.rebuildLICBuffers=!1,a.buildBufferObjects(n,r)},t.pushState=n=>{e.stateCache={[n.BLEND]:n.isEnabled(n.BLEND),[n.DEPTH_TEST]:n.isEnabled(n.DEPTH_TEST),[n.SCISSOR_TEST]:n.isEnabled(n.SCISSOR_TEST),[n.CULL_FACE]:n.isEnabled(n.CULL_FACE)}},t.popState=n=>{const r=i=>e.stateCache[i]?n.enable(i):n.disable(i);r(n.BLEND),r(n.DEPTH_TEST),r(n.SCISSOR_TEST),r(n.CULL_FACE)},t.renderPiece=(n,r)=>{let i=!0;e._openGLRenderWindow.getWebgl2()||(Fo("SurfaceLICMapper Requires WebGL 2"),i=!1),(!e.context.getExtension("EXT_color_buffer_float")||!e.context.getExtension("OES_texture_float_linear"))&&(Fo("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),i=!1),e.currentInput=e.renderable.getInputData(),e.currentInput||(Fo("No input"),i=!1);let s=e.renderable.getLicInterface();s||(s=jh.newInstance(),e.renderable.setLicInterface(s)),e.openGLLicInterface||(e.openGLLicInterface=Cx.newInstance()),s!==e.openGLLicInterface.getLicInterface()&&e.openGLLicInterface.setLicInterface(s);const c=e.renderable.getInputArrayToProcess(0);if(s.getEnableLIC()&&(!c||c.getNumberOfComponents()<2)&&(Fo("No vector input array"),i=!1),s.getEnableLIC()||(i=!1),e.canDrawLIC!==i&&(e.rebuildLICShaders=!0,e.rebuildLICBuffers=!0),e.canDrawLIC=i,!i||!s.getEnableLIC()){a.renderPiece(n,r);return}const l=e.context,p=r.getProperty().getBackfaceCulling(),u=r.getProperty().getFrontfaceCulling();!p&&!u?e._openGLRenderWindow.disableCullFace():u?(e._openGLRenderWindow.enableCullFace(),l.cullFace(l.FRONT)):(e._openGLRenderWindow.enableCullFace(),l.cullFace(l.BACK));const f=e._openGLRenderWindow.getSize(),h=f.map(d=>Math.round(d*s.getViewPortScale()));e.openGLLicInterface.setSize(h),e.openGLLicInterface.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLLicInterface.setContext(e.context),t.pushState(e.context),e.openGLLicInterface.initializeResources(),e.openGLLicInterface.prepareForGeometry(),t.popState(e.context),a.renderPieceStart(n,r),a.renderPieceDraw(n,r),a.renderPieceFinish(n,r),t.pushState(e.context),e.VBOBuildTime.modified(),e.openGLLicInterface.completedGeometry(),e.context.disable(e.context.CULL_FACE),e.openGLLicInterface.applyLIC(),e.openGLLicInterface.combineColorsAndLIC(),e.openGLLicInterface.copyToScreen(f),t.popState(e.context)}}const Tx={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function wx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Tx,a),Do.extend(t,e,a),Sx(t,e),pt(t,e,["openGLLicInterface"])}const _x=Je(wx,"vtkOpenGLSurfaceLICMapper");st("vtkSurfaceLICMapper",_x);var Ex=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkSphereMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Spheres

attribute vec4 vertexMC;
attribute vec2 offsetMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying vec3 centerVCVSOutput;

uniform int cameraParallel;
uniform float scaleFactor;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  // compute the projected vertex position
  vec2 scaledOffsetMC = scaleFactor * offsetMC;
  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = length(scaledOffsetMC)*0.5;

  // make the triangle face the camera
  if (cameraParallel == 0)
    {
    vec3 dir = normalize(-vertexVCVSOutput.xyz);
    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));
    vec3 base1 = cross(base2,dir);
    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;
    }
  else
    {
    // add in the offset
    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;
    }

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:Dx}=Dt;function Ox(t,e){e.classHierarchy.push("vtkOpenGLSphereMapper");const a={...t};t.getShaderTemplate=(n,r,i)=>{n.Vertex=Ex,n.Fragment=$a,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;o=Q.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Impl",[`vec4 vertexVC = vertexVCVSOutput;
`]).result;const c=[`uniform float invertedDepth;
`,`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=Q.substitute(s,"//VTK::Normal::Dec",c).result;let l="";e.context.getExtension("EXT_frag_depth")&&(l=`gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(l=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=Q.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float b = 2.0*dot(EyePos,EyeDir);
`,`  float c = dot(EyePos,EyePos) - 1.0;
`,`  float d = b*b - 4.0*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t = (-b - invertedDepth*sqrt(d))*0.5;
`,`    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);
`,`    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,l]).result,s=Q.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=o,n.Fragment=s,a.replaceShaderValues(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{if(n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&n.getProgram().isAttributeUsed("offsetMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"offsetMC",12,n.getCABO().getStride(),e.context.FLOAT,2,!1)||Dx("Error setting 'offsetMC' in shader VAO.")),n.getProgram().isUniformUsed("invertedDepth")&&n.getProgram().setUniformf("invertedDepth",e.invert?-1:1),n.getProgram().isUniformUsed("scaleFactor")){const s=e.currentInput.getPointData();e.renderable.getScaleArray()!=null&&s.hasArray(e.renderable.getScaleArray())?n.getProgram().setUniformf("scaleFactor",e.renderable.getScaleFactor()):n.getProgram().setUniformf("scaleFactor",1)}a.setMapperShaderParameters(n,r,i)},t.setCameraShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=r.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(r);o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc);const l=new Float64Array(16);if(o.isUniformUsed("MCVCMatrix"))if(i.getIsIdentity())gt(l,c.wcvc),n.getCABO().getCoordShiftAndScaleEnabled()&&Ee(l,l,n.getCABO().getInverseShiftAndScaleMatrix()),o.setUniformMatrix("MCVCMatrix",l);else{const p=e.openGLActor.getKeyMatrices();Ee(l,c.wcvc,p.mcwc),n.getCABO().getCoordShiftAndScaleEnabled()&&Ee(l,l,n.getCABO().getInverseShiftAndScaleMatrix()),o.setUniformMatrix("MCVCMatrix",l)}o.isUniformUsed("cameraParallel")&&n.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=(n,r)=>e.context.TRIANGLES,t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),l=i.getPoints(),p=l.getNumberOfPoints(),u=l.getData(),f=5;let h=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(h=c.getArray(e.renderable.getScaleArray()).getData());let d=null,v=0,m=null;o?(v=o.getNumberOfComponents(),s.setColorOffset(0),s.setColorBOStride(4),d=o.getData(),m=new Uint8Array(3*p*4),s.getColorBO()||s.setColorBO(On.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow)):s.getColorBO()&&s.setColorBO(null),s.setColorComponents(v);const x=new Float32Array(f*p*3);s.setStride(f*4);const y=Math.cos(Qe(30));let g=0,C=0;const{useShiftAndScale:S,coordShift:T,coordScale:w}=I0(l);S&&s.setCoordShiftAndScale(T,w);let _=0,E=0;for(let D=0;D<p;++D){let O=e.renderable.getRadius();h&&(O=h[D]),g=D*3;const M=(u[g++]-T[0])*w[0],N=(u[g++]-T[1])*w[1],R=(u[g++]-T[2])*w[2];x[_++]=M,x[_++]=N,x[_++]=R,x[_++]=-2*O*y,x[_++]=-O,d&&(C=D*v,m[E++]=d[C],m[E++]=d[C+1],m[E++]=d[C+2],m[E++]=d[C+3]),x[_++]=M,x[_++]=N,x[_++]=R,x[_++]=2*O*y,x[_++]=-O,d&&(m[E++]=d[C],m[E++]=d[C+1],m[E++]=d[C+2],m[E++]=d[C+3]),x[_++]=M,x[_++]=N,x[_++]=R,x[_++]=0,x[_++]=2*O,d&&(m[E++]=d[C],m[E++]=d[C+1],m[E++]=d[C+2],m[E++]=d[C+3])}s.setElementCount(_/f),s.upload(x,Dn.ARRAY_BUFFER),o&&s.getColorBO().upload(m,Dn.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const bx={};function Mx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bx,a),Do.extend(t,e,a),Ox(t,e)}const Nx=Je(Mx,"vtkOpenGLSphereMapper");st("vtkSphereMapper",Nx);var Rx=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkStickMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Sticks

attribute vec4 vertexMC;
attribute vec3 orientMC;
attribute vec4 offsetMC;
attribute float radiusMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying float lengthVCVSOutput;
varying vec3 centerVCVSOutput;
varying vec3 orientVCVSOutput;

uniform int cameraParallel;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = radiusMC;
  lengthVCVSOutput = length(orientMC);
  orientVCVSOutput = normalMatrix * normalize(orientMC);

  // make sure it is pointing out of the screen
  if (orientVCVSOutput.z < 0.0)
    {
    orientVCVSOutput = -orientVCVSOutput;
    }

  // make the basis
  vec3 xbase;
  vec3 ybase;
  vec3 dir = vec3(0.0,0.0,1.0);
  if (cameraParallel == 0)
    {
    dir = normalize(-vertexVCVSOutput.xyz);
    }
  if (abs(dot(dir,orientVCVSOutput)) == 1.0)
    {
    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));
    ybase = cross(xbase,orientVCVSOutput);
    }
  else
    {
    xbase = normalize(cross(orientVCVSOutput,dir));
    ybase = cross(orientVCVSOutput,xbase);
    }

  vec3 offsets = offsetMC.xyz*2.0-1.0;
  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +
    radiusVCVSOutput*offsets.x*xbase +
    radiusVCVSOutput*offsets.y*ybase +
    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:ko}=Dt;function Lx(t,e){e.classHierarchy.push("vtkOpenGLStickMapper");const a={...t};t.getShaderTemplate=(n,r,i)=>{n.Vertex=Rx,n.Fragment=$a,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{let o=n.Vertex,s=n.Fragment;o=Q.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,s=Q.substitute(s,"//VTK::PositionVC::Impl",`  vec4 vertexVC = vertexVCVSOutput;
`).result;const c=[`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 orientVCVSOutput;
`,`varying float lengthVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=Q.substitute(s,"//VTK::Normal::Dec",c).result;let l="";e.context.getExtension("EXT_frag_depth")&&(l=`  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(l=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=Q.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  vec3 base1;
`,`  if (abs(orientVCVSOutput.z) < 0.99) {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }
`,`  else {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }
`,`  vec3 base2 = cross(orientVCVSOutput,base1);
`,`  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));
`,`  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
`,`  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
`,`  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
`,`  float d = b*b - 4.0*a*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t =  (-b - sqrt(d))/(2.0*a);
`,`    float tz = EyePos.z + t*EyeDir.z;
`,`    vec3 iPoint = EyePos + t*EyeDir;
`,`    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {
`,`      float t2 = (-b + sqrt(d))/(2.0*a);
`,`      float tz2 = EyePos.z + t2*EyeDir.z;
`,`      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }
`,`      else {
`,`        normalVCVSOutput = orientVCVSOutput;
`,`        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;
`,`        iPoint = EyePos + t3*EyeDir;
`,`        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`        }
`,`      }
`,`    else {
`,`      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;
`,`      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`      }
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,l]).result,s=Q.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=o,n.Fragment=s,a.replaceShaderValues(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("orientMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"orientMC",12,n.getCABO().getStride(),e.context.FLOAT,3,!1)||ko("Error setting 'orientMC' in shader VAO.")),n.getProgram().isAttributeUsed("offsetMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"offsetMC",0,n.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,3,!0)||ko("Error setting 'offsetMC' in shader VAO.")),n.getProgram().isAttributeUsed("radiusMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"radiusMC",24,n.getCABO().getStride(),e.context.FLOAT,1,!1)||ko("Error setting 'radiusMC' in shader VAO."))),a.setMapperShaderParameters(n,r,i)},t.setCameraShaderParameters=(n,r,i)=>{const o=n.getProgram(),s=r.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(r);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc),i.getIsIdentity())o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",c.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",c.normalMatrix);else{const l=e.openGLActor.getKeyMatrices();if(o.isUniformUsed("MCVCMatrix")){const p=new Float64Array(16);Ee(p,c.wcvc,l.mcwc),o.setUniformMatrix("MCVCMatrix",p)}if(o.isUniformUsed("normalMatrix")){const p=new Float64Array(9);Qn(p,c.normalMatrix,l.normalMatrix),o.setUniformMatrix3x3("normalMatrix",p)}}o.isUniformUsed("cameraParallel")&&n.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=(n,r)=>e.context.TRIANGLES,t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),l=i.getPoints(),p=l.getNumberOfPoints(),u=l.getData();let f=3;f+=4;let h=null,d=0;s.setColorBOStride(4),s.getColorBO()||s.setColorBO(On.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow),o&&(d=o.getNumberOfComponents(),s.setColorOffset(4),h=o.getData(),s.setColorBOStride(8)),s.setColorComponents(d),s.setStride(f*4);const v=new Float32Array(f*p*12),m=new Uint8Array(12*p*(h?8:4));let x=null,y=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(x=c.getArray(e.renderable.getScaleArray()).getData()),e.renderable.getOrientationArray()!=null&&c.hasArray(e.renderable.getOrientationArray())?y=c.getArray(e.renderable.getOrientationArray()).getData():ko([`Error setting orientationArray.
`,"You have to specify the stick orientation"]);const g=[0,1,3,0,3,2,2,3,5,2,5,4];let C=0,S=0,T=0,w=0;for(let _=0;_<p;++_){let E=e.renderable.getLength(),D=e.renderable.getRadius();x&&(E=x[_*2],D=x[_*2+1]);for(let O=0;O<g.length;++O)C=_*3,v[T++]=u[C++],v[T++]=u[C++],v[T++]=u[C++],C=_*3,v[T++]=y[C++]*E,v[T++]=y[C++]*E,v[T++]=y[C++]*E,v[T++]=D,m[w++]=255*(g[O]%2),m[w++]=g[O]>=4?255:0,m[w++]=g[O]>=2?255:0,m[w++]=255,S=_*d,h&&(m[w++]=h[S],m[w++]=h[S+1],m[w++]=h[S+2],m[w++]=h[S+3])}s.setElementCount(T/f),s.upload(v,Dn.ARRAY_BUFFER),s.getColorBO().upload(m,Dn.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const Fx={};function kx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Fx,a),Do.extend(t,e,a),Lx(t,e)}const Vx=Je(kx,"vtkOpenGLStickMapper");st("vtkStickMapper",Vx);var _t=Uint8Array,Nr=Uint16Array,$h=Uint32Array,Hh=new _t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kh=new _t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ax=new _t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xh=function(t,e){for(var a=new Nr(31),n=0;n<31;++n)a[n]=e+=1<<t[n-1];for(var r=new $h(a[30]),n=1;n<30;++n)for(var i=a[n];i<a[n+1];++i)r[i]=i-a[n]<<5|n;return[a,r]},qh=Xh(Hh,2),Yh=qh[0],Bx=qh[1];Yh[28]=258,Bx[258]=28;for(var Ux=Xh(Kh,0),Gx=Ux[0],Z0=new Nr(32768),nt=0;nt<32768;++nt){var Hn=(nt&43690)>>>1|(nt&21845)<<1;Hn=(Hn&52428)>>>2|(Hn&13107)<<2,Hn=(Hn&61680)>>>4|(Hn&3855)<<4,Z0[nt]=((Hn&65280)>>>8|(Hn&255)<<8)>>>1}for(var Ya=function(t,e,a){for(var n=t.length,r=0,i=new Nr(e);r<n;++r)t[r]&&++i[t[r]-1];var o=new Nr(e);for(r=0;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var s;if(a){s=new Nr(1<<e);var c=15-e;for(r=0;r<n;++r)if(t[r])for(var l=r<<4|t[r],p=e-t[r],u=o[t[r]-1]++<<p,f=u|(1<<p)-1;u<=f;++u)s[Z0[u]>>>c]=l}else for(s=new Nr(n),r=0;r<n;++r)t[r]&&(s[r]=Z0[o[t[r]-1]++]>>>15-t[r]);return s},Ja=new _t(288),nt=0;nt<144;++nt)Ja[nt]=8;for(var nt=144;nt<256;++nt)Ja[nt]=9;for(var nt=256;nt<280;++nt)Ja[nt]=7;for(var nt=280;nt<288;++nt)Ja[nt]=8;for(var Jh=new _t(32),nt=0;nt<32;++nt)Jh[nt]=5;var Ix=Ya(Ja,9,1),Px=Ya(Jh,5,1),Q0=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},en=function(t,e,a){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&a},ec=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},zx=function(t){return(t+7)/8|0},Vo=function(t,e,a){(e==null||e<0)&&(e=0),(a==null||a>t.length)&&(a=t.length);var n=new(t.BYTES_PER_ELEMENT==2?Nr:t.BYTES_PER_ELEMENT==4?$h:_t)(a-e);return n.set(t.subarray(e,a)),n},jx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Rt=function(t,e,a){var n=new Error(e||jx[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Rt),!a)throw n;return n},tc=function(t,e,a){var n=t.length;if(!n||a&&a.f&&!a.l)return e||new _t(0);var r=!e||a,i=!a||a.i;a||(a={}),e||(e=new _t(n*3));var o=function(Z){var re=e.length;if(Z>re){var ae=new _t(Math.max(re*2,Z));ae.set(e),e=ae}},s=a.f||0,c=a.p||0,l=a.b||0,p=a.l,u=a.d,f=a.m,h=a.n,d=n*8;do{if(!p){s=en(t,c,1);var v=en(t,c+1,3);if(c+=3,v)if(v==1)p=Ix,u=Px,f=9,h=5;else if(v==2){var g=en(t,c,31)+257,C=en(t,c+10,15)+4,S=g+en(t,c+5,31)+1;c+=14;for(var T=new _t(S),w=new _t(19),_=0;_<C;++_)w[Ax[_]]=en(t,c+_*3,7);c+=C*3;for(var E=Q0(w),D=(1<<E)-1,O=Ya(w,E,1),_=0;_<S;){var M=O[en(t,c,D)];c+=M&15;var m=M>>>4;if(m<16)T[_++]=m;else{var N=0,R=0;for(m==16?(R=3+en(t,c,3),c+=2,N=T[_-1]):m==17?(R=3+en(t,c,7),c+=3):m==18&&(R=11+en(t,c,127),c+=7);R--;)T[_++]=N}}var B=T.subarray(0,g),I=T.subarray(g);f=Q0(B),h=Q0(I),p=Ya(B,f,1),u=Ya(I,h,1)}else Rt(1);else{var m=zx(c)+4,x=t[m-4]|t[m-3]<<8,y=m+x;if(y>n){i&&Rt(0);break}r&&o(l+x),e.set(t.subarray(m,y),l),a.b=l+=x,a.p=c=y*8,a.f=s;continue}if(c>d){i&&Rt(0);break}}r&&o(l+131072);for(var P=(1<<f)-1,L=(1<<h)-1,k=c;;k=c){var N=p[ec(t,c)&P],A=N>>>4;if(c+=N&15,c>d){i&&Rt(0);break}if(N||Rt(2),A<256)e[l++]=A;else if(A==256){k=c,p=null;break}else{var j=A-254;if(A>264){var _=A-257,H=Hh[_];j=en(t,c,(1<<H)-1)+Yh[_],c+=H}var K=u[ec(t,c)&L],Y=K>>>4;K||Rt(3),c+=K&15;var I=Gx[Y];if(Y>3){var H=Kh[Y];I+=ec(t,c)&(1<<H)-1,c+=H}if(c>d){i&&Rt(0);break}r&&o(l+131072);for(var q=l+j;l<q;l+=4)e[l]=e[l-I],e[l+1]=e[l+1-I],e[l+2]=e[l+2-I],e[l+3]=e[l+3-I];l=q}}a.l=p,a.p=k,a.b=l,a.f=s,p&&(s=1,a.m=f,a.d=u,a.n=h)}while(!s);return l==e.length?e:Vo(e,0,l)},Wx=new _t(0),xn=function(t,e){return t[e]|t[e+1]<<8},tn=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},nc=function(t,e){return tn(t,e)+tn(t,e+4)*4294967296},$x=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Rt(6,"invalid gzip data");var e=t[3],a=10;e&4&&(a+=t[10]|(t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[a++]);return a+(e&2)},Hx=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Kx=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Rt(6,"invalid zlib data"),t[1]&32&&Rt(6,"invalid zlib data: preset dictionaries not supported")};function Zh(t,e){return tc(t,e)}function Xx(t,e){return tc(t.subarray($x(t),-8),e||new _t(Hx(t)))}function qx(t,e){return tc((Kx(t),t.subarray(2,-4)),e)}function nn(t,e){return t[0]==31&&t[1]==139&&t[2]==8?Xx(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?Zh(t,e):qx(t,e)}var Qh=typeof TextEncoder<"u"&&new TextEncoder,rc=typeof TextDecoder<"u"&&new TextDecoder,Yx=0;try{rc.decode(Wx,{stream:!0}),Yx=1}catch{}var Jx=function(t){for(var e="",a=0;;){var n=t[a++],r=(n>127)+(n>223)+(n>239);if(a+r>t.length)return[e,Vo(t,a-1)];r?r==3?(n=((n&15)<<18|(t[a++]&63)<<12|(t[a++]&63)<<6|t[a++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):r&1?e+=String.fromCharCode((n&31)<<6|t[a++]&63):e+=String.fromCharCode((n&15)<<12|(t[a++]&63)<<6|t[a++]&63):e+=String.fromCharCode(n)}};function Zx(t,e){if(e){for(var a=new _t(t.length),n=0;n<t.length;++n)a[n]=t.charCodeAt(n);return a}if(Qh)return Qh.encode(t);for(var r=t.length,i=new _t(t.length+(t.length>>1)),o=0,s=function(p){i[o++]=p},n=0;n<r;++n){if(o+5>i.length){var c=new _t(o+8+(r-n<<1));c.set(i),i=c}var l=t.charCodeAt(n);l<128||e?s(l):l<2048?(s(192|l>>6),s(128|l&63)):l>55295&&l<57344?(l=65536+(l&1023<<10)|t.charCodeAt(++n)&1023,s(240|l>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|l&63)):(s(224|l>>12),s(128|l>>6&63),s(128|l&63))}return Vo(i,0,o)}function rn(t,e){if(e){for(var a="",n=0;n<t.length;n+=16384)a+=String.fromCharCode.apply(null,t.subarray(n,n+16384));return a}else{if(rc)return rc.decode(t);var r=Jx(t),i=r[0],o=r[1];return o.length&&Rt(8),i}}var Qx=function(t,e){return e+30+xn(t,e+26)+xn(t,e+28)},e7=function(t,e,a){var n=xn(t,e+28),r=rn(t.subarray(e+46,e+46+n),!(xn(t,e+8)&2048)),i=e+46+n,o=tn(t,e+20),s=a&&o==4294967295?t7(t,i):[o,tn(t,e+24),tn(t,e+42)],c=s[0],l=s[1],p=s[2];return[xn(t,e+10),c,l,r,i+xn(t,e+30)+xn(t,e+32),p]},t7=function(t,e){for(;xn(t,e)!=1;e+=4+xn(t,e+2));return[nc(t,e+12),nc(t,e+4),nc(t,e+20)]};function e1(t,e){for(var a={},n=t.length-22;tn(t,n)!=101010256;--n)(!n||t.length-n>65558)&&Rt(13);var r=xn(t,n+8);if(!r)return{};var i=tn(t,n+16),o=i==4294967295;o&&(n=tn(t,n-12),tn(t,n)!=101075792&&Rt(13),r=tn(t,n+32),i=tn(t,n+48));for(var s=e&&e.filter,c=0;c<r;++c){var l=e7(t,i,o),p=l[0],u=l[1],f=l[2],h=l[3],d=l[4],v=l[5],m=Qx(t,v);i=d,(!s||s({name:h,size:u,originalSize:f,compression:p}))&&(p?p==8?a[h]=Zh(t.subarray(m,m+u),new _t(f)):Rt(14,"unknown compression type "+p):a[h]=Vo(t,m,m+u))}return a}function t1(){const t=new ArrayBuffer(4),e=new Uint8Array(t),a=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,a[0]===3569595041?"LittleEndian":a[0]===2712847316?"BigEndian":null}const n7=t1();function r7(t,e){if(e<2)return;const a=new Int8Array(t),n=a.length,r=[];for(let i=0;i<n;i+=e){for(let o=0;o<e;o++)r.push(a[i+o]);for(let o=0;o<e;o++)a[i+o]=r.pop()}}var Nn={ENDIANNESS:n7,getEndianness:t1,swapBytes:r7};const ac={};function n1(t){return!!ac[t]}function a7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ac[t](e)}function Ao(t,e){ac[t]=e}var aa={get:a7,has:n1,registerType:Ao};const{vtkErrorMacro:Za,vtkDebugMacro:i7}=V;let ia=0;function Bo(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=new XMLHttpRequest;return n.open(t,e,!0),a.headers&&Object.entries(a.headers).forEach(r=>{let[i,o]=r;return n.setRequestHeader(i,o)}),a.progressCallback&&n.addEventListener("progress",a.progressCallback),n}function o7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e&&e.compression&&e.compression!=="gz"&&(Za("Supported algorithms are: [gz]"),Za(`Unkown compression algorithm: ${e.compression}`)),new Promise((a,n)=>{const r=Bo("GET",t,e);r.onreadystatechange=i=>{r.readyState===4&&(r.status===200||r.status===0?e.compression?a(nn(new Uint8Array(r.response)).buffer):a(r.response):n({xhr:r,e:i}))},r.responseType="arraybuffer",r.send()})}function s7(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return a.ref&&!a.ref.pending?new Promise((r,i)=>{let o=null;a.ref.url?o=a.ref.url:o=[e,a.ref.basepath,n.compression?`${a.ref.id}.gz`:a.ref.id].join("/");const s=Bo("GET",o,n);s.onreadystatechange=c=>{s.readyState===1&&(a.ref.pending=!0,++ia===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),s.readyState===4&&(a.ref.pending=!1,s.status===200||s.status===0?(a.buffer=s.response,n.compression&&(a.dataType==="string"||a.dataType==="JSON"?a.buffer=rn(nn(new Uint8Array(a.buffer))):a.buffer=nn(new Uint8Array(a.buffer)).buffer),a.ref.encode==="JSON"?a.values=JSON.parse(a.buffer):(Nn.ENDIANNESS!==a.ref.encode&&Nn.ENDIANNESS&&(i7(`Swap bytes of ${a.name}`),Nn.swapBytes(a.buffer,lo[a.dataType])),a.values=V.newTypedArray(a.dataType,a.buffer)),a.values.length!==a.size&&Za(`Error in FetchArray: ${a.name}, does not have the proper array size. Got ${a.values.length}, instead of ${a.size}`),delete a.ref,--ia===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),r(a)):i({xhr:s,e:c}))},s.responseType=n.compression||a.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(a)}function c7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=Bo("GET",e,a);i.onreadystatechange=o=>{i.readyState===1&&++ia===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ia===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?a.compression?n(JSON.parse(rn(nn(new Uint8Array(i.response))))):n(JSON.parse(i.responseText)):r({xhr:i,e:o}))},i.responseType=a.compression?"arraybuffer":"text",i.send()})}function u7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression&&a.compression!=="gz"&&(Za("Supported algorithms are: [gz]"),Za(`Unkown compression algorithm: ${a.compression}`)),new Promise((n,r)=>{const i=Bo("GET",e,a);i.onreadystatechange=o=>{i.readyState===1&&++ia===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ia===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?a.compression?n(rn(nn(new Uint8Array(i.response)))):n(i.responseText):r({xhr:i,e:o}))},i.responseType=a.compression?"arraybuffer":"text",i.send()})}function l7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=new Image;a.crossOrigin&&(i.crossOrigin=a.crossOrigin),i.onload=()=>n(i),i.onerror=r,i.src=e})}const f7={fetchArray:s7,fetchJSON:c7,fetchText:u7,fetchBinary:o7,fetchImage:l7};Ao("http",t=>f7);const Ut=[];Ut["-".charCodeAt(0)]=62,Ut["_".charCodeAt(0)]=63;const oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0;t<oa.length;t++)Ut[oa.charCodeAt(t)]=t;function Cn(t){return Ut[t.charCodeAt(0)]!==void 0}function p7(t){const e=t.length,a=[];let n=null;for(let r=0;r<e;r++)Cn(t[r])?(n||(n={start:r,count:0}),n.count++,n.end=r):t[r]==="="&&n&&(a.push(n),n=null);return n&&a.push(n),a}function h7(t,e,a,n){const{start:r,count:i}=e,o=i%4,s=Math.floor(i/4);let c=r,l=null,p=a;for(let u=0;u<s;u++){for(;!Cn(t[c]);)c++;for(l=Ut[t.charCodeAt(c++)]<<18;!Cn(t[c]);)c++;for(l|=Ut[t.charCodeAt(c++)]<<12;!Cn(t[c]);)c++;for(l|=Ut[t.charCodeAt(c++)]<<6;!Cn(t[c]);)c++;l|=Ut[t.charCodeAt(c++)],n[p++]=l>>16&255,n[p++]=l>>8&255,n[p++]=l&255}switch(o){case 3:for(;!Cn(t[c]);)c++;for(l=Ut[t.charCodeAt(c++)]<<10;!Cn(t[c]);)c++;for(l|=Ut[t.charCodeAt(c++)]<<4;!Cn(t[c]);)c++;l|=Ut[t.charCodeAt(c++)]>>2,n[p++]=l>>8&255,n[p++]=l&255;break;case 2:for(;!Cn(t[c]);)c++;for(l=Ut[t.charCodeAt(c++)]<<2;!Cn(t[c]);)c++;l|=Ut[t.charCodeAt(c++)]>>4,n[p++]=l&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return p}function g7(t){const e=p7(t),a=e[e.length-1].end+1,n=(4-a%4)%4,r=(a+n)*3/4-n,i=new ArrayBuffer(r),o=new Uint8Array(i);let s=0;for(let c=0;c<e.length;c++)s+=h7(t,e[c],s,o),s+=(4-e[c].count%4)%4;return i}function r1(t,e,a){const n=(t<<16)+(e<<8)+a;return oa[n>>18]+oa[n>>12&63]+oa[n>>6&63]+oa[n&63]}function a1(t){const e=new Uint8Array(t),a=t.byteLength%3,n=t.byteLength-a,r=Array(n/3);for(let i=0;i<r.length;i++){const o=i*3;r[i]=r1(e[o],e[o+1],e[o+2])}if(a>0){const i=r1(e[n],e[n+1]||0,e[n+2]||0);a===1?r.push(`${i.substr(0,2)}==`):a===2&&r.push(`${i.substr(0,3)}=`)}return r.join("")}var Rr={toArrayBuffer:g7,fromArrayBuffer:a1};const{vtkErrorMacro:sa,vtkDebugMacro:d7}=V;function v7(t){const e=t.split(".").pop().toLowerCase();return e==="jpg"?"jpeg":e}function y7(t,e,a){return n=>{t.buffer=new ArrayBuffer(n.length),new Uint8Array(t.buffer).set(n),e&&(t.dataType==="string"||t.dataType==="JSON"?t.buffer=rn(nn(new Uint8Array(t.buffer))):t.buffer=nn(new Uint8Array(t.buffer)).buffer),t.ref.encode==="JSON"?t.values=JSON.parse(t.buffer):(Nn.ENDIANNESS!==t.ref.encode&&Nn.ENDIANNESS&&(d7(`Swap bytes of ${t.name}`),Nn.swapBytes(t.buffer,lo[t.dataType])),t.values=V.newTypedArray(t.dataType,t.buffer)),t.values.length!==t.size&&sa(`Error in FetchArray: ${t.name} does not have the proper array size. Got ${t.values.length}, instead of ${t.size}`),a()}}function m7(t,e,a){return n=>{e?t.values=JSON.parse(rn(nn(n))):t.values=JSON.parse(n),a()}}function x7(t){return t[0]==="/"?t.substr(1):t}function C7(t){return new URL(t,"http://any").pathname}function Qa(t){return x7(C7(t))}function S7(t){return new Promise((e,a)=>{typeof t=="string"?e(Zx(t)):t instanceof Blob?e(t.arrayBuffer().then(n=>new Uint8Array(n))):t instanceof ArrayBuffer?e(new Uint8Array(t)):(t==null?void 0:t.buffer)instanceof ArrayBuffer?e(new Uint8Array(t.buffer)):a(new Error("Invalid datatype to unpack."))})}function T7(t){let e=!1,a=0,n=null,r="";return S7(t.zipContent).then(i=>{n=e1(i),e=!0;const o=[];Object.keys(n).forEach(s=>{s.endsWith("index.json")&&o.push(s)}),o.sort((s,c)=>s.length-c.length),r=o[0].replace(/index\.json$/,""),t.callback&&t.callback(n)}),{fetchArray(i,o,s){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((l,p)=>{e||sa("ERROR!!! zip not ready...");const u=Qa([o,s.ref.basepath,c.compression?`${s.ref.id}.gz`:s.ref.id].join("/"));++a===1&&(i!=null&&i.invokeBusy)&&i.invokeBusy(!0);function f(){delete s.ref,--a===0&&(i!=null&&i.invokeBusy)&&i.invokeBusy(!1),i!=null&&i.modified&&i.modified(),l(s)}const h=n[`${r}${u}`];s.dataType==="string"&&!c.compression?m7(s,c.compression,f)(rn(h)):y7(s,c.compression,f)(h)})},fetchJSON(i,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Qa(o);e||sa("ERROR!!! zip not ready...");const l=n[`${r}${c}`];if(s.compression){if(s.compression==="gz"){const p=rn(nn(l));return Promise.resolve(JSON.parse(p))}return Promise.reject(new Error("Invalid compression"))}return Promise.resolve(JSON.parse(rn(l)))},fetchText(i,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Qa(o);e||sa("ERROR!!! zip not ready...");const l=n[`${r}${c}`];return s.compression?s.compression==="gz"?Promise.resolve(rn(e1(l))):Promise.reject(new Error("Invalid compression")):Promise.resolve(rn(l))},fetchImage(i,o){const s=Qa(o);e||sa("ERROR!!! zip not ready...");const c=n[`${r}${s}`];return new Promise((l,p)=>{const u=new Image;u.onload=()=>l(u),u.onerror=p;const f=a1(c.buffer);u.src=`data:image/${v7(s)};base64,${f}`})},fetchBinary(i,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Qa(o);e||sa("ERROR!!! zip not ready...");const l=n[`${r}${c}`];return s.compression?s.compression==="gz"?Promise.resolve(nn(l).buffer):Promise.reject(new Error("Invalid compression")):Promise.resolve(l.buffer)}}}const w7={create:T7};Ao("zip",t=>w7.create(t));function _7(t,e){e.classHierarchy.push("vtkConcentricCylinderSource");function a(){for(;e.cellFields.length<e.radius.length;)e.cellFields.push(e.cellFields.length)}t.clearRadius=()=>{e.radius=[],e.cellFields=[],t.modified()},t.addRadius=(n,r)=>{e.radius.push(n),r!==void 0&&e.cellFields.push(r),a(),t.modified()},t.getNumberOfRadius=()=>e.radius.length,t.getRadius=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.radius[n]},t.setRadius=(n,r)=>{e.radius[n]=r,t.modified()},t.setCellField=(n,r)=>{e.cellFields[n]=r,t.modified()},t.removeMask=()=>{e.mask=null,t.modified()},t.setMaskLayer=(n,r)=>{let i=!1;!e.mask&&r&&(i=!0,e.mask=[]),e.mask&&(!e.mask[n]!=!r&&(i=!0),e.mask[n]=r),i&&t.modified()},t.getMaskLayer=n=>n===void 0?e.mask:e.mask[n],t.requestData=(n,r)=>{var w;if(!e.radius.length){V.vtkErrorMacro("No radius defined");return}a();const i=e.radius.length,o=e.height/2;let s=0,c=0,l=e.startTheta<e.endTheta?e.startTheta:e.endTheta;l*=Math.PI/180;let p=e.endTheta>e.startTheta?e.endTheta:e.startTheta;p*=Math.PI/180;let u=e.resolution,f=!1;p>=l+2*Math.PI?p=l+2*Math.PI:(++u,f=!0);const h=(p-l)/e.resolution,d=u*i*2+2;if(!e.skipInnerFaces&&!e.mask)s=2*(u+1)+5*u+(i-1)*u*20+(f?10*i:0),c=2+u+(i-1)*4*u+(f?2*i:0);else if(!e.skipInnerFaces&&e.mask){e.mask[0]||(s+=2*(u+1)+5*u+(f?10:0),c+=2+u+(f?2:0));for(let _=1;_<i;_++)e.mask[_]||(s+=u*20+(f?10:0),c+=4*u+(f?2:0))}else{(!e.skipInnerFaces||!e.mask||!e.mask[0])&&(s+=2*(u+1)+(f?10:0),c+=2+(f?2:0),(e.radius.length===1||!e.skipInnerFaces||e.mask&&e.mask[1])&&(s+=5*u,c+=u));for(let _=1;_<i;_++)if(!e.skipInnerFaces||!e.mask||!e.mask[_]){const E=i-1===_;s+=u*10+(f?10:0),c+=u*2+(f?2:0),(!e.skipInnerFaces||e.mask&&e.mask[_-1])&&(s+=u*5,c+=u),(E||!e.skipInnerFaces||e.mask&&e.mask[_+1])&&(s+=u*5,c+=u)}}let v=0;const m=V.newTypedArray(e.pointType,d*3);let x=0;const y=new Uint32Array(s);let g=0;const C=new Float32Array(c);m[v*3+0]=0,m[v*3+1]=0,m[v*3+2]=o,v++,m[v*3+0]=0,m[v*3+1]=0,m[v*3+2]=-o,v++;for(let _=0;_<i;_++){const E=e.radius[_];for(let D=0;D<u;D++){const O=l+D*h;m[v*3+0]=E*Math.cos(O),m[v*3+1]=E*Math.sin(O),m[v*3+2]=o,v++}for(let D=0;D<u;D++){const O=l+D*h;m[v*3+0]=E*Math.cos(O),m[v*3+1]=E*Math.sin(O),m[v*3+2]=-o,v++}}let S=e.cellFields[0];if(!e.mask||!e.mask[0]){C[g++]=S,y[x++]=u+(f?1:0),f&&(y[x++]=0);for(let _=0;_<u;_++)y[x++]=_+2;C[g++]=S,y[x++]=u+(f?1:0),f&&(y[x++]=1);for(let _=0;_<u;_++)y[x++]=2*u-_-1+2;if(!e.skipInnerFaces||e.mask&&e.mask[1]||i===1)for(let _=0;_<e.resolution;_++)y[x++]=4,y[x++]=(_+1)%u+2,y[x++]=_+2,y[x++]=_+u+2,y[x++]=(_+1)%u+u+2,C[g++]=S;f&&(y[x++]=4,y[x++]=2,y[x++]=0,y[x++]=1,y[x++]=u+2,C[g++]=S,y[x++]=4,y[x++]=0,y[x++]=u+1,y[x++]=2*u+1,y[x++]=1,C[g++]=S)}for(let _=1;_<i;_++){if(e.mask&&e.mask[_])continue;const E=u*2*(_-1)+2,D=E+2*u,O=i-1===_;S=e.cellFields[_];for(let M=0;M<e.resolution;M++)y[x++]=4,y[x++]=M+E,y[x++]=(M+1)%u+E,y[x++]=(M+1)%u+D,y[x++]=M+D,C[g++]=S;for(let M=0;M<e.resolution;M++)y[x++]=4,y[x++]=(M+1)%u+E+u,y[x++]=M+E+u,y[x++]=M+D+u,y[x++]=(M+1)%u+D+u,C[g++]=S;if(!e.skipInnerFaces||e.mask&&e.mask[_-1])for(let M=0;M<e.resolution;M++)y[x++]=4,y[x++]=M+E,y[x++]=(M+1)%u+E,y[x++]=(M+1)%u+u+E,y[x++]=M+u+E,C[g++]=S;if(!e.skipInnerFaces||O||e.mask&&(e.mask[_+1]||O))for(let M=0;M<e.resolution;M++)y[x++]=4,y[x++]=(M+1)%u+D,y[x++]=M+D,y[x++]=M+u+D,y[x++]=(M+1)%u+u+D,C[g++]=S;f&&(y[x++]=4,y[x++]=D,y[x++]=E,y[x++]=u+E,y[x++]=u+D,C[g++]=S,y[x++]=4,y[x++]=e.resolution+D,y[x++]=e.resolution+E,y[x++]=e.resolution+u+E,y[x++]=e.resolution+u+D,C[g++]=S)}bt.buildFromRadian().translate(...e.center).rotateFromDirections([0,0,1],e.direction).apply(m);const T=((w=r[0])==null?void 0:w.initialize())||Xe.newInstance();T.getPoints().setData(m,3),T.getPolys().setData(y,1),T.getCellData().setScalars(pe.newInstance({name:"layer",values:C})),r[0]=T}}const E7={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float64Array"};function D7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E7,a),V.obj(t,e),V.setGet(t,e,["height","resolution","startTheta","endTheta","skipInnerFaces"]),V.setGetArray(t,e,["center","direction"],3),V.getArray(t,e,["cellFields"]),V.algo(t,e,0,1),_7(t,e)}V.newInstance(D7,"vtkConcentricCylinderSource");function O7(t,e){e.classHierarchy.push("vtkConeSource"),t.requestData=(a,n)=>{var h;const r=2*Math.PI/e.resolution,i=-e.height/2,o=e.resolution+1,s=4*e.resolution+1+e.resolution;let c=0;const l=V.newTypedArray(e.pointType,o*3);let p=0;const u=new Uint32Array(s);l[0]=e.height/2,l[1]=0,l[2]=0,e.capping&&(u[p++]=e.resolution);for(let d=0;d<e.resolution;d++)c++,l[c*3+0]=i,l[c*3+1]=e.radius*Math.cos(d*r),l[c*3+2]=e.radius*Math.sin(d*r),e.capping&&(u[e.resolution-p+++1]=c);for(let d=0;d<e.resolution;d++)u[p++]=3,u[p++]=0,u[p++]=d+1,u[p++]=d+2>e.resolution?1:d+2;bt.buildFromRadian().translate(...e.center).rotateFromDirections([1,0,0],e.direction).apply(l);const f=((h=n[0])==null?void 0:h.initialize())||Xe.newInstance();f.getPoints().setData(l,3),f.getPolys().setData(u,1),n[0]=f}}const b7={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function i1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b7,a),V.obj(t,e),V.setGet(t,e,["height","radius","resolution","capping"]),V.setGetArray(t,e,["center","direction"],3),V.algo(t,e,0,1),O7(t,e)}var M7={newInstance:V.newInstance(i1,"vtkConeSource"),extend:i1};function N7(t,e){e.classHierarchy.push("vtkCylinderSource"),t.requestData=(a,n)=>{var T;const r=2*Math.PI/e.resolution;let i=2*e.resolution,o=5*e.resolution;e.capping&&(i=4*e.resolution,o=7*e.resolution+2);const s=V.newTypedArray(e.pointType,i*3);let c=0;const l=new Uint32Array(o),p=new Float32Array(i*3),u=pe.newInstance({numberOfComponents:3,values:p,name:"Normals"}),f=new Float32Array(i*2),h=pe.newInstance({numberOfComponents:2,values:f,name:"TCoords"}),d=[0,0,0],v=[0,0,0],m=[0,0,0],x=[0,0,0],y=[0,0],g=[0,0],C=e.otherRadius==null?e.radius:e.otherRadius;for(let w=0;w<e.resolution;w++){d[0]=Math.cos(w*r+e.initAngle),v[0]=d[0],m[0]=e.radius*d[0]+e.center[0],x[0]=m[0],y[0]=Math.abs(2*w/e.resolution-1),g[0]=y[0],m[1]=.5*e.height+e.center[1],x[1]=-.5*e.height+e.center[1],y[1]=0,g[1]=1,d[2]=-Math.sin(w*r+e.initAngle),v[2]=d[2],m[2]=C*d[2]+e.center[2],x[2]=m[2];const _=2*w;for(let E=0;E<3;E++)p[_*3+E]=d[E],p[(_+1)*3+E]=v[E],s[_*3+E]=m[E],s[(_+1)*3+E]=x[E],E<2&&(f[_*2+E]=y[E],f[(_+1)*2+E]=g[E])}for(let w=0;w<e.resolution;w++){l[c++]=4,l[c++]=2*w,l[c++]=2*w+1;const _=(2*w+3)%(2*e.resolution);l[c++]=_,l[c++]=_-1}if(e.capping){for(let w=0;w<e.resolution;w++){m[0]=e.radius*Math.cos(w*r+e.initAngle),x[0]=m[0],y[0]=m[0],g[0]=m[0],m[0]+=e.center[0],x[0]+=e.center[0],d[1]=1,v[1]=-1,m[1]=.5*e.height+e.center[1],x[1]=-.5*e.height+e.center[1],m[2]=-C*Math.sin(w*r+e.initAngle),x[2]=m[2],y[1]=m[2],g[1]=m[2],m[2]+=e.center[2],x[2]+=e.center[2];const _=2*e.resolution+w,E=3*e.resolution+e.resolution-w-1;for(let D=0;D<3;D++)p[3*_+D]=d[D],p[3*E+D]=v[D],s[3*_+D]=m[D],s[3*E+D]=x[D],D<2&&(f[2*_+D]=y[D],f[2*E+D]=g[D])}l[c++]=e.resolution;for(let w=0;w<e.resolution;w++)l[c++]=2*e.resolution+w;l[c++]=e.resolution;for(let w=0;w<e.resolution;w++)l[c++]=3*e.resolution+w}bt.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(w=>w*-1)).apply(s);const S=((T=n[0])==null?void 0:T.initialize())||Xe.newInstance();S.getPoints().setData(s,3),S.getPolys().setData(l,1),S.getPointData().setNormals(u),S.getPointData().setTCoords(h),n[0]=S}}const R7={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function o1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R7,a),V.obj(t,e),V.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),V.setGetArray(t,e,["center","direction"],3),V.algo(t,e,0,1),N7(t,e)}var L7={newInstance:V.newInstance(o1,"vtkCylinderSource"),extend:o1};const{vtkWarningMacro:F7}=V;function k7(t,e){e.classHierarchy.push("vtkLineSource"),t.requestData=(a,n)=>{const r=n[0],i=r?r.getPoints().getDataType():e.pointType,o=(r==null?void 0:r.initialize())||Xe.newInstance(),s=[];if(He(e.point2,e.point1,s),St(s)<=0){F7("Zero-length line definition");return}const c=e.resolution,l=c+1,p=V.newTypedArray(i,l*3);o.getPoints().setData(p,3);const u=new Uint32Array(l+1);o.getLines().setData(u,1);let f=0,h=0;for(let d=0;d<c+1;d++)h=d/c,p[f*3]=e.point1[0]+h*s[0],p[f*3+1]=e.point1[1]+h*s[1],p[f*3+2]=e.point1[2]+h*s[2],f++;f=0,u[0]=l;for(let d=0;d<l;d++)u[d+1]=d;n[0]=o}}const V7={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float64Array"};function s1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V7,a),V.obj(t,e),V.setGet(t,e,["resolution"]),V.setGetArray(t,e,["point1","point2"],3),V.algo(t,e,0,1),k7(t,e)}var A7={newInstance:V.newInstance(s1,"vtkLineSource"),extend:s1};const{vtkWarningMacro:B7}=V,U7=1e-6;function G7(t,e){e.classHierarchy.push("vtkPlaneSource"),t.requestData=(a,n)=>{const r=n[0],i=r?r.getPoints().getDataType():e.pointType,o=(r==null?void 0:r.initialize())||Xe.newInstance(),s=[],c=[];if(He(e.point1,e.origin,s),He(e.point2,e.origin,c),!t.updatePlane(s,c)){B7("Bad plane definition");return}const l=e.xResolution,p=e.yResolution,u=(l+1)*(p+1),f=l*p,h=V.newTypedArray(i,u*3);o.getPoints().setData(h,3);const d=new Uint32Array(5*f);o.getPolys().setData(d,1);const v=new Float32Array(u*3),m=pe.newInstance({numberOfComponents:3,values:v,name:"Normals"});o.getPointData().setNormals(m);const x=new Float32Array(u*2),y=pe.newInstance({numberOfComponents:2,values:x,name:"TextureCoordinates"});o.getPointData().setTCoords(y);const g=new Float32Array(2);let C=0;for(let S=0;S<p+1;S++){g[1]=S/p;for(let T=0;T<l+1;T++)g[0]=T/l,h[C*3]=e.origin[0]+g[0]*s[0]+g[1]*c[0],h[C*3+1]=e.origin[1]+g[0]*s[1]+g[1]*c[1],h[C*3+2]=e.origin[2]+g[0]*s[2]+g[1]*c[2],x[C*2]=g[0],x[C*2+1]=g[1],v[C*3]=e.normal[0],v[C*3+1]=e.normal[1],v[C*3+2]=e.normal[2],C++}C=0;for(let S=0;S<p;S++)for(let T=0;T<l;T++)d[C*5+0]=4,d[C*5+1]=T+S*(l+1),d[C*5+2]=d[C*5+1]+1,d[C*5+3]=d[C*5+1]+l+2,d[C*5+4]=d[C*5+1]+l+1,C++;n[0]=o},t.setNormal=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),Ke(a)!==0){const n=xe(e.normal,a);let r=0;const i=[];n<1&&(n<=-1?(r=Qe(180),He(e.point1,e.origin,i)):(et(e.normal,a,i),r=Math.acos(n)),t.rotate(r,i))}},t.rotate=(a,n)=>{if(Math.abs(a)<U7)return;const r=Te(new Float64Array(16)),i=[];su(i,e.center),Ye(r,r,e.center),mt(r,r,a,n),Ye(r,r,i),_e(e.origin,e.origin,r),_e(e.point1,e.point1,r),_e(e.point2,e.point2,r),bt.buildFromRadian().rotate(a,n).apply(e.normal),t.modified()},t.setCenter=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ma(a,e.center)){const n=[];He(e.point1,e.origin,n);const r=[];He(e.point2,e.origin,r);for(let i=0;i<3;i++)e.center[i]=a[i],e.origin[i]=e.center[i]-.5*(n[i]+r[i]),e.point1[i]=e.origin[i]+n[i],e.point2[i]=e.origin[i]+r[i];t.modified()}},t.setPoint1=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ma(a,e.point1)){const n=[],r=[];e.point1=[...a],He(e.point1,e.origin,n),He(e.point2,e.origin,r),t.updatePlane(n,r),t.modified()}},t.setPoint2=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ma(a,e.point2)){const n=[],r=[];e.point2=[...a],He(e.point1,e.origin,n),He(e.point2,e.origin,r),t.updatePlane(n,r),t.modified()}},t.updatePlane=(a,n)=>{for(let r=0;r<3;r++)e.center[r]=e.origin[r]+.5*(a[r]+n[r]);return et(a,n,e.normal),Ke(e.normal)!==0}}const I7={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float64Array"};function P7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I7,a),e.normal=[0,0,1],e.center=[0,0,0],V.obj(t,e),V.setGet(t,e,["xResolution","yResolution"]),V.setGetArray(t,e,["origin"],3),V.getArray(t,e,["point1","point2","normal","center"],3),V.algo(t,e,0,1),G7(t,e),t.setPoint1(e.point1),t.setPoint2(e.point2)}V.newInstance(P7,"vtkPlaneSource");function z7(t,e){e.classHierarchy.push("vtkPointSource"),t.requestData=(a,n)=>{const r=n[0],i=r?r.getPoints().getDataType():e.pointType,o=(r==null?void 0:r.initialize())||Xe.newInstance(),s=e.numberOfPoints,c=V.newTypedArray(i,s*3);o.getPoints().setData(c,3);const l=new Uint32Array(s+1);o.getVerts().setData(l,1);let p,u,f,h,d;for(let v=0;v<s;v++)p=1-2*qi(),u=Math.sqrt(1-p*p),f=e.radius*qi()**.33333333,h=f*u,d=2*Math.PI*qi(),c[v*3]=e.center[0]+h*Math.cos(d),c[v*3+1]=e.center[1]+h*Math.sin(d),c[v*3+2]=e.center[2]+f*p;l[0]=s;for(let v=0;v<s;v++)l[v+1]=v;n[0]=o}}const j7={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float64Array"};function W7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j7,a),V.obj(t,e),V.setGet(t,e,["numberOfPoints","radius"]),V.setGetArray(t,e,["center"],3),V.algo(t,e,0,1),z7(t,e)}V.newInstance(W7,"vtkPointSource");function $7(t,e){e.classHierarchy.push("vtkSphereSource"),t.requestData=(a,n)=>{let r=n[0];const i=r?r.getPoints().getDataType():e.pointType;r=(r==null?void 0:r.initialize())||Xe.newInstance();let o=0,{thetaResolution:s}=e,c=e.startTheta<e.endTheta?e.startTheta:e.endTheta;c*=Math.PI/180;let l=e.endTheta>e.startTheta?e.endTheta:e.startTheta;l*=Math.PI/180;let p=e.startPhi<e.endPhi?e.startPhi:e.endPhi;p*=Math.PI/180;let u=e.endPhi>e.startPhi?e.endPhi:e.startPhi;u*=Math.PI/180,Math.abs(c-l)<2*Math.PI&&++s;const f=(l-c)/e.thetaResolution,h=e.startPhi<=0?1:0,d=e.phiResolution+(e.endPhi>=180?-1:0),v=e.phiResolution*s+2,m=e.phiResolution*2*e.thetaResolution;let x=0,y=V.newTypedArray(i,v*3),g=new Float32Array(v*3),C=0,S=new Uint32Array(m*5);e.startPhi<=0&&(y[x*3+0]=e.center[0],y[x*3+1]=e.center[1],y[x*3+2]=e.center[2]+e.radius,g[x*3+0]=0,g[x*3+1]=0,g[x*3+2]=1,x++,o++),e.endPhi>=180&&(y[x*3+0]=e.center[0],y[x*3+1]=e.center[1],y[x*3+2]=e.center[2]-e.radius,g[x*3+0]=0,g[x*3+1]=0,g[x*3+2]=-1,x++,o++);const T=e.phiResolution-o,w=(u-p)/(e.phiResolution-1);for(let D=0;D<s;D++){const O=c+D*f;for(let M=h;M<d;M++){const N=p+M*w,R=e.radius*Math.sin(N);g[x*3+0]=R*Math.cos(O),g[x*3+1]=R*Math.sin(O),g[x*3+2]=e.radius*Math.cos(N),y[x*3+0]=g[x*3+0]+e.center[0],y[x*3+1]=g[x*3+1]+e.center[1],y[x*3+2]=g[x*3+2]+e.center[2];let B=Math.sqrt(g[x*3+0]*g[x*3+0]+g[x*3+1]*g[x*3+1]+g[x*3+2]*g[x*3+2]);B=B===0?1:B,g[x*3+0]/=B,g[x*3+1]/=B,g[x*3+2]/=B,x++}}const _=T*s;if(Math.abs(c-l)<2*Math.PI&&--s,e.startPhi<=0)for(let D=0;D<s;D++)S[C++]=3,S[C++]=T*D+o,S[C++]=T*(D+1)%_+o,S[C++]=0;if(e.endPhi>=180){const D=T-1+o;for(let O=0;O<s;O++)S[C++]=3,S[C++]=T*O+D,S[C++]=o-1,S[C++]=T*(O+1)%_+D}for(let D=0;D<s;D++)for(let O=0;O<T-1;O++){const M=T*D+O+o,N=M+1,R=(T*(D+1)+O)%_+o+1;e.latLongTessellation?(S[C++]=4,S[C++]=M,S[C++]=N,S[C++]=R,S[C++]=R-1):(S[C++]=3,S[C++]=M,S[C++]=N,S[C++]=R,S[C++]=3,S[C++]=M,S[C++]=R,S[C++]=R-1)}y=y.subarray(0,x*3),r.getPoints().setData(y,3),g=g.subarray(0,x*3);const E=pe.newInstance({name:"Normals",values:g,numberOfComponents:3});r.getPointData().setNormals(E),S=S.subarray(0,C),r.getPolys().setData(S,1),n[0]=r}}const H7={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function K7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,H7,a),V.obj(t,e),V.setGet(t,e,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),V.setGetArray(t,e,["center"],3),V.algo(t,e,0,1),$7(t,e)}V.newInstance(K7,"vtkSphereSource");const{vtkDebugMacro:Uo,vtkErrorMacro:X7}=V;function q7(t,e){e.classHierarchy.push("vtkWarpScalar"),t.requestData=(a,n)=>{const r=a[0];if(!r)return X7("Invalid or missing input"),1;const i=r.getPoints(),s=r.getPointData().getNormals(),c=t.getInputArrayToProcess(0);if(!i||!c)return Uo("No data to warp",!!i,!!c),n[0]=a[0],1;const l=i.getNumberOfPoints();let p=null;const u=[0,0,1];s&&!e.useNormal?(p=(S,T)=>[T.getData()[S*3],T.getData()[S*3+1],T.getData()[S*3+2]],Uo("Using data normals")):t.getXyPlane()?(p=(S,T)=>u,Uo("Using x-y plane normal")):(p=(S,T)=>e.normal,Uo("Using Normal instance variable"));const f=new Float32Array(l*3),h=i.getData();let d=0,v=[0,0,1],m=1;const x=c.getData(),y=c.getNumberOfComponents();for(let S=0;S<l;++S)d=S*3,v=p(S,s),e.xyPlane?m=h[d+2]:m=x[S*y],f[d]=h[d]+e.scaleFactor*m*v[0],f[d+1]=h[d+1]+e.scaleFactor*m*v[1],f[d+2]=h[d+2]+e.scaleFactor*m*v[2];const g=n[0]&&n[0]!==a[0]?n[0].initialize():wt({vtkClass:r.getClassName()});g.shallowCopy(r);const C=dn.newInstance();return C.setData(f,3),g.setPoints(C),n[0]=g,1}}const Y7={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};function J7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y7,a),V.obj(t,e),V.algo(t,e,1,1),V.setGet(t,e,["scaleFactor","useNormal","xyPlane"]),V.setGetArray(t,e,["normal"],3),q7(t,e)}V.newInstance(J7,"vtkWarpScalar");var Z7={VaryRadius:{VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},GenerateTCoords:{TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3}};const{VaryRadius:ei,GenerateTCoords:Lr}=Z7,{vtkDebugMacro:Q7,vtkErrorMacro:eC,vtkWarningMacro:ti}=V;function tC(t,e){e.classHierarchy.push("vtkTubeFilter");function a(c,l){let p=c;return e.sidesShareVertices?p+=e.numberOfSides*l:p+=2*e.numberOfSides*l,e.capping&&(p+=2*e.numberOfSides),p}function n(c,l,p){const u=l[p],f=c.slice(3*u,3*(u+1));let h=p+1;for(;h<l.length;){const d=l[h],v=c.slice(3*d,3*(d+1));if(f!==v)return h-1;++h}return l.length}function r(c,l,p){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=[0,0,1];const h=l;let d=h[0];for(let v=0;v<h.length;v+=d+1)if(d=h[v],d===1)p.setTuple(h[v+1],f);else if(d>1){let m=0,x=[0,0,0];const y=[0,0,0],g=h.slice(v+1,v+1+d);if(m=n(c,g,0),m!==d){let C=g[m],S=c.slice(3*C,3*(C+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));if(x=w.map((E,D)=>E-S[D]),Ke(x),u)f=u;else{for(;++m<d;)if(m=n(c,g,m),m!==d){C=g[m],S=c.slice(3*C,3*(C+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));for(let D=0;D<3;++D)y[D]=w[D]-S[D];Ke(y);const E=[0,0,0];if(et(x,y,E),St(E)>.001){f=E,x=y;break}}if(m>=d){for(let E=0;E<3;++E)if(x[E]!==0){f[(E+2)%3]=0,f[(E+1)%3]=1,f[E]=-x[(E+1)%3]/x[E];break}}}Ke(f);let _=0;for(;++m<d&&(m=n(c,g,m),m!==d);){C=g[m],S=c.slice(3*C,3*(C+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));for(let D=0;D<3;++D)y[D]=w[D]-S[D];Ke(y);const E=[0,0,0];if(et(x,f,E),Ke(E)!==0){const D=[0,0,0];if(et(y,x,D),Ke(D)!==0){const O=xe(D,f);let M=1-O*O;M>0?M=Math.sqrt(M):M=0;const N=[0,0,0];for(let R=0;R<3;++R)N[R]=y[R]+x[R];Ke(N),et(N,D,E),et(x,D,N),xe(f,N)*xe(E,N)<0&&(M*=-1);for(let R=_;R<m;++R)p.setTuple(g[R],f);_=m,x=y,f=O*D+M*E}}}for(let E=_;E<d;++E)p.setTuple(g[E],f)}else for(let C=0;C<d;++C)p.setTuple(g[C],f)}return 1}function i(c,l,p,u,f,h,d,v,m,x,y,g,C,S){const T=[0,0,0],w=[0,0,0],_=[0,0,0],E=[0,0,0];let D=[0,0,0],O=[0,0,0],M=[0,0,0],N=[0,0,0];const R=[0,0,0],B=[0,0,0],I=[0,0,0];let P=1,L=c;const k=[];for(let A=0;A<l;++A){if(A===0){D=u.slice(3*p[0],3*(p[0]+1)),O=u.slice(3*p[1],3*(p[1]+1));for(let j=0;j<3;++j)T[j]=O[j]-D[j],w[j]=T[j],_[j]=-w[j];Ke(_)}else if(A===l-1){for(let j=0;j<3;++j)w[j]=T[j],D[j]=O[j],E[j]=T[j];Ke(E)}else{for(let j=0;j<3;++j)D[j]=O[j];O=u.slice(3*p[A+1],3*(p[A+1]+1));for(let j=0;j<3;++j)w[j]=T[j],T[j]=O[j]-D[j]}if(Ke(T)===0)return ti("Coincident points!"),0;for(let j=0;j<3;++j)M[j]=(w[j]+T[j])/2;if(N=C.slice(3*p[A],3*(p[A]+1)),Ke(M)===0&&(et(w,N,M),Ke(M)===0&&Q7("Using alternate bevel vector")),et(M,N,R),Ke(R)===0){let j="Bad normal: s = ";return j+=`${M[0]},  ${M[1]}, ${M[2]}`,j+=` n = ${N[0]},  ${N[1]}, ${N[2]}`,ti(j),0}if(et(R,M,B),Ke(B),m&&e.varyRadius===ei.VARY_RADIUS_BY_SCALAR)P=1+(e.radiusFactor-1)*(m.getComponent(p[A],0)-x[0])/(x[1]-x[0]);else if(y&&e.varyRadius===ei.VARY_RADIUS_BY_VECTOR)P=Math.sqrt(g/St(y.getTuple(p[A],k))),P>e.radiusFactor&&(P=e.radiusFactor);else if(m&&e.varyRadius===ei.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&(P=m.getComponent(p[A],0),P<0))return ti("Scalar value less than zero, skipping line"),0;if(e.sidesShareVertices)for(let j=0;j<e.numberOfSides;++j){for(let H=0;H<3;++H)I[H]=R[H]*Math.cos(j*S)+B[H]*Math.sin(j*S),M[H]=D[H]+e.radius*P*I[H],f[3*L+H]=M[H],v[3*L+H]=I[H];d.passData(h,p[A],L),L++}else{const j=[0,0,0],H=[0,0,0];for(let K=0;K<e.numberOfSides;++K){for(let Y=0;Y<3;++Y)I[Y]=R[Y]*Math.cos(K*S)+B[Y]*Math.sin(K*S),j[Y]=R[Y]*Math.cos((K-.5)*S)+B[Y]*Math.sin((K-.5)*S),H[Y]=R[Y]*Math.cos((K+.5)*S)+B[Y]*Math.sin((K+.5)*S),M[Y]=D[Y]+e.radius*P*I[Y],f[3*L+Y]=M[Y],v[3*L+Y]=j[Y],f[3*(L+1)+Y]=M[Y],v[3*(L+1)+Y]=H[Y];d.passData(h,p[A],L+1),L+=2}}}if(e.capping){let A=e.numberOfSides,j=1;e.sidesShareVertices||(A=2*e.numberOfSides,j=2);for(let K=0;K<A;K+=j){M=f.slice(3*(c+K),3*(c+K+1));for(let Y=0;Y<3;++Y)f[3*L+Y]=M[Y],v[3*L+Y]=_[Y];d.passData(h,p[0],L),L++}let H=c+(l-1)*e.numberOfSides;e.sidesShareVertices||(H=c+2*(l-1)*e.numberOfSides);for(let K=0;K<A;K+=j){M=f.slice(3*(H+K),3*(H+K+1));for(let Y=0;Y<3;++Y)f[3*L+Y]=M[Y],v[3*L+Y]=E[Y];d.passData(h,p[l-1],L),L++}}return 1}function o(c,l,p,u,f,h,d){let v=0,m=0,x=0,y=u,g=0;const C=d.getData();let S=0;for(;g<C.length&&S!==u;)g+=C[g]+1,S++;if(e.sidesShareVertices)for(let T=c;T<e.numberOfSides+c;T+=e.onRatio){v=T%e.numberOfSides,m=(T+1)%e.numberOfSides,C[g++]=l*2;for(let w=0;w<l;++w)x=w*e.numberOfSides,C[g++]=c+m+x,C[g++]=c+v+x;h.passData(f,p,y++)}else for(let T=c;T<e.numberOfSides+c;T+=e.onRatio){v=2*(T%e.numberOfSides)+1,m=2*((T+1)%e.numberOfSides),C[g]=l*2,g++;for(let w=0;w<l;++w)x=w*2*e.numberOfSides,C[g++]=c+m+x,C[g++]=c+v+x;h.passData(f,p,y++)}if(e.capping){let T=c+l*e.numberOfSides,w=0;e.sidesShareVertices||(T=c+2*l*e.numberOfSides),C[g++]=e.numberOfSides,C[g++]=T,C[g++]=T+1;let _=0;for(v=e.numberOfSides-1,m=2,_=0;_<e.numberOfSides-2;++_)_%2?(w=T+m,C[g++]=w,m++):(w=T+v,C[g++]=w,v--);for(h.passData(f,p,y++),T+=e.numberOfSides,C[g++]=e.numberOfSides,C[g++]=T,C[g++]=T+e.numberOfSides-1,v=e.numberOfSides-2,m=1,_=0;_<e.numberOfSides-2;++_)_%2?(w=T+v,C[g++]=w,v--):(w=T+m,C[g++]=w,m++);h.passData(f,p,y++)}return y}function s(c,l,p,u,f,h){let d=e.numberOfSides;e.sidesShareVertices||(d=2*e.numberOfSides);let v=0,m=0,x=0;const y=f.getData();if(e.generateTCoords===Lr.TCOORDS_FROM_SCALARS){m=y[p[0]];for(let g=0;g<l;++g){x=y[p[g]],v=(x-m)/e.textureLength;for(let C=0;C<d;++C){const S=C/(d-1),T=2*(c+g*d+C);h[T]=v,h[T+1]=S}}}else if(e.generateTCoords===Lr.TCOORDS_FROM_LENGTH){let g=0;const C=u.slice(3*p[0],3*(p[0]+1));for(let S=0;S<l;++S){const T=u.slice(3*p[S],3*(p[S]+1));g+=Math.sqrt(dt(T,C)),v=g/e.textureLength;for(let w=0;w<d;++w){const _=w/(d-1),E=2*(c+S*d+w);h[E]=v,h[E+1]=_}for(let w=0;w<3;++w)C[w]=T[w]}}else if(e.generateTCoords===Lr.TCOORDS_FROM_NORMALIZED_LENGTH){let g=0,C=0,S=u.slice(3*p[0],3*(p[0]+1));for(let T=0;T<l;++T){const w=u.slice(3*p[T],3*(p[T]+1));C+=Math.sqrt(dt(w,S));for(let _=0;_<3;++_)S[_]=w[_]}S=u.slice(3*p[0],3*(p[0]+1));for(let T=0;T<l;++T){const w=u.slice(3*p[T],3*(p[T]+1));g+=Math.sqrt(dt(w,S)),v=g/C;for(let _=0;_<d;++_){const E=_/(d-1),D=2*(c+T*d+_);h[D]=v,h[D+1]=E}for(let _=0;_<3;++_)S[_]=w[_]}}if(e.capping){const g=c+l*d;for(let C=0;C<e.numberOfSides;++C){const S=2*(g+C);h[S]=0,h[S+1]=0}for(let C=0;C<e.numberOfSides;++C){const S=2*(g+e.numberOfSides+C);h[S]=0,h[S+1]=0}}}t.requestData=(c,l)=>{var b;const p=((b=l[0])==null?void 0:b.initialize())||Xe.newInstance();l[0]=p;const u=c[0];if(!u){eC("Invalid or missing input");return}const f=u.getPoints();if(!f)return;const h=f.getNumberOfPoints();if(h<1)return;const d=u.getLines();if(!d||d.getNumberOfCells()<1)return;let m=0,x=0;const y=d.getData();let g=y[0];for(let G=0;G<y.length;G+=g+1)g=y[G],m=a(m,g),x+=(2*g+1)*Math.ceil(e.numberOfSides/e.onRatio),e.capping&&(x+=2*(e.numberOfSides+1));let C=f.getDataType();e.outputPointsPrecision===hr.SINGLE?C=Ne.FLOAT:e.outputPointsPrecision===hr.DOUBLE&&(C=Ne.DOUBLE);const S=dn.newInstance({dataType:C,size:m*3,numberOfComponents:3}),T=3*m,w=new Float32Array(T),_=pe.newInstance({numberOfComponents:3,values:w,name:"TubeNormals"}),E=new Uint32Array(x),D=jn.newInstance({values:E});let O=0,M=u.getPointData().getNormals(),N=null,R=!1;(!M||e.useDefaultNormal)&&(N=new Float32Array(3*h),M=pe.newInstance({numberOfComponents:3,values:N,name:"Normals"}),e.useDefaultNormal?N=N.map((G,U)=>{const z=U%3;return e.defaultNormal[z]}):R=!0);const B=u.getPointData().getNumberOfArrays();let I=null,P=null;for(let G=0;G<B;G++)I=u.getPointData().getArrayByIndex(G),P=pe.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:m*I.getNumberOfComponents()}),p.getPointData().addArray(P);let L=d.getNumberOfCells()*e.numberOfSides;e.capping&&(L+=2);const k=u.getCellData().getNumberOfArrays();for(let G=0;G<k;G++)I=u.getCellData().getArrayByIndex(G),P=pe.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:L*I.getNumberOfComponents()}),p.getCellData().addArray(P);const A=t.getInputArrayToProcess(0);let j=null,H=[];A&&(j=pe.newInstance({name:A.getName(),dataType:A.getDataType(),numberOfComponents:A.getNumberOfComponents(),size:m*A.getNumberOfComponents()}),H=A.getRange(),H[1]-H[0]===0&&(e.varyRadius===ei.VARY_RADIUS_BY_SCALAR&&ti("Scalar range is zero!"),H[1]=H[0]+1));const K=t.getInputArrayToProcess(1);let Y=0;K&&(Y=K.getMaxNorm());const q=p.getCellData();q.copyNormalsOff(),q.passData(u.getCellData());const Z=p.getPointData();Z.getNormals()!==null&&Z.copyNormalsOff(),A&&j&&Z.setScalars(j);let re=null;if(e.generateTCoords===Lr.TCOORDS_FROM_SCALARS&&A||e.generateTCoords===Lr.TCOORDS_FROM_LENGTH||e.generateTCoords===Lr.TCOORDS_FROM_NORMALIZED_LENGTH){const G=new Float32Array(2*m);re=pe.newInstance({numberOfComponents:2,values:G,name:"TCoords"}),Z.copyTCoordsOff()}Z.passData(u.getPointData());const ae=2*Math.PI/e.numberOfSides;g=y[0];let ee=0,F=u.getVerts().getNumberOfCells();for(let G=0;G<y.length;G+=g+1){g=y[G];const U=y.slice(G+1,G+1+g);if(g>1&&R){const z=y.slice(G,G+g+1);r(f.getData(),z,M)}i(ee,g,U,f.getData(),S.getData(),u.getPointData(),Z,w,A,H,K,Y,N,ae)?(O=o(ee,g,F,O,u.getCellData(),q,D),re&&s(ee,g,U,f.getData(),A,re.getData())):ti("Could not generate points"),ee=a(ee,g),F++}p.setPoints(S),p.setStrips(D),p.setPointData(Z),Z.setNormals(_)}}const nC={outputPointsPrecision:hr.DEFAULT,radius:.5,varyRadius:ei.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:Lr.TCOORDS_OFF,textureLength:1};function rC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nC,a),V.setGet(t,e,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),V.obj(t,e),V.algo(t,e,1,1),tC(t,e)}V.newInstance(rC,"vtkTubeFilter");function c1(t){return new TextDecoder("latin1").decode(t)}function aC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const n=c1(t),r=e.exec(n);if(!r)return{text:n};const i=r.index+r[0].length,o=n.substring(0,i);let s=null;const c=a?a.exec(n):null;if(c){const l=n.substr(c.index);s={text:o+l,binaryBuffer:t.slice(i,c.index)}}else s={text:o,binaryBuffer:t.slice(i)};return s}var ni={arrayBufferToString:c1,extractBinary:aC};const{vtkErrorMacro:u1,vtkDebugMacro:iC}=V,ic=()=>(u1("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let ca=0;function Go(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=new XMLHttpRequest;return n.open(t,e,!0),a.headers&&Object.entries(a.headers).forEach(r=>{let[i,o]=r;return n.setRequestHeader(i,o)}),a.progressCallback&&n.addEventListener("progress",a.progressCallback),n}function oC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((a,n)=>{const r=Go("GET",t,e);r.onreadystatechange=i=>{r.readyState===4&&(r.status===200||r.status===0?a(r.response):n({xhr:r,e:i}))},r.responseType="arraybuffer",r.send()})}function sC(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n&&n.compression?ic():a.ref&&!a.ref.pending?new Promise((r,i)=>{const o=[e,a.ref.basepath,a.ref.id].join("/"),s=Go("GET",o,n);s.onreadystatechange=c=>{s.readyState===1&&(a.ref.pending=!0,++ca===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),s.readyState===4&&(a.ref.pending=!1,s.status===200||s.status===0?(a.buffer=s.response,a.ref.encode==="JSON"?a.values=JSON.parse(a.buffer):(Nn.ENDIANNESS!==a.ref.encode&&Nn.ENDIANNESS&&(iC(`Swap bytes of ${a.name}`),Nn.swapBytes(a.buffer,lo[a.dataType])),a.values=V.newTypedArray(a.dataType,a.buffer)),a.values.length!==a.size&&u1(`Error in FetchArray: ${a.name}, does not have the proper array size. Got ${a.values.length}, instead of ${a.size}`),delete a.ref,--ca===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),r(a)):i({xhr:s,e:c}))},s.responseType=a.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(a)}function cC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression?ic():new Promise((n,r)=>{const i=Go("GET",e,a);i.onreadystatechange=o=>{i.readyState===1&&++ca===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ca===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?n(JSON.parse(i.responseText)):r({xhr:i,e:o}))},i.responseType="text",i.send()})}function uC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression?ic():new Promise((n,r)=>{const i=Go("GET",e,a);i.onreadystatechange=o=>{i.readyState===1&&++ca===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ca===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?n(i.responseText):r({xhr:i,e:o}))},i.responseType="text",i.send()})}function lC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=new Image;a.crossOrigin&&(i.crossOrigin=a.crossOrigin),i.onload=()=>n(i),i.onerror=r,i.src=e})}const fC={fetchArray:sC,fetchJSON:cC,fetchText:uC,fetchBinary:oC,fetchImage:lC};n1("http")||Ao("http",t=>fC);const oc={ASCII:"ascii",BINARY_BIG_ENDIAN:"binary_big_endian",BINARY_LITTLE_ENDIAN:"binary_little_endian"},l1={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},f1={patternHeader:/ply([\s\S]*)end_header\r?\n/,patternBody:/end_header\s([\s\S]*)$/};function p1(t){let e="",a=0;const n=f1.patternHeader.exec(t);n!==null&&(e=n[1],a=n[0].length);const r={comments:[],elements:[],headerLength:a},i=e.split(`
`);let o,s,c;for(let l=0;l<i.length;l++){let p=i[l];if(p=p.trim(),p!==""){let u;switch(c=p.split(/\s+/),s=c.shift(),p=c.join(" "),s){case"format":r.format=c[0],r.version=c[1];break;case"comment":r.comments.push(p);break;case"element":o!==void 0&&r.elements.push(o),o={},o.name=c[0],o.count=parseInt(c[1],10),o.properties=[];break;case"property":u={type:c[0]},u.type==="list"?(u.name=c[3],u.countType=c[1],u.itemType=c[2]):u.name=c[1],u.name in l1&&(u.name=l1[u.name]),o.properties.push(u);break;case"obj_info":r.objInfo=p;break;default:console.warn("unhandled",s,c);break}}}return o!==void 0&&r.elements.push(o),r}function h1(t,e,a,n){const r=e.find(g=>g.name==="vertex"),i=e.find(g=>g.name==="face");let o=0,s=0;r&&(o=r.count),i&&(s=i.count);let c=new Float32Array(o*3),l=new Uint8Array(o*3),p=new Float32Array(o*2),u=new Float32Array(o*3);const f=t.colors.length>0,h=t.uvs.length>0,d=t.normals.length>0,v=t.faceVertexUvs.length>0,m=new Map;let x=o;for(let g=0;g<o;g++){let C=g*3+0,S=g*3+1;const T=g*3+2;c[C]=t.vertices[C],c[S]=t.vertices[S],c[T]=t.vertices[T],f&&(l[C]=t.colors[C],l[S]=t.colors[S],l[T]=t.colors[T]),h?(C=g*2+0,S=g*2+1,p[C]=t.uvs[C],p[S]=t.uvs[S]):(p[g*2]=-1,p[g*2+1]=-1),d&&(u[C]=t.normals[C],u[S]=t.normals[S],u[T]=t.normals[T])}if(v&&!h&&s>0){let g=0,C=0;if(n){const S=[],T=[],w=[],_=[];for(let E=0;E<s;++E){const D=t.indices[g++],O=t.faceVertexUvs[C++];if(O&&D*2===O.length)for(let M=0;M<D;++M){const N=t.indices[g+M],R=[O[M*2],O[M*2+1]],B=[p[N*2],p[N*2+1]];if(B[0]===-1){p[N*2]=R[0],p[N*2+1]=R[1];const I=`${R[0]},${R[1]}`;m.has(I)||m.set(I,[]),m.get(I).push(N)}else if(Math.abs(B[0]-R[0])>a||Math.abs(B[1]-R[1])>a){const P=`${R[0]},${R[1]}`;let L=-1;if(m.has(P)){const k=m.get(P);for(let A=0,j=k.length;A<j;A++){const H=k[A];if(Math.abs(c[H*3]-c[N*3])<=a&&Math.abs(c[H*3+1]-c[N*3+1])<=a&&Math.abs(c[H*3+2]-c[N*3+2])<=a){L=H;break}}}L===-1?(S.push(c[N*3],c[N*3+1],c[N*3+2]),f&&T.push(l[N*3],l[N*3+1],l[N*3+2]),d&&w.push(u[N*3],u[N*3+1],u[N*3+2]),_.push(R[0],R[1]),m.has(P)||m.set(P,[]),m.get(P).push(x),t.indices[g+M]=x,x++):t.indices[g+M]=L}}g+=D}if(S.length>0){const E=o+S.length/3,D=new Float32Array(E*3),O=new Float32Array(E*2),M=f?new Uint8Array(E*3):null,N=d?new Float32Array(E*3):null;D.set(c),O.set(p),f&&M&&M.set(l),d&&N&&N.set(u),D.set(S,o*3),O.set(_,o*2),f&&M&&M.set(T,o*3),d&&N&&N.set(w,o*3),c=D,p=O,f&&(l=M),d&&(u=N)}}else for(let S=0;S<s;++S){const T=t.indices[g++],w=t.faceVertexUvs[C++];if(w&&T*2===w.length)for(let _=0;_<T;++_){const E=t.indices[g++];p[E*2]=w[_*2],p[E*2+1]=w[_*2+1]}else g+=T}}const y=Xe.newInstance();if(y.getPoints().setData(c,3),s>0)y.getPolys().setData(Uint32Array.from(t.indices));else{const g=new Uint32Array(o*2);for(let C=0;C<o;C++)g[C*2]=1,g[C*2+1]=C;y.getVerts().setData(g)}if(f&&y.getPointData().setScalars(pe.newInstance({numberOfComponents:3,values:l,name:"RGB"})),h||v){const g=pe.newInstance({numberOfComponents:2,values:p,name:"TextureCoordinates"}),C=y.getPointData();C.addArray(g),C.setActiveTCoords(g.getName())}return d&&y.getPointData().setNormals(pe.newInstance({numberOfComponents:3,name:"Normals",values:u})),y}function sc(t,e){let a;switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":a=parseInt(t,10);break;case"float":case"double":case"float32":case"float64":a=parseFloat(t);break;default:console.log("Unsupported type");break}return a}function pC(t,e){const a=e.split(/\s+/),n={};for(let r=0;r<t.length;r++)if(t[r].type==="list"){const i=[],o=sc(a.shift(),t[r].countType);for(let s=0;s<o;s++)i.push(sc(a.shift(),t[r].itemType));n[t[r].name]=i}else n[t[r].name]=sc(a.shift(),t[r].type);return n}function g1(t,e,a){if(e==="vertex")t.vertices.push(a.x,a.y,a.z),"nx"in a&&"ny"in a&&"nz"in a&&t.normals.push(a.nx,a.ny,a.nz),"s"in a&&"t"in a?t.uvs.push(a.s,a.t):"u"in a&&"v"in a?t.uvs.push(a.u,a.v):"texture_u"in a&&"texture_v"in a&&t.uvs.push(a.texture_u,a.texture_v),"red"in a&&"green"in a&&"blue"in a&&t.colors.push(a.red,a.green,a.blue);else if(e==="face"){const n=a.vertex_indices||a.vertex_index,r=a.texcoord;n&&n.length>0&&(t.indices.push(n.length),n.forEach((i,o)=>{t.indices.push(i)})),t.faceVertexUvs.push(r)}}function cc(t,e,a,n){let r;switch(a){case"int8":case"char":r=[t.getInt8(e),1];break;case"uint8":case"uchar":r=[t.getUint8(e),1];break;case"int16":case"short":r=[t.getInt16(e,n),2];break;case"uint16":case"ushort":r=[t.getUint16(e,n),2];break;case"int32":case"int":r=[t.getInt32(e,n),4];break;case"uint32":case"uint":r=[t.getUint32(e,n),4];break;case"float32":case"float":r=[t.getFloat32(e,n),4];break;case"float64":case"double":r=[t.getFloat64(e,n),8];break;default:console.log("Unsupported type");break}return r}function hC(t,e,a,n){const r={};let i,o=0;for(let s=0;s<a.length;s++)if(a[s].type==="list"){const c=[];i=cc(t,e+o,a[s].countType,n);const l=i[0];o+=i[1];for(let p=0;p<l;p++)i=cc(t,e+o,a[s].itemType,n),c.push(i[0]),o+=i[1];r[a[s].name]=c}else i=cc(t,e+o,a[s].type,n),r[a[s].name]=i[0],o+=i[1];return[r,o]}function gC(t,e){e.classHierarchy.push("vtkPLYReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{compression:i,progressCallback:o}=e;return r.binary?e.dataAccessHelper.fetchBinary(n,{compression:i,progressCallback:o}):e.dataAccessHelper.fetchText(t,n,{compression:i,progressCallback:o})}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=n;const i=n.split("/");return i.pop(),e.baseURL=i.join("/"),e.compression=r.compression,t.loadData({progressCallback:r.progressCallback,binary:!!r.binary})},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=a(e.url,n);return r.then(t.parse),r},t.parse=n=>{typeof n=="string"?t.parseAsText(n):t.parseAsArrayBuffer(n)},t.parseAsArrayBuffer=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;let r=n;n instanceof ArrayBuffer&&(r=ni.arrayBufferToString(n));const i=p1(r);if(!(i.format!==oc.ASCII)){t.parseAsText(r);return}e.parseData=n;const s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=i.format===oc.BINARY_LITTLE_ENDIAN,l=n instanceof ArrayBuffer?n:n.buffer,p=new DataView(l,i.headerLength);let u,f=0;for(let d=0;d<i.elements.length;d++)for(let v=0;v<i.elements[d].count;v++){u=hC(p,f,i.elements[d].properties,c),f+=u[1];const m=u[0];g1(s,i.elements[d].name,m)}const h=h1(s,i.elements,e.faceTextureTolerance,e.duplicatePointsForFaceTexture);e.output[0]=h},t.parseAsText=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;e.parseData=n;let r=n;n instanceof ArrayBuffer&&(r=ni.arrayBufferToString(n));const i=p1(r);if(i.format!==oc.ASCII){t.parseAsArrayBuffer(n);return}const s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=f1.patternBody.exec(r);let l="";c!==null&&(l=c[1]);const p=l.split(`
`);let u=0,f=0;for(let d=0;d<p.length;d++){let v=p[d];if(v=v.trim(),v!==""){f>=i.elements[u].count&&(u++,f=0);const m=pC(i.elements[u].properties,v);g1(s,i.elements[u].name,m),f++}}const h=h1(s,i.elements,e.faceTextureTolerance,e.duplicatePointsForFaceTexture);e.output[0]=h},t.requestData=(n,r)=>{t.parse(e.parseData)}}const dC={faceTextureTolerance:1e-6,duplicatePointsForFaceTexture:!0};function vC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dC,a),V.obj(t,e),V.get(t,e,["url","baseURL","duplicatePointsForFaceTexture","faceTextureTolerance"]),V.setGet(t,e,["dataAccessHelper"]),V.algo(t,e,0,1),gC(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}V.newInstance(vC,"vtkPLYReader");const{vtkErrorMacro:uc}=V;function yC(t){const a=t.split(" ").filter(r=>r.indexOf("=")>-1),n={};for(let r=0;r<a.length;++r){const o=a[r].split("=");o.length===2&&(n[o[0]]=o[1])}return n}function d1(t,e){for(let a=0;a<t.length;a++)e.push(t[a])}function mC(t,e,a,n,r){const i=t[e];if(i===void 0)return-1;if(i.indexOf("endfacet")!==-1||i.indexOf("facet")===-1)return e+1;let o=0,s=2;const c=a.length/3,l=i.split(/[ \t]+/).filter(p=>p).slice(-3).map(Number);for(d1(l,r);t[e+s].indexOf("vertex")!==-1;){const u=t[e+s].split(/[ \t]+/).filter(f=>f).slice(-3).map(Number);d1(u,a),o++,s++}n.push(o);for(let p=0;p<o;p++)n.push(c+p);for(;t[e+s]&&t[e+s].indexOf("endfacet")!==-1;)s++;return e+s+2}function xC(t,e){e.classHierarchy.push("vtkSTLReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=i.compression!==void 0?i.compression:e.compression,s=i.progressCallback!==void 0?i.progressCallback:e.progressCallback;return i.binary?e.dataAccessHelper.fetchBinary(r,{compression:o,progressCallback:s}):e.dataAccessHelper.fetchText(t,r,{compression:o,progressCallback:s})}function n(r){const i=e.output[0],o=i.getPoints().getData(),s=i.getPolys().getData();if(!o||!s){console.warn("No valid polydata.");return}const c=new Map,l=new Map;let p=0,u=!1;for(let f=0;f<o.length;f+=3){const h=(o[f]*10**r).toFixed(0),d=(o[f+1]*10**r).toFixed(0),v=(o[f+2]*10**r).toFixed(0),m=`${h},${d},${v}`;c.get(m)!==void 0?(l.set(f/3,c.get(m)),u=!0):(l.set(f/3,p),c.set(m,p),p++)}if(u){const f=new Float32Array(c.size*3),h=Array.from(c.keys());for(let v=0;v<h.length;v++){const m=h[v],x=c.get(m)*3,y=m.split(",").map(g=>+g*10**-r);f[x]=y[0],f[x+1]=y[1],f[x+2]=y[2]}const d=new Int32Array(s.length);for(let v=0;v<s.length;v+=4)d[v]=3,d[v+1]=l.get(s[v+1]),d[v+2]=l.get(s[v+2]),d[v+3]=l.get(s[v+3]);i.getPoints().setData(f),i.getPolys().setData(d),i.modified()}}t.setUrl=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=r;const o=r.split("/");return o.pop(),e.baseURL=o.join("/"),t.loadData(i)},t.loadData=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=a(e.url,r);return i.then(t.parse),i},t.parse=r=>{typeof r=="string"?t.parseAsText(r):t.parseAsArrayBuffer(r)},t.parseAsArrayBuffer=r=>{if(!r)return;if(r!==e.parseData)t.modified();else return;e.parseData=r;let i=!1;if(i=84+new DataView(r,0,80+4).getUint32(80,!0)*50===r.byteLength,!i){t.parseAsText(ni.arrayBufferToString(r));return}const c=r.slice(0,80),l=ni.arrayBufferToString(c),p=yC(l),u=new DataView(r,84),f=(r.byteLength-84)/50,h=new Float32Array(f*9),d=new Float32Array(f*3),v=new Uint32Array(f*4),m=new Uint16Array(f);let x=0;for(let C=0;C<f;C++){const S=C*50;d[C*3+0]=u.getFloat32(S+0,!0),d[C*3+1]=u.getFloat32(S+4,!0),d[C*3+2]=u.getFloat32(S+8,!0),h[C*9+0]=u.getFloat32(S+12,!0),h[C*9+1]=u.getFloat32(S+16,!0),h[C*9+2]=u.getFloat32(S+20,!0),h[C*9+3]=u.getFloat32(S+24,!0),h[C*9+4]=u.getFloat32(S+28,!0),h[C*9+5]=u.getFloat32(S+32,!0),h[C*9+6]=u.getFloat32(S+36,!0),h[C*9+7]=u.getFloat32(S+40,!0),h[C*9+8]=u.getFloat32(S+44,!0),v[x++]=3,v[x++]=C*3+0,v[x++]=C*3+1,v[x++]=C*3+2,m[C]=u.getUint16(S+48,!0)}const y="SPACE";if(y in p&&p[y]!=="LPS"){const C=p[y],S=new Float32Array(16);switch(S[15]=1,C[0]){case"L":S[0]=1;break;case"R":S[0]=-1;break;default:uc(`Can not convert STL file from ${C} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(C[1]){case"P":S[5]=1;break;case"A":S[5]=-1;break;default:uc(`Can not convert STL file from ${C} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(C[2]){case"S":S[10]=1;break;case"I":S[10]=-1;break;default:uc(`Can not convert STL file from ${C} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}bt.buildFromDegree().setMatrix(S).apply(h).apply(d)}const g=Xe.newInstance();g.getPoints().setData(h,3),g.getPolys().setData(v),g.getCellData().setScalars(pe.newInstance({name:"Attribute",values:m})),g.getCellData().setNormals(pe.newInstance({name:"Normals",values:d,numberOfComponents:3})),e.output[0]=g,e.removeDuplicateVertices>=0&&n(e.removeDuplicateVertices)},t.parseAsText=r=>{if(!r)return;if(r!==e.parseData)t.modified();else return;e.parseData=r;const i=r.split(`
`);let o=1;const s=[],c=[],l=[];for(;o!==-1;)o=mC(i,o,s,c,l);const p=Xe.newInstance();p.getPoints().setData(Float32Array.from(s),3),p.getPolys().setData(Uint32Array.from(c)),p.getCellData().setNormals(pe.newInstance({name:"Normals",values:Float32Array.from(l),numberOfComponents:3})),e.output[0]=p,e.removeDuplicateVertices>=0&&n(e.removeDuplicateVertices)},t.requestData=(r,i)=>{t.parse(e.parseData)}}const CC={removeDuplicateVertices:-1};function SC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CC,a),V.obj(t,e),V.get(t,e,["url","baseURL"]),V.setGet(t,e,["dataAccessHelper","removeDuplicateVertices"]),V.algo(t,e,0,1),xC(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}V.newInstance(SC,"vtkSTLReader");function TC(t,e){e.classHierarchy.push("vtkElevationReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(n,r){return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=(n,r)=>(e.url=n,t.loadData(r)),t.loadData=n=>a(e.url,n).then(r=>(t.parseAsText(r),!0)),t.parseAsText=n=>{e.csv=n,e.elevation=[],e.csv.split(`
`).forEach((i,o)=>{e.elevation.push(i.split(",").map(s=>Number(s)))}),t.modified()},t.requestData=(n,r)=>{const i=Xe.newInstance();if(i.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),e.elevation){const o=e.elevation.length,s=e.elevation[0].length,c=i.getPoints();c.setNumberOfPoints(s*o,3);const l=c.getData(),p=jn.newInstance({size:5*(s-1)*(o-1)});i.setPolys(p);const u=p.getData();let f=0;const h=new Float32Array(s*o*2),d=pe.newInstance({numberOfComponents:2,values:h,name:"TextureCoordinates"});i.getPointData().setTCoords(d);for(let v=0;v<o;v++)for(let m=0;m<s;m++){const x=v*s+m,y=3*x;l[y+0]=e.origin[0]+m*e.xSpacing*e.xDirection,l[y+1]=e.origin[1]+v*e.ySpacing*e.yDirection,l[y+2]=e.origin[2]+e.elevation[v][m]*e.zScaling,h[x*2]=m/(s-1),h[x*2+1]=1-v/(o-1),m>0&&v>0&&(u[f++]=4,u[f++]=x,u[f++]=x-1,u[f++]=x-1-s,u[f++]=x-s)}}e.output[0]=i},t.isBusy=()=>!!e.requestCount}const wC={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function _C(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wC,a),V.obj(t,e),V.get(t,e,["url"]),V.setGet(t,e,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),V.algo(t,e,0,1),V.event(t,e,"busy"),TC(t,e)}V.newInstance(_C,"vtkElevationReader");const Me={};function lc(t,e,a,n,r){for(let i=0;i<r;i++)a[n+i]=t[e+i]}function EC(t){Me.splitOn=t,Me.pieces=[],Me.v=[],Me.vt=[],Me.vn=[],Me.f=[[]],Me.size=0}function DC(t){const e=t.split("/").map(i=>Number(i));let a=e[0]-1;a=a<0?a+1+Me.v.length/3:a;let n=e[1]?e[1]-1:a;n=n<0?n+1+Me.vt.length/2:n;let r=e[2]?e[2]-1:a;return r=r<0?r+1+Me.vn.length/3:r,[a,n,r]}function OC(t){if(t[0]==="#")return;const e=t.split(/[ \t]+/);if(e[0]===Me.splitOn)e.shift(),Me.pieces.push(e.join(" ").trim()),Me.f.push([]),Me.size++;else if(e[0]==="v")Me.v.push(Number(e[1])),Me.v.push(Number(e[2])),Me.v.push(Number(e[3]));else if(e[0]==="vt")Me.vt.push(Number(e[1])),Me.vt.push(Number(e[2]));else if(e[0]==="vn")Me.vn.push(Number(e[1])),Me.vn.push(Number(e[2])),Me.vn.push(Number(e[3]));else if(e[0]==="f"){Me.size===0&&Me.size++;const a=Me.f[Me.size-1];e.shift();const n=e.filter(i=>i.length>0&&i!=="\r"),r=n.length;a.push(r);for(let i=0;i<r;i++)a.push(DC(n[i]))}}function bC(t){const e=!!Me.vt.length,a=!!Me.vn.length;if(t.splitMode){t.numberOfOutputs=Me.size;for(let n=0;n<Me.size;n++){const r=Me.f[n],i=r.length,o=Me.v.length/3,s={};let c;if(t.trackDuplicates){const m=[];let x=0;for(let g=0;g<i;){const C=r[g++];for(let S=0;S<C;S++){const[T,w,_]=r[g++],E=`${T}/${w}/${_}`;s[E]===void 0&&(m[T]===void 0?m[T]=[E]:(m[T].push(E),++x),s[E]=T)}}c=new Uint16Array(o+x);let y=0;for(let g=0;g<m.length;++g){const C=m[g]?m[g].length:0;c[g]=C>1?o+y:g;for(let S=1;S<C;++S){const T=o+y++;c[T]=g,s[m[g][S]]=T}}}const l={},p=Xe.newInstance({name:Me.pieces[n]}),u=[],f=[],h=[],d=[];let v=0;for(;v<i;){const m=r[v];d.push(m);for(let x=0;x<m;x++){const[y,g,C]=r[v+x+1],S=`${y}/${g}/${C}`;if(l[S]===void 0){const T=t.trackDuplicates?s[S]:u.length/3;l[S]=T,lc(Me.v,y*3,u,T*3,3),e&&lc(Me.vt,g*2,f,T*2,2),a&&lc(Me.vn,C*3,h,T*3,3)}d.push(l[S])}v+=m+1}if(p.getPoints().setData(Float32Array.from(u),3),t.trackDuplicates){const m=pe.newInstance({name:"Duplicates",values:c});p.getPointData().addArray(m)}if(p.getPolys().setData(Uint32Array.from(d)),e){const m=pe.newInstance({numberOfComponents:2,values:Float32Array.from(f),name:"TextureCoordinates"});p.getPointData().setTCoords(m)}if(a){const m=pe.newInstance({numberOfComponents:3,values:Float32Array.from(h),name:"Normals"});p.getPointData().setNormals(m)}t.output[n]=p}}else{t.numberOfOutputs=1;const n=Xe.newInstance();if(n.getPoints().setData(Float32Array.from(Me.v),3),e&&Me.v.length/3===Me.vt.length/2){const c=pe.newInstance({numberOfComponents:2,values:Float32Array.from(Me.vt),name:"TextureCoordinates"});n.getPointData().setTCoords(c)}if(a&&Me.v.length===Me.vn.length){const c=pe.newInstance({numberOfComponents:3,values:Float32Array.from(Me.vn),name:"Normals"});n.getPointData().setNormals(c)}const r=[],i=Me.f[0],o=i.length;let s=0;for(;s<o;){const c=i[s];r.push(c);for(let l=0;l<c;l++){const[p]=i[s+l+1];r.push(p)}s+=c+1}n.getPolys().setData(Uint32Array.from(r)),t.output[0]=n}}function MC(t,e){e.classHierarchy.push("vtkOBJReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.indexOf(".obj")===-1&&!r.fullpath)e.baseURL=n,e.url=`${n}/index.obj`;else{e.url=n;const i=n.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(r)},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a(e.url,n).then(r=>t.isDeleted()?!1:t.parseAsText(r))},t.parseAsText=n=>(n&&(n!==e.parseData&&t.modified(),e.parseData=n,e.numberOfOutputs=0,EC(e.splitMode),n.split(`
`).forEach(OC),bC(e)),!0),t.requestData=(n,r)=>{t.parseAsText(e.parseData)},t.isBusy=()=>!!e.requestCount,t.getNumberOfOutputPorts=()=>e.numberOfOutputs}const NC={numberOfOutputs:1,requestCount:0,splitMode:null,trackDuplicates:!1};function RC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NC,a),V.obj(t,e),V.get(t,e,["url","baseURL"]),V.setGet(t,e,["dataAccessHelper","splitMode","trackDuplicates"]),V.algo(t,e,0,1),V.event(t,e,"busy"),MC(t,e)}V.newInstance(RC,"vtkOBJReader");const LC=["chemical json","name","inchi","formula","atoms","bonds","properties"];function FC(t,e){e.classHierarchy.push("vtkMolecule")}const kC={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function v1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kC,a),V.obj(t,e),e.atoms||(e.atoms={}),e.bonds||(e.bonds={}),e.properties||(e.properties={}),V.setGet(t,e,LC),FC(t,e)}var VC={newInstance:V.newInstance(v1,"vtkMolecule"),extend:v1},AC=[1],BC=[2],UC=[3],GC=[4],IC=[5],PC=[6],zC=[7],jC=[8],WC=[9],$C=[10],HC=[11],KC=[12],XC=[13],qC=[14],YC=[15],JC=[16],ZC=[17],QC=[18],eS=[19],tS=[20],nS=[21],rS=[22],aS=[23],iS=[24],oS=[25],sS=[26],cS=[27],uS=[28],lS=[29],fS=[30],pS=[31],hS=[32],gS=[33],dS=[34],vS=[35],yS=[36],mS=[37],xS=[38],CS=[39],SS=[40],TS=[41],wS=[42],_S=[43],ES=[44],DS=[45],OS=[46],bS=[47],MS=[48],NS=[49],RS=[50],LS=[51],FS=[52],kS=[53],VS=[54],AS=[55],BS=[56],US=[57],GS=[58],IS=[59],PS=[60],zS=[61],jS=[62],WS=[63],$S=[64],HS=[65],KS=[66],XS=[67],qS=[68],YS=[69],JS=[70],ZS=[71],QS=[72],eT=[73],tT=[74],nT=[75],rT=[76],aT=[77],iT=[78],oT=[79],sT=[80],cT=[81],uT=[82],lT=[83],fT=[84],pT=[85],hT=[86],gT=[87],dT=[88],vT=[89],yT=[90],mT=[91],xT=[92],CT=[93],ST=[94],TT=[95],wT=[96],_T=[97],ET=[98],DT=[99],OT=[100],bT=[101],MT=[102],NT=[103],RT=[104],LT=[105],FT=[106],kT=[107],VT=[108],AT=[109],BT=[110],UT=[111],GT=[112],IT=[113],PT=[114],zT=[115],jT=[116],WT=[117],$T=[118],HT={H:AC,He:BC,Li:UC,Be:GC,B:IC,C:PC,N:zC,O:jC,F:WC,Ne:$C,Na:HC,Mg:KC,Al:XC,Si:qC,P:YC,S:JC,Cl:ZC,Ar:QC,K:eS,Ca:tS,Sc:nS,Ti:rS,V:aS,Cr:iS,Mn:oS,Fe:sS,Co:cS,Ni:uS,Cu:lS,Zn:fS,Ga:pS,Ge:hS,As:gS,Se:dS,Br:vS,Kr:yS,Rb:mS,Sr:xS,Y:CS,Zr:SS,Nb:TS,Mo:wS,Tc:_S,Ru:ES,Rh:DS,Pd:OS,Ag:bS,Cd:MS,In:NS,Sn:RS,Sb:LS,Te:FS,I:kS,Xe:VS,Cs:AS,Ba:BS,La:US,Ce:GS,Pr:IS,Nd:PS,Pm:zS,Sm:jS,Eu:WS,Gd:$S,Tb:HS,Dy:KS,Ho:XS,Er:qS,Tm:YS,Yb:JS,Lu:ZS,Hf:QS,Ta:eT,W:tT,Re:nT,Os:rT,Ir:aT,Pt:iT,Au:oT,Hg:sT,Tl:cT,Pb:uT,Bi:lT,Po:fT,At:pT,Rn:hT,Fr:gT,Ra:dT,Ac:vT,Th:yT,Pa:mT,U:xT,Np:CT,Pu:ST,Am:TT,Cm:wT,Bk:_T,Cf:ET,Es:DT,Fm:OT,Md:bT,No:MT,Lr:NT,Rf:RT,Db:LT,Sg:FT,Bh:kT,Hs:VT,Mt:AT,Ds:BT,Rg:UT,Cn:GT,Uut:IT,Uuq:PT,Uup:zT,Uuh:jT,Uus:WT,Uuo:$T};function KT(t,e){e.classHierarchy.push("vtkPDBReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(n,r){return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=(n,r)=>{if(n.indexOf(".pdb")===-1)e.baseURL=n,e.url=`${n}`;else{e.url=n;const i=n.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(r)},t.loadData=n=>a(e.url,n).then(t.parseAsText),t.parseAsText=n=>(e.pdb=n,e.molecule=[],e.molecule=e.pdb.split(`
`),t.modified(),!0),t.requestData=(n,r)=>{const i=VC.newInstance();if(e.molecule){const o=e.molecule.length,s=[],c=[];e.numberOfAtoms=0;let l=0;for(;l<o&&e.molecule[l]!=="END";){const p=e.molecule[l].length,u=e.molecule[l],f=u.substr(0,6).replace(/\s+/g,"");if(f.toUpperCase(),f==="ATOM"||f==="HETATM"){const h=u.substr(12,4).replace(/\s+/g,""),d=u.substr(30,8).replace(/\s+/g,""),v=u.substr(38,8).replace(/\s+/g,""),m=u.substr(46,8).replace(/\s+/g,"");let x="";p>=78&&(x=u.substr(76,2).replace(/\s+/g,"")),x===""&&(x=h.substr(0,2).replace(/\d/g,"")),s.push(d),s.push(v),s.push(m);const[y]=HT[x];c.push(y),e.numberOfAtoms++}l++}i.getAtoms().elements={},i.getAtoms().elements.number=Int8Array.from(c),i.getAtoms().coords={},i.getAtoms().coords["3d"]=Float32Array.from(s)}e.output[0]=i},t.isBusy=()=>!!e.requestCount}const XT={numberOfAtoms:0,requestCount:0};function qT(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XT,a),V.obj(t,e),V.get(t,e,["url","baseURL","numberOfAtoms","requestCount"]),V.setGet(t,e,["dataAccessHelper"]),V.algo(t,e,0,1),V.event(t,e,"busy"),KT(t,e)}V.newInstance(qT,"vtkPDBReader");var fc={},YT={get exports(){return fc},set exports(t){fc=t}};(function(t,e){(function(a,n){t.exports=n()})(Vt,function(){return function(a){var n={};function r(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return a[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=a,r.c=n,r.d=function(i,o,s){r.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,o){if(1&o&&(i=r(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var c in i)r.d(s,c,function(l){return i[l]}.bind(null,c));return s},r.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(o,"a",o),o},r.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},r.p="",r(r.s=184)}([function(a,n,r){function i(o){for(var s in o)n.hasOwnProperty(s)||(n[s]=o[s])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(240)),i(r(251)),i(r(175)),i(r(107)),i(r(29)),i(r(73)),i(r(106)),i(r(30)),i(r(252)),i(r(52)),i(r(97)),i(r(253)),i(r(37)),i(r(51)),i(r(173)),i(r(176)),i(r(172)),i(r(108)),i(r(254)),i(r(255)),i(r(256)),i(r(72)),i(r(177)),i(r(105)),i(r(17)),i(r(257)),i(r(12)),i(r(174))},function(a,n,r){var i=this&&this.__values||function(g){var C=typeof Symbol=="function"&&Symbol.iterator,S=C&&g[C],T=0;if(S)return S.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&T>=g.length&&(g=void 0),{value:g&&g[T++],done:!g}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(212);n.FixedSizeSet=o.FixedSizeSet;var s=r(213);n.ObjectCache=s.ObjectCache;var c=r(214);n.CompareCache=c.CompareCache;var l=r(215);n.Lazy=l.Lazy;var p=r(216);function u(g,C,S){if(x(g))g.forEach(function(w,_){return C.call(S,_,w)});else for(var T in g)g.hasOwnProperty(T)&&C.call(S,T,g[T])}function f(g){var C,S;if(h(g))return g;if(v(g)){var T=[];try{for(var w=i(g),_=w.next();!_.done;_=w.next()){var E=_.value;T.push(f(E))}}catch(M){C={error:M}}finally{try{_&&!_.done&&(S=w.return)&&S.call(w)}finally{if(C)throw C.error}}return T}if(d(g)){T={};for(var D in g)if(g.hasOwnProperty(D)){var O=g[D];T[D]=f(O)}return T}return g}function h(g){return!!g&&Object.prototype.toString.call(g)==="[object Function]"}function d(g){var C=typeof g;return!!g&&(C==="function"||C==="object")}function v(g){return Array.isArray(g)}function m(g){return g instanceof Set}function x(g){return g instanceof Map}function y(g){if(d(g)){var C=Object.getPrototypeOf(g),S=C.constructor;return C&&S&&typeof S=="function"&&S instanceof S&&Function.prototype.toString.call(S)===Function.prototype.toString.call(Object)}return!1}n.StringWalker=p.StringWalker,n.applyMixin=function(g,C){for(var S=[],T=2;T<arguments.length;T++)S[T-2]=arguments[T];Object.getOwnPropertyNames(C.prototype).forEach(function(w){if(w!=="constructor"){if(S.indexOf(w)!==-1){var _=Object.getOwnPropertyDescriptor(g.prototype,w);_&&Object.defineProperty(g.prototype,"_"+w,_)}var E=Object.getOwnPropertyDescriptor(C.prototype,w);E&&Object.defineProperty(g.prototype,w,E)}})},n.applyDefaults=function g(C,S,T){T===void 0&&(T=!1);var w=f(C||{});return u(S,function(_,E){y(E)?w[_]=g(w[_],E,T):(T||w[_]===void 0)&&(w[_]=E)}),w},n.forEachArray=function(g,C,S){g.forEach(C,S)},n.forEachObject=u,n.arrayLength=function(g){return m(g)?g.size:g.length},n.objectLength=function(g){return x(g)?g.size:Object.keys(g).length},n.getObjectValue=function(g,C){return x(g)?g.get(C):g[C]},n.removeObjectValue=function(g,C){x(g)?g.delete(C):delete g[C]},n.clone=f,n.isBoolean=function(g){return typeof g=="boolean"},n.isNumber=function(g){return typeof g=="number"},n.isString=function(g){return typeof g=="string"},n.isFunction=h,n.isObject=d,n.isArray=v,n.isSet=m,n.isMap=x,n.isEmpty=function(g){if(v(g))return!g.length;if(m(g)||x(g))return!g.size;if(d(g)){for(var C in g)if(g.hasOwnProperty(C))return!1;return!0}return!1},n.isPlainObject=y,n.isIterable=function(g){return g&&typeof g[Symbol.iterator]=="function"},n.getValue=function(g){return h(g.valueOf)?g.valueOf():g},n.utf8Encode=function(g){for(var C=new Uint8Array(4*g.length),S=0,T=0;T<g.length;T++){var w=g.charCodeAt(T);if(w<128)C[S++]=w;else{if(w<2048)C[S++]=w>>6|192;else{if(w>55295&&w<56320){if(++T>=g.length)throw new Error("Incomplete surrogate pair.");var _=g.charCodeAt(T);if(_<56320||_>57343)throw new Error("Invalid surrogate character.");w=65536+((1023&w)<<10)+(1023&_),C[S++]=w>>18|240,C[S++]=w>>12&63|128}else C[S++]=w>>12|224;C[S++]=w>>6&63|128}C[S++]=63&w|128}}return C.subarray(0,S)},n.utf8Decode=function(g){for(var C="",S=0;S<g.length;){var T=g[S++];if(T>127)if(T>191&&T<224){if(S>=g.length)throw new Error("Incomplete 2-byte sequence.");T=(31&T)<<6|63&g[S++]}else if(T>223&&T<240){if(S+1>=g.length)throw new Error("Incomplete 3-byte sequence.");T=(15&T)<<12|(63&g[S++])<<6|63&g[S++]}else{if(!(T>239&&T<248))throw new Error("Unknown multi-byte start.");if(S+2>=g.length)throw new Error("Incomplete 4-byte sequence.");T=(7&T)<<18|(63&g[S++])<<12|(63&g[S++])<<6|63&g[S++]}if(T<=65535)C+=String.fromCharCode(T);else{if(!(T<=1114111))throw new Error("Code point exceeds UTF-16 limit.");T-=65536,C+=String.fromCharCode(T>>10|55296),C+=String.fromCharCode(1023&T|56320)}}return C}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.Before=0]="Before",i[i.Equal=1]="Equal",i[i.After=2]="After"}(n.BoundaryPosition||(n.BoundaryPosition={})),function(i){i[i.None=0]="None",i[i.Capturing=1]="Capturing",i[i.AtTarget=2]="AtTarget",i[i.Bubbling=3]="Bubbling"}(n.EventPhase||(n.EventPhase={})),function(i){i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=3]="Text",i[i.CData=4]="CData",i[i.EntityReference=5]="EntityReference",i[i.Entity=6]="Entity",i[i.ProcessingInstruction=7]="ProcessingInstruction",i[i.Comment=8]="Comment",i[i.Document=9]="Document",i[i.DocumentType=10]="DocumentType",i[i.DocumentFragment=11]="DocumentFragment",i[i.Notation=12]="Notation"}(n.NodeType||(n.NodeType={})),function(i){i[i.Disconnected=1]="Disconnected",i[i.Preceding=2]="Preceding",i[i.Following=4]="Following",i[i.Contains=8]="Contains",i[i.ContainedBy=16]="ContainedBy",i[i.ImplementationSpecific=32]="ImplementationSpecific"}(n.Position||(n.Position={})),function(i){i[i.Accept=1]="Accept",i[i.Reject=2]="Reject",i[i.Skip=3]="Skip"}(n.FilterResult||(n.FilterResult={})),function(i){i[i.All=4294967295]="All",i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=4]="Text",i[i.CDataSection=8]="CDataSection",i[i.EntityReference=16]="EntityReference",i[i.Entity=32]="Entity",i[i.ProcessingInstruction=64]="ProcessingInstruction",i[i.Comment=128]="Comment",i[i.Document=256]="Document",i[i.DocumentType=512]="DocumentType",i[i.DocumentFragment=1024]="DocumentFragment",i[i.Notation=2048]="Notation"}(n.WhatToShow||(n.WhatToShow={})),function(i){i[i.StartToStart=0]="StartToStart",i[i.StartToEnd=1]="StartToEnd",i[i.EndToEnd=2]="EndToEnd",i[i.EndToStart=3]="EndToStart"}(n.HowToCompare||(n.HowToCompare={}))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(241);n.Cast=i.Cast;var o=r(150);n.Guard=o.Guard;var s=r(242);n.EmptySet=s.EmptySet},function(a,n,r){var i=r(11),o=r(55).f,s=r(21),c=r(25),l=r(80),p=r(119),u=r(123);a.exports=function(f,h){var d,v,m,x,y,g=f.target,C=f.global,S=f.stat;if(d=C?i:S?i[g]||l(g,{}):(i[g]||{}).prototype)for(v in h){if(x=h[v],m=f.noTargetGet?(y=o(d,v))&&y.value:d[v],!u(C?v:g+(S?".":"#")+v,f.forced)&&m!==void 0){if(typeof x==typeof m)continue;p(x,m)}(f.sham||m&&m.sham)&&s(x,"sham",!0),c(d,v,x,f)}}},function(a,n,r){var i=r(11),o=r(81),s=r(14),c=r(58),l=r(86),p=r(124),u=o("wks"),f=i.Symbol,h=p?f:f&&f.withoutSetter||c;a.exports=function(d){return s(u,d)||(l&&s(f,d)?u[d]=f[d]:u[d]=h("Symbol."+d)),u[d]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),o=r(29),s=function(){function c(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new i.CompareCache,this._rangeList=new i.FixedSizeSet}return c.prototype.setFeatures=function(l){if(l===void 0&&(l=!0),i.isObject(l))for(var p in l)this._features[p]=l[p]||!1;else for(var p in this._features)this._features[p]=l},Object.defineProperty(c.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"window",{get:function(){return this._window===null&&(this._window=o.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(c,"instance",{get:function(){return c._instance||(c._instance=new c),c._instance},enumerable:!0,configurable:!0}),c}();n.dom=s.instance},function(a,n,r){var i=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var C in y)Object.hasOwnProperty.call(y,C)&&(g[C]=y[C]);return g.default=y,g};Object.defineProperty(n,"__esModule",{value:!0});var o=i(r(228));n.base64=o;var s=i(r(146));n.byte=s;var c=i(r(147));n.byteSequence=c;var l=i(r(96));n.codePoint=l;var p=i(r(232));n.json=p;var u=i(r(233));n.list=u;var f=i(r(234));n.map=f;var h=i(r(235));n.namespace=h;var d=i(r(236));n.queue=d;var v=i(r(237));n.set=v;var m=i(r(238));n.stack=m;var x=i(r(239));n.string=x},function(a,n){a.exports=function(r){try{return!!r()}catch{return!0}}},function(a,n,r){var i,o=this&&this.__extends||(i=function(L,k){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,j){A.__proto__=j}||function(A,j){for(var H in j)j.hasOwnProperty(H)&&(A[H]=j[H])})(L,k)},function(L,k){function A(){this.constructor=L}i(L,k),L.prototype=k===null?Object.create(k):(A.prototype=k.prototype,new A)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(L){function k(A,j){j===void 0&&(j="");var H=L.call(this,j)||this;return H.name=A,H}return o(k,L),k}(Error);n.DOMException=s;var c=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"DOMStringSizeError",A)||this}return o(k,L),k}(s);n.DOMStringSizeError=c;var l=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"WrongDocumentError","The object is in the wrong document. "+A)||this}return o(k,L),k}(s);n.WrongDocumentError=l;var p=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NoDataAllowedError",A)||this}return o(k,L),k}(s);n.NoDataAllowedError=p;var u=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NoModificationAllowedError","The object can not be modified. "+A)||this}return o(k,L),k}(s);n.NoModificationAllowedError=u;var f=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NotSupportedError","The operation is not supported. "+A)||this}return o(k,L),k}(s);n.NotSupportedError=f;var h=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InUseAttributeError",A)||this}return o(k,L),k}(s);n.InUseAttributeError=h;var d=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InvalidStateError","The object is in an invalid state. "+A)||this}return o(k,L),k}(s);n.InvalidStateError=d;var v=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InvalidModificationError","The object can not be modified in this way. "+A)||this}return o(k,L),k}(s);n.InvalidModificationError=v;var m=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+A)||this}return o(k,L),k}(s);n.NamespaceError=m;var x=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InvalidAccessError","The object does not support the operation or argument. "+A)||this}return o(k,L),k}(s);n.InvalidAccessError=x;var y=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"ValidationError",A)||this}return o(k,L),k}(s);n.ValidationError=y;var g=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"TypeMismatchError",A)||this}return o(k,L),k}(s);n.TypeMismatchError=g;var C=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"SecurityError","The operation is insecure. "+A)||this}return o(k,L),k}(s);n.SecurityError=C;var S=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NetworkError","A network error occurred. "+A)||this}return o(k,L),k}(s);n.NetworkError=S;var T=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"AbortError","The operation was aborted. "+A)||this}return o(k,L),k}(s);n.AbortError=T;var w=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"URLMismatchError","The given URL does not match another URL. "+A)||this}return o(k,L),k}(s);n.URLMismatchError=w;var _=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"QuotaExceededError","The quota has been exceeded. "+A)||this}return o(k,L),k}(s);n.QuotaExceededError=_;var E=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"TimeoutError","The operation timed out. "+A)||this}return o(k,L),k}(s);n.TimeoutError=E;var D=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+A)||this}return o(k,L),k}(s);n.InvalidNodeTypeError=D;var O=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"DataCloneError","The object can not be cloned. "+A)||this}return o(k,L),k}(s);n.DataCloneError=O;var M=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+A)||this}return o(k,L),k}(s);n.NotImplementedError=M;var N=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+A)||this}return o(k,L),k}(s);n.HierarchyRequestError=N;var R=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"NotFoundError","The object can not be found here. "+A)||this}return o(k,L),k}(s);n.NotFoundError=R;var B=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"IndexSizeError","The index is not in the allowed range. "+A)||this}return o(k,L),k}(s);n.IndexSizeError=B;var I=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"SyntaxError","The string did not match the expected pattern. "+A)||this}return o(k,L),k}(s);n.SyntaxError=I;var P=function(L){function k(A){return A===void 0&&(A=""),L.call(this,"InvalidCharacterError","The string contains invalid characters. "+A)||this}return o(k,L),k}(s);n.InvalidCharacterError=P},function(a,n,r){var i=r(53),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];a.exports=function(c,l){var p,u;if(l=l||{},Object.keys(l).forEach(function(f){if(o.indexOf(f)===-1)throw new i('Unknown option "'+f+'" is met in definition of "'+c+'" YAML type.')}),this.tag=c,this.kind=l.kind||null,this.resolve=l.resolve||function(){return!0},this.construct=l.construct||function(f){return f},this.instanceOf=l.instanceOf||null,this.predicate=l.predicate||null,this.represent=l.represent||null,this.defaultStyle=l.defaultStyle||null,this.styleAliases=(p=l.styleAliases||null,u={},p!==null&&Object.keys(p).forEach(function(f){p[f].forEach(function(h){u[String(h)]=f})}),u),s.indexOf(this.kind)===-1)throw new i('Unknown kind "'+this.kind+'" is specified for "'+c+'" YAML type.')}},function(a,n,r){(function(i){var o=function(s){return s&&s.Math==Math&&s};a.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i=="object"&&i)||Function("return this")()}).call(this,r(78))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.idl_defineConst=function(i,o,s){Object.defineProperty(i,o,{writable:!1,enumerable:!0,configurable:!1,value:s})}},function(a,n){a.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},function(a,n){var r={}.hasOwnProperty;a.exports=function(i,o){return r.call(i,o)}},function(a,n,r){var i=r(16),o=r(115),s=r(18),c=r(56),l=Object.defineProperty;n.f=i?l:function(p,u,f){if(s(p),u=c(u,!0),s(f),o)try{return l(p,u,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(p[u]=f.value),p}},function(a,n,r){var i=r(8);a.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(a,n,r){var i=this&&this.__values||function(g){var C=typeof Symbol=="function"&&Symbol.iterator,S=C&&g[C],T=0;if(S)return S.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&T>=g.length&&(g=void 0),{value:g&&g[T++],done:!g}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(3),s=r(2);function c(g,C,S){if(S===void 0&&(S=!1),S&&o.Guard.isElementNode(C)&&o.Guard.isShadowRoot(C.shadowRoot)&&C.shadowRoot._firstChild)return C.shadowRoot._firstChild;if(C._firstChild)return C._firstChild;if(C===g)return null;if(C._nextSibling)return C._nextSibling;for(var T=C._parent;T&&T!==g;){if(T._nextSibling)return T._nextSibling;T=T._parent}return null}function l(){var g;return(g={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},g}function p(g,C,S,T){C===void 0&&(C=!1),S===void 0&&(S=!1);for(var w=C?g:c(g,g,S);w&&T&&!T(w);)w=c(g,w,S);return w}function u(g,C,S,T,w){T===void 0&&(T=!1);for(var _=c(g,C,T);_&&w&&!w(_);)_=c(g,_,T);return _}function f(g,C,S,T){var w;return C===void 0&&(C=!1),S===void 0&&(S=!1),C||g._children.size!==0?((w={})[Symbol.iterator]=function(){var _=C?g:c(g,g,S);return{next:function(){for(;_&&T&&!T(_);)_=c(g,_,S);if(_===null)return{done:!0,value:null};var E={done:!1,value:_};return _=c(g,_,S),E}}},w):l()}function h(g,C,S){C===void 0&&(C=!1);for(var T=C?g:g._parent;T&&S&&!S(T);)T=T._parent;return T}function d(g,C,S,T){for(var w=C._parent;w&&T&&!T(w);)w=w._parent;return w}function v(g){return o.Guard.isDocumentTypeNode(g)?0:o.Guard.isCharacterDataNode(g)?g._data.length:g._children.size}function m(g,C){if(C===void 0&&(C=!1),C){var S=m(g,!1);return o.Guard.isShadowRoot(S)?m(S._host,!0):S}return g._parent?m(g._parent):g}function x(g,C,S,T){S===void 0&&(S=!1),T===void 0&&(T=!1);for(var w=S?g:T&&o.Guard.isShadowRoot(g)?g._host:g._parent;w!==null;){if(w===C)return!0;w=T&&o.Guard.isShadowRoot(w)?w._host:w._parent}return!1}function y(g){for(var C=m(g),S=0,T=p(C);T!==null;){if(S++,T===g)return S;T=u(C,T)}return-1}n.tree_getFirstDescendantNode=p,n.tree_getNextDescendantNode=u,n.tree_getDescendantNodes=f,n.tree_getDescendantElements=function(g,C,S,T){var w;return C===void 0&&(C=!1),S===void 0&&(S=!1),C||g._children.size!==0?((w={})[Symbol.iterator]=function(){var _=f(g,C,S,function(D){return o.Guard.isElementNode(D)})[Symbol.iterator](),E=_.next().value;return{next:function(){for(;E&&T&&!T(E);)E=_.next().value;if(E===null)return{done:!0,value:null};var D={done:!1,value:E};return E=_.next().value,D}}},w):l()},n.tree_getSiblingNodes=function(g,C,S){var T;return C===void 0&&(C=!1),g._parent&&g._parent._children.size!==0?((T={})[Symbol.iterator]=function(){var w=g._parent?g._parent._firstChild:null;return{next:function(){for(;w&&(S&&!S(w)||!C&&w===g);)w=w._nextSibling;if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=w._nextSibling,_}}},T):l()},n.tree_getFirstAncestorNode=h,n.tree_getNextAncestorNode=d,n.tree_getAncestorNodes=function(g,C,S){var T;return C===void 0&&(C=!1),C||g._parent?((T={})[Symbol.iterator]=function(){var w=h(g,C,S);return{next:function(){if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=d(0,w,C,S),_}}},T):l()},n.tree_getCommonAncestor=function(g,C){if(g===C)return g._parent;for(var S=[],T=[],w=h(g,!0);w!==null;)S.push(w),w=d(0,w);for(var _=h(C,!0);_!==null;)T.push(_),_=d(0,_);for(var E=S.length,D=T.length,O=null,M=Math.min(E,D);M>0;M--){var N=S[--E];if(N!==T[--D])break;O=N}return O},n.tree_getFollowingNode=function(g,C){if(C._firstChild)return C._firstChild;if(C._nextSibling)return C._nextSibling;for(;;){var S=C._parent;if(S===null||S===g)return null;if(S._nextSibling)return S._nextSibling;C=S}},n.tree_getPrecedingNode=function(g,C){return C===g?null:C._previousSibling?(C=C._previousSibling)._lastChild?C._lastChild:C:C._parent},n.tree_isConstrained=function g(C){var S,T,w,_,E,D;switch(C._nodeType){case s.NodeType.Document:var O=!1,M=!1;try{for(var N=i(C._children),R=N.next();!R.done;R=N.next())switch(R.value._nodeType){case s.NodeType.ProcessingInstruction:case s.NodeType.Comment:break;case s.NodeType.DocumentType:if(O||M)return!1;O=!0;break;case s.NodeType.Element:if(M)return!1;M=!0;break;default:return!1}}catch(k){S={error:k}}finally{try{R&&!R.done&&(T=N.return)&&T.call(N)}finally{if(S)throw S.error}}break;case s.NodeType.DocumentFragment:case s.NodeType.Element:try{for(var B=i(C._children),I=B.next();!I.done;I=B.next())switch(I.value._nodeType){case s.NodeType.Element:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:break;default:return!1}}catch(k){w={error:k}}finally{try{I&&!I.done&&(_=B.return)&&_.call(B)}finally{if(w)throw w.error}}break;case s.NodeType.DocumentType:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:return!C.hasChildNodes()}try{for(var P=i(C._children),L=P.next();!L.done;L=P.next())if(!g(L.value))return!1}catch(k){E={error:k}}finally{try{L&&!L.done&&(D=P.return)&&D.call(P)}finally{if(E)throw E.error}}return!0},n.tree_nodeLength=v,n.tree_isEmpty=function(g){return v(g)===0},n.tree_rootNode=m,n.tree_isDescendantOf=function(g,C,S,T){S===void 0&&(S=!1),T===void 0&&(T=!1);for(var w=p(g,S,T);w!==null;){if(w===C)return!0;w=u(g,w,S,T)}return!1},n.tree_isAncestorOf=x,n.tree_isHostIncludingAncestorOf=function g(C,S,T){if(T===void 0&&(T=!1),x(C,S,T))return!0;var w=m(C);return!(!o.Guard.isDocumentFragmentNode(w)||w._host===null||!g(w._host,S,T))},n.tree_isSiblingOf=function(g,C,S){return S===void 0&&(S=!1),g!==C?g._parent!==null&&g._parent===C._parent:!!S},n.tree_isPreceding=function(g,C){var S=y(g),T=y(C);return S!==-1&&T!==-1&&m(g)===m(C)&&T<S},n.tree_isFollowing=function(g,C){var S=y(g),T=y(C);return S!==-1&&T!==-1&&m(g)===m(C)&&T>S},n.tree_isParentOf=function(g,C){return g._parent===C},n.tree_isChildOf=function(g,C){return C._parent===g},n.tree_previousSibling=function(g){return g._previousSibling},n.tree_nextSibling=function(g){return g._nextSibling},n.tree_firstChild=function(g){return g._firstChild},n.tree_lastChild=function(g){return g._lastChild},n.tree_treePosition=y,n.tree_index=function(g){for(var C=0;g._previousSibling!==null;)C++,g=g._previousSibling;return C},n.tree_retarget=function(g,C){for(;;){if(!g||!o.Guard.isNode(g))return g;var S=m(g);if(!o.Guard.isShadowRoot(S)||C&&o.Guard.isNode(C)&&x(S,C,!0,!0))return g;g=S.host}}},function(a,n,r){var i=r(13);a.exports=function(o){if(!i(o))throw TypeError(String(o)+" is not an object");return o}},function(a,n,r){var i=r(24),o=r(130),s=r(49),c=r(43),l=r(88),p=c.set,u=c.getterFor("Array Iterator");a.exports=l(Array,"Array",function(f,h){p(this,{type:"Array Iterator",target:i(f),index:0,kind:h})},function(){var f=u(this),h=f.target,d=f.kind,v=f.index++;return!h||v>=h.length?(f.target=void 0,{value:void 0,done:!0}):d=="keys"?{value:v,done:!1}:d=="values"?{value:h[v],done:!1}:{value:[v,h[v]],done:!1}},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},function(a,n,r){var i=r(90),o=r(25),s=r(202);i||o(Object.prototype,"toString",s,{unsafe:!0})},function(a,n,r){var i=r(16),o=r(15),s=r(40);a.exports=i?function(c,l,p){return o.f(c,l,s(1,p))}:function(c,l,p){return c[l]=p,c}},function(a,n,r){var i=r(137).charAt,o=r(43),s=r(88),c=o.set,l=o.getterFor("String Iterator");s(String,"String",function(p){c(this,{type:"String Iterator",string:String(p),index:0})},function(){var p,u=l(this),f=u.string,h=u.index;return h>=f.length?{value:void 0,done:!0}:(p=i(f,h),u.index+=p.length,{value:p,done:!1})})},function(a,n,r){var i=r(11),o=r(203),s=r(19),c=r(21),l=r(5),p=l("iterator"),u=l("toStringTag"),f=s.values;for(var h in o){var d=i[h],v=d&&d.prototype;if(v){if(v[p]!==f)try{c(v,p,f)}catch{v[p]=f}if(v[u]||c(v,u,h),o[h]){for(var m in s)if(v[m]!==s[m])try{c(v,m,s[m])}catch{v[m]=s[m]}}}}},function(a,n,r){var i=r(41),o=r(35);a.exports=function(s){return i(o(s))}},function(a,n,r){var i=r(11),o=r(21),s=r(14),c=r(80),l=r(117),p=r(43),u=p.get,f=p.enforce,h=String(String).split("String");(a.exports=function(d,v,m,x){var y=!!x&&!!x.unsafe,g=!!x&&!!x.enumerable,C=!!x&&!!x.noTargetGet;typeof m=="function"&&(typeof v!="string"||s(m,"name")||o(m,"name",v),f(m).source=h.join(typeof v=="string"?v:"")),d!==i?(y?!C&&d[v]&&(g=!0):delete d[v],g?d[v]=m:o(d,v,m)):g?d[v]=m:c(v,m)})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||l(this)})},function(a,n,r){var i=r(47),o=Math.min;a.exports=function(s){return s>0?o(i(s),9007199254740991):0}},function(a,n,r){var i=r(35);a.exports=function(o){return Object(i(o))}},function(a,n,r){var i=r(16),o=r(8),s=r(14),c=Object.defineProperty,l={},p=function(u){throw u};a.exports=function(u,f){if(s(l,u))return l[u];f||(f={});var h=[][u],d=!!s(f,"ACCESSORS")&&f.ACCESSORS,v=s(f,0)?f[0]:p,m=s(f,1)?f[1]:void 0;return l[u]=!!h&&!o(function(){if(d&&!i)return!0;var x={length:-1};d?c(x,1,{enumerable:!0,get:p}):x[1]=1,h.call(x,v,m)})}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(148),o=r(149),s=r(151),c=r(98),l=r(153),p=r(154),u=r(155),f=r(99),h=r(100),d=r(156),v=r(157),m=r(101),x=r(158),y=r(159),g=r(160),C=r(161),S=r(162),T=r(163),w=r(164),_=r(165),E=r(166),D=r(167),O=r(168),M=r(169),N=r(170);n.create_domImplementation=function(R){return i.DOMImplementationImpl._create(R)},n.create_window=function(){return o.WindowImpl._create()},n.create_xmlDocument=function(){return new s.XMLDocumentImpl},n.create_document=function(){return new c.DocumentImpl},n.create_abortController=function(){return new l.AbortControllerImpl},n.create_abortSignal=function(){return p.AbortSignalImpl._create()},n.create_documentType=function(R,B,I,P){return u.DocumentTypeImpl._create(R,B,I,P)},n.create_element=function(R,B,I,P){return f.ElementImpl._create(R,B,I,P)},n.create_htmlElement=function(R,B,I,P){return f.ElementImpl._create(R,B,I,P)},n.create_htmlUnknownElement=function(R,B,I,P){return f.ElementImpl._create(R,B,I,P)},n.create_documentFragment=function(R){return h.DocumentFragmentImpl._create(R)},n.create_shadowRoot=function(R,B){return d.ShadowRootImpl._create(R,B)},n.create_attr=function(R,B){return v.AttrImpl._create(R,B)},n.create_text=function(R,B){return m.TextImpl._create(R,B)},n.create_cdataSection=function(R,B){return x.CDATASectionImpl._create(R,B)},n.create_comment=function(R,B){return y.CommentImpl._create(R,B)},n.create_processingInstruction=function(R,B,I){return g.ProcessingInstructionImpl._create(R,B,I)},n.create_htmlCollection=function(R,B){return B===void 0&&(B=function(){return!0}),C.HTMLCollectionImpl._create(R,B)},n.create_nodeList=function(R){return S.NodeListImpl._create(R)},n.create_nodeListStatic=function(R,B){return T.NodeListStaticImpl._create(R,B)},n.create_namedNodeMap=function(R){return w.NamedNodeMapImpl._create(R)},n.create_range=function(R,B){return _.RangeImpl._create(R,B)},n.create_nodeIterator=function(R,B,I){return E.NodeIteratorImpl._create(R,B,I)},n.create_treeWalker=function(R,B){return D.TreeWalkerImpl._create(R,B)},n.create_nodeFilter=function(){return O.NodeFilterImpl._create()},n.create_mutationRecord=function(R,B,I,P,L,k,A,j,H){return M.MutationRecordImpl._create(R,B,I,P,L,k,A,j,H)},n.create_domTokenList=function(R,B){return N.DOMTokenListImpl._create(R,B)}},function(a,n,r){var i=this&&this.__values||function(v){var m=typeof Symbol=="function"&&Symbol.iterator,x=m&&v[m],y=0;if(x)return x.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&y>=v.length&&(v=void 0),{value:v&&v[y++],done:!v}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(17),c=r(3),l=r(72),p=new Map;function u(v,m){if(m!==v._root&&s.tree_isAncestorOf(v._reference,m,!0)){if(v._pointerBeforeReference)for(;;){var x=s.tree_getFollowingNode(v._root,m);if(x!==null&&s.tree_isDescendantOf(v._root,x,!0)&&!s.tree_isDescendantOf(m,x,!0))return void(v._reference=x);if(x===null)return void(v._pointerBeforeReference=!1)}if(m._previousSibling===null)m._parent!==null&&(v._reference=m._parent);else{for(var y=m._previousSibling,g=s.tree_getFirstDescendantNode(m._previousSibling,!0,!1);g!==null;)g!==null&&(y=g),g=s.tree_getNextDescendantNode(m._previousSibling,g,!0,!1);v._reference=y}}}function f(v,m,x,y,g){if(c.Guard.isSlot(v)&&m==="name"&&g===null){if(y===x||y===null&&x===""||y===""&&x===null)return;v._name=y===null||y===""?"":y,l.shadowTree_assignSlotablesForATree(s.tree_rootNode(v))}}function h(v,m,x,y,g){if(c.Guard.isSlotable(v)&&m==="slot"&&g===null){if(y===x||y===null&&x===""||y===""&&x===null)return;v._name=y===null||y===""?"":y,l.shadowTree_isAssigned(v)&&l.shadowTree_assignSlotables(v._assignedSlot),l.shadowTree_assignASlot(v)}}function d(v,m,x,y){m==="id"&&y===null&&(v._uniqueIdentifier=x||void 0)}n.dom_runRemovingSteps=function(v,m){},n.dom_runCloningSteps=function(v,m,x,y){},n.dom_runAdoptingSteps=function(v,m){},n.dom_runAttributeChangeSteps=function(v,m,x,y,g){var C,S;o.dom.features.slots&&(h.call(v,v,m,x,y,g),f.call(v,v,m,x,y,g)),d.call(v,v,m,y,g);try{for(var T=i(v._attributeChangeSteps),w=T.next();!w.done;w=T.next())w.value.call(v,v,m,x,y,g)}catch(_){C={error:_}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},n.dom_runInsertionSteps=function(v){},n.dom_runNodeIteratorPreRemovingSteps=function(v,m){u.call(v,v,m)},n.dom_hasSupportedTokens=function(v){return p.has(v)},n.dom_getSupportedTokens=function(v){return p.get(v)||new Set},n.dom_runEventConstructingSteps=function(v){},n.dom_runChildTextContentChangeSteps=function(v){}},function(a,n,r){var i=r(4),o=r(11),s=r(46),c=r(44),l=r(16),p=r(86),u=r(124),f=r(8),h=r(14),d=r(59),v=r(13),m=r(18),x=r(27),y=r(24),g=r(56),C=r(40),S=r(60),T=r(61),w=r(82),_=r(190),E=r(85),D=r(55),O=r(15),M=r(79),N=r(21),R=r(25),B=r(81),I=r(57),P=r(45),L=r(58),k=r(5),A=r(125),j=r(126),H=r(62),K=r(43),Y=r(36).forEach,q=I("hidden"),Z=k("toPrimitive"),re=K.set,ae=K.getterFor("Symbol"),ee=Object.prototype,F=o.Symbol,b=s("JSON","stringify"),G=D.f,U=O.f,z=_.f,W=M.f,$=B("symbols"),J=B("op-symbols"),ne=B("string-to-symbol-registry"),oe=B("symbol-to-string-registry"),ue=B("wks"),Ce=o.QObject,ye=!Ce||!Ce.prototype||!Ce.prototype.findChild,je=l&&f(function(){return S(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a!=7})?function(ce,he,fe){var ve=G(ee,he);ve&&delete ee[he],U(ce,he,fe),ve&&ce!==ee&&U(ee,he,ve)}:U,Le=function(ce,he){var fe=$[ce]=S(F.prototype);return re(fe,{type:"Symbol",tag:ce,description:he}),l||(fe.description=he),fe},ge=u?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof F},tt=function(ce,he,fe){ce===ee&&tt(J,he,fe),m(ce);var ve=g(he,!0);return m(fe),h($,ve)?(fe.enumerable?(h(ce,q)&&ce[q][ve]&&(ce[q][ve]=!1),fe=S(fe,{enumerable:C(0,!1)})):(h(ce,q)||U(ce,q,C(1,{})),ce[q][ve]=!0),je(ce,ve,fe)):U(ce,ve,fe)},X=function(ce,he){m(ce);var fe=y(he),ve=T(fe).concat(te(fe));return Y(ve,function(Ae){l&&!De.call(fe,Ae)||tt(ce,Ae,fe[Ae])}),ce},De=function(ce){var he=g(ce,!0),fe=W.call(this,he);return!(this===ee&&h($,he)&&!h(J,he))&&(!(fe||!h(this,he)||!h($,he)||h(this,q)&&this[q][he])||fe)},Oe=function(ce,he){var fe=y(ce),ve=g(he,!0);if(fe!==ee||!h($,ve)||h(J,ve)){var Ae=G(fe,ve);return!Ae||!h($,ve)||h(fe,q)&&fe[q][ve]||(Ae.enumerable=!0),Ae}},de=function(ce){var he=z(y(ce)),fe=[];return Y(he,function(ve){h($,ve)||h(P,ve)||fe.push(ve)}),fe},te=function(ce){var he=ce===ee,fe=z(he?J:y(ce)),ve=[];return Y(fe,function(Ae){!h($,Ae)||he&&!h(ee,Ae)||ve.push($[Ae])}),ve};p||(R((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor");var ce=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,he=L(ce),fe=function(ve){this===ee&&fe.call(J,ve),h(this,q)&&h(this[q],he)&&(this[q][he]=!1),je(this,he,C(1,ve))};return l&&ye&&je(ee,he,{configurable:!0,set:fe}),Le(he,ce)}).prototype,"toString",function(){return ae(this).tag}),R(F,"withoutSetter",function(ce){return Le(L(ce),ce)}),M.f=De,O.f=tt,D.f=Oe,w.f=_.f=de,E.f=te,A.f=function(ce){return Le(k(ce),ce)},l&&(U(F.prototype,"description",{configurable:!0,get:function(){return ae(this).description}}),c||R(ee,"propertyIsEnumerable",De,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:F}),Y(T(ue),function(ce){j(ce)}),i({target:"Symbol",stat:!0,forced:!p},{for:function(ce){var he=String(ce);if(h(ne,he))return ne[he];var fe=F(he);return ne[he]=fe,oe[fe]=he,fe},keyFor:function(ce){if(!ge(ce))throw TypeError(ce+" is not a symbol");if(h(oe,ce))return oe[ce]},useSetter:function(){ye=!0},useSimple:function(){ye=!1}}),i({target:"Object",stat:!0,forced:!p,sham:!l},{create:function(ce,he){return he===void 0?S(ce):X(S(ce),he)},defineProperty:tt,defineProperties:X,getOwnPropertyDescriptor:Oe}),i({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:de,getOwnPropertySymbols:te}),i({target:"Object",stat:!0,forced:f(function(){E.f(1)})},{getOwnPropertySymbols:function(ce){return E.f(x(ce))}}),b&&i({target:"JSON",stat:!0,forced:!p||f(function(){var ce=F();return b([ce])!="[null]"||b({a:ce})!="{}"||b(Object(ce))!="{}"})},{stringify:function(ce,he,fe){for(var ve,Ae=[ce],Se=1;arguments.length>Se;)Ae.push(arguments[Se++]);if(ve=he,(v(he)||ce!==void 0)&&!ge(ce))return d(he)||(he=function(Be,Ie){if(typeof ve=="function"&&(Ie=ve.call(this,Be,Ie)),!ge(Ie))return Ie}),Ae[1]=he,b.apply(null,Ae)}}),F.prototype[Z]||N(F.prototype,Z,F.prototype.valueOf),H(F,"Symbol"),P[q]=!0},function(a,n,r){var i=r(4),o=r(16),s=r(11),c=r(14),l=r(13),p=r(15).f,u=r(119),f=s.Symbol;if(o&&typeof f=="function"&&(!("description"in f.prototype)||f().description!==void 0)){var h={},d=function(){var g=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),C=this instanceof d?new f(g):g===void 0?f():f(g);return g===""&&(h[C]=!0),C};u(d,f);var v=d.prototype=f.prototype;v.constructor=d;var m=v.toString,x=String(f("test"))=="Symbol(test)",y=/^Symbol\((.*)\)[^)]+$/;p(v,"description",{configurable:!0,get:function(){var g=l(this)?this.valueOf():this,C=m.call(g);if(c(h,g))return"";var S=x?C.slice(7,-1):C.replace(y,"$1");return S===""?void 0:S}}),i({global:!0,forced:!0},{Symbol:d})}},function(a,n,r){r(126)("iterator")},function(a,n,r){var i,o=this&&this.__extends||(i=function(x,y){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,C){g.__proto__=C}||function(g,C){for(var S in C)C.hasOwnProperty(S)&&(g[S]=C[S])})(x,y)},function(x,y){function g(){this.constructor=x}i(x,y),x.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}),s=this&&this.__values||function(x){var y=typeof Symbol=="function"&&Symbol.iterator,g=y&&x[y],C=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),l=r(2),p=r(70),u=r(3),f=r(9),h=r(0),d=r(152),v=r(12),m=function(x){function y(){var g=x.call(this)||this;return g._parent=null,g._firstChild=null,g._lastChild=null,g._previousSibling=null,g._nextSibling=null,g}return o(y,x),Object.defineProperty(y.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=h.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||c.dom.window._associatedDocument},set:function(g){this._nodeDocumentOverride=g},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"nodeName",{get:function(){return u.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:u.Guard.isAttrNode(this)?this._qualifiedName:u.Guard.isExclusiveTextNode(this)?"#text":u.Guard.isCDATASectionNode(this)?"#cdata-section":u.Guard.isProcessingInstructionNode(this)?this._target:u.Guard.isCommentNode(this)?"#comment":u.Guard.isDocumentNode(this)?"#document":u.Guard.isDocumentTypeNode(this)?this._name:u.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"baseURI",{get:function(){return d.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"isConnected",{get:function(){return u.Guard.isElementNode(this)&&h.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"ownerDocument",{get:function(){return this._nodeType===l.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),y.prototype.getRootNode=function(g){return h.tree_rootNode(this,!!g&&g.composed)},Object.defineProperty(y.prototype,"parentNode",{get:function(){return this._nodeType===l.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"parentElement",{get:function(){return this._parent&&u.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),y.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(y.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"nodeValue",{get:function(){return u.Guard.isAttrNode(this)?this._value:u.Guard.isCharacterDataNode(this)?this._data:null},set:function(g){g===null&&(g=""),u.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,g):u.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,this._data.length,g)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"textContent",{get:function(){return u.Guard.isDocumentFragmentNode(this)||u.Guard.isElementNode(this)?h.text_descendantTextContent(this):u.Guard.isAttrNode(this)?this._value:u.Guard.isCharacterDataNode(this)?this._data:null},set:function(g){g===null&&(g=""),u.Guard.isDocumentFragmentNode(this)||u.Guard.isElementNode(this)?h.node_stringReplaceAll(g,this):u.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,g):u.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,h.tree_nodeLength(this),g)},enumerable:!0,configurable:!0}),y.prototype.normalize=function(){for(var g,C,S,T,w=[],_=h.tree_getFirstDescendantNode(this,!1,!1,function(Y){return u.Guard.isExclusiveTextNode(Y)});_!==null;)w.push(_),_=h.tree_getNextDescendantNode(this,_,!1,!1,function(Y){return u.Guard.isExclusiveTextNode(Y)});for(var E=0;E<w.length;E++){var D=w[E];if(D._parent!==null){var O=h.tree_nodeLength(D);if(O!==0){var M=[],N="";try{for(var R=(g=void 0,s(h.text_contiguousExclusiveTextNodes(D))),B=R.next();!B.done;B=R.next()){var I=B.value;M.push(I),N+=I._data}}catch(Y){g={error:Y}}finally{try{B&&!B.done&&(C=R.return)&&C.call(R)}finally{if(g)throw g.error}}if(h.characterData_replaceData(D,O,0,N),c.dom.rangeList.size!==0)for(var P=D._nextSibling;P!==null&&u.Guard.isExclusiveTextNode(P);){var L=P,k=h.tree_index(L);try{for(var A=(S=void 0,s(c.dom.rangeList)),j=A.next();!j.done;j=A.next()){var H=j.value;H._start[0]===L&&(H._start[0]=D,H._start[1]+=O),H._end[0]===L&&(H._end[0]=D,H._end[1]+=O),H._start[0]===L._parent&&H._start[1]===k&&(H._start[0]=D,H._start[1]=O),H._end[0]===L._parent&&H._end[1]===k&&(H._end[0]=D,H._end[1]=O)}}catch(Y){S={error:Y}}finally{try{j&&!j.done&&(T=A.return)&&T.call(A)}finally{if(S)throw S.error}}O+=h.tree_nodeLength(P),P=P._nextSibling}for(var K=0;K<M.length;K++)(I=M[K])._parent!==null&&h.mutation_remove(I,I._parent)}else h.mutation_remove(D,D._parent)}}},y.prototype.cloneNode=function(g){if(g===void 0&&(g=!1),u.Guard.isShadowRoot(this))throw new f.NotSupportedError;return h.node_clone(this,null,g)},y.prototype.isEqualNode=function(g){return g===void 0&&(g=null),g!==null&&h.node_equals(this,g)},y.prototype.isSameNode=function(g){return g===void 0&&(g=null),this===g},y.prototype.compareDocumentPosition=function(g){if(g===this)return 0;var C=g,S=this,T=null,w=null;if(u.Guard.isAttrNode(C)&&(C=(T=C)._element),u.Guard.isAttrNode(S)&&(S=(w=S)._element,T&&C&&C===S))for(var _=0;_<S._attributeList.length;_++){var E=S._attributeList[_];if(h.node_equals(E,T))return l.Position.ImplementationSpecific|l.Position.Preceding;if(h.node_equals(E,w))return l.Position.ImplementationSpecific|l.Position.Following}return C===null||S===null||h.tree_rootNode(C)!==h.tree_rootNode(S)?l.Position.Disconnected|l.Position.ImplementationSpecific|(c.dom.compareCache.check(this,g)?l.Position.Preceding:l.Position.Following):!T&&h.tree_isAncestorOf(S,C)||w&&C===S?l.Position.Contains|l.Position.Preceding:!w&&h.tree_isDescendantOf(S,C)||T&&C===S?l.Position.ContainedBy|l.Position.Following:h.tree_isPreceding(S,C)?l.Position.Preceding:l.Position.Following},y.prototype.contains=function(g){return g!==null&&h.tree_isDescendantOf(this,g,!0)},y.prototype.lookupPrefix=function(g){return g?u.Guard.isElementNode(this)?h.node_locateANamespacePrefix(this,g):u.Guard.isDocumentNode(this)?this.documentElement===null?null:h.node_locateANamespacePrefix(this.documentElement,g):u.Guard.isDocumentTypeNode(this)||u.Guard.isDocumentFragmentNode(this)?null:u.Guard.isAttrNode(this)?this._element===null?null:h.node_locateANamespacePrefix(this._element,g):this._parent!==null&&u.Guard.isElementNode(this._parent)?h.node_locateANamespacePrefix(this._parent,g):null:null},y.prototype.lookupNamespaceURI=function(g){return h.node_locateANamespace(this,g||null)},y.prototype.isDefaultNamespace=function(g){return g||(g=null),h.node_locateANamespace(this,null)===g},y.prototype.insertBefore=function(g,C){return h.mutation_preInsert(g,this,C)},y.prototype.appendChild=function(g){return h.mutation_append(g,this)},y.prototype.replaceChild=function(g,C){return h.mutation_replace(C,g,this)},y.prototype.removeChild=function(g){return h.mutation_preRemove(g,this)},y.prototype._getTheParent=function(g){return u.Guard.isSlotable(this)&&h.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},y.ELEMENT_NODE=1,y.ATTRIBUTE_NODE=2,y.TEXT_NODE=3,y.CDATA_SECTION_NODE=4,y.ENTITY_REFERENCE_NODE=5,y.ENTITY_NODE=6,y.PROCESSING_INSTRUCTION_NODE=7,y.COMMENT_NODE=8,y.DOCUMENT_NODE=9,y.DOCUMENT_TYPE_NODE=10,y.DOCUMENT_FRAGMENT_NODE=11,y.NOTATION_NODE=12,y.DOCUMENT_POSITION_DISCONNECTED=1,y.DOCUMENT_POSITION_PRECEDING=2,y.DOCUMENT_POSITION_FOLLOWING=4,y.DOCUMENT_POSITION_CONTAINS=8,y.DOCUMENT_POSITION_CONTAINED_BY=16,y.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,y}(p.EventTargetImpl);n.NodeImpl=m,m.prototype._children=new u.EmptySet,v.idl_defineConst(m.prototype,"ELEMENT_NODE",1),v.idl_defineConst(m.prototype,"ATTRIBUTE_NODE",2),v.idl_defineConst(m.prototype,"TEXT_NODE",3),v.idl_defineConst(m.prototype,"CDATA_SECTION_NODE",4),v.idl_defineConst(m.prototype,"ENTITY_REFERENCE_NODE",5),v.idl_defineConst(m.prototype,"ENTITY_NODE",6),v.idl_defineConst(m.prototype,"PROCESSING_INSTRUCTION_NODE",7),v.idl_defineConst(m.prototype,"COMMENT_NODE",8),v.idl_defineConst(m.prototype,"DOCUMENT_NODE",9),v.idl_defineConst(m.prototype,"DOCUMENT_TYPE_NODE",10),v.idl_defineConst(m.prototype,"DOCUMENT_FRAGMENT_NODE",11),v.idl_defineConst(m.prototype,"NOTATION_NODE",12),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_PRECEDING",2),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_FOLLOWING",4),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINS",8),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),v.idl_defineConst(m.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(a,n){a.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},function(a,n,r){var i=r(87),o=r(41),s=r(27),c=r(26),l=r(128),p=[].push,u=function(f){var h=f==1,d=f==2,v=f==3,m=f==4,x=f==6,y=f==5||x;return function(g,C,S,T){for(var w,_,E=s(g),D=o(E),O=i(C,S,3),M=c(D.length),N=0,R=T||l,B=h?R(g,M):d?R(g,0):void 0;M>N;N++)if((y||N in D)&&(_=O(w=D[N],N,E),f)){if(h)B[N]=_;else if(_)switch(f){case 3:return!0;case 5:return w;case 6:return N;case 2:p.call(B,w)}else if(m)return!1}return x?-1:v||m?m:B}};a.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(a,n,r){var i=this&&this.__values||function(E){var D=typeof Symbol=="function"&&Symbol.iterator,O=D&&E[D],M=0;if(O)return O.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&M>=E.length&&(E=void 0),{value:E&&E[M++],done:!E}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(E,D){var O=typeof Symbol=="function"&&E[Symbol.iterator];if(!O)return E;var M,N,R=O.call(E),B=[];try{for(;(D===void 0||D-- >0)&&!(M=R.next()).done;)B.push(M.value)}catch(I){N={error:I}}finally{try{M&&!M.done&&(O=R.return)&&O.call(R)}finally{if(N)throw N.error}}return B},s=this&&this.__spread||function(){for(var E=[],D=0;D<arguments.length;D++)E=E.concat(o(arguments[D]));return E};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),l=r(9),p=r(2),u=r(3),f=r(1),h=r(7),d=r(73),v=r(17),m=r(172),x=r(72),y=r(51),g=r(30),C=r(106);function S(E,D,O){var M,N,R,B,I,P,L,k,A=D._nodeType,j=E._nodeType,H=O?O._nodeType:null;if(A!==p.NodeType.Document&&A!==p.NodeType.DocumentFragment&&A!==p.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+D.nodeName+".");if(v.tree_isHostIncludingAncestorOf(D,E,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+E.nodeName+", parent node is "+D.nodeName+".");if(O!==null&&O._parent!==D)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+O.nodeName+", parent node is "+D.nodeName+".");if(j!==p.NodeType.DocumentFragment&&j!==p.NodeType.DocumentType&&j!==p.NodeType.Element&&j!==p.NodeType.Text&&j!==p.NodeType.ProcessingInstruction&&j!==p.NodeType.CData&&j!==p.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+E.nodeName+".");if(j===p.NodeType.Text&&A===p.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+E.nodeName+".");if(j===p.NodeType.DocumentType&&A!==p.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+D.nodeName+".");if(A===p.NodeType.Document){if(j===p.NodeType.DocumentFragment){var K=0;try{for(var Y=i(E._children),q=Y.next();!q.done;q=Y.next()){var Z=q.value;if(Z._nodeType===p.NodeType.Element)K++;else if(Z._nodeType===p.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+Z.nodeName+".")}}catch(W){M={error:W}}finally{try{q&&!q.done&&(N=Y.return)&&N.call(Y)}finally{if(M)throw M.error}}if(K>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+K+" element nodes.");if(K===1){try{for(var re=i(D._children),ae=re.next();!ae.done;ae=re.next())if(ae.value._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(W){R={error:W}}finally{try{ae&&!ae.done&&(B=re.return)&&B.call(re)}finally{if(R)throw R.error}}if(O){if(H===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var ee=O._nextSibling;ee;){if(ee._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");ee=ee._nextSibling}}}}else if(j===p.NodeType.Element){try{for(var F=i(D._children),b=F.next();!b.done;b=F.next())if(b.value._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+E.nodeName+".")}catch(W){I={error:W}}finally{try{b&&!b.done&&(P=F.return)&&P.call(F)}finally{if(I)throw I.error}}if(O){if(H===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");for(ee=O._nextSibling;ee;){if(ee._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");ee=ee._nextSibling}}}else if(j===p.NodeType.DocumentType){try{for(var G=i(D._children),U=G.next();!U.done;U=G.next())if(U.value._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+E.nodeName+".")}catch(W){L={error:W}}finally{try{U&&!U.done&&(k=G.return)&&k.call(G)}finally{if(L)throw L.error}}if(O)for(var z=O._previousSibling;z;){if(z._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");z=z._previousSibling}else for(z=D._firstChild;z;){if(z._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");z=z._nextSibling}}}}function T(E,D,O){S(E,D,O);var M=O;return M===E&&(M=E._nextSibling),C.document_adopt(E,D._nodeDocument),w(E,D,M),E}function w(E,D,O,M){var N,R;if(O!==null||E._nodeType===p.NodeType.DocumentFragment){var B=E._nodeType===p.NodeType.DocumentFragment?E._children.size:1;if(O!==null&&c.dom.rangeList.size!==0){var I=v.tree_index(O);try{for(var P=i(c.dom.rangeList),L=P.next();!L.done;L=P.next()){var k=L.value;k._start[0]===D&&k._start[1]>I&&(k._start[1]+=B),k._end[0]===D&&k._end[1]>I&&(k._end[1]+=B)}}catch(ae){N={error:ae}}finally{try{L&&!L.done&&(R=P.return)&&R.call(P)}finally{if(N)throw N.error}}}var A=E._nodeType===p.NodeType.DocumentFragment?new(Array.bind.apply(Array,s([void 0],E._children))):[E];if(E._nodeType===p.NodeType.DocumentFragment)for(;E._firstChild;)_(E._firstChild,E,!0);c.dom.features.mutationObservers&&E._nodeType===p.NodeType.DocumentFragment&&y.observer_queueTreeMutationRecord(E,[],A,null,null);for(var j=O?O._previousSibling:D._lastChild,H=O===null?-1:v.tree_index(O),K=0;K<A.length;K++){var Y=A[K];if(u.Guard.isElementNode(Y)&&(u.Guard.isDocumentNode(D)&&(D._documentElement=Y),Y._nodeDocument._hasNamespaces||Y._namespace===null&&Y._namespacePrefix===null||(Y._nodeDocument._hasNamespaces=!0)),Y._parent=D,O===null?h.set.append(D._children,Y):(h.set.insert(D._children,Y,H),H++),D._firstChild===null)Y._previousSibling=null,Y._nextSibling=null,D._firstChild=Y,D._lastChild=Y;else{var q=O?O._previousSibling:D._lastChild,Z=O||null;Y._previousSibling=q,Y._nextSibling=Z,q&&(q._nextSibling=Y),Z&&(Z._previousSibling=Y),q||(D._firstChild=Y),Z||(D._lastChild=Y)}c.dom.features.slots&&D._shadowRoot!==null&&u.Guard.isSlotable(Y)&&x.shadowTree_assignASlot(Y),c.dom.features.steps&&u.Guard.isTextNode(Y)&&g.dom_runChildTextContentChangeSteps(D),c.dom.features.slots&&u.Guard.isShadowRoot(v.tree_rootNode(D))&&u.Guard.isSlot(D)&&f.isEmpty(D._assignedNodes)&&x.shadowTree_signalASlotChange(D),c.dom.features.slots&&x.shadowTree_assignSlotablesForATree(v.tree_rootNode(Y));for(var re=v.tree_getFirstDescendantNode(Y,!0,!0);re!==null;)c.dom.features.steps&&g.dom_runInsertionSteps(re),c.dom.features.customElements&&u.Guard.isElementNode(re)&&x.shadowTree_isConnected(re)&&(u.Guard.isCustomElementNode(re)?d.customElement_enqueueACustomElementCallbackReaction(re,"connectedCallback",[]):d.customElement_tryToUpgrade(re)),re=v.tree_getNextDescendantNode(Y,re,!0,!0)}c.dom.features.mutationObservers&&(M||y.observer_queueTreeMutationRecord(D,A,[],j,O))}else(function(ae,ee,F){var b=ee._lastChild;if(u.Guard.isElementNode(ae)&&(u.Guard.isDocumentNode(ee)&&(ee._documentElement=ae),ae._nodeDocument._hasNamespaces||ae._namespace===null&&ae._namespacePrefix===null||(ae._nodeDocument._hasNamespaces=!0)),ae._parent=ee,ee._children.add(ae),ee._firstChild===null)ae._previousSibling=null,ae._nextSibling=null,ee._firstChild=ae,ee._lastChild=ae;else{var G=ee._lastChild;ae._previousSibling=G,ae._nextSibling=null,G&&(G._nextSibling=ae),G||(ee._firstChild=ae),ee._lastChild=ae}c.dom.features.slots&&ee._shadowRoot!==null&&u.Guard.isSlotable(ae)&&x.shadowTree_assignASlot(ae),c.dom.features.steps&&u.Guard.isTextNode(ae)&&g.dom_runChildTextContentChangeSteps(ee),c.dom.features.slots&&u.Guard.isShadowRoot(v.tree_rootNode(ee))&&u.Guard.isSlot(ee)&&f.isEmpty(ee._assignedNodes)&&x.shadowTree_signalASlotChange(ee),c.dom.features.slots&&x.shadowTree_assignSlotablesForATree(v.tree_rootNode(ae)),c.dom.features.steps&&g.dom_runInsertionSteps(ae),c.dom.features.customElements&&u.Guard.isElementNode(ae)&&x.shadowTree_isConnected(ae)&&(u.Guard.isCustomElementNode(ae)?d.customElement_enqueueACustomElementCallbackReaction(ae,"connectedCallback",[]):d.customElement_tryToUpgrade(ae)),c.dom.features.mutationObservers&&(F||y.observer_queueTreeMutationRecord(ee,[ae],[],b,null))})(E,D,M)}function _(E,D,O){var M,N,R,B,I,P,L,k;if(c.dom.rangeList.size!==0){var A=v.tree_index(E);try{for(var j=i(c.dom.rangeList),H=j.next();!H.done;H=j.next()){var K=H.value;v.tree_isDescendantOf(E,K._start[0],!0)&&(K._start=[D,A]),v.tree_isDescendantOf(E,K._end[0],!0)&&(K._end=[D,A]),K._start[0]===D&&K._start[1]>A&&K._start[1]--,K._end[0]===D&&K._end[1]>A&&K._end[1]--}}catch(ne){M={error:ne}}finally{try{H&&!H.done&&(N=j.return)&&N.call(j)}finally{if(M)throw M.error}}try{for(var Y=i(c.dom.rangeList),q=Y.next();!q.done;q=Y.next())(K=q.value)._start[0]===D&&K._start[1]>A&&(K._start[1]-=1),K._end[0]===D&&K._end[1]>A&&(K._end[1]-=1)}catch(ne){R={error:ne}}finally{try{q&&!q.done&&(B=Y.return)&&B.call(Y)}finally{if(R)throw R.error}}}if(c.dom.features.steps)try{for(var Z=i(m.nodeIterator_iteratorList()),re=Z.next();!re.done;re=Z.next()){var ae=re.value;ae._root._nodeDocument===E._nodeDocument&&g.dom_runNodeIteratorPreRemovingSteps(ae,E)}}catch(ne){I={error:ne}}finally{try{re&&!re.done&&(P=Z.return)&&P.call(Z)}finally{if(I)throw I.error}}var ee=E._previousSibling,F=E._nextSibling;u.Guard.isDocumentNode(D)&&u.Guard.isElementNode(E)&&(D._documentElement=null),E._parent=null,D._children.delete(E);var b=E._previousSibling,G=E._nextSibling;E._previousSibling=null,E._nextSibling=null,b&&(b._nextSibling=G),G&&(G._previousSibling=b),b||(D._firstChild=G),G||(D._lastChild=b),c.dom.features.slots&&u.Guard.isSlotable(E)&&E._assignedSlot!==null&&x.shadowTree_isAssigned(E)&&x.shadowTree_assignSlotables(E._assignedSlot),c.dom.features.slots&&u.Guard.isShadowRoot(v.tree_rootNode(D))&&u.Guard.isSlot(D)&&f.isEmpty(D._assignedNodes)&&x.shadowTree_signalASlotChange(D),c.dom.features.slots&&v.tree_getFirstDescendantNode(E,!0,!1,function(ne){return u.Guard.isSlot(ne)})!==null&&(x.shadowTree_assignSlotablesForATree(v.tree_rootNode(D)),x.shadowTree_assignSlotablesForATree(E)),c.dom.features.steps&&g.dom_runRemovingSteps(E,D),c.dom.features.customElements&&u.Guard.isCustomElementNode(E)&&d.customElement_enqueueACustomElementCallbackReaction(E,"disconnectedCallback",[]);for(var U=v.tree_getFirstDescendantNode(E,!1,!0);U!==null;)c.dom.features.steps&&g.dom_runRemovingSteps(U,E),c.dom.features.customElements&&u.Guard.isCustomElementNode(U)&&d.customElement_enqueueACustomElementCallbackReaction(U,"disconnectedCallback",[]),U=v.tree_getNextDescendantNode(E,U,!1,!0);if(c.dom.features.mutationObservers)for(var z=v.tree_getFirstAncestorNode(D,!0);z!==null;){try{for(var W=(L=void 0,i(z._registeredObserverList)),$=W.next();!$.done;$=W.next()){var J=$.value;J.options.subtree&&E._registeredObserverList.push({observer:J.observer,options:J.options,source:J})}}catch(ne){L={error:ne}}finally{try{$&&!$.done&&(k=W.return)&&k.call(W)}finally{if(L)throw L.error}}z=v.tree_getNextAncestorNode(D,z,!0)}c.dom.features.mutationObservers&&(O||y.observer_queueTreeMutationRecord(D,[],[E],ee,F)),c.dom.features.steps&&u.Guard.isTextNode(E)&&g.dom_runChildTextContentChangeSteps(D)}n.mutation_ensurePreInsertionValidity=S,n.mutation_preInsert=T,n.mutation_insert=w,n.mutation_append=function(E,D){return T(E,D,null)},n.mutation_replace=function(E,D,O){var M,N,R,B,I,P,L,k;if(O._nodeType!==p.NodeType.Document&&O._nodeType!==p.NodeType.DocumentFragment&&O._nodeType!==p.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+O.nodeName+".");if(v.tree_isHostIncludingAncestorOf(O,D,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+D.nodeName+", parent node is "+O.nodeName+".");if(E._parent!==O)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+O.nodeName+".");if(D._nodeType!==p.NodeType.DocumentFragment&&D._nodeType!==p.NodeType.DocumentType&&D._nodeType!==p.NodeType.Element&&D._nodeType!==p.NodeType.Text&&D._nodeType!==p.NodeType.ProcessingInstruction&&D._nodeType!==p.NodeType.CData&&D._nodeType!==p.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+D.nodeName+".");if(D._nodeType===p.NodeType.Text&&O._nodeType===p.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+D.nodeName+".");if(D._nodeType===p.NodeType.DocumentType&&O._nodeType!==p.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+O.nodeName+".");if(O._nodeType===p.NodeType.Document){if(D._nodeType===p.NodeType.DocumentFragment){var A=0;try{for(var j=i(D._children),H=j.next();!H.done;H=j.next()){var K=H.value;if(K._nodeType===p.NodeType.Element)A++;else if(K._nodeType===p.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+K.nodeName+".")}}catch(J){M={error:J}}finally{try{H&&!H.done&&(N=j.return)&&N.call(j)}finally{if(M)throw M.error}}if(A>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+A+" element nodes.");if(A===1){try{for(var Y=i(O._children),q=Y.next();!q.done;q=Y.next())if((b=q.value)._nodeType===p.NodeType.Element&&b!==E)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(J){R={error:J}}finally{try{q&&!q.done&&(B=Y.return)&&B.call(Y)}finally{if(R)throw R.error}}for(var Z=E._nextSibling;Z;){if(Z._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");Z=Z._nextSibling}}}else if(D._nodeType===p.NodeType.Element){try{for(var re=i(O._children),ae=re.next();!ae.done;ae=re.next())if((b=ae.value)._nodeType===p.NodeType.Element&&b!==E)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+D.nodeName+".")}catch(J){I={error:J}}finally{try{ae&&!ae.done&&(P=re.return)&&P.call(re)}finally{if(I)throw I.error}}for(Z=E._nextSibling;Z;){if(Z._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+D.nodeName+".");Z=Z._nextSibling}}else if(D._nodeType===p.NodeType.DocumentType){try{for(var ee=i(O._children),F=ee.next();!F.done;F=ee.next()){var b;if((b=F.value)._nodeType===p.NodeType.DocumentType&&b!==E)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+D.nodeName+".")}}catch(J){L={error:J}}finally{try{F&&!F.done&&(k=ee.return)&&k.call(ee)}finally{if(L)throw L.error}}for(var G=E._previousSibling;G;){if(G._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+D.nodeName+".");G=G._previousSibling}}}var U=E._nextSibling;U===D&&(U=D._nextSibling);var z=E._previousSibling;C.document_adopt(D,O._nodeDocument);var W=[];E._parent!==null&&(W.push(E),_(E,E._parent,!0));var $=[];return D._nodeType===p.NodeType.DocumentFragment?$=Array.from(D._children):$.push(D),w(D,O,U,!0),c.dom.features.mutationObservers&&y.observer_queueTreeMutationRecord(O,$,W,z,U),E},n.mutation_replaceAll=function(E,D){var O,M;E!==null&&C.document_adopt(E,D._nodeDocument);var N=Array.from(D._children),R=[];E&&E._nodeType===p.NodeType.DocumentFragment?R=Array.from(E._children):E!==null&&R.push(E);try{for(var B=i(N),I=B.next();!I.done;I=B.next())_(I.value,D,!0)}catch(P){O={error:P}}finally{try{I&&!I.done&&(M=B.return)&&M.call(B)}finally{if(O)throw O.error}}E!==null&&w(E,D,null,!0),c.dom.features.mutationObservers&&y.observer_queueTreeMutationRecord(D,R,N,null,null)},n.mutation_preRemove=function(E,D){if(E._parent!==D)throw new l.NotFoundError("The child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+D.nodeName+".");return _(E,D),E},n.mutation_remove=_},function(a,n,r){function i(o){return o==null}a.exports.isNothing=i,a.exports.isObject=function(o){return typeof o=="object"&&o!==null},a.exports.toArray=function(o){return Array.isArray(o)?o:i(o)?[]:[o]},a.exports.repeat=function(o,s){var c,l="";for(c=0;c<s;c+=1)l+=o;return l},a.exports.isNegativeZero=function(o){return o===0&&Number.NEGATIVE_INFINITY===1/o},a.exports.extend=function(o,s){var c,l,p,u;if(s)for(c=0,l=(u=Object.keys(s)).length;c<l;c+=1)o[p=u[c]]=s[p];return o}},function(a,n,r){var i=r(38),o=r(53),s=r(10);function c(p,u,f){var h=[];return p.include.forEach(function(d){f=c(d,u,f)}),p[u].forEach(function(d){f.forEach(function(v,m){v.tag===d.tag&&v.kind===d.kind&&h.push(m)}),f.push(d)}),f.filter(function(d,v){return h.indexOf(v)===-1})}function l(p){this.include=p.include||[],this.implicit=p.implicit||[],this.explicit=p.explicit||[],this.implicit.forEach(function(u){if(u.loadKind&&u.loadKind!=="scalar")throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=c(this,"implicit",[]),this.compiledExplicit=c(this,"explicit",[]),this.compiledTypeMap=function(){var u,f,h={scalar:{},sequence:{},mapping:{},fallback:{}};function d(v){h[v.kind][v.tag]=h.fallback[v.tag]=v}for(u=0,f=arguments.length;u<f;u+=1)arguments[u].forEach(d);return h}(this.compiledImplicit,this.compiledExplicit)}l.DEFAULT=null,l.create=function(){var p,u;switch(arguments.length){case 1:p=l.DEFAULT,u=arguments[0];break;case 2:p=arguments[0],u=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(p=i.toArray(p),u=i.toArray(u),!p.every(function(f){return f instanceof l}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!u.every(function(f){return f instanceof s}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new l({include:p,explicit:u})},a.exports=l},function(a,n){a.exports=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}}},function(a,n,r){var i=r(8),o=r(42),s="".split;a.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return o(c)=="String"?s.call(c,""):Object(c)}:Object},function(a,n){var r={}.toString;a.exports=function(i){return r.call(i).slice(8,-1)}},function(a,n,r){var i,o,s,c=r(186),l=r(11),p=r(13),u=r(21),f=r(14),h=r(57),d=r(45),v=l.WeakMap;if(c){var m=new v,x=m.get,y=m.has,g=m.set;i=function(S,T){return g.call(m,S,T),T},o=function(S){return x.call(m,S)||{}},s=function(S){return y.call(m,S)}}else{var C=h("state");d[C]=!0,i=function(S,T){return u(S,C,T),T},o=function(S){return f(S,C)?S[C]:{}},s=function(S){return f(S,C)}}a.exports={set:i,get:o,has:s,enforce:function(S){return s(S)?o(S):i(S,{})},getterFor:function(S){return function(T){var w;if(!p(T)||(w=o(T)).type!==S)throw TypeError("Incompatible receiver, "+S+" required");return w}}}},function(a,n){a.exports=!1},function(a,n){a.exports={}},function(a,n,r){var i=r(120),o=r(11),s=function(c){return typeof c=="function"?c:void 0};a.exports=function(c,l){return arguments.length<2?s(i[c])||s(o[c]):i[c]&&i[c][l]||o[c]&&o[c][l]}},function(a,n){var r=Math.ceil,i=Math.floor;a.exports=function(o){return isNaN(o=+o)?0:(o>0?i:r)(o)}},function(a,n,r){var i=r(8);a.exports=function(o,s){var c=[][o];return!!c&&i(function(){c.call(null,s||function(){throw 1},1)})}},function(a,n){a.exports={}},function(a,n,r){r(31),r(32),r(33),r(220),r(64),r(19),r(65),r(20),r(68),r(66),r(92),r(144),r(22),r(94),r(23);var i=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,m=v&&d[v],x=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&x>=d.length&&(d=void 0),{value:d&&d[x++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(d,v){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var x,y,g=m.call(d),C=[];try{for(;(v===void 0||v-- >0)&&!(x=g.next()).done;)C.push(x.value)}catch(S){y={error:S}}finally{try{x&&!x.done&&(m=g.return)&&m.call(g)}finally{if(y)throw y.error}}return C},s=this&&this.__spread||function(){for(var d=[],v=0;v<arguments.length;v++)d=d.concat(o(arguments[v]));return d};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),l=r(69),p=r(95),u=r(7),f=r(0),h=function(){function d(v){this.level=0,this._builderOptions=v}return d.prototype.declaration=function(v,m,x){},d.prototype.docType=function(v,m,x){},d.prototype.comment=function(v){},d.prototype.text=function(v){},d.prototype.instruction=function(v,m){},d.prototype.cdata=function(v){},d.prototype.openTagBegin=function(v){},d.prototype.openTagEnd=function(v,m,x){},d.prototype.closeTag=function(v){},d.prototype.attributes=function(v){var m,x;try{for(var y=i(v),g=y.next();!g.done;g=y.next()){var C=g.value;this.attribute(C[1]===null?C[2]:C[1]+":"+C[2],C[3])}}catch(S){m={error:S}}finally{try{g&&!g.done&&(x=y.return)&&x.call(y)}finally{if(m)throw m.error}}},d.prototype.attribute=function(v,m){},d.prototype.beginElement=function(v){},d.prototype.endElement=function(v){},d.prototype.serializeNode=function(v,m){var x=v._nodeDocument!==void 0&&v._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=v,x){var y=new p.NamespacePrefixMap;y.set("xml",u.namespace.XML),this._serializeNodeNS(v,null,y,{value:1},m)}else this._serializeNode(v,m)},d.prototype._serializeNodeNS=function(v,m,x,y,g){switch(this.currentNode=v,v.nodeType){case c.NodeType.Element:this._serializeElementNS(v,m,x,y,g);break;case c.NodeType.Document:this._serializeDocumentNS(v,m,x,y,g);break;case c.NodeType.Comment:this._serializeComment(v,g);break;case c.NodeType.Text:this._serializeText(v,g);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(v,m,x,y,g);break;case c.NodeType.DocumentType:this._serializeDocumentType(v,g);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(v,g);break;case c.NodeType.CData:this._serializeCData(v,g);break;default:throw new Error("Unknown node type: "+v.nodeType)}},d.prototype._serializeNode=function(v,m){switch(this.currentNode=v,v.nodeType){case c.NodeType.Element:this._serializeElement(v,m);break;case c.NodeType.Document:this._serializeDocument(v,m);break;case c.NodeType.Comment:this._serializeComment(v,m);break;case c.NodeType.Text:this._serializeText(v,m);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragment(v,m);break;case c.NodeType.DocumentType:this._serializeDocumentType(v,m);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(v,m);break;case c.NodeType.CData:this._serializeCData(v,m);break;default:throw new Error("Unknown node type: "+v.nodeType)}},d.prototype._serializeElementNS=function(v,m,x,y,g){var C,S,T=[];if(g&&(v.localName.indexOf(":")!==-1||!f.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var w="",_=!1,E=!1,D=x.copy(),O={},M=this._recordNamespaceInformation(v,D,O),N=m,R=v.namespaceURI;if(N===R)M!==null&&(E=!0),w=R===u.namespace.XML?"xml:"+v.localName:v.localName,this.beginElement(w),this.openTagBegin(w);else{var B=v.prefix,I=null;if(B===null&&R===M||(I=D.get(B,R)),B==="xmlns"){if(g)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");I=B}I!==null?(w=I+":"+v.localName,M!==null&&M!==u.namespace.XML&&(N=M||null),this.beginElement(w),this.openTagBegin(w)):B!==null?(B in O&&(B=this._generatePrefix(R,D,y)),D.set(B,R),w+=B+":"+v.localName,this.beginElement(w),this.openTagBegin(w),T.push([null,"xmlns",B,this._serializeAttributeValue(R,g)]),M!==null&&(N=M||null)):M===null||M!==null&&M!==R?(E=!0,w+=v.localName,N=R,this.beginElement(w),this.openTagBegin(w),T.push([null,null,"xmlns",this._serializeAttributeValue(R,g)])):(w+=v.localName,N=R,this.beginElement(w),this.openTagBegin(w))}T.push.apply(T,s(this._serializeAttributesNS(v,D,y,O,E,g))),this.attributes(T);var P=R===u.namespace.HTML;if(P&&v.childNodes.length===0&&d._VoidElementNames.has(v.localName)?(this.openTagEnd(w,!0,!0),this.endElement(w),_=!0):P||v.childNodes.length!==0?this.openTagEnd(w,!1,!1):(this.openTagEnd(w,!0,!1),this.endElement(w),_=!0),!_){if(!(P&&v.localName==="template"))try{for(var L=i(v.childNodes),k=L.next();!k.done;k=L.next()){var A=k.value;this.level++,this._serializeNodeNS(A,N,D,y,g),this.level--}}catch(j){C={error:j}}finally{try{k&&!k.done&&(S=L.return)&&S.call(L)}finally{if(C)throw C.error}}this.closeTag(w),this.endElement(w)}},d.prototype._serializeElement=function(v,m){var x,y;if(m&&(v.localName.indexOf(":")!==-1||!f.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var g=!1,C=v.localName;this.beginElement(C),this.openTagBegin(C);var S=this._serializeAttributes(v,m);if(this.attributes(S),v.hasChildNodes()?this.openTagEnd(C,!1,!1):(this.openTagEnd(C,!0,!1),this.endElement(C),g=!0),!g){try{for(var T=i(v._children),w=T.next();!w.done;w=T.next()){var _=w.value;this.level++,this._serializeNode(_,m),this.level--}}catch(E){x={error:E}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(x)throw x.error}}this.closeTag(C),this.endElement(C)}},d.prototype._serializeDocumentNS=function(v,m,x,y,g){var C,S;if(g&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var T=i(v.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;this._serializeNodeNS(_,m,x,y,g)}}catch(E){C={error:E}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},d.prototype._serializeDocument=function(v,m){var x,y;if(m&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var g=i(v._children),C=g.next();!C.done;C=g.next()){var S=C.value;this._serializeNode(S,m)}}catch(T){x={error:T}}finally{try{C&&!C.done&&(y=g.return)&&y.call(g)}finally{if(x)throw x.error}}},d.prototype._serializeComment=function(v,m){if(m&&(!f.xml_isLegalChar(v.data)||v.data.indexOf("--")!==-1||v.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(v.data)},d.prototype._serializeText=function(v,m){if(m&&!f.xml_isLegalChar(v.data))throw new Error("Text data contains invalid characters (well-formed required).");var x=v.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(x)},d.prototype._serializeDocumentFragmentNS=function(v,m,x,y,g){var C,S;try{for(var T=i(v.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;this._serializeNodeNS(_,m,x,y,g)}}catch(E){C={error:E}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},d.prototype._serializeDocumentFragment=function(v,m){var x,y;try{for(var g=i(v._children),C=g.next();!C.done;C=g.next()){var S=C.value;this._serializeNode(S,m)}}catch(T){x={error:T}}finally{try{C&&!C.done&&(y=g.return)&&y.call(g)}finally{if(x)throw x.error}}},d.prototype._serializeDocumentType=function(v,m){if(m&&!f.xml_isPubidChar(v.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(m&&(!f.xml_isLegalChar(v.systemId)||v.systemId.indexOf('"')!==-1&&v.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(v.name,v.publicId,v.systemId)},d.prototype._serializeProcessingInstruction=function(v,m){if(m&&(v.target.indexOf(":")!==-1||/^xml$/i.test(v.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(m&&(!f.xml_isLegalChar(v.data)||v.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(v.target,v.data)},d.prototype._serializeCData=function(v,m){if(m&&v.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(v.data)},d.prototype._serializeAttributesNS=function(v,m,x,y,g,C){var S,T,w=[],_=C?new l.LocalNameSet:void 0;try{for(var E=i(v.attributes),D=E.next();!D.done;D=E.next()){var O=D.value;if(C||g||O.namespaceURI!==null){if(C&&_&&_.has(O.namespaceURI,O.localName))throw new Error("Element contains duplicate attributes (well-formed required).");C&&_&&_.set(O.namespaceURI,O.localName);var M=O.namespaceURI,N=null;if(M!==null)if(N=m.get(O.prefix,M),M===u.namespace.XMLNS){if(O.value===u.namespace.XML||O.prefix===null&&g||O.prefix!==null&&(!(O.localName in y)||y[O.localName]!==O.value)&&m.has(O.localName,O.value))continue;if(C&&O.value===u.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(C&&O.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");O.prefix==="xmlns"&&(N="xmlns")}else N===null&&(N=O.prefix===null||m.hasPrefix(O.prefix)&&!m.has(O.prefix,M)?this._generatePrefix(M,m,x):O.prefix,w.push([null,"xmlns",N,this._serializeAttributeValue(M,C)]));if(C&&(O.localName.indexOf(":")!==-1||!f.xml_isName(O.localName)||O.localName==="xmlns"&&M===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");w.push([M,N,O.localName,this._serializeAttributeValue(O.value,C)])}else w.push([null,null,O.localName,this._serializeAttributeValue(O.value,C)])}}catch(R){S={error:R}}finally{try{D&&!D.done&&(T=E.return)&&T.call(E)}finally{if(S)throw S.error}}return w},d.prototype._serializeAttributes=function(v,m){var x,y,g=[],C=m?{}:void 0;try{for(var S=i(v.attributes),T=S.next();!T.done;T=S.next()){var w=T.value;if(m){if(m&&C&&w.localName in C)throw new Error("Element contains duplicate attributes (well-formed required).");if(m&&C&&(C[w.localName]=!0),m&&(w.localName.indexOf(":")!==-1||!f.xml_isName(w.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");g.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}else g.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}}catch(_){x={error:_}}finally{try{T&&!T.done&&(y=S.return)&&y.call(S)}finally{if(x)throw x.error}}return g},d.prototype._recordNamespaceInformation=function(v,m,x){var y,g,C=null;try{for(var S=i(v.attributes),T=S.next();!T.done;T=S.next()){var w=T.value,_=w.namespaceURI,E=w.prefix;if(_===u.namespace.XMLNS){if(E===null){C=w.value;continue}var D=w.localName,O=w.value;if(O===u.namespace.XML||(O===""&&(O=null),m.has(D,O)))continue;m.set(D,O),x[D]=O||""}}}catch(M){y={error:M}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}return C},d.prototype._generatePrefix=function(v,m,x){var y="ns"+x.value.toString();return x.value++,m.set(y,v),y},d.prototype._serializeAttributeValue=function(v,m){if(m&&v!==null&&!f.xml_isLegalChar(v))throw new Error("Invalid characters in attribute value.");return v===null?"":v.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},d._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),d}();n.BaseWriter=h},function(a,n,r){var i=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,y=x&&m[x],g=0;if(y)return y.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(m,x){var y=typeof Symbol=="function"&&m[Symbol.iterator];if(!y)return m;var g,C,S=y.call(m),T=[];try{for(;(x===void 0||x-- >0)&&!(g=S.next()).done;)T.push(g.value)}catch(w){C={error:w}}finally{try{g&&!g.done&&(y=S.return)&&y.call(S)}finally{if(C)throw C.error}}return T};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),c=r(3),l=r(7),p=r(29),u=r(17),f=r(97);function h(){var m=s.dom.window;m._mutationObserverMicrotaskQueued||(m._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){d()}))}function d(){var m,x,y,g,C=s.dom.window;C._mutationObserverMicrotaskQueued=!1;var S=l.set.clone(C._mutationObservers),T=l.set.clone(C._signalSlots);l.set.empty(C._signalSlots);var w=function(N){var R=l.list.clone(N._recordQueue);l.list.empty(N._recordQueue);for(var B=0;B<N._nodeList.length;B++){var I=N._nodeList[B];l.list.remove(I._registeredObserverList,function(P){return c.Guard.isTransientRegisteredObserver(P)&&P.observer===N})}if(!l.list.isEmpty(R))try{N._callback.call(N,R,N)}catch{}};try{for(var _=i(S),E=_.next();!E.done;E=_.next())w(E.value)}catch(N){m={error:N}}finally{try{E&&!E.done&&(x=_.return)&&x.call(_)}finally{if(m)throw m.error}}if(s.dom.features.slots)try{for(var D=i(T),O=D.next();!O.done;O=D.next()){var M=O.value;f.event_fireAnEvent("slotchange",M,void 0,{bubbles:!0})}}catch(N){y={error:N}}finally{try{O&&!O.done&&(g=D.return)&&g.call(D)}finally{if(y)throw y.error}}}function v(m,x,y,g,C,S,T,w,_){for(var E,D,O=new Map,M=u.tree_getFirstAncestorNode(x,!0);M!==null;){for(var N=0;N<M._registeredObserverList.length;N++){var R=M._registeredObserverList[N],B=R.options;if((M===x||B.subtree)&&(m!=="attributes"||B.attributes)&&(m!=="attributes"||!B.attributeFilter||B.attributeFilter.indexOf(y||"")&&g===null)&&(m!=="characterData"||B.characterData)&&(m!=="childList"||B.childList)){var I=R.observer;O.has(I)||O.set(I,null),(m==="attributes"&&B.attributeOldValue||m==="characterData"&&B.characterDataOldValue)&&O.set(I,C)}}M=u.tree_getNextAncestorNode(x,M,!0)}try{for(var P=i(O),L=P.next();!L.done;L=P.next()){var k=o(L.value,2),A=k[0],j=k[1],H=p.create_mutationRecord(m,x,p.create_nodeListStatic(x,S),p.create_nodeListStatic(x,T),w,_,y,g,j);A._recordQueue.push(H)}}catch(K){E={error:K}}finally{try{L&&!L.done&&(D=P.return)&&D.call(P)}finally{if(E)throw E.error}}h()}n.observer_queueAMutationObserverMicrotask=h,n.observer_notifyMutationObservers=d,n.observer_queueMutationRecord=v,n.observer_queueTreeMutationRecord=function(m,x,y,g,C){v("childList",m,null,null,null,x,y,g,C)},n.observer_queueAttributeMutationRecord=function(m,x,y,g){v("attributes",m,x,y,g,[],[],null,null)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),o=r(7),s=r(3),c=r(9),l=r(29),p=r(73),u=r(51),f=r(30),h=r(37),d=r(106);function v(S,T,w){i.dom.features.mutationObservers&&u.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&p.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,S._value,w,S._namespace]),i.dom.features.steps&&f.dom_runAttributeChangeSteps(T,S._localName,S._value,w,S._namespace),S._value=w}function m(S,T){i.dom.features.mutationObservers&&u.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,null),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&p.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,null,S._value,S._namespace]),i.dom.features.steps&&f.dom_runAttributeChangeSteps(T,S._localName,null,S._value,S._namespace),T._attributeList._asArray().push(S),S._element=T,T._nodeDocument._hasNamespaces||S._namespace===null&&S._namespacePrefix===null&&S._localName!=="xmlns"||(T._nodeDocument._hasNamespaces=!0)}function x(S,T){i.dom.features.mutationObservers&&u.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&p.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,S._value,null,S._namespace]),i.dom.features.steps&&f.dom_runAttributeChangeSteps(T,S._localName,S._value,null,S._namespace);var w=T._attributeList._asArray().indexOf(S);T._attributeList._asArray().splice(w,1),S._element=null}function y(S,T,w){i.dom.features.mutationObservers&&u.observer_queueAttributeMutationRecord(w,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(w)&&p.customElement_enqueueACustomElementCallbackReaction(w,"attributeChangedCallback",[S._localName,S._value,T._value,S._namespace]),i.dom.features.steps&&f.dom_runAttributeChangeSteps(w,S._localName,S._value,T._value,S._namespace);var _=w._attributeList._asArray().indexOf(S);_!==-1&&(w._attributeList._asArray()[_]=T),S._element=null,T._element=w,w._nodeDocument._hasNamespaces||T._namespace===null&&T._namespacePrefix===null&&T._localName!=="xmlns"||(w._nodeDocument._hasNamespaces=!0)}function g(S,T){return T._namespace===o.namespace.HTML&&T._nodeDocument._type==="html"&&(S=S.toLowerCase()),T._attributeList._asArray().find(function(w){return w._qualifiedName===S})||null}function C(S,T,w){var _=S||null;return w._attributeList._asArray().find(function(E){return E._namespace===_&&E._localName===T})||null}n.element_has=function(S,T){return T._attributeList._asArray().indexOf(S)!==-1},n.element_change=v,n.element_append=m,n.element_remove=x,n.element_replace=y,n.element_getAnAttributeByName=g,n.element_getAnAttributeByNamespaceAndLocalName=C,n.element_getAnAttributeValue=function(S,T,w){w===void 0&&(w="");var _=C(w,T,S);return _===null?"":_._value},n.element_setAnAttribute=function(S,T){if(S._element!==null&&S._element!==T)throw new c.InUseAttributeError("This attribute already exists in the document: "+S._qualifiedName+" as a child of "+S._element._qualifiedName+".");var w=C(S._namespace||"",S._localName,T);return w===S?S:(w!==null?y(w,S,T):m(S,T),w)},n.element_setAnAttributeValue=function(S,T,w,_,E){_===void 0&&(_=null),E===void 0&&(E=null);var D=C(E||"",T,S);if(D===null){var O=l.create_attr(S._nodeDocument,T);return O._namespace=E,O._namespacePrefix=_,O._value=w,void m(O,S)}v(D,S,w)},n.element_removeAnAttributeByName=function(S,T){var w=g(S,T);return w!==null&&x(w,T),w},n.element_removeAnAttributeByNamespaceAndLocalName=function(S,T,w){var _=C(S,T,w);return _!==null&&x(_,w),_},n.element_createAnElement=function(S,T,w,_,E,D){_===void 0&&(_=null),E===void 0&&(E=null),D===void 0&&(D=!1);var O=null;if(!i.dom.features.customElements)return(O=l.create_element(S,T,w,_))._customElementState="uncustomized",O._customElementDefinition=null,O._is=E,O;var M=p.customElement_lookUpACustomElementDefinition(S,w,T,E);if(M!==null&&M.name!==M.localName)(O=new(d.document_elementInterface(T,o.namespace.HTML)))._localName=T,O._namespace=o.namespace.HTML,O._namespacePrefix=_,O._customElementState="undefined",O._customElementDefinition=null,O._is=E,O._nodeDocument=S,D?p.customElement_upgrade(M,O):p.customElement_enqueueACustomElementUpgradeReaction(O,M);else if(M!==null)if(D)try{var N=new M.constructor;if(console.assert(N._customElementState!==void 0),console.assert(N._customElementDefinition!==void 0),console.assert(N._namespace===o.namespace.HTML),N._attributeList.length!==0)throw new c.NotSupportedError("Custom element already has attributes.");if(N._children.size!==0)throw new c.NotSupportedError("Custom element already has child nodes.");if(N._parent!==null)throw new c.NotSupportedError("Custom element already has a parent node.");if(N._nodeDocument!==S)throw new c.NotSupportedError("Custom element is already in a document.");if(N._localName!==T)throw new c.NotSupportedError("Custom element has a different local name.");N._namespacePrefix=_,N._is=null}catch{(O=l.create_htmlUnknownElement(S,T,o.namespace.HTML,_))._customElementState="failed",O._customElementDefinition=null,O._is=null}else(O=l.create_htmlElement(S,T,o.namespace.HTML,_))._customElementState="undefined",O._customElementDefinition=null,O._is=null,p.customElement_enqueueACustomElementUpgradeReaction(O,M);else(O=new(d.document_elementInterface(T,w)))._localName=T,O._namespace=w,O._namespacePrefix=_,O._customElementState="uncustomized",O._customElementDefinition=null,O._is=E,O._nodeDocument=S,w!==o.namespace.HTML||E===null&&!p.customElement_isValidCustomElementName(T)||(O._customElementState="undefined");if(O===null)throw new Error("Unable to create element.");return O},n.element_insertAdjacent=function(S,T,w){switch(T.toLowerCase()){case"beforebegin":return S._parent===null?null:h.mutation_preInsert(w,S._parent,S);case"afterbegin":return h.mutation_preInsert(w,S,S._firstChild);case"beforeend":return h.mutation_preInsert(w,S,null);case"afterend":return S._parent===null?null:h.mutation_preInsert(w,S._parent,S._nextSibling);default:throw new c.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(a,n,r){function i(o,s){Error.call(this),this.name="YAMLException",this.reason=o,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(o){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!o&&this.mark&&(s+=" "+this.mark.toString()),s},a.exports=i},function(a,n,r){var i=r(39);a.exports=new i({include:[r(181)],implicit:[r(293),r(294)],explicit:[r(295),r(296),r(297),r(298)]})},function(a,n,r){var i=r(16),o=r(79),s=r(40),c=r(24),l=r(56),p=r(14),u=r(115),f=Object.getOwnPropertyDescriptor;n.f=i?f:function(h,d){if(h=c(h),d=l(d,!0),u)try{return f(h,d)}catch{}if(p(h,d))return s(!o.f.call(h,d),h[d])}},function(a,n,r){var i=r(13);a.exports=function(o,s){if(!i(o))return o;var c,l;if(s&&typeof(c=o.toString)=="function"&&!i(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!i(l=c.call(o))||!s&&typeof(c=o.toString)=="function"&&!i(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(a,n,r){var i=r(81),o=r(58),s=i("keys");a.exports=function(c){return s[c]||(s[c]=o(c))}},function(a,n){var r=0,i=Math.random();a.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++r+i).toString(36)}},function(a,n,r){var i=r(42);a.exports=Array.isArray||function(o){return i(o)=="Array"}},function(a,n,r){var i,o=r(18),s=r(188),c=r(84),l=r(45),p=r(189),u=r(116),f=r(57),h=f("IE_PROTO"),d=function(){},v=function(x){return"<script>"+x+"<\/script>"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,y;m=i?function(C){C.write(v("")),C.close();var S=C.parentWindow.Object;return C=null,S}(i):((y=u("iframe")).style.display="none",p.appendChild(y),y.src=String("javascript:"),(x=y.contentWindow.document).open(),x.write(v("document.F=Object")),x.close(),x.F);for(var g=c.length;g--;)delete m.prototype[c[g]];return m()};l[h]=!0,a.exports=Object.create||function(x,y){var g;return x!==null?(d.prototype=o(x),g=new d,d.prototype=null,g[h]=x):g=m(),y===void 0?g:s(g,y)}},function(a,n,r){var i=r(121),o=r(84);a.exports=Object.keys||function(s){return i(s,o)}},function(a,n,r){var i=r(15).f,o=r(14),s=r(5)("toStringTag");a.exports=function(c,l,p){c&&!o(c=p?c:c.prototype,s)&&i(c,s,{configurable:!0,value:l})}},function(a,n,r){var i=r(8),o=r(5),s=r(129),c=o("species");a.exports=function(l){return s>=51||!i(function(){var p=[];return(p.constructor={})[c]=function(){return{foo:1}},p[l](Boolean).foo!==1})}},function(a,n,r){var i=r(4),o=r(122).indexOf,s=r(48),c=r(28),l=[].indexOf,p=!!l&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),f=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:p||!u||!f},{indexOf:function(h){return p?l.apply(this,arguments)||0:o(this,h,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(16),o=r(15).f,s=Function.prototype,c=s.toString,l=/^\s*function ([^ (]*)/;i&&!("name"in s)&&o(s,"name",{configurable:!0,get:function(){try{return c.call(this).match(l)[1]}catch{return""}}})},function(a,n,r){var i=r(25),o=r(18),s=r(8),c=r(136),l=RegExp.prototype,p=l.toString,u=s(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),f=p.name!="toString";(u||f)&&i(RegExp.prototype,"toString",function(){var h=o(this),d=String(h.source),v=h.flags;return"/"+d+"/"+String(v===void 0&&h instanceof RegExp&&!("flags"in l)?c.call(h):v)},{unsafe:!0})},function(a,n,r){r(31),r(32),r(33),r(19),r(138),r(20),r(66),r(22),r(23);var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(1),l=r(2),p=function(u){function f(h,d){var v=u.call(this,h)||this;return v._writerOptions=c.applyDefaults(d,{format:"object",wellFormed:!1,group:!1,verbose:!1}),v}return o(f,u),f.prototype.serialize=function(h){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(h,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},f.prototype._process=function(h,d){var v,m,x,y,g,C,S;if(h.length===0)return{};for(var T={},w=!1,_=0,E=0,D=0,O=0,M=0;M<h.length;M++){var N=h[M];switch(ee=Object.keys(N)[0]){case"@":continue;case"#":_++;break;case"!":E++;break;case"?":D++;break;case"$":O++;break;default:T[ee]?w=!0:T[ee]=!0}}var R=this._getAttrKey(),B=this._getNodeKey(l.NodeType.Text),I=this._getNodeKey(l.NodeType.Comment),P=this._getNodeKey(l.NodeType.ProcessingInstruction),L=this._getNodeKey(l.NodeType.CData);if(_===1&&h.length===1&&c.isString(h[0]["#"]))return h[0]["#"];if(w){var k={};for(M=0;M<h.length;M++)if(N=h[M],(ee=Object.keys(N)[0])==="@"){var A=N["@"];(F=Object.keys(A)).length===1?k[R+F[0]]=A[F[0]]:k[R]=N["@"]}var j=[];for(M=0;M<h.length;M++)switch(N=h[M],ee=Object.keys(N)[0]){case"@":break;case"#":j.push(((v={})[B]=N["#"],v));break;case"!":j.push(((m={})[I]=N["!"],m));break;case"?":j.push(((x={})[P]=N["?"],x));break;case"$":j.push(((y={})[L]=N.$,y));break;default:if((G=N)[ee].length!==0&&c.isArray(G[ee][0])){for(var H=[],K=G[ee],Y=0;Y<K.length;Y++)H.push(this._process(K[Y],d));j.push(((g={})[ee]=H,g))}else d.verbose?j.push(((C={})[ee]=[this._process(G[ee],d)],C)):j.push(((S={})[ee]=this._process(G[ee],d),S))}return k[B]=j,k}var q=1,Z=1,re=1,ae=1;for(k={},M=0;M<h.length;M++){var ee;switch(N=h[M],ee=Object.keys(N)[0]){case"@":A=N["@"];var F=Object.keys(A);if(d.group&&F.length!==1)k[R]=A;else for(var b in A)k[R+b]=A[b];break;case"#":q=this._processSpecItem(N["#"],k,d.group,B,_,q);break;case"!":Z=this._processSpecItem(N["!"],k,d.group,I,E,Z);break;case"?":re=this._processSpecItem(N["?"],k,d.group,P,D,re);break;case"$":ae=this._processSpecItem(N.$,k,d.group,L,O,ae);break;default:var G;if((G=N)[ee].length!==0&&c.isArray(G[ee][0])){H=[],K=G[ee];for(var U=0;U<K.length;U++)H.push(this._process(K[U],d));k[ee]=H}else d.verbose?k[ee]=[this._process(G[ee],d)]:k[ee]=this._process(G[ee],d)}}return k},f.prototype._processSpecItem=function(h,d,v,m,x,y){var g,C;if(!v&&c.isArray(h)&&x+h.length>2)try{for(var S=s(h),T=S.next();!T.done;T=S.next()){var w=T.value;d[m+(y++).toString()]=w}}catch(_){g={error:_}}finally{try{T&&!T.done&&(C=S.return)&&C.call(S)}finally{if(g)throw g.error}}else d[x>1?m+(y++).toString():m]=h;return y},f.prototype.beginElement=function(h){var d,v,m=[];if(this._currentList.length===0)this._currentList.push(((d={})[h]=m,d));else{var x=this._currentList[this._currentList.length-1];this._isElementNode(x,h)?x[h].length!==0&&c.isArray(x[h][0])?x[h].push(m):x[h]=[x[h],m]:this._currentList.push(((v={})[h]=m,v))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=m:this._listRegister.push(m),this._currentList=m},f.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},f.prototype.attribute=function(h,d){var v,m;if(this._currentList.length===0)this._currentList.push({"@":(v={},v[h]=d,v)});else{var x=this._currentList[this._currentList.length-1];this._isAttrNode(x)?x["@"][h]=d:this._currentList.push({"@":(m={},m[h]=d,m)})}},f.prototype.comment=function(h){if(this._currentList.length===0)this._currentList.push({"!":h});else{var d=this._currentList[this._currentList.length-1];this._isCommentNode(d)?c.isArray(d["!"])?d["!"].push(h):d["!"]=[d["!"],h]:this._currentList.push({"!":h})}},f.prototype.text=function(h){if(this._currentList.length===0)this._currentList.push({"#":h});else{var d=this._currentList[this._currentList.length-1];this._isTextNode(d)?c.isArray(d["#"])?d["#"].push(h):d["#"]=[d["#"],h]:this._currentList.push({"#":h})}},f.prototype.instruction=function(h,d){var v=d===""?h:h+" "+d;if(this._currentList.length===0)this._currentList.push({"?":v});else{var m=this._currentList[this._currentList.length-1];this._isInstructionNode(m)?c.isArray(m["?"])?m["?"].push(v):m["?"]=[m["?"],v]:this._currentList.push({"?":v})}},f.prototype.cdata=function(h){if(this._currentList.length===0)this._currentList.push({$:h});else{var d=this._currentList[this._currentList.length-1];this._isCDATANode(d)?c.isArray(d.$)?d.$.push(h):d.$=[d.$,h]:this._currentList.push({$:h})}},f.prototype._isAttrNode=function(h){return"@"in h},f.prototype._isTextNode=function(h){return"#"in h},f.prototype._isCommentNode=function(h){return"!"in h},f.prototype._isInstructionNode=function(h){return"?"in h},f.prototype._isCDATANode=function(h){return"$"in h},f.prototype._isElementNode=function(h,d){return d in h},f.prototype._getAttrKey=function(){return this._builderOptions.convert.att},f.prototype._getNodeKey=function(h){switch(h){case l.NodeType.Comment:return this._builderOptions.convert.comment;case l.NodeType.Text:return this._builderOptions.convert.text;case l.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case l.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},f}(r(50).BaseWriter);n.ObjectWriter=p},function(a,n,r){var i=r(4),o=r(93);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems={}}return o.prototype.set=function(s,c){s===null?this._nullItems[c]=!0:(this._items[s]||(this._items[s]={}),this._items[s][c]=!0)},o.prototype.has=function(s,c){return s===null?this._nullItems[c]===!0:!!this._items[s]&&this._items[s][c]===!0},o}();n.LocalNameSet=i},function(a,n,r){var i=this&&this.__read||function(p,u){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,d,v=f.call(p),m=[];try{for(;(u===void 0||u-- >0)&&!(h=v.next()).done;)m.push(h.value)}catch(x){d={error:x}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return m};Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(3),c=r(0),l=function(){function p(){}return Object.defineProperty(p.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),p.prototype.addEventListener=function(u,f,h){h===void 0&&(h={passive:!1,once:!1,capture:!1});var d,v=i(c.eventTarget_flattenMore(h),3),m=v[0],x=v[1],y=v[2];f&&(d=s.Guard.isEventListener(f)?f:{handleEvent:f},c.eventTarget_addEventListener(this,{type:u,callback:d,capture:m,passive:x,once:y,removed:!1}))},p.prototype.removeEventListener=function(u,f,h){h===void 0&&(h={capture:!1});var d=c.eventTarget_flatten(h);if(f)for(var v=0;v<this._eventListenerList.length;v++){var m=this._eventListenerList[v];if(m.type===u&&m.capture===d){if(s.Guard.isEventListener(f)&&m.callback===f){c.eventTarget_removeEventListener(this,m,v);break}if(f&&m.callback.handleEvent===f){c.eventTarget_removeEventListener(this,m,v);break}}}},p.prototype.dispatchEvent=function(u){if(u._dispatchFlag||!u._initializedFlag)throw new o.InvalidStateError;return u._isTrusted=!1,c.event_dispatch(u,this)},p.prototype._getTheParent=function(u){return null},p}();n.EventTargetImpl=l},function(a,n,r){var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(34),c=r(0),l=function(p){function u(f){var h=p.call(this)||this;return h._data=f,h}return o(u,p),Object.defineProperty(u.prototype,"data",{get:function(){return this._data},set:function(f){c.characterData_replaceData(this,0,this._data.length,f)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),u.prototype.substringData=function(f,h){return c.characterData_substringData(this,f,h)},u.prototype.appendData=function(f){return c.characterData_replaceData(this,this._data.length,0,f)},u.prototype.insertData=function(f,h){c.characterData_replaceData(this,f,0,h)},u.prototype.deleteData=function(f,h){c.characterData_replaceData(this,f,h,"")},u.prototype.replaceData=function(f,h,d){c.characterData_replaceData(this,f,h,d)},Object.defineProperty(u.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),u.prototype.before=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},u.prototype.after=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},u.prototype.replaceWith=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},u.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},u}(s.NodeImpl);n.CharacterDataImpl=l},function(a,n,r){var i=this&&this.__values||function(x){var y=typeof Symbol=="function"&&Symbol.iterator,g=y&&x[y],C=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(x,y){var g=typeof Symbol=="function"&&x[Symbol.iterator];if(!g)return x;var C,S,T=g.call(x),w=[];try{for(;(y===void 0||y-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(_){S={error:_}}finally{try{C&&!C.done&&(g=T.return)&&g.call(T)}finally{if(S)throw S.error}}return w},s=this&&this.__spread||function(){for(var x=[],y=0;y<arguments.length;y++)x=x.concat(o(arguments[y]));return x};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),l=r(3),p=r(1),u=r(17),f=r(51);function h(x){c.dom.window._signalSlots.add(x),f.observer_queueAMutationObserverMicrotask()}function d(x,y){y===void 0&&(y=!1);var g=l.Cast.asNode(x)._parent;if(g===null)return null;var C=g._shadowRoot||null;if(C===null||y&&C._mode!=="open")return null;for(var S=u.tree_getFirstDescendantNode(C,!1,!0,function(T){return l.Guard.isSlot(T)});S!==null;){if(S._name===x._name)return S;S=u.tree_getNextDescendantNode(C,S,!1,!0,function(T){return l.Guard.isSlot(T)})}return null}function v(x){var y,g,C=[],S=u.tree_rootNode(x);if(!l.Guard.isShadowRoot(S))return C;var T=S._host;try{for(var w=i(T._children),_=w.next();!_.done;_=w.next()){var E=_.value;l.Guard.isSlotable(E)&&d(E)===x&&C.push(E)}}catch(D){y={error:D}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(y)throw y.error}}return C}function m(x){var y,g,C=v(x);if(C.length===x._assignedNodes.length){for(var S=!0,T=0;T<C.length;T++)if(C[T]!==x._assignedNodes[T]){S=!1;break}S||h(x)}x._assignedNodes=C;try{for(var w=i(C),_=w.next();!_.done;_=w.next())_.value._assignedSlot=x}catch(E){y={error:E}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(y)throw y.error}}}n.shadowTree_signalASlotChange=h,n.shadowTree_isConnected=function(x){return l.Guard.isDocumentNode(u.tree_rootNode(x,!0))},n.shadowTree_isAssigned=function(x){return x._assignedSlot!==null},n.shadowTree_findASlot=d,n.shadowTree_findSlotables=v,n.shadowTree_findFlattenedSlotables=function x(y){var g,C,S,T,w=[],_=u.tree_rootNode(y);if(!l.Guard.isShadowRoot(_))return w;var E=v(y);if(p.isEmpty(E))try{for(var D=i(y._children),O=D.next();!O.done;O=D.next()){var M=O.value;l.Guard.isSlotable(M)&&E.push(M)}}catch(P){g={error:P}}finally{try{O&&!O.done&&(C=D.return)&&C.call(D)}finally{if(g)throw g.error}}try{for(var N=i(E),R=N.next();!R.done;R=N.next()){var B=R.value;if(l.Guard.isSlot(B)&&l.Guard.isShadowRoot(u.tree_rootNode(B))){var I=x(B);w.push.apply(w,s(I))}else w.push(B)}}catch(P){S={error:P}}finally{try{R&&!R.done&&(T=N.return)&&T.call(N)}finally{if(S)throw S.error}}return w},n.shadowTree_assignSlotables=m,n.shadowTree_assignSlotablesForATree=function(x){for(var y=u.tree_getFirstDescendantNode(x,!0,!1,function(g){return l.Guard.isSlot(g)});y!==null;)m(y),y=u.tree_getNextDescendantNode(x,y,!0,!1,function(g){return l.Guard.isSlot(g)})},n.shadowTree_assignASlot=function(x){var y=d(x);y!==null&&m(y)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),s=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),c=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),l=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);n.customElement_isValidCustomElementName=function(p){return!!i.test(p)&&!o.has(p)},n.customElement_isValidElementName=function(p){return s.has(p)},n.customElement_isVoidElementName=function(p){return c.has(p)},n.customElement_isValidShadowHostName=function(p){return l.has(p)},n.customElement_enqueueACustomElementUpgradeReaction=function(p,u){},n.customElement_enqueueACustomElementCallbackReaction=function(p,u,f){},n.customElement_upgrade=function(p,u){},n.customElement_tryToUpgrade=function(p){},n.customElement_lookUpACustomElementDefinition=function(p,u,f,h){return null}},function(a,n,r){r(4)({target:"String",proto:!0},{repeat:r(259)})},function(a,n,r){r(278),r(68),r(179),r(94),Object.defineProperty(n,"__esModule",{value:!0});var i=r(109),o=function(){function s(c){this._builderOptions=c,c.parser&&Object.assign(this,c.parser)}return s.prototype._docType=function(c,l,p,u){return c.dtd({name:l,pubID:p,sysID:u})},s.prototype._comment=function(c,l){return c.com(l)},s.prototype._text=function(c,l){return c.txt(l)},s.prototype._instruction=function(c,l,p){return c.ins(l,p)},s.prototype._cdata=function(c,l){return c.dat(l)},s.prototype._element=function(c,l,p){return l===void 0?c.ele(p):c.ele(l,p)},s.prototype._attribute=function(c,l,p,u){return l===void 0?c.att(p,u):c.att(l,p,u)},s.prototype._sanitize=function(c){return i.sanitizeInput(c,this._builderOptions.invalidCharReplacement)},s.prototype._decodeText=function(c){return c==null?c:c.replace(/&(quot|amp|apos|lt|gt);/g,function(l,p){return s._entityTable[p]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(l,p,u){return String.fromCodePoint(parseInt(p||u,p?16:10))})},s.prototype._decodeAttributeValue=function(c){return this._decodeText(c)},s.prototype.parse=function(c,l){return this._parse(c,l)},s.prototype.docType=function(c,l,p,u){return this._docType(c,l,p,u)},s.prototype.comment=function(c,l){return this._comment(c,l)},s.prototype.text=function(c,l){return this._text(c,l)},s.prototype.instruction=function(c,l,p){return this._instruction(c,l,p)},s.prototype.cdata=function(c,l){return this._cdata(c,l)},s.prototype.element=function(c,l,p){return this._element(c,l,p)},s.prototype.attribute=function(c,l,p,u){return this._attribute(c,l,p,u)},s.prototype.sanitize=function(c){return this._sanitize(c)},s._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},s}();n.BaseReader=o},function(a,n,r){var i=r(39);a.exports=i.DEFAULT=new i({include:[r(54)],explicit:[r(299),r(300),r(301)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(185);n.XMLBuilderImpl=i.XMLBuilderImpl;var o=r(304);n.XMLBuilderCBImpl=o.XMLBuilderCBImpl;var s=r(183);n.builder=s.builder,n.create=s.create,n.fragment=s.fragment,n.convert=s.convert;var c=r(309);n.createCB=c.createCB,n.fragmentCB=c.fragmentCB},function(a,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}a.exports=r},function(a,n,r){var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!i.call({1:2},1);n.f=s?function(c){var l=o(this,c);return!!l&&l.enumerable}:i},function(a,n,r){var i=r(11),o=r(21);a.exports=function(s,c){try{o(i,s,c)}catch{i[s]=c}return c}},function(a,n,r){var i=r(44),o=r(118);(a.exports=function(s,c){return o[s]||(o[s]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(a,n,r){var i=r(121),o=r(84).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(s){return i(s,o)}},function(a,n,r){var i=r(47),o=Math.max,s=Math.min;a.exports=function(c,l){var p=i(c);return p<0?o(p+l,0):s(p,l)}},function(a,n){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(a,n){n.f=Object.getOwnPropertySymbols},function(a,n,r){var i=r(8);a.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(a,n,r){var i=r(127);a.exports=function(o,s,c){if(i(o),s===void 0)return o;switch(c){case 0:return function(){return o.call(s)};case 1:return function(l){return o.call(s,l)};case 2:return function(l,p){return o.call(s,l,p)};case 3:return function(l,p,u){return o.call(s,l,p,u)}}return function(){return o.apply(s,arguments)}}},function(a,n,r){var i=r(4),o=r(195),s=r(132),c=r(133),l=r(62),p=r(21),u=r(25),f=r(5),h=r(44),d=r(49),v=r(131),m=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,y=f("iterator"),g=function(){return this};a.exports=function(C,S,T,w,_,E,D){o(T,S,w);var O,M,N,R=function(j){if(j===_&&k)return k;if(!x&&j in P)return P[j];switch(j){case"keys":case"values":case"entries":return function(){return new T(this,j)}}return function(){return new T(this)}},B=S+" Iterator",I=!1,P=C.prototype,L=P[y]||P["@@iterator"]||_&&P[_],k=!x&&L||R(_),A=S=="Array"&&P.entries||L;if(A&&(O=s(A.call(new C)),m!==Object.prototype&&O.next&&(h||s(O)===m||(c?c(O,m):typeof O[y]!="function"&&p(O,y,g)),l(O,B,!0,!0),h&&(d[B]=g))),_=="values"&&L&&L.name!=="values"&&(I=!0,k=function(){return L.call(this)}),h&&!D||P[y]===k||p(P,y,k),d[S]=k,_)if(M={values:R("values"),keys:E?k:R("keys"),entries:R("entries")},D)for(N in M)(x||I||!(N in P))&&u(P,N,M[N]);else i({target:S,proto:!0,forced:x||I},M);return M}},function(a,n,r){var i=r(4),o=r(13),s=r(59),c=r(83),l=r(26),p=r(24),u=r(134),f=r(5),h=r(63),d=r(28),v=h("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),x=f("species"),y=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!v||!m},{slice:function(C,S){var T,w,_,E=p(this),D=l(E.length),O=c(C,D),M=c(S===void 0?D:S,D);if(s(E)&&(typeof(T=E.constructor)!="function"||T!==Array&&!s(T.prototype)?o(T)&&(T=T[x])===null&&(T=void 0):T=void 0,T===Array||T===void 0))return y.call(E,O,M);for(w=new(T===void 0?Array:T)(g(M-O,0)),_=0;O<M;O++,_++)O in E&&u(w,_,E[O]);return w.length=_,w}})},function(a,n,r){var i={};i[r(5)("toStringTag")]="z",a.exports=String(i)==="[object z]"},function(a,n,r){r(19),r(138),r(20),r(92),r(22),r(23),Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},n.XMLBuilderOptionKeys=new Set(Object.keys(n.DefaultBuilderOptions)),n.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(a,n,r){var i=r(139),o=r(143);a.exports=i("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(a,n,r){var i,o,s=r(136),c=r(221),l=RegExp.prototype.exec,p=String.prototype.replace,u=l,f=(i=/a/,o=/b*/g,l.call(i,"a"),l.call(o,"a"),i.lastIndex!==0||o.lastIndex!==0),h=c.UNSUPPORTED_Y||c.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;(f||d||h)&&(u=function(v){var m,x,y,g,C=this,S=h&&C.sticky,T=s.call(C),w=C.source,_=0,E=v;return S&&((T=T.replace("y","")).indexOf("g")===-1&&(T+="g"),E=String(v).slice(C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&v[C.lastIndex-1]!==`
`)&&(w="(?: "+w+")",E=" "+E,_++),x=new RegExp("^(?:"+w+")",T)),d&&(x=new RegExp("^"+w+"$(?!\\s)",T)),f&&(m=C.lastIndex),y=l.call(S?x:C,E),S?y?(y.input=y.input.slice(_),y[0]=y[0].slice(_),y.index=C.lastIndex,C.lastIndex+=y[0].length):C.lastIndex=0:f&&y&&(C.lastIndex=C.global?y.index+y[0].length:m),d&&y&&y.length>1&&p.call(y[0],x,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(y[g]=void 0)}),y}),a.exports=u},function(a,n,r){var i=r(225),o=r(18),s=r(27),c=r(26),l=r(47),p=r(35),u=r(226),f=r(227),h=Math.max,d=Math.min,v=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;i("replace",2,function(y,g,C,S){var T=S.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=S.REPLACE_KEEPS_$0,_=T?"$":"$0";return[function(D,O){var M=p(this),N=D==null?void 0:D[y];return N!==void 0?N.call(D,M,O):g.call(String(M),D,O)},function(D,O){if(!T&&w||typeof O=="string"&&O.indexOf(_)===-1){var M=C(g,D,this,O);if(M.done)return M.value}var N=o(D),R=String(this),B=typeof O=="function";B||(O=String(O));var I=N.global;if(I){var P=N.unicode;N.lastIndex=0}for(var L=[];;){var k=f(N,R);if(k===null||(L.push(k),!I))break;String(k[0])===""&&(N.lastIndex=u(R,c(N.lastIndex),P))}for(var A,j="",H=0,K=0;K<L.length;K++){k=L[K];for(var Y=String(k[0]),q=h(d(l(k.index),R.length),0),Z=[],re=1;re<k.length;re++)Z.push((A=k[re])===void 0?A:String(A));var ae=k.groups;if(B){var ee=[Y].concat(Z,q,R);ae!==void 0&&ee.push(ae);var F=String(O.apply(void 0,ee))}else F=E(Y,R,q,Z,ae,O);q>=H&&(j+=R.slice(H,q)+F,H=q+Y.length)}return j+R.slice(H)}];function E(D,O,M,N,R,B){var I=M+D.length,P=N.length,L=x;return R!==void 0&&(R=s(R),L=m),g.call(B,L,function(k,A){var j;switch(A.charAt(0)){case"$":return"$";case"&":return D;case"`":return O.slice(0,M);case"'":return O.slice(I);case"<":j=R[A.slice(1,-1)];break;default:var H=+A;if(H===0)return k;if(H>P){var K=v(H/10);return K===0?k:K<=P?N[K-1]===void 0?A.charAt(1):N[K-1]+A.charAt(1):k}j=N[H-1]}return j===void 0?"":j})}})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems=[]}return o.prototype.copy=function(){var s=new o;for(var c in this._items)s._items[c]=this._items[c].slice(0);return s._nullItems=this._nullItems.slice(0),s},o.prototype.get=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;if(l===null)return null;for(var p=null,u=0;u<l.length;u++)if((p=l[u])===s)return p;return p},o.prototype.has=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;return l!==null&&l.indexOf(s)!==-1},o.prototype.hasPrefix=function(s){if(this._nullItems.indexOf(s)!==-1)return!0;for(var c in this._items)if(this._items[c].indexOf(s)!==-1)return!0;return!1},o.prototype.set=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;c!==null&&l===null?this._items[c]=[s]:l.push(s)},o}();n.NamespacePrefixMap=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.Surrogate=/[\uD800-\uDFFF]/,n.ScalarValue=/[\uD800-\uDFFF]/,n.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,n.ASCIICodePoint=/[\u0000-\u007F]/,n.ASCIITabOrNewLine=/[\t\n\r]/,n.ASCIIWhiteSpace=/[\t\n\f\r ]/,n.C0Control=/[\u0000-\u001F]/,n.C0ControlOrSpace=/[\u0000-\u001F ]/,n.Control=/[\u0000-\u001F\u007F-\u009F]/,n.ASCIIDigit=/[0-9]/,n.ASCIIUpperHexDigit=/[0-9A-F]/,n.ASCIILowerHexDigit=/[0-9a-f]/,n.ASCIIHexDigit=/[0-9A-Fa-f]/,n.ASCIIUpperAlpha=/[A-Z]/,n.ASCIILowerAlpha=/[a-z]/,n.ASCIIAlpha=/[A-Za-z]/,n.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(a,n,r){var i=this&&this.__values||function(O){var M=typeof Symbol=="function"&&Symbol.iterator,N=M&&O[M],R=0;if(N)return N.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&R>=O.length&&(O=void 0),{value:O&&O[R++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(O,M){var N=typeof Symbol=="function"&&O[Symbol.iterator];if(!N)return O;var R,B,I=N.call(O),P=[];try{for(;(M===void 0||M-- >0)&&!(R=I.next()).done;)P.push(R.value)}catch(L){B={error:L}}finally{try{R&&!R.done&&(N=I.return)&&N.call(I)}finally{if(B)throw B.error}}return P},s=this&&this.__spread||function(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(o(arguments[M]));return O};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),l=r(2),p=r(3),u=r(171),f=r(104),h=r(9),d=r(17),v=r(72),m=r(30);function x(O,M){M===void 0&&(M=void 0),M===void 0&&(M=null);var N=y(O,M,new Date,{});return N._isTrusted=!0,N}function y(O,M,N,R){var B=new O("");return B._initializedFlag=!0,B._timeStamp=N.getTime(),Object.assign(B,R),c.dom.features.steps&&m.dom_runEventConstructingSteps(B),B}function g(O,M,N,R){var B,I,P,L;N===void 0&&(N=!1),R===void 0&&(R={value:!1});var k=!1;O._dispatchFlag=!0;var A=M;if(N){var j=M._associatedDocument;p.Guard.isDocumentNode(j)&&(A=j)}var H=null,K=d.tree_retarget(O._relatedTarget,M);if(M!==K||M===O._relatedTarget){var Y=[];try{for(var q=i(O._touchTargetList),Z=q.next();!Z.done;Z=q.next()){var re=Z.value;Y.push(d.tree_retarget(re,M))}}catch(ue){B={error:ue}}finally{try{Z&&!Z.done&&(I=q.return)&&I.call(q)}finally{if(B)throw B.error}}C(O,M,A,K,Y,!1);var ae=p.Guard.isMouseEvent(O)&&O._type==="click";ae&&M._activationBehavior!==void 0&&(H=M);for(var ee=p.Guard.isSlotable(M)&&v.shadowTree_isAssigned(M)?M:null,F=!1,b=M._getTheParent(O);b!==null&&p.Guard.isNode(b);){if(ee!==null){if(!p.Guard.isSlot(b))throw new Error("Parent node of a slotable should be a slot.");ee=null;var G=d.tree_rootNode(b,!0);p.Guard.isShadowRoot(G)&&G._mode==="closed"&&(F=!0)}p.Guard.isSlotable(b)&&v.shadowTree_isAssigned(b)&&(ee=b),K=d.tree_retarget(O._relatedTarget,b),Y=[];try{for(var U=(P=void 0,i(O._touchTargetList)),z=U.next();!z.done;z=U.next())re=z.value,Y.push(d.tree_retarget(re,b))}catch(ue){P={error:ue}}finally{try{z&&!z.done&&(L=U.return)&&L.call(U)}finally{if(P)throw P.error}}p.Guard.isWindow(b)||p.Guard.isNode(b)&&p.Guard.isNode(M)&&d.tree_isAncestorOf(d.tree_rootNode(M,!0),b,!0,!0)?(ae&&O._bubbles&&H===null&&b._activationBehavior&&(H=b),C(O,b,null,K,Y,F)):b===K?b=null:(M=b,ae&&H===null&&M._activationBehavior&&(H=M),C(O,b,M,K,Y,F)),b!==null&&(b=b._getTheParent(O)),F=!1}for(var W=null,$=O._path,J=$.length-1;J>=0;J--)if((oe=$[J]).shadowAdjustedTarget!==null){W=oe;break}if(W!==null)if(p.Guard.isNode(W.shadowAdjustedTarget)&&p.Guard.isShadowRoot(d.tree_rootNode(W.shadowAdjustedTarget,!0)))k=!0;else if(p.Guard.isNode(W.relatedTarget)&&p.Guard.isShadowRoot(d.tree_rootNode(W.relatedTarget,!0)))k=!0;else for(var ne=0;ne<W.touchTargetList.length;ne++){var oe=W.touchTargetList[ne];if(p.Guard.isNode(oe)&&p.Guard.isShadowRoot(d.tree_rootNode(oe,!0))){k=!0;break}}for(H!==null&&H._legacyPreActivationBehavior!==void 0&&H._legacyPreActivationBehavior(O),J=$.length-1;J>=0;J--)(oe=$[J]).shadowAdjustedTarget!==null?O._eventPhase=l.EventPhase.AtTarget:O._eventPhase=l.EventPhase.Capturing,S(oe,O,"capturing",R);for(J=0;J<$.length;J++){if((oe=$[J]).shadowAdjustedTarget!==null)O._eventPhase=l.EventPhase.AtTarget;else{if(!O._bubbles)continue;O._eventPhase=l.EventPhase.Bubbling}S(oe,O,"bubbling",R)}}return O._eventPhase=l.EventPhase.None,O._currentTarget=null,O._path=[],O._dispatchFlag=!1,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,k&&(O._target=null,O._relatedTarget=null,O._touchTargetList=[]),H!==null&&(O._canceledFlag||H._activationBehavior===void 0?H._legacyCanceledActivationBehavior!==void 0&&H._legacyCanceledActivationBehavior(O):H._activationBehavior(O)),!O._canceledFlag}function C(O,M,N,R,B,I){var P=!1;p.Guard.isNode(M)&&p.Guard.isShadowRoot(d.tree_rootNode(M))&&(P=!0);var L=!1;p.Guard.isShadowRoot(M)&&M._mode==="closed"&&(L=!0),O._path.push({invocationTarget:M,invocationTargetInShadowTree:P,shadowAdjustedTarget:N,relatedTarget:R,touchTargetList:B,rootOfClosedTree:L,slotInClosedTree:I})}function S(O,M,N,R){R===void 0&&(R={value:!1});for(var B=M._path,I=-1,P=0;P<B.length;P++)if(B[P]===O){I=P;break}if(I!==-1){var L=B[I];(L.shadowAdjustedTarget!==null||I>0&&(L=B[I-1]).shadowAdjustedTarget!==null)&&(M._target=L.shadowAdjustedTarget)}if(M._relatedTarget=O.relatedTarget,M._touchTargetList=O.touchTargetList,!M._stopPropagationFlag){M._currentTarget=O.invocationTarget;var k=M._currentTarget._eventListenerList,A=new(Array.bind.apply(Array,s([void 0],k)));if(!T(M,A,N,O,R)&&M._isTrusted){var j=M._type;j==="animationend"?M._type="webkitAnimationEnd":j==="animationiteration"?M._type="webkitAnimationIteration":j==="animationstart"?M._type="webkitAnimationStart":j==="transitionend"&&(M._type="webkitTransitionEnd"),T(M,A,N,O,R),M._type=j}}}function T(O,M,N,R,B){B===void 0&&(B={value:!1});for(var I=!1,P=0;P<M.length;P++){var L=M[P];if(!L.removed){if(O._type!==L.type||(I=!0,N==="capturing"&&!L.capture)||N==="bubbling"&&L.capture)continue;if(L.once&&O._currentTarget!==null){for(var k=O._currentTarget,A=-1,j=0;j<k._eventListenerList.length;j++)if(k._eventListenerList[j]===L){A=j;break}A!==-1&&k._eventListenerList.splice(A,1)}var H=void 0,K=void 0;p.Guard.isWindow(H)&&(K=H._currentEvent,R.invocationTargetInShadowTree===!1&&(H._currentEvent=O)),L.passive&&(O._inPassiveListenerFlag=!0);try{L.callback.handleEvent.call(O._currentTarget,O)}catch{B.value=!0}if(L.passive&&(O._inPassiveListenerFlag=!1),p.Guard.isWindow(H)&&(H._currentEvent=K),O._stopImmediatePropagationFlag)return I}}return I}function w(O,M){return null}function _(O,M){return null}function E(O,M){}function D(O,M){}n.event_setTheCanceledFlag=function(O){O._cancelable&&!O._inPassiveListenerFlag&&(O._canceledFlag=!0)},n.event_initialize=function(O,M,N,R){O._initializedFlag=!0,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,O._canceledFlag=!1,O._isTrusted=!1,O._target=null,O._type=M,O._bubbles=N,O._cancelable=R},n.event_createAnEvent=x,n.event_innerEventCreationSteps=y,n.event_dispatch=g,n.event_appendToAnEventPath=C,n.event_invoke=S,n.event_innerInvoke=T,n.event_fireAnEvent=function(O,M,N,R,B){N===void 0&&(N=f.EventImpl);var I=x(N);if(I._type=O,R)for(var P in R)I[P]=R[P];return g(I,M,B)},n.event_createLegacyEvent=function(O){var M=null;switch(O.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":M=u.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":M=f.EventImpl}if(M===null)throw new h.NotSupportedError("Event constructor not found for interface "+O+".");var N=new M("");return N._type="",N._timeStamp=new Date().getTime(),N._isTrusted=!1,N._initializedFlag=!1,N},n.event_getterEventHandlerIDLAttribute=function(O,M){return null},n.event_setterEventHandlerIDLAttribute=function(O,M,N){},n.event_determineTheTargetOfAnEventHandler=w,n.event_getTheCurrentValueOfAnEventHandler=_,n.event_activateAnEventHandler=E,n.event_deactivateAnEventHandler=D},function(a,n,r){var i,o=this&&this.__extends||(i=function(C,S){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,w){T.__proto__=w}||function(T,w){for(var _ in w)w.hasOwnProperty(_)&&(T[_]=w[_])})(C,S)},function(C,S){function T(){this.constructor=C}i(C,S),C.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)}),s=this&&this.__values||function(C){var S=typeof Symbol=="function"&&Symbol.iterator,T=S&&C[S],w=0;if(T)return T.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&w>=C.length&&(C=void 0),{value:C&&C[w++],done:!C}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(C,S){var T=typeof Symbol=="function"&&C[Symbol.iterator];if(!T)return C;var w,_,E=T.call(C),D=[];try{for(;(S===void 0||S-- >0)&&!(w=E.next()).done;)D.push(w.value)}catch(O){_={error:O}}finally{try{w&&!w.done&&(T=E.return)&&T.call(E)}finally{if(_)throw _.error}}return D};Object.defineProperty(n,"__esModule",{value:!0});var l=r(6),p=r(2),u=r(9),f=r(34),h=r(3),d=r(1),v=r(7),m=r(152),x=r(0),y=r(12),g=function(C){function S(){var T=C.call(this)||this;return T._children=new Set,T._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},T._contentType="application/xml",T._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},T._origin=null,T._type="xml",T._mode="no-quirks",T._documentElement=null,T._hasNamespaces=!1,T._nodeDocumentOverwrite=null,T}return o(S,C),Object.defineProperty(S.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(T){this._nodeDocumentOverwrite=T},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=x.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"URL",{get:function(){return m.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"doctype",{get:function(){var T,w;try{for(var _=s(this._children),E=_.next();!E.done;E=_.next()){var D=E.value;if(h.Guard.isDocumentTypeNode(D))return D}}catch(O){T={error:O}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(T)throw T.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),S.prototype.getElementsByTagName=function(T){return x.node_listOfElementsWithQualifiedName(T,this)},S.prototype.getElementsByTagNameNS=function(T,w){return x.node_listOfElementsWithNamespace(T,w,this)},S.prototype.getElementsByClassName=function(T){return x.node_listOfElementsWithClassNames(T,this)},S.prototype.createElement=function(T,w){if(!x.xml_isName(T))throw new u.InvalidCharacterError;this._type==="html"&&(T=T.toLowerCase());var _=null;w!==void 0&&(_=d.isString(w)?w:w.is);var E=this._type==="html"||this._contentType==="application/xhtml+xml"?v.namespace.HTML:null;return x.element_createAnElement(this,T,E,null,_,!0)},S.prototype.createElementNS=function(T,w,_){return x.document_internalCreateElementNS(this,T,w,_)},S.prototype.createDocumentFragment=function(){return x.create_documentFragment(this)},S.prototype.createTextNode=function(T){return x.create_text(this,T)},S.prototype.createCDATASection=function(T){if(this._type==="html")throw new u.NotSupportedError;if(T.indexOf("]]>")!==-1)throw new u.InvalidCharacterError;return x.create_cdataSection(this,T)},S.prototype.createComment=function(T){return x.create_comment(this,T)},S.prototype.createProcessingInstruction=function(T,w){if(!x.xml_isName(T))throw new u.InvalidCharacterError;if(w.indexOf("?>")!==-1)throw new u.InvalidCharacterError;return x.create_processingInstruction(this,T,w)},S.prototype.importNode=function(T,w){if(w===void 0&&(w=!1),h.Guard.isDocumentNode(T)||h.Guard.isShadowRoot(T))throw new u.NotSupportedError;return x.node_clone(T,this,w)},S.prototype.adoptNode=function(T){if(h.Guard.isDocumentNode(T))throw new u.NotSupportedError;if(h.Guard.isShadowRoot(T))throw new u.HierarchyRequestError;return x.document_adopt(T,this),T},S.prototype.createAttribute=function(T){if(!x.xml_isName(T))throw new u.InvalidCharacterError;return this._type==="html"&&(T=T.toLowerCase()),x.create_attr(this,T)},S.prototype.createAttributeNS=function(T,w){var _=c(x.namespace_validateAndExtract(T,w),3),E=_[0],D=_[1],O=_[2],M=x.create_attr(this,O);return M._namespace=E,M._namespacePrefix=D,M},S.prototype.createEvent=function(T){return x.event_createLegacyEvent(T)},S.prototype.createRange=function(){var T=x.create_range();return T._start=[this,0],T._end=[this,0],T},S.prototype.createNodeIterator=function(T,w,_){w===void 0&&(w=p.WhatToShow.All),_===void 0&&(_=null);var E=x.create_nodeIterator(T,T,!0);return E._whatToShow=w,E._iteratorCollection=x.create_nodeList(T),d.isFunction(_)?(E._filter=x.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},S.prototype.createTreeWalker=function(T,w,_){w===void 0&&(w=p.WhatToShow.All),_===void 0&&(_=null);var E=x.create_treeWalker(T,T);return E._whatToShow=w,d.isFunction(_)?(E._filter=x.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},S.prototype._getTheParent=function(T){return T._type==="load"?null:l.dom.window},S.prototype.getElementById=function(T){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(S.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),S.prototype.prepend=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.append=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelector=function(T){throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelectorAll=function(T){throw new Error("Mixin: ParentNode not implemented.")},S}(f.NodeImpl);n.DocumentImpl=g,y.idl_defineConst(g.prototype,"_nodeType",p.NodeType.Document)},function(a,n,r){var i,o=this&&this.__extends||(i=function(m,x){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var C in g)g.hasOwnProperty(C)&&(y[C]=g[C])})(m,x)},function(m,x){function y(){this.constructor=m}i(m,x),m.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}),s=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,y=x&&m[x],g=0;if(y)return y.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(m,x){var y=typeof Symbol=="function"&&m[Symbol.iterator];if(!y)return m;var g,C,S=y.call(m),T=[];try{for(;(x===void 0||x-- >0)&&!(g=S.next()).done;)T.push(g.value)}catch(w){C={error:w}}finally{try{g&&!g.done&&(y=S.return)&&y.call(S)}finally{if(C)throw C.error}}return T};Object.defineProperty(n,"__esModule",{value:!0});var l=r(2),p=r(34),u=r(9),f=r(7),h=r(0),d=r(12),v=function(m){function x(){var y=m.call(this)||this;return y._children=new Set,y._namespace=null,y._namespacePrefix=null,y._localName="",y._customElementState="undefined",y._customElementDefinition=null,y._is=null,y._shadowRoot=null,y._attributeList=h.create_namedNodeMap(y),y._attributeChangeSteps=[],y._name="",y._assignedSlot=null,y}return o(x,m),Object.defineProperty(x.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"id",{get:function(){return h.element_getAnAttributeValue(this,"id")},set:function(y){h.element_setAnAttributeValue(this,"id",y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"className",{get:function(){return h.element_getAnAttributeValue(this,"class")},set:function(y){h.element_setAnAttributeValue(this,"class",y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"classList",{get:function(){var y=h.element_getAnAttributeByName("class",this);return y===null&&(y=h.create_attr(this._nodeDocument,"class")),h.create_domTokenList(this,y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"slot",{get:function(){return h.element_getAnAttributeValue(this,"slot")},set:function(y){h.element_setAnAttributeValue(this,"slot",y)},enumerable:!0,configurable:!0}),x.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(x.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),x.prototype.getAttributeNames=function(){var y,g,C=[];try{for(var S=s(this._attributeList),T=S.next();!T.done;T=S.next()){var w=T.value;C.push(w._qualifiedName)}}catch(_){y={error:_}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}return C},x.prototype.getAttribute=function(y){var g=h.element_getAnAttributeByName(y,this);return g?g._value:null},x.prototype.getAttributeNS=function(y,g){var C=h.element_getAnAttributeByNamespaceAndLocalName(y,g,this);return C?C._value:null},x.prototype.setAttribute=function(y,g){if(!h.xml_isName(y))throw new u.InvalidCharacterError;this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(y=y.toLowerCase());for(var C=null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._qualifiedName===y){C=T;break}}if(C===null)return(C=h.create_attr(this._nodeDocument,y))._value=g,void h.element_append(C,this);h.element_change(C,this,g)},x.prototype.setAttributeNS=function(y,g,C){var S=c(h.namespace_validateAndExtract(y,g),3),T=S[0],w=S[1],_=S[2];h.element_setAnAttributeValue(this,_,C,w,T)},x.prototype.removeAttribute=function(y){h.element_removeAnAttributeByName(y,this)},x.prototype.removeAttributeNS=function(y,g){h.element_removeAnAttributeByNamespaceAndLocalName(y,g,this)},x.prototype.hasAttribute=function(y){this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(y=y.toLowerCase());for(var g=0;g<this._attributeList.length;g++)if(this._attributeList[g]._qualifiedName===y)return!0;return!1},x.prototype.toggleAttribute=function(y,g){if(!h.xml_isName(y))throw new u.InvalidCharacterError;this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(y=y.toLowerCase());for(var C=null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._qualifiedName===y){C=T;break}}return C===null?(g===void 0||g===!0)&&((C=h.create_attr(this._nodeDocument,y))._value="",h.element_append(C,this),!0):g!==void 0&&g!==!1||(h.element_removeAnAttributeByName(y,this),!1)},x.prototype.hasAttributeNS=function(y,g){for(var C=y||null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._namespace===C&&T._localName===g)return!0}return!1},x.prototype.getAttributeNode=function(y){return h.element_getAnAttributeByName(y,this)},x.prototype.getAttributeNodeNS=function(y,g){return h.element_getAnAttributeByNamespaceAndLocalName(y,g,this)},x.prototype.setAttributeNode=function(y){return h.element_setAnAttribute(y,this)},x.prototype.setAttributeNodeNS=function(y){return h.element_setAnAttribute(y,this)},x.prototype.removeAttributeNode=function(y){for(var g=!1,C=0;C<this._attributeList.length;C++)if(this._attributeList[C]===y){g=!0;break}if(!g)throw new u.NotFoundError;return h.element_remove(y,this),y},x.prototype.attachShadow=function(y){if(this._namespace!==f.namespace.HTML)throw new u.NotSupportedError;if(!h.customElement_isValidCustomElementName(this._localName)&&!h.customElement_isValidShadowHostName(this._localName))throw new u.NotSupportedError;if(h.customElement_isValidCustomElementName(this._localName)||this._is!==null){var g=h.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(g!==null&&g.disableShadow===!0)throw new u.NotSupportedError}if(this._shadowRoot!==null)throw new u.NotSupportedError;var C=h.create_shadowRoot(this._nodeDocument,this);return C._mode=y.mode,this._shadowRoot=C,C},Object.defineProperty(x.prototype,"shadowRoot",{get:function(){var y=this._shadowRoot;return y===null||y.mode==="closed"?null:y},enumerable:!0,configurable:!0}),x.prototype.closest=function(y){throw new u.NotImplementedError},x.prototype.matches=function(y){throw new u.NotImplementedError},x.prototype.webkitMatchesSelector=function(y){return this.matches(y)},x.prototype.getElementsByTagName=function(y){return h.node_listOfElementsWithQualifiedName(y,this)},x.prototype.getElementsByTagNameNS=function(y,g){return h.node_listOfElementsWithNamespace(y,g,this)},x.prototype.getElementsByClassName=function(y){return h.node_listOfElementsWithClassNames(y,this)},x.prototype.insertAdjacentElement=function(y,g){return h.element_insertAdjacent(this,y,g)},x.prototype.insertAdjacentText=function(y,g){var C=h.create_text(this._nodeDocument,g);h.element_insertAdjacent(this,y,C)},Object.defineProperty(x.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_htmlUppercasedQualifiedName",{get:function(){var y=this._qualifiedName;return this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(y=y.toUpperCase()),y},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),x.prototype.prepend=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];throw new Error("Mixin: ParentNode not implemented.")},x.prototype.append=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];throw new Error("Mixin: ParentNode not implemented.")},x.prototype.querySelector=function(y){throw new Error("Mixin: ParentNode not implemented.")},x.prototype.querySelectorAll=function(y){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(x.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),x.prototype.before=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.after=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.replaceWith=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(x.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),x._create=function(y,g,C,S){C===void 0&&(C=null),S===void 0&&(S=null);var T=new x;return T._localName=g,T._namespace=C,T._namespacePrefix=S,T._nodeDocument=y,T},x}(p.NodeImpl);n.ElementImpl=v,d.idl_defineConst(v.prototype,"_nodeType",l.NodeType.Element)},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(34),l=r(12),p=function(u){function f(h){h===void 0&&(h=null);var d=u.call(this)||this;return d._children=new Set,d._host=h,d}return o(f,u),f.prototype.getElementById=function(h){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(f.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),f.prototype.prepend=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},f.prototype.append=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},f.prototype.querySelector=function(h){throw new Error("Mixin: ParentNode not implemented.")},f.prototype.querySelectorAll=function(h){throw new Error("Mixin: ParentNode not implemented.")},f._create=function(h,d){d===void 0&&(d=null);var v=new f(d);return v._nodeDocument=h,v},f}(c.NodeImpl);n.DocumentFragmentImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.DocumentFragment)},function(a,n,r){var i,o=this&&this.__extends||(i=function(h,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var x in m)m.hasOwnProperty(x)&&(v[x]=m[x])})(h,d)},function(h,d){function v(){this.constructor=h}i(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}),s=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],m=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),l=r(71),p=r(0),u=r(12),f=function(h){function d(v){v===void 0&&(v="");var m=h.call(this,v)||this;return m._name="",m._assignedSlot=null,m}return o(d,h),Object.defineProperty(d.prototype,"wholeText",{get:function(){var v,m,x="";try{for(var y=s(p.text_contiguousTextNodes(this,!0)),g=y.next();!g.done;g=y.next())x+=g.value._data}catch(C){v={error:C}}finally{try{g&&!g.done&&(m=y.return)&&m.call(y)}finally{if(v)throw v.error}}return x},enumerable:!0,configurable:!0}),d.prototype.splitText=function(v){return p.text_split(this,v)},Object.defineProperty(d.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),d._create=function(v,m){m===void 0&&(m="");var x=new d(m);return x._nodeDocument=v,x},d}(l.CharacterDataImpl);n.TextImpl=f,u.idl_defineConst(f.prototype,"_nodeType",c.NodeType.Text)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(){}return Object.defineProperty(o.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),o}();n.AbstractRangeImpl=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=function(){function s(c){this._activeFlag=!1,this._root=c,this._whatToShow=i.WhatToShow.All,this._filter=null}return Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),s}();n.TraverserImpl=o},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=r(0),s=r(12),c=function(){function l(p,u){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=i.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=p,u&&(this._bubbles=u.bubbles||!1,this._cancelable=u.cancelable||!1,this._composedFlag=u.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),l.prototype.composedPath=function(){var p=[],u=this._path;if(u.length===0)return p;var f=this._currentTarget;if(f===null)throw new Error("Event currentTarget is null.");p.push(f);for(var h=0,d=0,v=u.length-1;v>=0;){if(u[v].rootOfClosedTree&&d++,u[v].invocationTarget===f){h=v;break}u[v].slotInClosedTree&&d--,v--}var m=d,x=d;for(v=h-1;v>=0;)u[v].rootOfClosedTree&&m++,m<=x&&p.unshift(u[v].invocationTarget),u[v].slotInClosedTree&&--m<x&&(x=m),v--;for(m=d,x=d,v=h+1;v<u.length;)u[v].slotInClosedTree&&m++,m<=x&&p.push(u[v].invocationTarget),u[v].rootOfClosedTree&&--m<x&&(x=m),v++;return p},Object.defineProperty(l.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),l.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(l.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(p){p&&this.stopPropagation()},enumerable:!0,configurable:!0}),l.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(l.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(p){p||o.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),l.prototype.preventDefault=function(){o.event_setTheCanceledFlag(this)},Object.defineProperty(l.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),l.prototype.initEvent=function(p,u,f){u===void 0&&(u=!1),f===void 0&&(f=!1),this._dispatchFlag||o.event_initialize(this,p,u,f)},l.NONE=0,l.CAPTURING_PHASE=1,l.AT_TARGET=2,l.BUBBLING_PHASE=3,l}();n.EventImpl=c,s.idl_defineConst(c.prototype,"NONE",0),s.idl_defineConst(c.prototype,"CAPTURING_PHASE",1),s.idl_defineConst(c.prototype,"AT_TARGET",2),s.idl_defineConst(c.prototype,"BUBBLING_PHASE",3)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=r(9);n.traversal_filter=function(s,c){if(s._activeFlag)throw new o.InvalidStateError;var l=1<<c._nodeType-1;if(!(s.whatToShow&l))return i.FilterResult.Skip;if(!s.filter)return i.FilterResult.Accept;s._activeFlag=!0;var p=i.FilterResult.Reject;try{p=s.filter.acceptNode(c)}catch(u){throw s._activeFlag=!1,u}return s._activeFlag=!1,p}},function(a,n,r){var i=this&&this.__read||function(x,y){var g=typeof Symbol=="function"&&x[Symbol.iterator];if(!g)return x;var C,S,T=g.call(x),w=[];try{for(;(y===void 0||y-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(_){S={error:_}}finally{try{C&&!C.done&&(g=T.return)&&g.call(T)}finally{if(S)throw S.error}}return w},o=this&&this.__values||function(x){var y=typeof Symbol=="function"&&Symbol.iterator,g=y&&x[y],C=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),c=r(3),l=r(1),p=r(99),u=r(73),f=r(17),h=r(173),d=r(30),v=r(52),m=r(37);n.document_elementInterface=function(x,y){return p.ElementImpl},n.document_internalCreateElementNS=function(x,y,g,C){var S=i(h.namespace_validateAndExtract(y,g),3),T=S[0],w=S[1],_=S[2],E=null;return C!==void 0&&(E=l.isString(C)?C:C.is),v.element_createAnElement(x,_,T,w,E,!0)},n.document_adopt=function(x,y){var g,C;if(x._nodeDocument!==y||x._parent!==null){var S=x._nodeDocument;if(x._parent&&m.mutation_remove(x,x._parent),y!==S)for(var T=f.tree_getFirstDescendantNode(x,!0,!0);T!==null;){if(T._nodeDocument=y,c.Guard.isElementNode(T))try{for(var w=(g=void 0,o(T._attributeList._asArray())),_=w.next();!_.done;_=w.next())_.value._nodeDocument=y}catch(E){g={error:E}}finally{try{_&&!_.done&&(C=w.return)&&C.call(w)}finally{if(g)throw g.error}}s.dom.features.customElements&&c.Guard.isElementNode(T)&&T._customElementState==="custom"&&u.customElement_enqueueACustomElementCallbackReaction(T,"adoptedCallback",[S,y]),s.dom.features.steps&&d.dom_runAdoptingSteps(T,S),T=f.tree_getNextDescendantNode(x,T,!0,!0)}}}},function(a,n,r){var i=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(3),c=r(9),l=r(17),p=r(51),u=r(30);n.characterData_replaceData=function(f,h,d,v){var m,x,y=l.tree_nodeLength(f);if(h>y)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+y+", Node is "+f.nodeName+".");h+d>y&&(d=y-h),o.dom.features.mutationObservers&&p.observer_queueMutationRecord("characterData",f,null,null,f._data,[],[],null,null);var g=f._data.substring(0,h)+v+f._data.substring(h+d);f._data=g;try{for(var C=i(o.dom.rangeList),S=C.next();!S.done;S=C.next()){var T=S.value;T._start[0]===f&&T._start[1]>h&&T._start[1]<=h+d&&(T._start[1]=h),T._end[0]===f&&T._end[1]>h&&T._end[1]<=h+d&&(T._end[1]=h),T._start[0]===f&&T._start[1]>h+d&&(T._start[1]+=v.length-d),T._end[0]===f&&T._end[1]>h+d&&(T._end[1]+=v.length-d)}}catch(w){m={error:w}}finally{try{S&&!S.done&&(x=C.return)&&x.call(C)}finally{if(m)throw m.error}}o.dom.features.steps&&s.Guard.isTextNode(f)&&f._parent!==null&&u.dom_runChildTextContentChangeSteps(f._parent)},n.characterData_substringData=function(f,h,d){var v=l.tree_nodeLength(f);if(h>v)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+v+", Node is "+f.nodeName+".");return h+d>v?f._data.substr(h):f._data.substr(h,d)}},function(a,n,r){var i=this&&this.__read||function(u,f){var h=typeof Symbol=="function"&&u[Symbol.iterator];if(!h)return u;var d,v,m=h.call(u),x=[];try{for(;(f===void 0||f-- >0)&&!(d=m.next()).done;)x.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=m.return)&&h.call(m)}finally{if(v)throw v.error}}return x},o=this&&this.__spread||function(){for(var u=[],f=0;f<arguments.length;f++)u=u.concat(i(arguments[f]));return u},s=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(7);function l(u){var f=c.string.splitAStringOnASCIIWhitespace(u);return new Set(f)}function p(u){return o(u).join(" ")}n.orderedSet_parse=l,n.orderedSet_serialize=p,n.orderedSet_sanitize=function(u){return p(l(u))},n.orderedSet_contains=function(u,f,h){var d,v,m,x;try{for(var y=s(f),g=y.next();!g.done;g=y.next()){var C=g.value,S=!1;try{for(var T=(m=void 0,s(u)),w=T.next();!w.done;w=T.next()){var _=w.value;if(h){if(_===C){S=!0;break}}else if(_.toUpperCase()===C.toUpperCase()){S=!0;break}}}catch(E){m={error:E}}finally{try{w&&!w.done&&(x=T.return)&&x.call(T)}finally{if(m)throw m.error}}if(!S)return!1}}catch(E){d={error:E}}finally{try{g&&!g.done&&(v=y.return)&&v.call(y)}finally{if(d)throw d.error}}return!0}},function(a,n,r){r(179),Object.defineProperty(n,"__esModule",{value:!0});var i=r(262),o=r(110),s=r(1);o.dom.setFeatures(!1),n.createDocument=function(){var c=new i.DOMImplementation().createDocument(null,"root",null);return c.documentElement&&c.removeChild(c.documentElement),c},n.sanitizeInput=function(c,l){if(c==null)return c;if(l===void 0)return c+"";var p="";c+="";for(var u=0;u<c.length;u++){var f=c.charCodeAt(u);if(f===9||f===10||f===13||f>=32&&f<=55295||f>=57344&&f<=65533)p+=c.charAt(u);else if(f>=55296&&f<=56319&&u<c.length-1){var h=c.charCodeAt(u+1);h>=56320&&h<=57343?(f=1024*(f-55296)+h-56320+65536,p+=String.fromCodePoint(f),u++):p+=s.isString(l)?l:l(c.charAt(u),u,c)}else p+=s.isString(l)?l:l(c.charAt(u),u,c)}return p}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),o=r(153);n.AbortController=o.AbortControllerImpl;var s=r(154);n.AbortSignal=s.AbortSignalImpl;var c=r(102);n.AbstractRange=c.AbstractRangeImpl;var l=r(157);n.Attr=l.AttrImpl;var p=r(158);n.CDATASection=p.CDATASectionImpl;var u=r(71);n.CharacterData=u.CharacterDataImpl;var f=r(263),h=r(159);n.Comment=h.CommentImpl;var d=r(171);n.CustomEvent=d.CustomEventImpl;var v=r(100);n.DocumentFragment=v.DocumentFragmentImpl;var m=r(98);n.Document=m.DocumentImpl;var x=r(264),y=r(155);n.DocumentType=y.DocumentTypeImpl;var g=r(6);n.dom=g.dom;var C=r(148);n.DOMImplementation=C.DOMImplementationImpl;var S=r(170);n.DOMTokenList=S.DOMTokenListImpl;var T=r(99);n.Element=T.ElementImpl;var w=r(104);n.Event=w.EventImpl;var _=r(70);n.EventTarget=_.EventTargetImpl;var E=r(161);n.HTMLCollection=E.HTMLCollectionImpl;var D=r(265);n.MutationObserver=D.MutationObserverImpl;var O=r(169);n.MutationRecord=O.MutationRecordImpl;var M=r(164);n.NamedNodeMap=M.NamedNodeMapImpl;var N=r(168);n.NodeFilter=N.NodeFilterImpl;var R=r(34);n.Node=R.NodeImpl;var B=r(166);n.NodeIterator=B.NodeIteratorImpl;var I=r(162);n.NodeList=I.NodeListImpl;var P=r(163);n.NodeListStatic=P.NodeListStaticImpl;var L=r(266),k=r(267),A=r(268),j=r(160);n.ProcessingInstruction=j.ProcessingInstructionImpl;var H=r(165);n.Range=H.RangeImpl;var K=r(156);n.ShadowRoot=K.ShadowRootImpl;var Y=r(269),q=r(270);n.StaticRange=q.StaticRangeImpl;var Z=r(101);n.Text=Z.TextImpl;var re=r(103);n.Traverser=re.TraverserImpl;var ae=r(167);n.TreeWalker=ae.TreeWalkerImpl;var ee=r(149);n.Window=ee.WindowImpl;var F=r(151);n.XMLDocument=F.XMLDocumentImpl,i.applyMixin(T.ElementImpl,f.ChildNodeImpl),i.applyMixin(u.CharacterDataImpl,f.ChildNodeImpl),i.applyMixin(y.DocumentTypeImpl,f.ChildNodeImpl),i.applyMixin(m.DocumentImpl,x.DocumentOrShadowRootImpl),i.applyMixin(K.ShadowRootImpl,x.DocumentOrShadowRootImpl),i.applyMixin(T.ElementImpl,L.NonDocumentTypeChildNodeImpl),i.applyMixin(u.CharacterDataImpl,L.NonDocumentTypeChildNodeImpl),i.applyMixin(m.DocumentImpl,k.NonElementParentNodeImpl),i.applyMixin(v.DocumentFragmentImpl,k.NonElementParentNodeImpl),i.applyMixin(m.DocumentImpl,A.ParentNodeImpl),i.applyMixin(v.DocumentFragmentImpl,A.ParentNodeImpl),i.applyMixin(T.ElementImpl,A.ParentNodeImpl),i.applyMixin(Z.TextImpl,Y.SlotableImpl),i.applyMixin(T.ElementImpl,Y.SlotableImpl)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.EOF=0]="EOF",i[i.Declaration=1]="Declaration",i[i.DocType=2]="DocType",i[i.Element=3]="Element",i[i.Text=4]="Text",i[i.CDATA=5]="CDATA",i[i.PI=6]="PI",i[i.Comment=7]="Comment",i[i.ClosingTag=8]="ClosingTag"}(n.TokenType||(n.TokenType={}))},function(a,n,r){r(64),r(20),r(66);var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])})(l,p)},function(l,p){function u(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),c=function(l){function p(){return l!==null&&l.apply(this,arguments)||this}return o(p,l),p.prototype._parse=function(u,f){var h=this,d=this._builderOptions,v=null;return s.isFunction(f)?v=this.parse(u,f.apply(this)):s.isArray(f)||s.isSet(f)?s.forEachArray(f,function(m){return v=h.parse(u,m)},this):s.isMap(f)||s.isObject(f)?s.forEachObject(f,function(m,x){if(s.isFunction(x)&&(x=x.apply(h)),d.ignoreConverters||m.indexOf(d.convert.att)!==0)if(d.ignoreConverters||m.indexOf(d.convert.text)!==0)if(d.ignoreConverters||m.indexOf(d.convert.cdata)!==0)if(d.ignoreConverters||m.indexOf(d.convert.comment)!==0)if(d.ignoreConverters||m.indexOf(d.convert.ins)!==0){if(!((s.isArray(x)||s.isSet(x))&&s.isEmpty(x))){if((s.isMap(x)||s.isObject(x))&&s.isEmpty(x))v=h.element(u,void 0,h.sanitize(m))||v;else if(d.keepNullNodes||x!=null)if(s.isArray(x)||s.isSet(x))s.forEachArray(x,function(T){var w={};w[m]=T,v=h.parse(u,w)},h);else if(s.isMap(x)||s.isObject(x))(y=h.element(u,void 0,h.sanitize(m)))&&(v=y,h.parse(y,x));else if(x!=null&&x!==""){var y;(y=h.element(u,void 0,h.sanitize(m)))&&(v=y,h.text(y,h._decodeText(h.sanitize(x))))}else v=h.element(u,void 0,h.sanitize(m))||v}}else if(s.isString(x)){var g=x.indexOf(" "),C=g===-1?x:x.substr(0,g),S=g===-1?"":x.substr(g+1);v=h.instruction(u,h.sanitize(C),h.sanitize(S))||v}else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){var w=T.indexOf(" "),_=w===-1?T:T.substr(0,w),E=w===-1?"":T.substr(w+1);v=h.instruction(u,h.sanitize(_),h.sanitize(E))||v},h):s.forEachObject(x,function(T,w){return v=h.instruction(u,h.sanitize(T),h.sanitize(w))||v},h);else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){return v=h.comment(u,h.sanitize(T))||v},h):v=h.comment(u,h.sanitize(x))||v;else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){return v=h.cdata(u,h.sanitize(T))||v},h):v=h.cdata(u,h.sanitize(x))||v;else v=s.isMap(x)||s.isObject(x)?h.parse(u,x):h.text(u,h._decodeText(h.sanitize(x)))||v;else if(m===d.convert.att){if(s.isArray(x)||s.isSet(x))throw new Error("Invalid attribute: "+x.toString()+". "+u._debugInfo());s.forEachObject(x,function(T,w){v=h.attribute(u,void 0,h.sanitize(T),h._decodeAttributeValue(h.sanitize(w)))||v})}else v=h.attribute(u,void 0,h.sanitize(m.substr(d.convert.att.length)),h._decodeAttributeValue(h.sanitize(x)))||v},this):(d.keepNullNodes||f!=null)&&(v=this.text(u,this._decodeText(this.sanitize(f)))||v),v||u},p}(r(75).BaseReader);n.ObjectReader=c},function(a,n,r){var i=r(39);a.exports=new i({explicit:[r(286),r(287),r(288)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(o){this.level=0,this._builderOptions=o,this._writerOptions=o};n.BaseCBWriter=i},function(a,n,r){var i=r(16),o=r(8),s=r(116);a.exports=!i&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(a,n,r){var i=r(11),o=r(13),s=i.document,c=o(s)&&o(s.createElement);a.exports=function(l){return c?s.createElement(l):{}}},function(a,n,r){var i=r(118),o=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(s){return o.call(s)}),a.exports=i.inspectSource},function(a,n,r){var i=r(11),o=r(80),s=i["__core-js_shared__"]||o("__core-js_shared__",{});a.exports=s},function(a,n,r){var i=r(14),o=r(187),s=r(55),c=r(15);a.exports=function(l,p){for(var u=o(p),f=c.f,h=s.f,d=0;d<u.length;d++){var v=u[d];i(l,v)||f(l,v,h(p,v))}}},function(a,n,r){var i=r(11);a.exports=i},function(a,n,r){var i=r(14),o=r(24),s=r(122).indexOf,c=r(45);a.exports=function(l,p){var u,f=o(l),h=0,d=[];for(u in f)!i(c,u)&&i(f,u)&&d.push(u);for(;p.length>h;)i(f,u=p[h++])&&(~s(d,u)||d.push(u));return d}},function(a,n,r){var i=r(24),o=r(26),s=r(83),c=function(l){return function(p,u,f){var h,d=i(p),v=o(d.length),m=s(f,v);if(l&&u!=u){for(;v>m;)if((h=d[m++])!=h)return!0}else for(;v>m;m++)if((l||m in d)&&d[m]===u)return l||m||0;return!l&&-1}};a.exports={includes:c(!0),indexOf:c(!1)}},function(a,n,r){var i=r(8),o=/#|\.prototype\./,s=function(f,h){var d=l[c(f)];return d==u||d!=p&&(typeof h=="function"?i(h):!!h)},c=s.normalize=function(f){return String(f).replace(o,".").toLowerCase()},l=s.data={},p=s.NATIVE="N",u=s.POLYFILL="P";a.exports=s},function(a,n,r){var i=r(86);a.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(a,n,r){var i=r(5);n.f=i},function(a,n,r){var i=r(120),o=r(14),s=r(125),c=r(15).f;a.exports=function(l){var p=i.Symbol||(i.Symbol={});o(p,l)||c(p,l,{value:s.f(l)})}},function(a,n){a.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},function(a,n,r){var i=r(13),o=r(59),s=r(5)("species");a.exports=function(c,l){var p;return o(c)&&(typeof(p=c.constructor)!="function"||p!==Array&&!o(p.prototype)?i(p)&&(p=p[s])===null&&(p=void 0):p=void 0),new(p===void 0?Array:p)(l===0?0:l)}},function(a,n,r){var i,o,s=r(11),c=r(193),l=s.process,p=l&&l.versions,u=p&&p.v8;u?o=(i=u.split("."))[0]+i[1]:c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(o=i[1]),a.exports=o&&+o},function(a,n,r){var i=r(5),o=r(60),s=r(15),c=i("unscopables"),l=Array.prototype;l[c]==null&&s.f(l,c,{configurable:!0,value:o(null)}),a.exports=function(p){l[c][p]=!0}},function(a,n,r){var i,o,s,c=r(132),l=r(21),p=r(14),u=r(5),f=r(44),h=u("iterator"),d=!1;[].keys&&("next"in(s=[].keys())?(o=c(c(s)))!==Object.prototype&&(i=o):d=!0),i==null&&(i={}),f||p(i,h)||l(i,h,function(){return this}),a.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},function(a,n,r){var i=r(14),o=r(27),s=r(57),c=r(196),l=s("IE_PROTO"),p=Object.prototype;a.exports=c?Object.getPrototypeOf:function(u){return u=o(u),i(u,l)?u[l]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?p:null}},function(a,n,r){var i=r(18),o=r(197);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,c=!1,l={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(l,[]),c=l instanceof Array}catch{}return function(p,u){return i(p),o(u),c?s.call(p,u):p.__proto__=u,p}}():void 0)},function(a,n,r){var i=r(56),o=r(15),s=r(40);a.exports=function(c,l,p){var u=i(l);u in c?o.f(c,u,s(0,p)):c[u]=p}},function(a,n,r){var i=r(90),o=r(42),s=r(5)("toStringTag"),c=o(function(){return arguments}())=="Arguments";a.exports=i?o:function(l){var p,u,f;return l===void 0?"Undefined":l===null?"Null":typeof(u=function(h,d){try{return h[d]}catch{}}(p=Object(l),s))=="string"?u:c?o(p):(f=o(p))=="Object"&&typeof p.callee=="function"?"Arguments":f}},function(a,n,r){var i=r(18);a.exports=function(){var o=i(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}},function(a,n,r){var i=r(47),o=r(35),s=function(c){return function(l,p){var u,f,h=String(o(l)),d=i(p),v=h.length;return d<0||d>=v?c?"":void 0:(u=h.charCodeAt(d))<55296||u>56319||d+1===v||(f=h.charCodeAt(d+1))<56320||f>57343?c?h.charAt(d):u:c?h.slice(d,d+2):f-56320+(u-55296<<10)+65536}};a.exports={codeAt:s(!1),charAt:s(!0)}},function(a,n,r){var i=r(4),o=r(27),s=r(61);i({target:"Object",stat:!0,forced:r(8)(function(){s(1)})},{keys:function(c){return s(o(c))}})},function(a,n,r){var i=r(4),o=r(11),s=r(123),c=r(25),l=r(140),p=r(141),u=r(142),f=r(13),h=r(8),d=r(208),v=r(62),m=r(209);a.exports=function(x,y,g){var C=x.indexOf("Map")!==-1,S=x.indexOf("Weak")!==-1,T=C?"set":"add",w=o[x],_=w&&w.prototype,E=w,D={},O=function(P){var L=_[P];c(_,P,P=="add"?function(k){return L.call(this,k===0?0:k),this}:P=="delete"?function(k){return!(S&&!f(k))&&L.call(this,k===0?0:k)}:P=="get"?function(k){return S&&!f(k)?void 0:L.call(this,k===0?0:k)}:P=="has"?function(k){return!(S&&!f(k))&&L.call(this,k===0?0:k)}:function(k,A){return L.call(this,k===0?0:k,A),this})};if(s(x,typeof w!="function"||!(S||_.forEach&&!h(function(){new w().entries().next()}))))E=g.getConstructor(y,x,C,T),l.REQUIRED=!0;else if(s(x,!0)){var M=new E,N=M[T](S?{}:-0,1)!=M,R=h(function(){M.has(1)}),B=d(function(P){new w(P)}),I=!S&&h(function(){for(var P=new w,L=5;L--;)P[T](L,L);return!P.has(-0)});B||((E=y(function(P,L){u(P,E,x);var k=m(new w,P,E);return L!=null&&p(L,k[T],k,C),k})).prototype=_,_.constructor=E),(R||I)&&(O("delete"),O("has"),C&&O("get")),(I||N)&&O(T),S&&_.clear&&delete _.clear}return D[x]=E,i({global:!0,forced:E!=w},D),v(E,x),S||g.setStrong(E,x,C),E}},function(a,n,r){var i=r(45),o=r(13),s=r(14),c=r(15).f,l=r(58),p=r(204),u=l("meta"),f=0,h=Object.isExtensible||function(){return!0},d=function(m){c(m,u,{value:{objectID:"O"+ ++f,weakData:{}}})},v=a.exports={REQUIRED:!1,fastKey:function(m,x){if(!o(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!s(m,u)){if(!h(m))return"F";if(!x)return"E";d(m)}return m[u].objectID},getWeakData:function(m,x){if(!s(m,u)){if(!h(m))return!0;if(!x)return!1;d(m)}return m[u].weakData},onFreeze:function(m){return p&&v.REQUIRED&&h(m)&&!s(m,u)&&d(m),m}};i[u]=!0},function(a,n,r){var i=r(18),o=r(205),s=r(26),c=r(87),l=r(206),p=r(207),u=function(f,h){this.stopped=f,this.result=h};(a.exports=function(f,h,d,v,m){var x,y,g,C,S,T,w,_=c(h,d,v?2:1);if(m)x=f;else{if(typeof(y=l(f))!="function")throw TypeError("Target is not iterable");if(o(y)){for(g=0,C=s(f.length);C>g;g++)if((S=v?_(i(w=f[g])[0],w[1]):_(f[g]))&&S instanceof u)return S;return new u(!1)}x=y.call(f)}for(T=x.next;!(w=T.call(x)).done;)if(typeof(S=p(x,_,w.value,v))=="object"&&S&&S instanceof u)return S;return new u(!1)}).stop=function(f){return new u(!0,f)}},function(a,n){a.exports=function(r,i,o){if(!(r instanceof i))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return r}},function(a,n,r){var i=r(15).f,o=r(60),s=r(210),c=r(87),l=r(142),p=r(141),u=r(88),f=r(211),h=r(16),d=r(140).fastKey,v=r(43),m=v.set,x=v.getterFor;a.exports={getConstructor:function(y,g,C,S){var T=y(function(D,O){l(D,T,g),m(D,{type:g,index:o(null),first:void 0,last:void 0,size:0}),h||(D.size=0),O!=null&&p(O,D[S],D,C)}),w=x(g),_=function(D,O,M){var N,R,B=w(D),I=E(D,O);return I?I.value=M:(B.last=I={index:R=d(O,!0),key:O,value:M,previous:N=B.last,next:void 0,removed:!1},B.first||(B.first=I),N&&(N.next=I),h?B.size++:D.size++,R!=="F"&&(B.index[R]=I)),D},E=function(D,O){var M,N=w(D),R=d(O);if(R!=="F")return N.index[R];for(M=N.first;M;M=M.next)if(M.key==O)return M};return s(T.prototype,{clear:function(){for(var D=w(this),O=D.index,M=D.first;M;)M.removed=!0,M.previous&&(M.previous=M.previous.next=void 0),delete O[M.index],M=M.next;D.first=D.last=void 0,h?D.size=0:this.size=0},delete:function(D){var O=w(this),M=E(this,D);if(M){var N=M.next,R=M.previous;delete O.index[M.index],M.removed=!0,R&&(R.next=N),N&&(N.previous=R),O.first==M&&(O.first=N),O.last==M&&(O.last=R),h?O.size--:this.size--}return!!M},forEach:function(D){for(var O,M=w(this),N=c(D,arguments.length>1?arguments[1]:void 0,3);O=O?O.next:M.first;)for(N(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(D){return!!E(this,D)}}),s(T.prototype,C?{get:function(D){var O=E(this,D);return O&&O.value},set:function(D,O){return _(this,D===0?0:D,O)}}:{add:function(D){return _(this,D=D===0?0:D,D)}}),h&&i(T.prototype,"size",{get:function(){return w(this).size}}),T},setStrong:function(y,g,C){var S=g+" Iterator",T=x(g),w=x(S);u(y,g,function(_,E){m(this,{type:S,target:_,state:T(_),kind:E,last:void 0})},function(){for(var _=w(this),E=_.kind,D=_.last;D&&D.removed;)D=D.previous;return _.target&&(_.last=D=D?D.next:_.state.first)?E=="keys"?{value:D.key,done:!1}:E=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:(_.target=void 0,{value:void 0,done:!0})},C?"entries":"values",!C,!0),f(g)}}},function(a,n,r){var i,o=r(4),s=r(55).f,c=r(26),l=r(222),p=r(35),u=r(224),f=r(44),h="".endsWith,d=Math.min,v=u("endsWith");o({target:"String",proto:!0,forced:!!(f||v||(i=s(String.prototype,"endsWith"),!i||i.writable))&&!v},{endsWith:function(m){var x=String(p(this));l(m);var y=arguments.length>1?arguments[1]:void 0,g=c(x.length),C=y===void 0?g:d(c(y),g),S=String(m);return h?h.call(x,S,C):x.slice(C-S.length,C)===S}})},function(a,n,r){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=r(229),s=r(230),c=r(231);function l(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(F,b){if(l()<b)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(F=new Uint8Array(b)).__proto__=u.prototype:(F===null&&(F=new u(b)),F.length=b),F}function u(F,b,G){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(F,b,G);if(typeof F=="number"){if(typeof b=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,F)}return f(this,F,b,G)}function f(F,b,G,U){if(typeof b=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&b instanceof ArrayBuffer?function(z,W,$,J){if(W.byteLength,$<0||W.byteLength<$)throw new RangeError("'offset' is out of bounds");if(W.byteLength<$+(J||0))throw new RangeError("'length' is out of bounds");return W=$===void 0&&J===void 0?new Uint8Array(W):J===void 0?new Uint8Array(W,$):new Uint8Array(W,$,J),u.TYPED_ARRAY_SUPPORT?(z=W).__proto__=u.prototype:z=v(z,W),z}(F,b,G,U):typeof b=="string"?function(z,W,$){if(typeof $=="string"&&$!==""||($="utf8"),!u.isEncoding($))throw new TypeError('"encoding" must be a valid string encoding');var J=0|x(W,$),ne=(z=p(z,J)).write(W,$);return ne!==J&&(z=z.slice(0,ne)),z}(F,b,G):function(z,W){if(u.isBuffer(W)){var $=0|m(W.length);return(z=p(z,$)).length===0||W.copy(z,0,0,$),z}if(W){if(typeof ArrayBuffer<"u"&&W.buffer instanceof ArrayBuffer||"length"in W)return typeof W.length!="number"||(J=W.length)!=J?p(z,0):v(z,W);if(W.type==="Buffer"&&c(W.data))return v(z,W.data)}var J;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(F,b)}function h(F){if(typeof F!="number")throw new TypeError('"size" argument must be a number');if(F<0)throw new RangeError('"size" argument must not be negative')}function d(F,b){if(h(b),F=p(F,b<0?0:0|m(b)),!u.TYPED_ARRAY_SUPPORT)for(var G=0;G<b;++G)F[G]=0;return F}function v(F,b){var G=b.length<0?0:0|m(b.length);F=p(F,G);for(var U=0;U<G;U+=1)F[U]=255&b[U];return F}function m(F){if(F>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|F}function x(F,b){if(u.isBuffer(F))return F.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(F)||F instanceof ArrayBuffer))return F.byteLength;typeof F!="string"&&(F=""+F);var G=F.length;if(G===0)return 0;for(var U=!1;;)switch(b){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":case void 0:return re(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return ae(F).length;default:if(U)return re(F).length;b=(""+b).toLowerCase(),U=!0}}function y(F,b,G){var U=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(b>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return I(this,b,G);case"utf8":case"utf-8":return N(this,b,G);case"ascii":return R(this,b,G);case"latin1":case"binary":return B(this,b,G);case"base64":return M(this,b,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,b,G);default:if(U)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),U=!0}}function g(F,b,G){var U=F[b];F[b]=F[G],F[G]=U}function C(F,b,G,U,z){if(F.length===0)return-1;if(typeof G=="string"?(U=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,isNaN(G)&&(G=z?0:F.length-1),G<0&&(G=F.length+G),G>=F.length){if(z)return-1;G=F.length-1}else if(G<0){if(!z)return-1;G=0}if(typeof b=="string"&&(b=u.from(b,U)),u.isBuffer(b))return b.length===0?-1:S(F,b,G,U,z);if(typeof b=="number")return b&=255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(F,b,G):Uint8Array.prototype.lastIndexOf.call(F,b,G):S(F,[b],G,U,z);throw new TypeError("val must be string, number or Buffer")}function S(F,b,G,U,z){var W,$=1,J=F.length,ne=b.length;if(U!==void 0&&((U=String(U).toLowerCase())==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(F.length<2||b.length<2)return-1;$=2,J/=2,ne/=2,G/=2}function oe(je,Le){return $===1?je[Le]:je.readUInt16BE(Le*$)}if(z){var ue=-1;for(W=G;W<J;W++)if(oe(F,W)===oe(b,ue===-1?0:W-ue)){if(ue===-1&&(ue=W),W-ue+1===ne)return ue*$}else ue!==-1&&(W-=W-ue),ue=-1}else for(G+ne>J&&(G=J-ne),W=G;W>=0;W--){for(var Ce=!0,ye=0;ye<ne;ye++)if(oe(F,W+ye)!==oe(b,ye)){Ce=!1;break}if(Ce)return W}return-1}function T(F,b,G,U){G=Number(G)||0;var z=F.length-G;U?(U=Number(U))>z&&(U=z):U=z;var W=b.length;if(W%2!=0)throw new TypeError("Invalid hex string");U>W/2&&(U=W/2);for(var $=0;$<U;++$){var J=parseInt(b.substr(2*$,2),16);if(isNaN(J))return $;F[G+$]=J}return $}function w(F,b,G,U){return ee(re(b,F.length-G),F,G,U)}function _(F,b,G,U){return ee(function(z){for(var W=[],$=0;$<z.length;++$)W.push(255&z.charCodeAt($));return W}(b),F,G,U)}function E(F,b,G,U){return _(F,b,G,U)}function D(F,b,G,U){return ee(ae(b),F,G,U)}function O(F,b,G,U){return ee(function(z,W){for(var $,J,ne,oe=[],ue=0;ue<z.length&&!((W-=2)<0);++ue)$=z.charCodeAt(ue),J=$>>8,ne=$%256,oe.push(ne),oe.push(J);return oe}(b,F.length-G),F,G,U)}function M(F,b,G){return b===0&&G===F.length?o.fromByteArray(F):o.fromByteArray(F.slice(b,G))}function N(F,b,G){G=Math.min(F.length,G);for(var U=[],z=b;z<G;){var W,$,J,ne,oe=F[z],ue=null,Ce=oe>239?4:oe>223?3:oe>191?2:1;if(z+Ce<=G)switch(Ce){case 1:oe<128&&(ue=oe);break;case 2:(192&(W=F[z+1]))==128&&(ne=(31&oe)<<6|63&W)>127&&(ue=ne);break;case 3:W=F[z+1],$=F[z+2],(192&W)==128&&(192&$)==128&&(ne=(15&oe)<<12|(63&W)<<6|63&$)>2047&&(ne<55296||ne>57343)&&(ue=ne);break;case 4:W=F[z+1],$=F[z+2],J=F[z+3],(192&W)==128&&(192&$)==128&&(192&J)==128&&(ne=(15&oe)<<18|(63&W)<<12|(63&$)<<6|63&J)>65535&&ne<1114112&&(ue=ne)}ue===null?(ue=65533,Ce=1):ue>65535&&(ue-=65536,U.push(ue>>>10&1023|55296),ue=56320|1023&ue),U.push(ue),z+=Ce}return function(ye){var je=ye.length;if(je<=4096)return String.fromCharCode.apply(String,ye);for(var Le="",ge=0;ge<je;)Le+=String.fromCharCode.apply(String,ye.slice(ge,ge+=4096));return Le}(U)}n.Buffer=u,n.SlowBuffer=function(F){return+F!=F&&(F=0),u.alloc(+F)},n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var F=new Uint8Array(1);return F.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},F.foo()===42&&typeof F.subarray=="function"&&F.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=l(),u.poolSize=8192,u._augment=function(F){return F.__proto__=u.prototype,F},u.from=function(F,b,G){return f(null,F,b,G)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(F,b,G){return function(U,z,W,$){return h(z),z<=0?p(U,z):W!==void 0?typeof $=="string"?p(U,z).fill(W,$):p(U,z).fill(W):p(U,z)}(null,F,b,G)},u.allocUnsafe=function(F){return d(null,F)},u.allocUnsafeSlow=function(F){return d(null,F)},u.isBuffer=function(F){return!(F==null||!F._isBuffer)},u.compare=function(F,b){if(!u.isBuffer(F)||!u.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(F===b)return 0;for(var G=F.length,U=b.length,z=0,W=Math.min(G,U);z<W;++z)if(F[z]!==b[z]){G=F[z],U=b[z];break}return G<U?-1:U<G?1:0},u.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(F,b){if(!c(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return u.alloc(0);var G;if(b===void 0)for(b=0,G=0;G<F.length;++G)b+=F[G].length;var U=u.allocUnsafe(b),z=0;for(G=0;G<F.length;++G){var W=F[G];if(!u.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(U,z),z+=W.length}return U},u.byteLength=x,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var F=this.length;if(F%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<F;b+=2)g(this,b,b+1);return this},u.prototype.swap32=function(){var F=this.length;if(F%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<F;b+=4)g(this,b,b+3),g(this,b+1,b+2);return this},u.prototype.swap64=function(){var F=this.length;if(F%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<F;b+=8)g(this,b,b+7),g(this,b+1,b+6),g(this,b+2,b+5),g(this,b+3,b+4);return this},u.prototype.toString=function(){var F=0|this.length;return F===0?"":arguments.length===0?N(this,0,F):y.apply(this,arguments)},u.prototype.equals=function(F){if(!u.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F||u.compare(this,F)===0},u.prototype.inspect=function(){var F="",b=n.INSPECT_MAX_BYTES;return this.length>0&&(F=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(F+=" ... ")),"<Buffer "+F+">"},u.prototype.compare=function(F,b,G,U,z){if(!u.isBuffer(F))throw new TypeError("Argument must be a Buffer");if(b===void 0&&(b=0),G===void 0&&(G=F?F.length:0),U===void 0&&(U=0),z===void 0&&(z=this.length),b<0||G>F.length||U<0||z>this.length)throw new RangeError("out of range index");if(U>=z&&b>=G)return 0;if(U>=z)return-1;if(b>=G)return 1;if(this===F)return 0;for(var W=(z>>>=0)-(U>>>=0),$=(G>>>=0)-(b>>>=0),J=Math.min(W,$),ne=this.slice(U,z),oe=F.slice(b,G),ue=0;ue<J;++ue)if(ne[ue]!==oe[ue]){W=ne[ue],$=oe[ue];break}return W<$?-1:$<W?1:0},u.prototype.includes=function(F,b,G){return this.indexOf(F,b,G)!==-1},u.prototype.indexOf=function(F,b,G){return C(this,F,b,G,!0)},u.prototype.lastIndexOf=function(F,b,G){return C(this,F,b,G,!1)},u.prototype.write=function(F,b,G,U){if(b===void 0)U="utf8",G=this.length,b=0;else if(G===void 0&&typeof b=="string")U=b,G=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(G)?(G|=0,U===void 0&&(U="utf8")):(U=G,G=void 0)}var z=this.length-b;if((G===void 0||G>z)&&(G=z),F.length>0&&(G<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");for(var W=!1;;)switch(U){case"hex":return T(this,F,b,G);case"utf8":case"utf-8":return w(this,F,b,G);case"ascii":return _(this,F,b,G);case"latin1":case"binary":return E(this,F,b,G);case"base64":return D(this,F,b,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,F,b,G);default:if(W)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),W=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(F,b,G){var U="";G=Math.min(F.length,G);for(var z=b;z<G;++z)U+=String.fromCharCode(127&F[z]);return U}function B(F,b,G){var U="";G=Math.min(F.length,G);for(var z=b;z<G;++z)U+=String.fromCharCode(F[z]);return U}function I(F,b,G){var U=F.length;(!b||b<0)&&(b=0),(!G||G<0||G>U)&&(G=U);for(var z="",W=b;W<G;++W)z+=Z(F[W]);return z}function P(F,b,G){for(var U=F.slice(b,G),z="",W=0;W<U.length;W+=2)z+=String.fromCharCode(U[W]+256*U[W+1]);return z}function L(F,b,G){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+b>G)throw new RangeError("Trying to access beyond buffer length")}function k(F,b,G,U,z,W){if(!u.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>z||b<W)throw new RangeError('"value" argument is out of bounds');if(G+U>F.length)throw new RangeError("Index out of range")}function A(F,b,G,U){b<0&&(b=65535+b+1);for(var z=0,W=Math.min(F.length-G,2);z<W;++z)F[G+z]=(b&255<<8*(U?z:1-z))>>>8*(U?z:1-z)}function j(F,b,G,U){b<0&&(b=4294967295+b+1);for(var z=0,W=Math.min(F.length-G,4);z<W;++z)F[G+z]=b>>>8*(U?z:3-z)&255}function H(F,b,G,U,z,W){if(G+U>F.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function K(F,b,G,U,z){return z||H(F,0,G,4),s.write(F,b,G,U,23,4),G+4}function Y(F,b,G,U,z){return z||H(F,0,G,8),s.write(F,b,G,U,52,8),G+8}u.prototype.slice=function(F,b){var G,U=this.length;if((F=~~F)<0?(F+=U)<0&&(F=0):F>U&&(F=U),(b=b===void 0?U:~~b)<0?(b+=U)<0&&(b=0):b>U&&(b=U),b<F&&(b=F),u.TYPED_ARRAY_SUPPORT)(G=this.subarray(F,b)).__proto__=u.prototype;else{var z=b-F;G=new u(z,void 0);for(var W=0;W<z;++W)G[W]=this[W+F]}return G},u.prototype.readUIntLE=function(F,b,G){F|=0,b|=0,G||L(F,b,this.length);for(var U=this[F],z=1,W=0;++W<b&&(z*=256);)U+=this[F+W]*z;return U},u.prototype.readUIntBE=function(F,b,G){F|=0,b|=0,G||L(F,b,this.length);for(var U=this[F+--b],z=1;b>0&&(z*=256);)U+=this[F+--b]*z;return U},u.prototype.readUInt8=function(F,b){return b||L(F,1,this.length),this[F]},u.prototype.readUInt16LE=function(F,b){return b||L(F,2,this.length),this[F]|this[F+1]<<8},u.prototype.readUInt16BE=function(F,b){return b||L(F,2,this.length),this[F]<<8|this[F+1]},u.prototype.readUInt32LE=function(F,b){return b||L(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+16777216*this[F+3]},u.prototype.readUInt32BE=function(F,b){return b||L(F,4,this.length),16777216*this[F]+(this[F+1]<<16|this[F+2]<<8|this[F+3])},u.prototype.readIntLE=function(F,b,G){F|=0,b|=0,G||L(F,b,this.length);for(var U=this[F],z=1,W=0;++W<b&&(z*=256);)U+=this[F+W]*z;return U>=(z*=128)&&(U-=Math.pow(2,8*b)),U},u.prototype.readIntBE=function(F,b,G){F|=0,b|=0,G||L(F,b,this.length);for(var U=b,z=1,W=this[F+--U];U>0&&(z*=256);)W+=this[F+--U]*z;return W>=(z*=128)&&(W-=Math.pow(2,8*b)),W},u.prototype.readInt8=function(F,b){return b||L(F,1,this.length),128&this[F]?-1*(255-this[F]+1):this[F]},u.prototype.readInt16LE=function(F,b){b||L(F,2,this.length);var G=this[F]|this[F+1]<<8;return 32768&G?4294901760|G:G},u.prototype.readInt16BE=function(F,b){b||L(F,2,this.length);var G=this[F+1]|this[F]<<8;return 32768&G?4294901760|G:G},u.prototype.readInt32LE=function(F,b){return b||L(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},u.prototype.readInt32BE=function(F,b){return b||L(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},u.prototype.readFloatLE=function(F,b){return b||L(F,4,this.length),s.read(this,F,!0,23,4)},u.prototype.readFloatBE=function(F,b){return b||L(F,4,this.length),s.read(this,F,!1,23,4)},u.prototype.readDoubleLE=function(F,b){return b||L(F,8,this.length),s.read(this,F,!0,52,8)},u.prototype.readDoubleBE=function(F,b){return b||L(F,8,this.length),s.read(this,F,!1,52,8)},u.prototype.writeUIntLE=function(F,b,G,U){F=+F,b|=0,G|=0,U||k(this,F,b,G,Math.pow(2,8*G)-1,0);var z=1,W=0;for(this[b]=255&F;++W<G&&(z*=256);)this[b+W]=F/z&255;return b+G},u.prototype.writeUIntBE=function(F,b,G,U){F=+F,b|=0,G|=0,U||k(this,F,b,G,Math.pow(2,8*G)-1,0);var z=G-1,W=1;for(this[b+z]=255&F;--z>=0&&(W*=256);)this[b+z]=F/W&255;return b+G},u.prototype.writeUInt8=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,1,255,0),u.TYPED_ARRAY_SUPPORT||(F=Math.floor(F)),this[b]=255&F,b+1},u.prototype.writeUInt16LE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[b]=255&F,this[b+1]=F>>>8):A(this,F,b,!0),b+2},u.prototype.writeUInt16BE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[b]=F>>>8,this[b+1]=255&F):A(this,F,b,!1),b+2},u.prototype.writeUInt32LE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[b+3]=F>>>24,this[b+2]=F>>>16,this[b+1]=F>>>8,this[b]=255&F):j(this,F,b,!0),b+4},u.prototype.writeUInt32BE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[b]=F>>>24,this[b+1]=F>>>16,this[b+2]=F>>>8,this[b+3]=255&F):j(this,F,b,!1),b+4},u.prototype.writeIntLE=function(F,b,G,U){if(F=+F,b|=0,!U){var z=Math.pow(2,8*G-1);k(this,F,b,G,z-1,-z)}var W=0,$=1,J=0;for(this[b]=255&F;++W<G&&($*=256);)F<0&&J===0&&this[b+W-1]!==0&&(J=1),this[b+W]=(F/$>>0)-J&255;return b+G},u.prototype.writeIntBE=function(F,b,G,U){if(F=+F,b|=0,!U){var z=Math.pow(2,8*G-1);k(this,F,b,G,z-1,-z)}var W=G-1,$=1,J=0;for(this[b+W]=255&F;--W>=0&&($*=256);)F<0&&J===0&&this[b+W+1]!==0&&(J=1),this[b+W]=(F/$>>0)-J&255;return b+G},u.prototype.writeInt8=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,1,127,-128),u.TYPED_ARRAY_SUPPORT||(F=Math.floor(F)),F<0&&(F=255+F+1),this[b]=255&F,b+1},u.prototype.writeInt16LE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[b]=255&F,this[b+1]=F>>>8):A(this,F,b,!0),b+2},u.prototype.writeInt16BE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[b]=F>>>8,this[b+1]=255&F):A(this,F,b,!1),b+2},u.prototype.writeInt32LE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[b]=255&F,this[b+1]=F>>>8,this[b+2]=F>>>16,this[b+3]=F>>>24):j(this,F,b,!0),b+4},u.prototype.writeInt32BE=function(F,b,G){return F=+F,b|=0,G||k(this,F,b,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),u.TYPED_ARRAY_SUPPORT?(this[b]=F>>>24,this[b+1]=F>>>16,this[b+2]=F>>>8,this[b+3]=255&F):j(this,F,b,!1),b+4},u.prototype.writeFloatLE=function(F,b,G){return K(this,F,b,!0,G)},u.prototype.writeFloatBE=function(F,b,G){return K(this,F,b,!1,G)},u.prototype.writeDoubleLE=function(F,b,G){return Y(this,F,b,!0,G)},u.prototype.writeDoubleBE=function(F,b,G){return Y(this,F,b,!1,G)},u.prototype.copy=function(F,b,G,U){if(G||(G=0),U||U===0||(U=this.length),b>=F.length&&(b=F.length),b||(b=0),U>0&&U<G&&(U=G),U===G||F.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),F.length-b<U-G&&(U=F.length-b+G);var z,W=U-G;if(this===F&&G<b&&b<U)for(z=W-1;z>=0;--z)F[z+b]=this[z+G];else if(W<1e3||!u.TYPED_ARRAY_SUPPORT)for(z=0;z<W;++z)F[z+b]=this[z+G];else Uint8Array.prototype.set.call(F,this.subarray(G,G+W),b);return W},u.prototype.fill=function(F,b,G,U){if(typeof F=="string"){if(typeof b=="string"?(U=b,b=0,G=this.length):typeof G=="string"&&(U=G,G=this.length),F.length===1){var z=F.charCodeAt(0);z<256&&(F=z)}if(U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!u.isEncoding(U))throw new TypeError("Unknown encoding: "+U)}else typeof F=="number"&&(F&=255);if(b<0||this.length<b||this.length<G)throw new RangeError("Out of range index");if(G<=b)return this;var W;if(b>>>=0,G=G===void 0?this.length:G>>>0,F||(F=0),typeof F=="number")for(W=b;W<G;++W)this[W]=F;else{var $=u.isBuffer(F)?F:re(new u(F,U).toString()),J=$.length;for(W=0;W<G-b;++W)this[W+b]=$[W%J]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function Z(F){return F<16?"0"+F.toString(16):F.toString(16)}function re(F,b){var G;b=b||1/0;for(var U=F.length,z=null,W=[],$=0;$<U;++$){if((G=F.charCodeAt($))>55295&&G<57344){if(!z){if(G>56319){(b-=3)>-1&&W.push(239,191,189);continue}if($+1===U){(b-=3)>-1&&W.push(239,191,189);continue}z=G;continue}if(G<56320){(b-=3)>-1&&W.push(239,191,189),z=G;continue}G=65536+(z-55296<<10|G-56320)}else z&&(b-=3)>-1&&W.push(239,191,189);if(z=null,G<128){if((b-=1)<0)break;W.push(G)}else if(G<2048){if((b-=2)<0)break;W.push(G>>6|192,63&G|128)}else if(G<65536){if((b-=3)<0)break;W.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;W.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return W}function ae(F){return o.toByteArray(function(b){if((b=function(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}(b).replace(q,"")).length<2)return"";for(;b.length%4!=0;)b+="=";return b}(F))}function ee(F,b,G,U){for(var z=0;z<U&&!(z+G>=b.length||z>=F.length);++z)b[z+G]=F[z];return z}}).call(this,r(78))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.isASCIIByte=function(i){return i>=0&&i<=127}},function(a,n,r){var i=this&&this.__read||function(s,c){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var p,u,f=l.call(s),h=[];try{for(;(c===void 0||c-- >0)&&!(p=f.next()).done;)h.push(p.value)}catch(d){u={error:d}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}return h},o=this&&this.__spread||function(){for(var s=[],c=0;c<arguments.length;c++)s=s.concat(i(arguments[c]));return s};Object.defineProperty(n,"__esModule",{value:!0}),n.length=function(s){return s.length},n.byteLowercase=function(s){for(var c=0;c<s.length;c++){var l=s[c];l>=65&&l<=90&&(s[c]=l+32)}},n.byteUppercase=function(s){for(var c=0;c<s.length;c++){var l=s[c];l>=97&&l<=122&&(s[c]=l-32)}},n.byteCaseInsensitiveMatch=function(s,c){if(s.length!==c.length)return!1;for(var l=0;l<s.length;l++){var p=s[l],u=c[l];if(p>=65&&p<=90&&(p+=32),u>=65&&u<=90&&(u+=32),p!==u)return!1}return!0},n.startsWith=function(s,c){for(var l=0;;){if(l>=s.length)return!1;if(l>=c.length)return!0;if(s[l]!==c[l])return!1;l++}},n.byteLessThan=function(s,c){for(var l=0;;){if(l>=s.length)return!1;if(l>=c.length)return!0;var p=s[l],u=c[l];if(p<u)return!0;if(p>u)return!1;l++}},n.isomorphicDecode=function(s){return String.fromCodePoint.apply(String,o(s))}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),o=r(7),s=r(0),c=r(12),l=function(){function p(u){this._associatedDocument=u||i.dom.window.document}return p.prototype.createDocumentType=function(u,f,h){return s.namespace_validate(u),s.create_documentType(this._associatedDocument,u,f,h)},p.prototype.createDocument=function(u,f,h){h===void 0&&(h=null);var d=s.create_xmlDocument(),v=null;return f&&(v=s.document_internalCreateElementNS(d,u,f)),h&&d.appendChild(h),v&&d.appendChild(v),d._origin=this._associatedDocument._origin,u===o.namespace.HTML?d._contentType="application/xhtml+xml":u===o.namespace.SVG?d._contentType="image/svg+xml":d._contentType="application/xml",d},p.prototype.createHTMLDocument=function(u){var f=s.create_document();f._type="html",f._contentType="text/html",f.appendChild(s.create_documentType(f,"html","",""));var h=s.element_createAnElement(f,"html",o.namespace.HTML);f.appendChild(h);var d=s.element_createAnElement(f,"head",o.namespace.HTML);if(h.appendChild(d),u!==void 0){var v=s.element_createAnElement(f,"title",o.namespace.HTML);d.appendChild(v);var m=s.create_text(f,u);v.appendChild(m)}var x=s.element_createAnElement(f,"body",o.namespace.HTML);return h.appendChild(x),f._origin=this._associatedDocument._origin,f},p.prototype.hasFeature=function(){return!0},p._create=function(u){return new p(u)},p}();n.DOMImplementationImpl=l,c.idl_defineConst(l.prototype,"_ID","@oozcitak/dom")},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(70),c=r(1),l=r(0),p=function(u){function f(){var h=u.call(this)||this;return h._signalSlots=new Set,h._mutationObserverMicrotaskQueued=!1,h._mutationObservers=new Set,h._iteratorList=new c.FixedSizeSet,h._associatedDocument=l.create_document(),h}return o(f,u),Object.defineProperty(f.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),f._create=function(){return new f},f}(s.EventTargetImpl);n.WindowImpl=p},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=function(){function s(){}return s.isNode=function(c){return!!c&&c._nodeType!==void 0},s.isDocumentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Document},s.isDocumentTypeNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentType},s.isDocumentFragmentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentFragment},s.isAttrNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Attribute},s.isCharacterDataNode=function(c){if(!s.isNode(c))return!1;var l=c._nodeType;return l===i.NodeType.Text||l===i.NodeType.ProcessingInstruction||l===i.NodeType.Comment||l===i.NodeType.CData},s.isTextNode=function(c){return s.isNode(c)&&(c._nodeType===i.NodeType.Text||c._nodeType===i.NodeType.CData)},s.isExclusiveTextNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Text},s.isCDATASectionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.CData},s.isCommentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Comment},s.isProcessingInstructionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.ProcessingInstruction},s.isElementNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Element},s.isCustomElementNode=function(c){return s.isElementNode(c)&&c._customElementState==="custom"},s.isShadowRoot=function(c){return!!c&&c.host!==void 0},s.isMouseEvent=function(c){return!!c&&c.screenX!==void 0&&c.screenY!=null},s.isSlotable=function(c){return!!c&&c._name!==void 0&&c._assignedSlot!==void 0&&(s.isTextNode(c)||s.isElementNode(c))},s.isSlot=function(c){return!!c&&c._name!==void 0&&c._assignedNodes!==void 0&&s.isElementNode(c)},s.isWindow=function(c){return!!c&&c.navigator!==void 0},s.isEventListener=function(c){return!!c&&c.handleEvent!==void 0},s.isRegisteredObserver=function(c){return!!c&&c.observer!==void 0&&c.options!==void 0},s.isTransientRegisteredObserver=function(c){return!!c&&c.source!==void 0&&s.isRegisteredObserver(c)},s}();n.Guard=o},function(a,n,r){var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var f in u)u.hasOwnProperty(f)&&(p[f]=u[f])})(c,l)},function(c,l){function p(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(c){function l(){return c.call(this)||this}return o(l,c),l}(r(98).DocumentImpl);n.XMLDocumentImpl=s},function(a,n,r){var i=this&&this.__values||function(U){var z=typeof Symbol=="function"&&Symbol.iterator,W=z&&U[z],$=0;if(W)return W.call(U);if(U&&typeof U.length=="number")return{next:function(){return U&&$>=U.length&&(U=void 0),{value:U&&U[$++],done:!U}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(U,z){var W=typeof Symbol=="function"&&U[Symbol.iterator];if(!W)return U;var $,J,ne=W.call(U),oe=[];try{for(;(z===void 0||z-- >0)&&!($=ne.next()).done;)oe.push($.value)}catch(ue){J={error:ue}}finally{try{$&&!$.done&&(W=ne.return)&&W.call(ne)}finally{if(J)throw J.error}}return oe};Object.defineProperty(n,"__esModule",{value:!0});var s,c=r(1),l=r(243),p=r(7),u=r(244),f={ftp:21,file:null,http:80,https:443,ws:80,wss:443},h=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,x=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,y=/[\0\t\f\r #%/:?@\[\\\]]/;function g(U){s!==void 0&&s.call(null,"Validation Error: "+U)}function C(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function S(U){return U in f}function T(U){return S(U.scheme)}function w(U){return f[U]||null}function _(U){return U.username!==""||U.password!==""}function E(U,z){var W,$;z===void 0&&(z=!1);var J=U.scheme+":";if(U.host!==null?(J+="//",_(U)&&(J+=U.username,U.password!==""&&(J+=":"+U.password),J+="@"),J+=D(U.host),U.port!==null&&(J+=":"+U.port)):U.host===null&&U.scheme==="file"&&(J+="//"),U._cannotBeABaseURLFlag)J+=U.path[0];else try{for(var ne=i(U.path),oe=ne.next();!oe.done;oe=ne.next())J+="/"+oe.value}catch(ue){W={error:ue}}finally{try{oe&&!oe.done&&($=ne.return)&&$.call(ne)}finally{if(W)throw W.error}}return U.query!==null&&(J+="?"+U.query),z||U.fragment===null||(J+="#"+U.fragment),J}function D(U){return c.isNumber(U)?O(U):c.isArray(U)?"["+M(U)+"]":U}function O(U){for(var z="",W=U,$=1;$<=4;$++)z=(W%256).toString()+z,$!==4&&(z="."+z),W=Math.floor(W/256);return z}function M(U){for(var z="",W=null,$=-1,J=0,ne=0,oe=0;oe<8;oe++)if(U[oe]===0){J=1;for(var ue=oe+1;ue<8&&U[ue]===0;ue++)J++;J>ne&&(ne=J,$=oe)}ne>1&&(W=$);for(var Ce=!1,ye=0;ye<8;ye++)Ce&&U[ye]===0||(Ce&&(Ce=!1),W!==ye?(z+=U[ye].toString(16),ye!==7&&(z+=":")):(z+=ye===0?"::":":",Ce=!0));return z}function N(U,z,W,$,J){var ne,oe,ue,Ce;if($===void 0){$={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var ye=/^[\u0000-\u001F\u0020]+/,je=/[\u0000-\u001F\u0020]+$/;(ye.test(U)||je.test(U))&&g("Input string contains leading or trailing control characters or space."),U=(U=U.replace(ye,"")).replace(je,"")}var Le=/[\u0009\u000A\u000D]/g;Le.test(U)&&g("Input string contains tab or newline characters."),U=U.replace(Le,"");var ge=J===void 0?l.ParserState.SchemeStart:J;z===void 0&&(z=null);for(var tt=W===void 0||W==="replacement"||W==="UTF-16BE"||W==="UTF-16LE"?"UTF-8":W,X="",De=!1,Oe=!1,de=!1,te=new c.StringWalker(U);;){switch(ge){case l.ParserState.SchemeStart:if(p.codePoint.ASCIIAlpha.test(te.c()))X+=te.c().toLowerCase(),ge=l.ParserState.Scheme;else{if(J!==void 0)return g("Invalid scheme start character."),null;ge=l.ParserState.NoScheme,te.pointer--}break;case l.ParserState.Scheme:if(p.codePoint.ASCIIAlphanumeric.test(te.c())||te.c()==="+"||te.c()==="-"||te.c()===".")X+=te.c().toLowerCase();else{if(te.c()!==":"){if(J===void 0){X="",ge=l.ParserState.NoScheme,te.pointer=0;continue}return g("Invalid input string."),null}if(J!==void 0&&(S($.scheme)&&!S(X)||!S($.scheme)&&S(X)||(_($)||$.port!==null)&&X==="file"||$.scheme==="file"&&($.host===""||$.host===null)))return $;if($.scheme=X,J!==void 0)return $.port===w($.scheme)&&($.port=null),$;X="",$.scheme==="file"?(te.remaining().startsWith("//")||g("Invalid file URL scheme, '//' expected."),ge=l.ParserState.File):T($)&&z!==null&&z.scheme===$.scheme?ge=l.ParserState.SpecialRelativeOrAuthority:T($)?ge=l.ParserState.SpecialAuthoritySlashes:te.remaining().startsWith("/")?(ge=l.ParserState.PathOrAuthority,te.pointer++):($._cannotBeABaseURLFlag=!0,$.path.push(""),ge=l.ParserState.CannotBeABaseURLPath)}break;case l.ParserState.NoScheme:if(z===null||z._cannotBeABaseURLFlag&&te.c()!=="#")return g("Invalid input string."),null;z._cannotBeABaseURLFlag&&te.c()==="#"?($.scheme=z.scheme,$.path=p.list.clone(z.path),$.query=z.query,$.fragment="",$._cannotBeABaseURLFlag=!0,ge=l.ParserState.Fragment):z.scheme!=="file"?(ge=l.ParserState.Relative,te.pointer--):(ge=l.ParserState.File,te.pointer--);break;case l.ParserState.SpecialRelativeOrAuthority:te.c()==="/"&&te.remaining().startsWith("/")?(ge=l.ParserState.SpecialAuthorityIgnoreSlashes,te.pointer++):(g("Invalid input string."),ge=l.ParserState.Relative,te.pointer--);break;case l.ParserState.PathOrAuthority:te.c()==="/"?ge=l.ParserState.Authority:(ge=l.ParserState.Path,te.pointer--);break;case l.ParserState.Relative:if(z===null)throw new Error("Invalid parser state. Base URL is null.");switch($.scheme=z.scheme,te.c()){case"":$.username=z.username,$.password=z.password,$.host=z.host,$.port=z.port,$.path=p.list.clone(z.path),$.query=z.query;break;case"/":ge=l.ParserState.RelativeSlash;break;case"?":$.username=z.username,$.password=z.password,$.host=z.host,$.port=z.port,$.path=p.list.clone(z.path),$.query="",ge=l.ParserState.Query;break;case"#":$.username=z.username,$.password=z.password,$.host=z.host,$.port=z.port,$.path=p.list.clone(z.path),$.query=z.query,$.fragment="",ge=l.ParserState.Fragment;break;default:T($)&&te.c()==="\\"?(g("Invalid input string."),ge=l.ParserState.RelativeSlash):($.username=z.username,$.password=z.password,$.host=z.host,$.port=z.port,$.path=p.list.clone(z.path),$.path.length!==0&&$.path.splice($.path.length-1,1),ge=l.ParserState.Path,te.pointer--)}break;case l.ParserState.RelativeSlash:if(!T($)||te.c()!=="/"&&te.c()!=="\\")if(te.c()==="/")ge=l.ParserState.Authority;else{if(z===null)throw new Error("Invalid parser state. Base URL is null.");$.username=z.username,$.password=z.password,$.host=z.host,$.port=z.port,ge=l.ParserState.Path,te.pointer--}else te.c()==="\\"&&g("Invalid input string."),ge=l.ParserState.SpecialAuthorityIgnoreSlashes;break;case l.ParserState.SpecialAuthoritySlashes:te.c()==="/"&&te.remaining().startsWith("/")?(ge=l.ParserState.SpecialAuthorityIgnoreSlashes,te.pointer++):(g("Expected '//'."),ge=l.ParserState.SpecialAuthorityIgnoreSlashes,te.pointer--);break;case l.ParserState.SpecialAuthorityIgnoreSlashes:te.c()!=="/"&&te.c()!=="\\"?(ge=l.ParserState.Authority,te.pointer--):g("Unexpected '/' or '\\'.");break;case l.ParserState.Authority:if(te.c()==="@"){g("Unexpected '@'."),De&&(X="%40"+X),De=!0;try{for(var ce=(ne=void 0,i(X)),he=ce.next();!he.done;he=ce.next()){var fe=he.value;if(fe!==":"||de){var ve=ee(fe,m);de?$.password+=ve:$.username+=ve}else de=!0}}catch($t){ne={error:$t}}finally{try{he&&!he.done&&(oe=ce.return)&&oe.call(ce)}finally{if(ne)throw ne.error}}X=""}else if(te.c()===""||te.c()==="/"||te.c()==="?"||te.c()==="#"||T($)&&te.c()==="\\"){if(De&&X==="")return g("Invalid input string."),null;te.pointer-=X.length+1,X="",ge=l.ParserState.Host}else X+=te.c();break;case l.ParserState.Host:case l.ParserState.Hostname:if(J!==void 0&&$.scheme==="file")te.pointer--,ge=l.ParserState.FileHost;else if(te.c()!==":"||Oe)if(te.c()===""||te.c()==="/"||te.c()==="?"||te.c()==="#"||T($)&&te.c()==="\\"){if(te.pointer--,T($)&&X==="")return g("Invalid input string."),null;if(J!==void 0&&X===""&&(_($)||$.port!==null))return g("Invalid input string."),$;if((Se=A(X,!T($)))===null)return null;if($.host=Se,X="",ge=l.ParserState.PathStart,J!==void 0)return $}else te.c()==="["&&(Oe=!0),te.c()==="]"&&(Oe=!1),X+=te.c();else{if(X==="")return g("Invalid input string."),null;if((Se=A(X,!T($)))===null)return null;if($.host=Se,X="",ge=l.ParserState.Port,J===l.ParserState.Hostname)return $}break;case l.ParserState.Port:if(p.codePoint.ASCIIDigit.test(te.c()))X+=te.c();else{if(!(te.c()===""||te.c()==="/"||te.c()==="?"||te.c()==="#"||T($)&&te.c()==="\\"||J))return g("Invalid input string."),null;if(X!==""&&X!==""){var Ae=parseInt(X,10);if(Ae>Math.pow(2,16)-1)return g("Invalid port number."),null;$.port=Ae===w($.scheme)?null:Ae,X=""}if(J!==void 0)return $;ge=l.ParserState.PathStart,te.pointer--}break;case l.ParserState.File:if($.scheme="file",te.c()==="/"||te.c()==="\\")te.c()==="\\"&&g("Invalid input string."),ge=l.ParserState.FileSlash;else if(z!==null&&z.scheme==="file")switch(te.c()){case"":$.host=z.host,$.path=p.list.clone(z.path),$.query=z.query;break;case"?":$.host=z.host,$.path=p.list.clone(z.path),$.query="",ge=l.ParserState.Query;break;case"#":$.host=z.host,$.path=p.list.clone(z.path),$.query=z.query,$.fragment="",ge=l.ParserState.Fragment;break;default:k(te.substring())?g("Unexpected windows drive letter in input string."):($.host=z.host,$.path=p.list.clone(z.path),I($)),ge=l.ParserState.Path,te.pointer--}else ge=l.ParserState.Path,te.pointer--;break;case l.ParserState.FileSlash:te.c()==="/"||te.c()==="\\"?(te.c()==="\\"&&g("Invalid input string."),ge=l.ParserState.FileHost):(z===null||z.scheme!=="file"||k(te.substring())||(P(z.path[0])?$.path.push(z.path[0]):$.host=z.host),ge=l.ParserState.Path,te.pointer--);break;case l.ParserState.FileHost:if(te.c()===""||te.c()==="/"||te.c()==="\\"||te.c()==="?"||te.c()==="#")if(te.pointer--,J===void 0&&L(X))g("Unexpected windows drive letter in input string."),ge=l.ParserState.Path;else if(X===""){if($.host="",J!==void 0)return $;ge=l.ParserState.PathStart}else{var Se;if((Se=A(X,!T($)))===null)return null;if(Se==="localhost"&&(Se=""),$.host=Se,J!==void 0)return $;X="",ge=l.ParserState.PathStart}else X+=te.c();break;case l.ParserState.PathStart:T($)?(te.c()==="\\"&&g("Invalid input string."),ge=l.ParserState.Path,te.c()!=="/"&&te.c()!=="\\"&&te.pointer--):J===void 0&&te.c()==="?"?($.query="",ge=l.ParserState.Query):J===void 0&&te.c()==="#"?($.fragment="",ge=l.ParserState.Fragment):te.c()!==""&&(ge=l.ParserState.Path,te.c()!=="/"&&te.pointer--);break;case l.ParserState.Path:if(te.c()===""||te.c()==="/"||T($)&&te.c()==="\\"||J===void 0&&(te.c()==="?"||te.c()==="#")){if(T($)&&te.c()==="\\"&&g("Invalid input string."),B(X))I($),te.c()==="/"||T($)&&te.c()==="\\"||$.path.push("");else if(!R(X)||te.c()==="/"||T($)&&te.c()==="\\"){if(!R(X)){if($.scheme==="file"&&$.path.length===0&&L(X)){$.host!==null&&$.host!==""&&(g("Invalid input string."),$.host="");var Be=Array.from(X);X=Be.slice(0,1)+":"+Be.slice(2)}$.path.push(X)}}else $.path.push("");if(X="",$.scheme==="file"&&(te.c()===""||te.c()==="?"||te.c()==="#"))for(;$.path.length>1&&$.path[0]==="";)g("Invalid input string."),$.path.splice(0,1);te.c()==="?"&&($.query="",ge=l.ParserState.Query),te.c()==="#"&&($.fragment="",ge=l.ParserState.Fragment)}else x.test(te.c())||te.c()==="%"||g("Character is not a URL code point or a percent encoded character."),te.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(te.remaining())||g("Percent encoded character must be followed by two hex digits."),X+=ee(te.c(),v);break;case l.ParserState.CannotBeABaseURLPath:te.c()==="?"?($.query="",ge=l.ParserState.Query):te.c()==="#"?($.fragment="",ge=l.ParserState.Fragment):(te.c()===""||x.test(te.c())||te.c()==="%"||g("Character is not a URL code point or a percent encoded character."),te.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(te.remaining())||g("Percent encoded character must be followed by two hex digits."),te.c()!==""&&($.path[0]+=ee(te.c(),h)));break;case l.ParserState.Query:if(tt==="UTF-8"||T($)&&$.scheme!=="ws"&&$.scheme!=="wss"||(tt="UTF-8"),J===void 0&&te.c()==="#")$.fragment="",ge=l.ParserState.Fragment;else if(te.c()!==""){if(x.test(te.c())||te.c()==="%"||g("Character is not a URL code point or a percent encoded character."),te.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(te.remaining())||g("Percent encoded character must be followed by two hex digits."),tt.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Ie=c.utf8Encode(te.c());if(Ie.length>=3&&Ie[0]===38&&Ie[1]===35&&Ie[Ie.length-1]===59)Ie=Ie.subarray(2,Ie.length-1),$.query+="%26%23"+p.byteSequence.isomorphicDecode(Ie)+"%3B";else try{for(var Tt=(ue=void 0,i(Ie)),Ft=Tt.next();!Ft.done;Ft=Tt.next()){var at=Ft.value;at<33||at>126||at===34||at===35||at===60||at===62||at===39&&T($)?$.query+=Z(at):$.query+=String.fromCharCode(at)}}catch($t){ue={error:$t}}finally{try{Ft&&!Ft.done&&(Ce=Tt.return)&&Ce.call(Tt)}finally{if(ue)throw ue.error}}}break;case l.ParserState.Fragment:te.c()===""||(te.c()==="\0"?g("NULL character in input string."):(x.test(te.c())||te.c()==="%"||g("Unexpected character in fragment string."),te.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(te.remaining())||g("Unexpected character in fragment string."),$.fragment+=ee(te.c(),d)))}if(te.eof)break;te.pointer++}return $}function R(U){return U==="."||U.toLowerCase()==="%2e"}function B(U){var z=U.toLowerCase();return z===".."||z===".%2e"||z==="%2e."||z==="%2e%2e"}function I(U){var z=U.path;z.length!==0&&(U.scheme==="file"&&z.length===1&&P(z[0])||U.path.splice(U.path.length-1,1))}function P(U){return U.length>=2&&p.codePoint.ASCIIAlpha.test(U[0])&&U[1]===":"}function L(U){return U.length>=2&&p.codePoint.ASCIIAlpha.test(U[0])&&(U[1]===":"||U[1]==="|")}function k(U){return U.length>=2&&L(U)&&(U.length===2||U[2]==="/"||U[2]==="\\"||U[2]==="?"||U[2]==="#")}function A(U,z){if(z===void 0&&(z=!1),U.startsWith("["))return U.endsWith("]")?K(U.substring(1,U.length-1)):(g("Expected ']' after '['."),null);if(z)return Y(U);var W=G(c.utf8Decode(ae(U)));if(W===null||y.test(W))return g("Invalid domain."),null;var $=H(W);return $===null||c.isNumber($)?$:W}function j(U,z){z===void 0&&(z={value:!1});var W=10;return U.startsWith("0x")||U.startsWith("0X")?(z.value=!0,U=U.substr(2),W=16):U.length>=2&&U[0]==="0"&&(z.value=!0,U=U.substr(1),W=8),U===""?0:(W===10?/^[0-9]+$/:W===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(U)?parseInt(U,W):null}function H(U){var z,W,$,J,ne={value:!1},oe=U.split(".");if(oe[oe.length-1]===""&&(ne.value=!0,oe.length>1&&oe.pop()),oe.length>4)return U;var ue=[];try{for(var Ce=i(oe),ye=Ce.next();!ye.done;ye=Ce.next()){var je=ye.value;if(je===""||(Oe=j(je,ne))===null)return U;ue.push(Oe)}}catch(de){z={error:de}}finally{try{ye&&!ye.done&&(W=Ce.return)&&W.call(Ce)}finally{if(z)throw z.error}}ne.value&&g("Invalid IP v4 address.");for(var Le=0;Le<ue.length;Le++)if(ue[Le]>255&&(g("Invalid IP v4 address."),Le<ue.length-1))return null;if(ue[ue.length-1]>=Math.pow(256,5-ue.length))return g("Invalid IP v4 address."),null;var ge=ue[ue.length-1];ue.pop();var tt=0;try{for(var X=i(ue),De=X.next();!De.done;De=X.next()){var Oe;ge+=(Oe=De.value)*Math.pow(256,3-tt),tt++}}catch(de){$={error:de}}finally{try{De&&!De.done&&(J=X.return)&&J.call(X)}finally{if($)throw $.error}}return ge}function K(U){var z,W=[0,0,0,0,0,0,0,0],$=0,J=null,ne=new c.StringWalker(U);if(ne.c()===":"){if(!ne.remaining().startsWith(":"))return g("Invalid IP v6 address."),null;ne.pointer+=2,J=$+=1}for(;ne.c()!=="";){if($===8)return g("Invalid IP v6 address."),null;if(ne.c()!==":"){for(var oe=0,ue=0;ue<4&&p.codePoint.ASCIIHexDigit.test(ne.c());)oe=16*oe+parseInt(ne.c(),16),ne.pointer++,ue++;if(ne.c()==="."){if(ue===0||(ne.pointer-=ue,$>6))return g("Invalid IP v6 address."),null;for(var Ce=0;ne.c()!=="";){var ye=null;if(Ce>0){if(!(ne.c()==="."&&Ce<4))return g("Invalid IP v6 address."),null;ne.pointer++}if(!p.codePoint.ASCIIDigit.test(ne.c()))return g("Invalid IP v6 address."),null;for(;p.codePoint.ASCIIDigit.test(ne.c());){var je=parseInt(ne.c(),10);if(ye===null)ye=je;else{if(ye===0)return g("Invalid IP v6 address."),null;ye=10*ye+je}if(ye>255)return g("Invalid IP v6 address."),null;ne.pointer++}if(ye===null)return g("Invalid IP v6 address."),null;W[$]=256*W[$]+ye,++Ce!==2&&Ce!==4||$++}if(Ce!==4)return g("Invalid IP v6 address."),null;break}if(ne.c()===":"){if(ne.pointer++,ne.c()==="")return g("Invalid IP v6 address."),null}else if(ne.c()!=="")return g("Invalid IP v6 address."),null;W[$]=oe,$++}else{if(J!==null)return g("Invalid IP v6 address."),null;ne.pointer++,J=++$}}if(J!==null){var Le=$-J;for($=7;$!==0&&Le>0;)z=o([W[J+Le-1],W[$]],2),W[$]=z[0],W[J+Le-1]=z[1],$--,Le--}else if(J===null&&$!==8)return g("Invalid IP v6 address."),null;return W}function Y(U){var z,W;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(U))return g("Invalid host string."),null;var $="";try{for(var J=i(U),ne=J.next();!ne.done;ne=J.next())$+=ee(ne.value,h)}catch(oe){z={error:oe}}finally{try{ne&&!ne.done&&(W=J.return)&&W.call(J)}finally{if(z)throw z.error}}return $}function q(U){return null}function Z(U){return"%"+("00"+U.toString(16).toUpperCase()).slice(-2)}function re(U){for(var z=function(ue){return ue>=48&&ue<=57||ue>=65&&ue<=70||ue>=97&&ue<=102},W=new Uint8Array(U.length),$=0,J=0;J<U.length;J++){var ne=U[J];if(ne!==37)W[$]=ne,$++;else if(ne===37&&J>=U.length-2)W[$]=ne,$++;else if(ne!==37||z(U[J+1])&&z(U[J+2])){var oe=parseInt(c.utf8Decode(Uint8Array.of(U[J+1],U[J+2])),16);W[$]=oe,$++,J+=2}else W[$]=ne,$++}return W.subarray(0,$)}function ae(U){return re(c.utf8Encode(U))}function ee(U,z){var W,$;if(!z.test(U))return U;var J=c.utf8Encode(U),ne="";try{for(var oe=i(J),ue=oe.next();!ue.done;ue=oe.next())ne+=Z(ue.value)}catch(Ce){W={error:Ce}}finally{try{ue&&!ue.done&&($=oe.return)&&$.call(oe)}finally{if(W)throw W.error}}return ne}function F(U){var z,W,$,J,ne=[],oe=[];try{for(var ue=i(U),Ce=ue.next();!Ce.done;Ce=ue.next()){var ye=Ce.value;ye===38?(ne.push(Uint8Array.from(oe)),oe=[]):oe.push(ye)}}catch(he){z={error:he}}finally{try{Ce&&!Ce.done&&(W=ue.return)&&W.call(ue)}finally{if(z)throw z.error}}oe.length!==0&&ne.push(Uint8Array.from(oe));var je=[];try{for(var Le=i(ne),ge=Le.next();!ge.done;ge=Le.next()){var tt=ge.value;if(tt.length!==0){for(var X=tt.indexOf(61),De=X!==-1?tt.slice(0,X):tt,Oe=X!==-1?tt.slice(X+1):new Uint8Array,de=0;de<De.length;de++)De[de]===43&&(De[de]=32);for(de=0;de<Oe.length;de++)Oe[de]===43&&(Oe[de]=32);var te=c.utf8Decode(De),ce=c.utf8Decode(Oe);je.push([te,ce])}}}catch(he){$={error:he}}finally{try{ge&&!ge.done&&(J=Le.return)&&J.call(Le)}finally{if($)throw $.error}}return je}function b(U){var z,W,$="";try{for(var J=i(U),ne=J.next();!ne.done;ne=J.next()){var oe=ne.value;$+=oe===32?"+":oe===42||oe===45||oe===46||oe>=48&&oe<=57||oe>=65&&oe<=90||oe===95||oe>=97&&oe<=122?String.fromCodePoint(oe):Z(oe)}}catch(ue){z={error:ue}}finally{try{ne&&!ne.done&&(W=J.return)&&W.call(J)}finally{if(z)throw z.error}}return $}function G(U,z){var W=u.domainToASCII(U);return W===""?(g("Invalid domain name."),null):W}n.setValidationErrorCallback=function(U){s=U},n.newURL=C,n.isSpecialScheme=S,n.isSpecial=T,n.defaultPort=w,n.includesCredentials=_,n.cannotHaveAUsernamePasswordPort=function(U){return U.host===null||U.host===""||U._cannotBeABaseURLFlag||U.scheme==="file"},n.urlSerializer=E,n.hostSerializer=D,n.iPv4Serializer=O,n.iPv6Serializer=M,n.urlParser=function(U,z,W){var $=N(U,z,W);return $===null?null:($.scheme!=="blob"||($._blobURLEntry=null),$)},n.basicURLParser=N,n.setTheUsername=function(U,z){var W,$,J="";try{for(var ne=i(z),oe=ne.next();!oe.done;oe=ne.next())J+=ee(oe.value,m)}catch(ue){W={error:ue}}finally{try{oe&&!oe.done&&($=ne.return)&&$.call(ne)}finally{if(W)throw W.error}}U.username=J},n.setThePassword=function(U,z){var W,$,J="";try{for(var ne=i(z),oe=ne.next();!oe.done;oe=ne.next())J+=ee(oe.value,m)}catch(ue){W={error:ue}}finally{try{oe&&!oe.done&&($=ne.return)&&$.call(ne)}finally{if(W)throw W.error}}U.password=J},n.isSingleDotPathSegment=R,n.isDoubleDotPathSegment=B,n.shorten=I,n.isNormalizedWindowsDriveLetter=P,n.isWindowsDriveLetter=L,n.startsWithAWindowsDriveLetter=k,n.hostParser=A,n.iPv4NumberParser=j,n.iPv4Parser=H,n.iPv6Parser=K,n.opaqueHostParser=Y,n.resolveABlobURL=q,n.percentEncode=Z,n.percentDecode=re,n.stringPercentDecode=ae,n.utf8PercentEncode=ee,n.hostEquals=function(U,z){return U===z},n.urlEquals=function(U,z,W){return W===void 0&&(W=!1),E(U,W)===E(z,W)},n.urlEncodedStringParser=function(U){return F(c.utf8Encode(U))},n.urlEncodedParser=F,n.urlEncodedByteSerializer=b,n.urlEncodedSerializer=function(U,z){var W,$;if((z===void 0||z==="replacement"||z==="UTF-16BE"||z==="UTF-16LE"?"UTF-8":z).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var J="";try{for(var ne=i(U),oe=ne.next();!oe.done;oe=ne.next()){var ue=oe.value,Ce=b(c.utf8Encode(ue[0])),ye=ue[1];ye=b(c.utf8Encode(ye)),J!==""&&(J+="&"),J+=Ce+"="+ye}}catch(je){W={error:je}}finally{try{oe&&!oe.done&&($=ne.return)&&$.call(ne)}finally{if(W)throw W.error}}return J},n.origin=function U(z){switch(z.scheme){case"blob":z._blobURLEntry;var W=N(z.path[0]);return W===null?l.OpaqueOrigin:U(W);case"ftp":case"http":case"https":case"ws":case"wss":return[z.scheme,z.host===null?"":z.host,z.port,null];case"file":default:return l.OpaqueOrigin}},n.domainToASCII=G,n.domainToUnicode=function(U,z){var W=u.domainToUnicode(U);return W===""&&g("Invalid domain name."),W},n.asciiSerializationOfAnOrigin=function(U){if(U[0]===""&&U[1]===""&&U[2]===null&&U[3]===null)return"null";var z=U[0]+"://"+D(U[1]);return U[2]!==null&&(z+=":"+U[2].toString()),z}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),o=function(){function s(){this._signal=i.create_abortSignal()}return Object.defineProperty(s.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),s.prototype.abort=function(){i.abort_signalAbort(this._signal)},s}();n.AbortControllerImpl=o},function(a,n,r){var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(70),c=r(0),l=function(p){function u(){var f=p.call(this)||this;return f._abortedFlag=!1,f._abortAlgorithms=new Set,f}return o(u,p),Object.defineProperty(u.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onabort",{get:function(){return c.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(f){c.event_setterEventHandlerIDLAttribute(this,"onabort",f)},enumerable:!0,configurable:!0}),u._create=function(){return new u},u}(s.EventTargetImpl);n.AbortSignalImpl=l},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(34),l=r(12),p=function(u){function f(h,d,v){var m=u.call(this)||this;return m._name="",m._publicId="",m._systemId="",m._name=h,m._publicId=d,m._systemId=v,m}return o(f,u),Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),f.prototype.before=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.after=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.replaceWith=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},f._create=function(h,d,v,m){v===void 0&&(v=""),m===void 0&&(m="");var x=new f(d,v,m);return x._nodeDocument=h,x},f}(c.NodeImpl);n.DocumentTypeImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.DocumentType)},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(100),c=r(1),l=r(0),p=function(u){function f(h,d){var v=u.call(this)||this;return v._host=h,v._mode=d,v}return o(f,u),Object.defineProperty(f.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),f.prototype._getTheParent=function(h){return h._composedFlag||c.isEmpty(h._path)||l.tree_rootNode(h._path[0].invocationTarget)!==this?this._host:null},f._create=function(h,d){return new f(d,"closed")},f}(s.DocumentFragmentImpl);n.ShadowRootImpl=p},function(a,n,r){var i,o=this&&this.__extends||(i=function(f,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var m in v)v.hasOwnProperty(m)&&(d[m]=v[m])})(f,h)},function(f,h){function d(){this.constructor=f}i(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(34),l=r(0),p=r(12),u=function(f){function h(d){var v=f.call(this)||this;return v._namespace=null,v._namespacePrefix=null,v._element=null,v._value="",v._localName=d,v}return o(h,f),Object.defineProperty(h.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"value",{get:function(){return this._value},set:function(d){l.attr_setAnExistingAttributeValue(this,d)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),h._create=function(d,v){var m=new h(v);return m._nodeDocument=d,m},h}(c.NodeImpl);n.AttrImpl=u,p.idl_defineConst(u.prototype,"_nodeType",s.NodeType.Attribute),p.idl_defineConst(u.prototype,"specified",!0)},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(101),c=r(2),l=r(12),p=function(u){function f(h){return u.call(this,h)||this}return o(f,u),f._create=function(h,d){d===void 0&&(d="");var v=new f(d);return v._nodeDocument=h,v},f}(s.TextImpl);n.CDATASectionImpl=p,l.idl_defineConst(p.prototype,"_nodeType",c.NodeType.CData)},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(71),l=r(12),p=function(u){function f(h){return h===void 0&&(h=""),u.call(this,h)||this}return o(f,u),f._create=function(h,d){d===void 0&&(d="");var v=new f(d);return v._nodeDocument=h,v},f}(c.CharacterDataImpl);n.CommentImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.Comment)},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(71),l=r(12),p=function(u){function f(h,d){var v=u.call(this,d)||this;return v._target=h,v}return o(f,u),Object.defineProperty(f.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),f._create=function(h,d,v){var m=new f(d,v);return m._nodeDocument=h,m},f}(c.CharacterDataImpl);n.ProcessingInstructionImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.ProcessingInstruction)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(7),o=r(0),s=r(3),c=r(1),l=function(){function p(u,f){return this._live=!0,this._root=u,this._filter=f,new Proxy(this,this)}return Object.defineProperty(p.prototype,"length",{get:function(){for(var u=this,f=0,h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(d){return s.Guard.isElementNode(d)&&u._filter(d)});h!==null;)f++,h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(d){return s.Guard.isElementNode(d)&&u._filter(d)});return f},enumerable:!0,configurable:!0}),p.prototype.item=function(u){for(var f=this,h=0,d=o.tree_getFirstDescendantNode(this._root,!1,!1,function(v){return s.Guard.isElementNode(v)&&f._filter(v)});d!==null;){if(h===u)return d;h++,d=o.tree_getNextDescendantNode(this._root,d,!1,!1,function(v){return s.Guard.isElementNode(v)&&f._filter(v)})}return null},p.prototype.namedItem=function(u){var f=this;if(u==="")return null;for(var h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(m){return s.Guard.isElementNode(m)&&f._filter(m)});h!=null;){if(h._uniqueIdentifier===u)return h;if(h._namespace===i.namespace.HTML)for(var d=0;d<h._attributeList.length;d++){var v=h._attributeList[d];if(v._localName==="name"&&v._namespace===null&&v._namespacePrefix===null&&v._value===u)return h}h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(m){return s.Guard.isElementNode(m)&&f._filter(m)})}return null},p.prototype[Symbol.iterator]=function(){var u=this._root,f=this._filter,h=o.tree_getFirstDescendantNode(u,!1,!1,function(d){return s.Guard.isElementNode(d)&&f(d)});return{next:function(){if(h===null)return{done:!0,value:null};var d={done:!1,value:h};return h=o.tree_getNextDescendantNode(u,h,!1,!1,function(v){return s.Guard.isElementNode(v)&&f(v)}),d}}},p.prototype.get=function(u,f,h){if(!c.isString(f)||p.reservedNames.indexOf(f)!==-1)return Reflect.get(u,f,h);var d=Number(f);return isNaN(d)?u.namedItem(f)||void 0:u.item(d)||void 0},p.prototype.set=function(u,f,h,d){if(!c.isString(f)||p.reservedNames.indexOf(f)!==-1)return Reflect.set(u,f,h,d);var v=Number(f),m=isNaN(v)?u.namedItem(f)||void 0:u.item(v)||void 0;return!(!m||!m._parent)&&(o.mutation_replace(m,h,m._parent),!0)},p._create=function(u,f){return f===void 0&&(f=function(){return!0}),new p(u,f)},p.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],p}();n.HTMLCollectionImpl=l},function(a,n,r){var i=this&&this.__values||function(p){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&p[u],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(1),c=r(0),l=function(){function p(u){return this._live=!0,this._filter=null,this._length=0,this._root=u,new Proxy(this,this)}return Object.defineProperty(p.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),p.prototype.item=function(u){if(u<0||u>this.length-1)return null;if(u<this.length/2){for(var f=0,h=this._root._firstChild;h!==null&&f!==u;)h=h._nextSibling,f++;return h}for(f=this.length-1,h=this._root._lastChild;h!==null&&f!==u;)h=h._previousSibling,f--;return h},p.prototype.keys=function(){var u;return(u={})[Symbol.iterator]=function(){var f=0;return{next:function(){return f===this.length?{done:!0,value:null}:{done:!1,value:f++}}.bind(this)}}.bind(this),u},p.prototype.values=function(){var u;return(u={})[Symbol.iterator]=function(){var f=this[Symbol.iterator]();return{next:function(){return f.next()}}}.bind(this),u},p.prototype.entries=function(){var u;return(u={})[Symbol.iterator]=function(){var f=this[Symbol.iterator](),h=0;return{next:function(){var d=f.next();return d.done?{done:!0,value:null}:{done:!1,value:[h++,d.value]}}}}.bind(this),u},p.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},p.prototype.forEach=function(u,f){var h,d;f===void 0&&(f=o.dom.window);var v=0;try{for(var m=i(this._root._children),x=m.next();!x.done;x=m.next()){var y=x.value;u.call(f,y,v++,this)}}catch(g){h={error:g}}finally{try{x&&!x.done&&(d=m.return)&&d.call(m)}finally{if(h)throw h.error}}},p.prototype.get=function(u,f,h){if(!s.isString(f))return Reflect.get(u,f,h);var d=Number(f);return isNaN(d)?Reflect.get(u,f,h):u.item(d)||void 0},p.prototype.set=function(u,f,h,d){if(!s.isString(f))return Reflect.set(u,f,h,d);var v=Number(f);if(isNaN(v))return Reflect.set(u,f,h,d);var m=u.item(v)||void 0;return!!m&&!!m._parent&&(c.mutation_replace(m,h,m._parent),!0)},p._create=function(u){return new p(u)},p}();n.NodeListImpl=l},function(a,n,r){var i=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,u=p&&l[p],f=0;if(u)return u.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&f>=l.length&&(l=void 0),{value:l&&l[f++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(1),c=function(){function l(p){return this._live=!1,this._items=[],this._length=0,this._root=p,this._items=[],this._filter=function(u){return!0},new Proxy(this,this)}return Object.defineProperty(l.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),l.prototype.item=function(p){return p<0||p>this.length-1?null:this._items[p]},l.prototype.keys=function(){var p;return(p={})[Symbol.iterator]=function(){var u=0;return{next:function(){return u===this.length?{done:!0,value:null}:{done:!1,value:u++}}.bind(this)}}.bind(this),p},l.prototype.values=function(){var p;return(p={})[Symbol.iterator]=function(){var u=this[Symbol.iterator]();return{next:function(){return u.next()}}}.bind(this),p},l.prototype.entries=function(){var p;return(p={})[Symbol.iterator]=function(){var u=this[Symbol.iterator](),f=0;return{next:function(){var h=u.next();return h.done?{done:!0,value:null}:{done:!1,value:[f++,h.value]}}}}.bind(this),p},l.prototype[Symbol.iterator]=function(){var p=this._items[Symbol.iterator]();return{next:function(){return p.next()}}},l.prototype.forEach=function(p,u){var f,h;u===void 0&&(u=o.dom.window);var d=0;try{for(var v=i(this._items),m=v.next();!m.done;m=v.next()){var x=m.value;p.call(u,x,d++,this)}}catch(y){f={error:y}}finally{try{m&&!m.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}},l.prototype.get=function(p,u,f){if(!s.isString(u))return Reflect.get(p,u,f);var h=Number(u);return isNaN(h)?Reflect.get(p,u,f):p._items[h]||void 0},l.prototype.set=function(p,u,f,h){if(!s.isString(u))return Reflect.set(p,u,f,h);var d=Number(u);return isNaN(d)?Reflect.set(p,u,f,h):d>=0&&d<p._items.length&&(p._items[d]=f,!0)},l._create=function(p,u){var f=new l(p);return f._items=u,f},l}();n.NodeListStaticImpl=c},function(a,n,r){var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(9),c=r(0),l=function(p){function u(f){var h=p.call(this)||this;return h._element=f,Object.setPrototypeOf(h,u.prototype),h}return o(u,p),u.prototype._asArray=function(){return this},u.prototype.item=function(f){return this[f]||null},u.prototype.getNamedItem=function(f){return c.element_getAnAttributeByName(f,this._element)},u.prototype.getNamedItemNS=function(f,h){return c.element_getAnAttributeByNamespaceAndLocalName(f||"",h,this._element)},u.prototype.setNamedItem=function(f){return c.element_setAnAttribute(f,this._element)},u.prototype.setNamedItemNS=function(f){return c.element_setAnAttribute(f,this._element)},u.prototype.removeNamedItem=function(f){var h=c.element_removeAnAttributeByName(f,this._element);if(h===null)throw new s.NotFoundError;return h},u.prototype.removeNamedItemNS=function(f,h){var d=c.element_removeAnAttributeByNamespaceAndLocalName(f||"",h,this._element);if(d===null)throw new s.NotFoundError;return d},u._create=function(f){return new u(f)},u}(Array);n.NamedNodeMapImpl=l},function(a,n,r){var i,o=this&&this.__extends||(i=function(m,x){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var C in g)g.hasOwnProperty(C)&&(y[C]=g[C])})(m,x)},function(m,x){function y(){this.constructor=m}i(m,x),m.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}),s=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,y=x&&m[x],g=0;if(y)return y.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),l=r(2),p=r(102),u=r(9),f=r(0),h=r(12),d=r(3),v=function(m){function x(){var y=m.call(this)||this,g=c.dom.window._associatedDocument;return y._start=[g,0],y._end=[g,0],c.dom.rangeList.add(y),y}return o(x,m),Object.defineProperty(x.prototype,"commonAncestorContainer",{get:function(){for(var y=this._start[0];!f.tree_isAncestorOf(this._end[0],y,!0);){if(y._parent===null)throw new Error("Parent node  is null.");y=y._parent}return y},enumerable:!0,configurable:!0}),x.prototype.setStart=function(y,g){f.range_setTheStart(this,y,g)},x.prototype.setEnd=function(y,g){f.range_setTheEnd(this,y,g)},x.prototype.setStartBefore=function(y){var g=y._parent;if(g===null)throw new u.InvalidNodeTypeError;f.range_setTheStart(this,g,f.tree_index(y))},x.prototype.setStartAfter=function(y){var g=y._parent;if(g===null)throw new u.InvalidNodeTypeError;f.range_setTheStart(this,g,f.tree_index(y)+1)},x.prototype.setEndBefore=function(y){var g=y._parent;if(g===null)throw new u.InvalidNodeTypeError;f.range_setTheEnd(this,g,f.tree_index(y))},x.prototype.setEndAfter=function(y){var g=y._parent;if(g===null)throw new u.InvalidNodeTypeError;f.range_setTheEnd(this,g,f.tree_index(y)+1)},x.prototype.collapse=function(y){y?this._end=this._start:this._start=this._end},x.prototype.selectNode=function(y){f.range_select(y,this)},x.prototype.selectNodeContents=function(y){if(d.Guard.isDocumentTypeNode(y))throw new u.InvalidNodeTypeError;var g=f.tree_nodeLength(y);this._start=[y,0],this._end=[y,g]},x.prototype.compareBoundaryPoints=function(y,g){if(y!==l.HowToCompare.StartToStart&&y!==l.HowToCompare.StartToEnd&&y!==l.HowToCompare.EndToEnd&&y!==l.HowToCompare.EndToStart)throw new u.NotSupportedError;if(f.range_root(this)!==f.range_root(g))throw new u.WrongDocumentError;var C,S;switch(y){case l.HowToCompare.StartToStart:C=this._start,S=g._start;break;case l.HowToCompare.StartToEnd:C=this._end,S=g._start;break;case l.HowToCompare.EndToEnd:C=this._end,S=g._end;break;case l.HowToCompare.EndToStart:C=this._start,S=g._end;break;default:throw new u.NotSupportedError}var T=f.boundaryPoint_position(C,S);return T===l.BoundaryPosition.Before?-1:T===l.BoundaryPosition.After?1:0},x.prototype.deleteContents=function(){var y,g,C,S;if(!f.range_collapsed(this)){var T=this._startNode,w=this._startOffset,_=this._endNode,E=this._endOffset;if(T===_&&d.Guard.isCharacterDataNode(T))f.characterData_replaceData(T,w,E-w,"");else{var D,O,M=[];try{for(var N=s(f.range_getContainedNodes(this)),R=N.next();!R.done;R=N.next()){var B=(k=R.value)._parent;B!==null&&f.range_isContained(B,this)||M.push(k)}}catch(A){y={error:A}}finally{try{R&&!R.done&&(g=N.return)&&g.call(N)}finally{if(y)throw y.error}}if(f.tree_isAncestorOf(_,T,!0))D=T,O=w;else{for(var I=T;I._parent!==null&&!f.tree_isAncestorOf(_,I._parent,!0);)I=I._parent;if(I._parent===null)throw new Error("Parent node is null.");D=I._parent,O=f.tree_index(I)+1}d.Guard.isCharacterDataNode(T)&&f.characterData_replaceData(T,w,f.tree_nodeLength(T)-w,"");try{for(var P=s(M),L=P.next();!L.done;L=P.next()){var k;(k=L.value)._parent&&f.mutation_remove(k,k._parent)}}catch(A){C={error:A}}finally{try{L&&!L.done&&(S=P.return)&&S.call(P)}finally{if(C)throw C.error}}d.Guard.isCharacterDataNode(_)&&f.characterData_replaceData(_,0,E,""),this._start=[D,O],this._end=[D,O]}}},x.prototype.extractContents=function(){return f.range_extract(this)},x.prototype.cloneContents=function(){return f.range_cloneTheContents(this)},x.prototype.insertNode=function(y){return f.range_insert(y,this)},x.prototype.surroundContents=function(y){var g,C;try{for(var S=s(f.range_getPartiallyContainedNodes(this)),T=S.next();!T.done;T=S.next()){var w=T.value;if(!d.Guard.isTextNode(w))throw new u.InvalidStateError}}catch(E){g={error:E}}finally{try{T&&!T.done&&(C=S.return)&&C.call(S)}finally{if(g)throw g.error}}if(d.Guard.isDocumentNode(y)||d.Guard.isDocumentTypeNode(y)||d.Guard.isDocumentFragmentNode(y))throw new u.InvalidNodeTypeError;var _=f.range_extract(this);y._children.size!==0&&f.mutation_replaceAll(null,y),f.range_insert(y,this),f.mutation_append(_,y),f.range_select(y,this)},x.prototype.cloneRange=function(){return f.create_range(this._start,this._end)},x.prototype.detach=function(){c.dom.rangeList.delete(this)},x.prototype.isPointInRange=function(y,g){if(f.tree_rootNode(y)!==f.range_root(this))return!1;if(d.Guard.isDocumentTypeNode(y))throw new u.InvalidNodeTypeError;if(g>f.tree_nodeLength(y))throw new u.IndexSizeError;var C=[y,g];return f.boundaryPoint_position(C,this._start)!==l.BoundaryPosition.Before&&f.boundaryPoint_position(C,this._end)!==l.BoundaryPosition.After},x.prototype.comparePoint=function(y,g){if(f.tree_rootNode(y)!==f.range_root(this))throw new u.WrongDocumentError;if(d.Guard.isDocumentTypeNode(y))throw new u.InvalidNodeTypeError;if(g>f.tree_nodeLength(y))throw new u.IndexSizeError;var C=[y,g];return f.boundaryPoint_position(C,this._start)===l.BoundaryPosition.Before?-1:f.boundaryPoint_position(C,this._end)===l.BoundaryPosition.After?1:0},x.prototype.intersectsNode=function(y){if(f.tree_rootNode(y)!==f.range_root(this))return!1;var g=y._parent;if(g===null)return!0;var C=f.tree_index(y);return f.boundaryPoint_position([g,C],this._end)===l.BoundaryPosition.Before&&f.boundaryPoint_position([g,C+1],this._start)===l.BoundaryPosition.After},x.prototype.toString=function(){var y,g,C="";if(this._startNode===this._endNode&&d.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);d.Guard.isTextNode(this._startNode)&&(C+=this._startNode._data.substring(this._startOffset));try{for(var S=s(f.range_getContainedNodes(this)),T=S.next();!T.done;T=S.next()){var w=T.value;d.Guard.isTextNode(w)&&(C+=w._data)}}catch(_){y={error:_}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}return d.Guard.isTextNode(this._endNode)&&(C+=this._endNode._data.substring(0,this._endOffset)),C},x._create=function(y,g){var C=new x;return y&&(C._start=y),g&&(C._end=g),C},x.START_TO_START=0,x.START_TO_END=1,x.END_TO_END=2,x.END_TO_START=3,x}(p.AbstractRangeImpl);n.RangeImpl=v,h.idl_defineConst(v.prototype,"START_TO_START",0),h.idl_defineConst(v.prototype,"START_TO_END",1),h.idl_defineConst(v.prototype,"END_TO_END",2),h.idl_defineConst(v.prototype,"END_TO_START",3)},function(a,n,r){var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(103),c=r(0),l=function(p){function u(f,h,d){var v=p.call(this,f)||this;return v._iteratorCollection=void 0,v._reference=h,v._pointerBeforeReference=d,c.nodeIterator_iteratorList().add(v),v}return o(u,p),Object.defineProperty(u.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),u.prototype.nextNode=function(){return c.nodeIterator_traverse(this,!0)},u.prototype.previousNode=function(){return c.nodeIterator_traverse(this,!1)},u.prototype.detach=function(){c.nodeIterator_iteratorList().delete(this)},u._create=function(f,h,d){return new u(f,h,d)},u}(s.TraverserImpl);n.NodeIteratorImpl=l},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),c=r(103),l=r(0),p=function(u){function f(h,d){var v=u.call(this,h)||this;return v._current=d,v}return o(f,u),Object.defineProperty(f.prototype,"currentNode",{get:function(){return this._current},set:function(h){this._current=h},enumerable:!0,configurable:!0}),f.prototype.parentNode=function(){for(var h=this._current;h!==null&&h!==this._root;)if((h=h._parent)!==null&&l.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h;return null},f.prototype.firstChild=function(){return l.treeWalker_traverseChildren(this,!0)},f.prototype.lastChild=function(){return l.treeWalker_traverseChildren(this,!1)},f.prototype.nextSibling=function(){return l.treeWalker_traverseSiblings(this,!0)},f.prototype.previousNode=function(){for(var h=this._current;h!==this._root;){for(var d=h._previousSibling;d;){h=d;for(var v=l.traversal_filter(this,h);v!==s.FilterResult.Reject&&h._lastChild;)h=h._lastChild,v=l.traversal_filter(this,h);if(v===s.FilterResult.Accept)return this._current=h,h;d=h._previousSibling}if(h===this._root||h._parent===null)return null;if(h=h._parent,l.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h}return null},f.prototype.previousSibling=function(){return l.treeWalker_traverseSiblings(this,!1)},f.prototype.nextNode=function(){for(var h=this._current,d=s.FilterResult.Accept;;){for(;d!==s.FilterResult.Reject&&h._firstChild;)if(h=h._firstChild,(d=l.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h;for(var v=null,m=h;m!==null;){if(m===this._root)return null;if((v=m._nextSibling)!==null){h=v;break}m=m._parent}if((d=l.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h}},f._create=function(h,d){return new f(h,d)},f}(c.TraverserImpl);n.TreeWalkerImpl=p},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=r(12),s=function(){function c(){}return c.prototype.acceptNode=function(l){return i.FilterResult.Accept},c._create=function(){return new c},c.FILTER_ACCEPT=1,c.FILTER_REJECT=2,c.FILTER_SKIP=3,c.SHOW_ALL=4294967295,c.SHOW_ELEMENT=1,c.SHOW_ATTRIBUTE=2,c.SHOW_TEXT=4,c.SHOW_CDATA_SECTION=8,c.SHOW_ENTITY_REFERENCE=16,c.SHOW_ENTITY=32,c.SHOW_PROCESSING_INSTRUCTION=64,c.SHOW_COMMENT=128,c.SHOW_DOCUMENT=256,c.SHOW_DOCUMENT_TYPE=512,c.SHOW_DOCUMENT_FRAGMENT=1024,c.SHOW_NOTATION=2048,c}();n.NodeFilterImpl=s,o.idl_defineConst(s.prototype,"FILTER_ACCEPT",1),o.idl_defineConst(s.prototype,"FILTER_REJECT",2),o.idl_defineConst(s.prototype,"FILTER_SKIP",3),o.idl_defineConst(s.prototype,"SHOW_ALL",4294967295),o.idl_defineConst(s.prototype,"SHOW_ELEMENT",1),o.idl_defineConst(s.prototype,"SHOW_ATTRIBUTE",2),o.idl_defineConst(s.prototype,"SHOW_TEXT",4),o.idl_defineConst(s.prototype,"SHOW_CDATA_SECTION",8),o.idl_defineConst(s.prototype,"SHOW_ENTITY_REFERENCE",16),o.idl_defineConst(s.prototype,"SHOW_ENTITY",32),o.idl_defineConst(s.prototype,"SHOW_PROCESSING_INSTRUCTION",64),o.idl_defineConst(s.prototype,"SHOW_COMMENT",128),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT",256),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_TYPE",512),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),o.idl_defineConst(s.prototype,"SHOW_NOTATION",2048)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(s,c,l,p,u,f,h,d,v){this._type=s,this._target=c,this._addedNodes=l,this._removedNodes=p,this._previousSibling=u,this._nextSibling=f,this._attributeName=h,this._attributeNamespace=d,this._oldValue=v}return Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),o._create=function(s,c,l,p,u,f,h,d,v){return new o(s,c,l,p,u,f,h,d,v)},o}();n.MutationRecordImpl=i},function(a,n,r){var i=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(9),c=r(7),l=r(0),p=function(){function u(f,h){this._element=f,this._attribute=h,this._tokenSet=new Set;var d=h._localName,v=l.element_getAnAttributeValue(f,d),m=this;this._element._attributeChangeSteps.push(function(x,y,g,C,S){y===m._attribute._localName&&S===null&&(C?m._tokenSet=l.orderedSet_parse(C):m._tokenSet.clear())}),o.dom.features.steps&&l.dom_runAttributeChangeSteps(f,d,v,v,null)}return Object.defineProperty(u.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),u.prototype.item=function(f){var h,d,v=0;try{for(var m=i(this._tokenSet),x=m.next();!x.done;x=m.next()){var y=x.value;if(v===f)return y;v++}}catch(g){h={error:g}}finally{try{x&&!x.done&&(d=m.return)&&d.call(m)}finally{if(h)throw h.error}}return null},u.prototype.contains=function(f){return this._tokenSet.has(f)},u.prototype.add=function(){for(var f,h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];try{for(var m=i(d),x=m.next();!x.done;x=m.next()){var y=x.value;if(y==="")throw new s.SyntaxError("Cannot add an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(y))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(y)}}catch(g){f={error:g}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(f)throw f.error}}l.tokenList_updateSteps(this)},u.prototype.remove=function(){for(var f,h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];try{for(var m=i(d),x=m.next();!x.done;x=m.next()){var y=x.value;if(y==="")throw new s.SyntaxError("Cannot remove an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(y))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(y)}}catch(g){f={error:g}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(f)throw f.error}}l.tokenList_updateSteps(this)},u.prototype.toggle=function(f,h){if(h===void 0&&(h=void 0),f==="")throw new s.SyntaxError("Cannot toggle an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(f))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(f)?h!==void 0&&h!==!1||(this._tokenSet.delete(f),l.tokenList_updateSteps(this),!1):(h===void 0||h===!0)&&(this._tokenSet.add(f),l.tokenList_updateSteps(this),!0)},u.prototype.replace=function(f,h){if(f===""||h==="")throw new s.SyntaxError("Cannot replace an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(f)||c.codePoint.ASCIIWhiteSpace.test(h))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(f)&&(c.set.replace(this._tokenSet,f,h),l.tokenList_updateSteps(this),!0)},u.prototype.supports=function(f){return l.tokenList_validationSteps(this,f)},Object.defineProperty(u.prototype,"value",{get:function(){return l.tokenList_serializeSteps(this)},set:function(f){l.element_setAnAttributeValue(this._element,this._attribute._localName,f)},enumerable:!0,configurable:!0}),u.prototype[Symbol.iterator]=function(){var f=this._tokenSet[Symbol.iterator]();return{next:function(){return f.next()}}},u._create=function(f,h){return new u(f,h)},u}();n.DOMTokenListImpl=p},function(a,n,r){var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(104),c=r(0),l=function(p){function u(f,h){var d=p.call(this,f,h)||this;return d._detail=null,d._detail=h&&h.detail||null,d}return o(u,p),Object.defineProperty(u.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),u.prototype.initCustomEvent=function(f,h,d,v){h===void 0&&(h=!1),d===void 0&&(d=!1),v===void 0&&(v=null),this._dispatchFlag||(c.event_initialize(this,f,h,d),this._detail=v)},u}(s.EventImpl);n.CustomEventImpl=l},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),o=r(2),s=r(105),c=r(17);n.nodeIterator_traverse=function(l,p){for(var u=l._reference,f=l._pointerBeforeReference;;){if(p)if(f)f=!1;else{var h=c.tree_getFollowingNode(l._root,u);if(!h)return null;u=h}else if(f){var d=c.tree_getPrecedingNode(l.root,u);if(!d)return null;u=d}else f=!0;if(s.traversal_filter(l,u)===o.FilterResult.Accept)break}return l._reference=u,l._pointerBeforeReference=f,u},n.nodeIterator_iteratorList=function(){return i.dom.window._iteratorList}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(9),o=r(7),s=r(174);function c(l){if(!s.xml_isName(l))throw new i.InvalidCharacterError("Invalid XML name: "+l);if(!s.xml_isQName(l))throw new i.InvalidCharacterError("Invalid XML qualified name: "+l+".")}n.namespace_validate=c,n.namespace_validateAndExtract=function(l,p){l||(l=null),c(p);var u=p.split(":"),f=u.length===2?u[0]:null,h=u.length===2?u[1]:p;if(f&&l===null)throw new i.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(f==="xml"&&l!==o.namespace.XML)throw new i.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(l!==o.namespace.XMLNS&&(f==="xmlns"||p==="xmlns"))throw new i.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(l===o.namespace.XMLNS&&f!=="xmlns"&&p!=="xmlns")throw new i.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[l,f,h]},n.namespace_extractQName=function(l){c(l);var p=l.split(":");return[p.length===2?p[0]:null,p.length===2?p[1]:l]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.xml_isName=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s===58||s===95||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533)&&(o===0||!(s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256))){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=983039))continue}return!1}}return!0},n.xml_isQName=function(i){for(var o=!1,s=0;s<i.length;s++){var c=i.charCodeAt(s);if(!(c>=97&&c<=122||c>=65&&c<=90||c===95||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=767||c>=880&&c<=893||c>=895&&c<=8191||c>=8204&&c<=8205||c>=8304&&c<=8591||c>=11264&&c<=12271||c>=12289&&c<=55295||c>=63744&&c<=64975||c>=65008&&c<=65533)&&(s===0||!(c===45||c===46||c>=48&&c<=57||c===183||c>=768&&c<=879||c>=8255&&c<=8256))){if(s===0||c!==58){if(c>=55296&&c<=56319&&s<i.length-1){var l=i.charCodeAt(s+1);if(l>=56320&&l<=57343&&(s++,(c=1024*(c-55296)+l-56320+65536)>=65536&&c<=983039))continue}return!1}if(o||s===i.length-1)return!1;o=!0}}return!0},n.xml_isLegalChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s===9||s===10||s===13||s>=32&&s<=55295||s>=57344&&s<=65533)){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=1114111))continue}return!1}}return!0},n.xml_isPubidChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s>=39&&s<=59||s===32||s===13||s===10||s>=35&&s<=37||s===33||s===61||s===63||s===64||s===95))return!1}return!0}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=r(17);n.boundaryPoint_position=function s(c,l){var p=c[0],u=c[1],f=l[0],h=l[1];if(console.assert(o.tree_rootNode(p)===o.tree_rootNode(f),"Boundary points must share the same root node."),p===f)return u===h?i.BoundaryPosition.Equal:u<h?i.BoundaryPosition.Before:i.BoundaryPosition.After;if(o.tree_isFollowing(f,p)){var d=s([f,h],[p,u]);if(d===i.BoundaryPosition.Before)return i.BoundaryPosition.After;if(d===i.BoundaryPosition.After)return i.BoundaryPosition.Before}if(o.tree_isAncestorOf(f,p)){for(var v=f;!o.tree_isChildOf(p,v);)v._parent!==null&&(v=v._parent);if(o.tree_index(v)<u)return i.BoundaryPosition.After}return i.BoundaryPosition.Before}},function(a,n,r){var i=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,m=v&&d[v],x=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&x>=d.length&&(d=void 0),{value:d&&d[x++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(3),c=r(7),l=r(29),p=r(108),u=r(30),f=r(37),h=r(52);n.node_stringReplaceAll=function(d,v){var m=null;d!==""&&(m=l.create_text(v._nodeDocument,d)),f.mutation_replaceAll(m,v)},n.node_clone=function d(v,m,x){var y,g,C,S,T;if(m===void 0&&(m=null),x===void 0&&(x=!1),m===null&&(m=v._nodeDocument),s.Guard.isElementNode(v)){T=h.element_createAnElement(m,v._localName,v._namespace,v._namespacePrefix,v._is,!1);try{for(var w=i(v._attributeList),_=w.next();!_.done;_=w.next()){var E=d(_.value,m);h.element_append(E,T)}}catch(B){y={error:B}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(y)throw y.error}}}else if(s.Guard.isDocumentNode(v)){var D=l.create_document();D._encoding=v._encoding,D._contentType=v._contentType,D._URL=v._URL,D._origin=v._origin,D._type=v._type,D._mode=v._mode,T=D}else if(s.Guard.isDocumentTypeNode(v))T=l.create_documentType(m,v._name,v._publicId,v._systemId);else if(s.Guard.isAttrNode(v)){var O=l.create_attr(m,v.localName);O._namespace=v._namespace,O._namespacePrefix=v._namespacePrefix,O._value=v._value,T=O}else T=s.Guard.isExclusiveTextNode(v)?l.create_text(m,v._data):s.Guard.isCDATASectionNode(v)?l.create_cdataSection(m,v._data):s.Guard.isCommentNode(v)?l.create_comment(m,v._data):s.Guard.isProcessingInstructionNode(v)?l.create_processingInstruction(m,v._target,v._data):s.Guard.isDocumentFragmentNode(v)?l.create_documentFragment(m):Object.create(v);if(s.Guard.isDocumentNode(T)?(T._nodeDocument=T,m=T):T._nodeDocument=m,o.dom.features.steps&&u.dom_runCloningSteps(T,v,m,x),x)try{for(var M=i(v._children),N=M.next();!N.done;N=M.next()){var R=d(N.value,m,!0);f.mutation_append(R,T)}}catch(B){C={error:B}}finally{try{N&&!N.done&&(S=M.return)&&S.call(M)}finally{if(C)throw C.error}}return T},n.node_equals=function d(v,m){var x,y,g,C;if(v._nodeType!==m._nodeType)return!1;if(s.Guard.isDocumentTypeNode(v)&&s.Guard.isDocumentTypeNode(m)){if(v._name!==m._name||v._publicId!==m._publicId||v._systemId!==m._systemId)return!1}else if(s.Guard.isElementNode(v)&&s.Guard.isElementNode(m)){if(v._namespace!==m._namespace||v._namespacePrefix!==m._namespacePrefix||v._localName!==m._localName||v._attributeList.length!==m._attributeList.length)return!1}else if(s.Guard.isAttrNode(v)&&s.Guard.isAttrNode(m)){if(v._namespace!==m._namespace||v._localName!==m._localName||v._value!==m._value)return!1}else if(s.Guard.isProcessingInstructionNode(v)&&s.Guard.isProcessingInstructionNode(m)){if(v._target!==m._target||v._data!==m._data)return!1}else if(s.Guard.isCharacterDataNode(v)&&s.Guard.isCharacterDataNode(m)&&v._data!==m._data)return!1;if(s.Guard.isElementNode(v)&&s.Guard.isElementNode(m)){var S={};try{for(var T=i(v._attributeList),w=T.next();!w.done;w=T.next())S[(D=w.value)._localName]=D}catch(I){x={error:I}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(x)throw x.error}}try{for(var _=i(m._attributeList),E=_.next();!E.done;E=_.next()){var D,O=E.value;if(!(D=S[O._localName])||!d(D,O))return!1}}catch(I){g={error:I}}finally{try{E&&!E.done&&(C=_.return)&&C.call(_)}finally{if(g)throw g.error}}}if(v._children.size!==m._children.size)return!1;for(var M=v._children[Symbol.iterator](),N=m._children[Symbol.iterator](),R=M.next(),B=N.next();!R.done&&!B.done;){if(!d(R.value,B.value))return!1;R=M.next(),B=N.next()}return!0},n.node_listOfElementsWithQualifiedName=function(d,v){return d==="*"?l.create_htmlCollection(v):v._nodeDocument._type==="html"?l.create_htmlCollection(v,function(m){return m._namespace===c.namespace.HTML&&m._qualifiedName===d.toLowerCase()||m._namespace!==c.namespace.HTML&&m._qualifiedName===d}):l.create_htmlCollection(v,function(m){return m._qualifiedName===d})},n.node_listOfElementsWithNamespace=function(d,v,m){return d===""&&(d=null),d==="*"&&v==="*"?l.create_htmlCollection(m):d==="*"?l.create_htmlCollection(m,function(x){return x._localName===v}):v==="*"?l.create_htmlCollection(m,function(x){return x._namespace===d}):l.create_htmlCollection(m,function(x){return x._localName===v&&x._namespace===d})},n.node_listOfElementsWithClassNames=function(d,v){var m=p.orderedSet_parse(d);if(m.size===0)return l.create_htmlCollection(v,function(){return!1});var x=v._nodeDocument._mode!=="quirks";return l.create_htmlCollection(v,function(y){var g=y.classList;return p.orderedSet_contains(g._tokenSet,m,x)})},n.node_locateANamespacePrefix=function d(v,m){if(v._namespace===m&&v._namespacePrefix!==null)return v._namespacePrefix;for(var x=0;x<v._attributeList.length;x++){var y=v._attributeList[x];if(y._namespacePrefix==="xmlns"&&y._value===m)return y._localName}return v._parent&&s.Guard.isElementNode(v._parent)?d(v._parent,m):null},n.node_locateANamespace=function d(v,m){if(s.Guard.isElementNode(v)){if(v._namespace!==null&&v._namespacePrefix===m)return v._namespace;for(var x=0;x<v._attributeList.length;x++){var y=v._attributeList[x];if(y._namespace===c.namespace.XMLNS&&y._namespacePrefix==="xmlns"&&y._localName===m||m===null&&y._namespace===c.namespace.XMLNS&&y._namespacePrefix===null&&y._localName==="xmlns")return y._value||null}return v.parentElement===null?null:d(v.parentElement,m)}return s.Guard.isDocumentNode(v)?v.documentElement===null?null:d(v.documentElement,m):s.Guard.isDocumentTypeNode(v)||s.Guard.isDocumentFragmentNode(v)?null:s.Guard.isAttrNode(v)?v._element===null?null:d(v._element,m):v._parent&&s.Guard.isElementNode(v._parent)?d(v._parent,m):null}},function(a,n,r){var i=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],m=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(3),c=r(9),l=r(29),p=r(17),u=r(107),f=r(37);n.text_contiguousTextNodes=function(h,d){var v;return d===void 0&&(d=!1),(v={})[Symbol.iterator]=function(){for(var m=h;m&&s.Guard.isTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!d&&m===h&&(m=s.Guard.isTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var x={done:!1,value:m};return m=s.Guard.isTextNode(m._nextSibling)?m._nextSibling:null,x}}},v},n.text_contiguousExclusiveTextNodes=function(h,d){var v;return d===void 0&&(d=!1),(v={})[Symbol.iterator]=function(){for(var m=h;m&&s.Guard.isExclusiveTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!d&&m===h&&(m=s.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var x={done:!1,value:m};return m=s.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null,x}}},v},n.text_descendantTextContent=function(h){for(var d="",v=p.tree_getFirstDescendantNode(h,!1,!1,function(m){return s.Guard.isTextNode(m)});v!==null;)d+=v._data,v=p.tree_getNextDescendantNode(h,v,!1,!1,function(m){return s.Guard.isTextNode(m)});return d},n.text_split=function(h,d){var v,m,x=h._data.length;if(d>x)throw new c.IndexSizeError;var y=x-d,g=u.characterData_substringData(h,d,y),C=l.create_text(h._nodeDocument,g),S=h._parent;if(S!==null){f.mutation_insert(C,S,h._nextSibling);try{for(var T=i(o.dom.rangeList),w=T.next();!w.done;w=T.next()){var _=w.value;_._start[0]===h&&_._start[1]>d&&(_._start[0]=C,_._start[1]-=d),_._end[0]===h&&_._end[1]>d&&(_._end[0]=C,_._end[1]-=d);var E=p.tree_index(h);_._start[0]===S&&_._start[1]===E+1&&_._start[1]++,_._end[0]===S&&_._end[1]===E+1&&_._end[1]++}}catch(D){v={error:D}}finally{try{w&&!w.done&&(m=T.return)&&m.call(T)}finally{if(v)throw v.error}}}return u.characterData_replaceData(h,d,y,""),C}},function(a,n,r){var i=r(4),o=r(41),s=r(24),c=r(48),l=[].join,p=o!=Object,u=c("join",",");i({target:"Array",proto:!0,forced:p||!u},{join:function(f){return l.call(s(this),f===void 0?",":f)}})},function(a,n,r){var i=r(4),o=r(83),s=String.fromCharCode,c=String.fromCodePoint;i({target:"String",stat:!0,forced:!!c&&c.length!=1},{fromCodePoint:function(l){for(var p,u=[],f=arguments.length,h=0;f>h;){if(p=+arguments[h++],o(p,1114111)!==p)throw RangeError(p+" is not a valid code point");u.push(p<65536?s(p):s(55296+((p-=65536)>>10),p%1024+56320))}return u.join("")}})},function(a,n,r){var i=this&&this.__read||function(c,l){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var u,f,h=p.call(c),d=[];try{for(;(l===void 0||l-- >0)&&!(u=h.next()).done;)d.push(u.value)}catch(v){f={error:v}}finally{try{u&&!u.done&&(p=h.return)&&p.call(h)}finally{if(f)throw f.error}}return d};Object.defineProperty(n,"__esModule",{value:!0});var o=r(111),s=function(){function c(l,p){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=l,this._index=0,this._length=l.length,p&&(this._options.skipWhitespaceOnlyText=p.skipWhitespaceOnlyText||!1)}return c.prototype.nextToken=function(){if(this.eof())return{type:o.TokenType.EOF};var l=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&l.type===o.TokenType.Text&&c.isWhiteSpaceToken(l)&&(l=this.nextToken()),l},c.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?c.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},c.prototype.declaration=function(){for(var l="",p="",u="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.Declaration,version:l,encoding:p,standalone:u};var f=i(this.attribute(),2),h=f[0],d=f[1];h==="version"?l=d:h==="encoding"?p=d:h==="standalone"?u=d:this.throwError("Invalid attribute name: "+h)}this.throwError("Missing declaration end symbol `?>`")},c.prototype.doctype=function(){var l="",p="";this.skipSpace();var u=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(l=this.quotedString(),p=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(p=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:o.TokenType.DocType,name:u,pubId:l,sysId:p}},c.prototype.pi=function(){var l=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.PI,target:l,data:""};var p=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:o.TokenType.PI,target:l,data:p}},c.prototype.text=function(){var l=this.takeUntil("<");return{type:o.TokenType.Text,data:l}},c.prototype.comment=function(){var l=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:o.TokenType.Comment,data:l}},c.prototype.cdata=function(){var l=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:o.TokenType.CDATA,data:l}},c.prototype.openTag=function(){this.skipSpace();var l=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!0};for(var p=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:p,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:p,selfClosing:!0};var u=this.attribute();p.push(u)}this.throwError("Missing opening element tag end symbol `>`")},c.prototype.closeTag=function(){this.skipSpace();var l=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:o.TokenType.ClosingTag,name:l}},c.prototype.attribute=function(){this.skipSpace();var l=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[l,this.quotedString()]},c.prototype.quotedString=function(){this.skipSpace();var l=this.take(1);c.isQuote(l)||this.throwError("Missing start quote character before quoted value");var p=this.takeUntil(l);return this.skipIfStartsWith(l)||this.throwError("Missing end quote character after quoted value"),p},c.prototype.eof=function(){return this._index>=this._length},c.prototype.skipIfStartsWith=function(l){var p=l.length;if(p===1)return this._str[this._index]===l&&(this._index++,!0);for(var u=0;u<p;u++)if(this._str[this._index+u]!==l[u])return!1;return this._index+=p,!0},c.prototype.seek=function(l){this._index+=l,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},c.prototype.skipSpace=function(){for(;!this.eof()&&c.isSpace(this._str[this._index]);)this._index++},c.prototype.take=function(l){if(l===1)return this._str[this._index++];var p=this._index;return this.seek(l),this._str.slice(p,this._index)},c.prototype.takeUntil=function(l,p){p===void 0&&(p=!1);for(var u=this._index;this._index<this._length;){var f=this._str[this._index];if(f===l||p&&c.isSpace(f))break;this._index++}return this._str.slice(u,this._index)},c.prototype.takeUntil2=function(l,p,u){u===void 0&&(u=!1);for(var f=this._index;this._index<this._length;){var h=this._str[this._index];if(h===l||h===p||u&&c.isSpace(h))break;this._index++}return this._str.slice(f,this._index)},c.prototype.takeUntilStartsWith=function(l,p){p===void 0&&(p=!1);for(var u=this._index,f=l.length;this._index<this._length;){for(var h=!0,d=0;d<f;d++){var v=this._str[this._index+d],m=l[d];if(p&&c.isSpace(v))return this._str.slice(u,this._index);if(v!==m){this._index++,h=!1;break}}if(h)return this._str.slice(u,this._index)}return this._index=this._length,this._str.slice(u)},c.prototype.skipUntil=function(l){for(;this._index<this._length&&this._str[this._index]!==l;)this._index++},c.isWhiteSpaceToken=function(l){for(var p=l.data,u=0;u<p.length;u++){var f=p[u];if(f!==" "&&f!==`
`&&f!=="\r"&&f!=="	"&&f!=="\f")return!1}return!0},c.isSpace=function(l){return l===" "||l===`
`||l==="\r"||l==="	"},c.isQuote=function(l){return l==='"'||l==="'"},c.prototype.throwError=function(l){for(var p=/\r\n|\r|\n/g,u=null,f=0,h=0,d=this._str.length;(u=p.exec(this._str))!==null&&u!==null;)if(f++,u.index<this._index&&(h=p.lastIndex),u.index>this._index){d=u.index;break}throw this.err={line:f,col:this._index-h,index:this._index,str:this._str.substring(h,d)},new Error(l+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},c.prototype[Symbol.iterator]=function(){return this._index=0,{next:function(){var l=this.nextToken();return l.type===o.TokenType.EOF?{done:!0,value:null}:{done:!1,value:l}}.bind(this)}},c}();n.XMLStringLexer=s},function(a,n,r){var i=r(39);a.exports=new i({include:[r(182)]})},function(a,n,r){var i=r(39);a.exports=new i({include:[r(113)],implicit:[r(289),r(290),r(291),r(292)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(91),o=r(1),s=r(3),c=r(77),l=r(109);function p(d,v){var m=f(d===void 0||u(d)?d:i.DefaultBuilderOptions),x=u(d)?v:d,y=l.createDocument();h(y,m);var g=new c.XMLBuilderImpl(y);return x!==void 0&&g.ele(x),g}function u(d){if(!o.isPlainObject(d))return!1;for(var v in d)if(d.hasOwnProperty(v)&&!i.XMLBuilderOptionKeys.has(v))return!1;return!0}function f(d){d===void 0&&(d={});var v=o.applyDefaults(d,i.DefaultBuilderOptions);if(v.convert.att.length===0||v.convert.ins.length===0||v.convert.text.length===0||v.convert.cdata.length===0||v.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return v}function h(d,v,m){var x=d;x._xmlBuilderOptions=v,x._isFragment=m}n.builder=function(d,v){var m=f(u(d)?d:i.DefaultBuilderOptions),x=s.Guard.isNode(d)||o.isArray(d)?d:v;if(x===void 0)throw new Error("Invalid arguments.");if(o.isArray(x)){for(var y=[],g=0;g<x.length;g++){var C=new c.XMLBuilderImpl(x[g]);C.set(m),y.push(C)}return y}var S=new c.XMLBuilderImpl(x);return S.set(m),S},n.create=p,n.fragment=function(d,v){var m=f(d===void 0||u(d)?d:i.DefaultBuilderOptions),x=u(d)?v:d,y=l.createDocument();h(y,m,!0);var g=new c.XMLBuilderImpl(y.createDocumentFragment());return x!==void 0&&g.ele(x),g},n.convert=function(d,v,m){var x,y,g;return u(d)&&v!==void 0?(x=d,y=v,g=m):(x=i.DefaultBuilderOptions,y=d,g=v||void 0),p(x,y).end(g)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(77);n.builder=i.builder,n.create=i.create,n.fragment=i.fragment,n.convert=i.convert,n.createCB=i.createCB,n.fragmentCB=i.fragmentCB},function(a,n,r){r(31),r(32),r(33),r(191),r(192),r(194),r(64),r(19),r(198),r(199),r(89),r(201),r(65),r(20),r(66),r(22),r(23);var i=this&&this.__read||function(x,y){var g=typeof Symbol=="function"&&x[Symbol.iterator];if(!g)return x;var C,S,T=g.call(x),w=[];try{for(;(y===void 0||y-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(_){S={error:_}}finally{try{C&&!C.done&&(g=T.return)&&g.call(T)}finally{if(S)throw S.error}}return w},o=this&&this.__values||function(x){var y=typeof Symbol=="function"&&Symbol.iterator,g=y&&x[y],C=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(91),c=r(1),l=r(217),p=r(2),u=r(3),f=r(0),h=r(109),d=r(7),v=r(276),m=function(){function x(y){this._domNode=y}return Object.defineProperty(x.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),x.prototype.set=function(y){return this._options=c.applyDefaults(c.applyDefaults(this._options,y,!0),s.DefaultBuilderOptions),this},x.prototype.ele=function(y,g,C){var S,T,w,_,E,D;if(c.isObject(y))return new v.ObjectReader(this._options).parse(this,y);if(y!==null&&/^\s*</.test(y))return new v.XMLReader(this._options).parse(this,y);if(y!==null&&/^\s*[\{\[]/.test(y))return new v.JSONReader(this._options).parse(this,y);if(y!==null&&/^(\s*|(#.*)|(%.*))*---/.test(y))return new v.YAMLReader(this._options).parse(this,y);if((y===null||c.isString(y))&&c.isString(g))_=(S=i([y,g,C],3))[0],E=S[1],D=S[2];else{if(y===null)throw new Error("Element name cannot be null. "+this._debugInfo());_=(T=i([void 0,y,c.isObject(g)?g:void 0],3))[0],E=T[1],D=T[2]}if(D&&(D=c.getValue(D)),_=(w=i(this._extractNamespace(h.sanitizeInput(_,this._options.invalidCharReplacement),h.sanitizeInput(E,this._options.invalidCharReplacement),!0),2))[0],E=w[1],_===void 0){var O=i(f.namespace_extractQName(E),1)[0];_=this.node.lookupNamespaceURI(O)}var M=_!=null?this._doc.createElementNS(_,E):this._doc.createElement(E);this.node.appendChild(M);var N=new x(M),R=this._doc.doctype;if(M===this._doc.documentElement&&R!==null){var B=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,R.publicId,R.systemId);this._doc.replaceChild(B,R)}return D&&!c.isEmpty(D)&&N.att(D),N},x.prototype.remove=function(){var y=this.up();return y.node.removeChild(this.node),y},x.prototype.att=function(y,g,C){var S,T,w,_,E,D,O=this;if(c.isMap(y)||c.isObject(y))return c.forEachObject(y,function(L,k){return O.att(L,k)},this),this;if(y!=null&&(y=c.getValue(y+"")),g!=null&&(g=c.getValue(g+"")),C!=null&&(C=c.getValue(C+"")),y!==null&&!c.isString(y)||!c.isString(g)||C!==null&&!c.isString(C)){if(!c.isString(y)||g!=null&&!c.isString(g))throw new Error("Attribute name and value not specified. "+this._debugInfo());_=(T=i([void 0,y,g],3))[0],E=T[1],D=T[2]}else _=(S=i([y,g,C],3))[0],E=S[1],D=S[2];if(this._options.keepNullAttributes&&D==null)D="";else if(D==null)return this;if(!u.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var M=this.node;_=(w=i(this._extractNamespace(_,E,!1),2))[0],E=w[1],E=h.sanitizeInput(E,this._options.invalidCharReplacement),_=h.sanitizeInput(_,this._options.invalidCharReplacement),D=h.sanitizeInput(D,this._options.invalidCharReplacement);var N=i(f.namespace_extractQName(E),2),R=N[0],B=N[1],I=i(f.namespace_extractQName(M.prefix?M.prefix+":"+M.localName:M.localName),1)[0],P=null;return R==="xmlns"?(_=d.namespace.XMLNS,M.namespaceURI===null&&I===B&&(P=D)):R===null&&B==="xmlns"&&I===null&&(_=d.namespace.XMLNS,P=D),P!==null&&(this._updateNamespace(P),M=this.node),_!==void 0?M.setAttributeNS(_,E,D):M.setAttribute(E,D),this},x.prototype.removeAtt=function(y,g){var C,S,T=this;if(!u.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(y=c.getValue(y),g!==void 0&&(g=c.getValue(g)),y!==null&&g===void 0)S=y;else{if(y!==null&&!c.isString(y)||g===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());C=y,S=g}return c.isArray(S)||c.isSet(S)?c.forEachArray(S,function(w){return C===void 0?T.removeAtt(w):T.removeAtt(C,w)},this):C!==void 0?(S=h.sanitizeInput(S,this._options.invalidCharReplacement),C=h.sanitizeInput(C,this._options.invalidCharReplacement),this.node.removeAttributeNS(C,S)):(S=h.sanitizeInput(S,this._options.invalidCharReplacement),this.node.removeAttribute(S)),this},x.prototype.txt=function(y){if(y==null){if(!this._options.keepNullNodes)return this;y=""}var g=this._doc.createTextNode(h.sanitizeInput(y,this._options.invalidCharReplacement));return this.node.appendChild(g),this},x.prototype.com=function(y){if(y==null){if(!this._options.keepNullNodes)return this;y=""}var g=this._doc.createComment(h.sanitizeInput(y,this._options.invalidCharReplacement));return this.node.appendChild(g),this},x.prototype.dat=function(y){if(y==null){if(!this._options.keepNullNodes)return this;y=""}var g=this._doc.createCDATASection(h.sanitizeInput(y,this._options.invalidCharReplacement));return this.node.appendChild(g),this},x.prototype.ins=function(y,g){var C=this;if(g===void 0&&(g=""),g==null){if(!this._options.keepNullNodes)return this;g=""}if(c.isArray(y)||c.isSet(y))c.forEachArray(y,function(T){var w=(T+="").indexOf(" "),_=w===-1?T:T.substr(0,w),E=w===-1?"":T.substr(w+1);C.ins(_,E)},this);else if(c.isMap(y)||c.isObject(y))c.forEachObject(y,function(T,w){return C.ins(T,w)},this);else{var S=this._doc.createProcessingInstruction(h.sanitizeInput(y,this._options.invalidCharReplacement),h.sanitizeInput(g,this._options.invalidCharReplacement));this.node.appendChild(S)}return this},x.prototype.dec=function(y){return this._options.version=y.version||"1.0",this._options.encoding=y.encoding,this._options.standalone=y.standalone,this},x.prototype.dtd=function(y){var g=h.sanitizeInput(y&&y.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),C=h.sanitizeInput(y&&y.pubID||"",this._options.invalidCharReplacement),S=h.sanitizeInput(y&&y.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&g!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var T=this._doc.implementation.createDocumentType(g,C,S);return this._doc.doctype!==null?this._doc.replaceChild(T,this._doc.doctype):this._doc.insertBefore(T,this._doc.documentElement),this},x.prototype.import=function(y){var g,C,S=this._domNode,T=this._doc,w=y.node;if(u.Guard.isDocumentNode(w)){var _=w.documentElement;if(_===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var E=T.importNode(_,!0);S.appendChild(E);var D=i(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=S.lookupNamespaceURI(D);new x(E)._updateNamespace(O)}else if(u.Guard.isDocumentFragmentNode(w))try{for(var M=o(w.childNodes),N=M.next();!N.done;N=M.next()){var R=N.value;E=T.importNode(R,!0),S.appendChild(E),u.Guard.isElementNode(E)&&(D=i(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=S.lookupNamespaceURI(D),new x(E)._updateNamespace(O))}}catch(B){g={error:B}}finally{try{N&&!N.done&&(C=M.return)&&C.call(M)}finally{if(g)throw g.error}}else E=T.importNode(w,!0),S.appendChild(E),u.Guard.isElementNode(E)&&(D=i(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=S.lookupNamespaceURI(D),new x(E)._updateNamespace(O));return this},x.prototype.doc=function(){if(this._doc._isFragment){for(var y=this.node;y&&y.nodeType!==p.NodeType.DocumentFragment;)y=y.parentNode;if(y===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new x(y)}return new x(this._doc)},x.prototype.root=function(){var y=this._doc.documentElement;if(!y)throw new Error("Document root element is null. "+this._debugInfo());return new x(y)},x.prototype.up=function(){var y=this._domNode.parentNode;if(!y)throw new Error("Parent node is null. "+this._debugInfo());return new x(y)},x.prototype.prev=function(){var y=this._domNode.previousSibling;if(!y)throw new Error("Previous sibling node is null. "+this._debugInfo());return new x(y)},x.prototype.next=function(){var y=this._domNode.nextSibling;if(!y)throw new Error("Next sibling node is null. "+this._debugInfo());return new x(y)},x.prototype.first=function(){var y=this._domNode.firstChild;if(!y)throw new Error("First child node is null. "+this._debugInfo());return new x(y)},x.prototype.last=function(){var y=this._domNode.lastChild;if(!y)throw new Error("Last child node is null. "+this._debugInfo());return new x(y)},x.prototype.each=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,C);T[0];){var w=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2]);y.call(S,new x(T[0]),T[1],T[2]),T=w}return this},x.prototype.map=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);var T=[];return this.each(function(w,_,E){return T.push(y.call(S,w,_,E))},g,C),T},x.prototype.reduce=function(y,g,C,S,T){C===void 0&&(C=!1),S===void 0&&(S=!1);var w=g;return this.each(function(_,E,D){return w=y.call(T,w,_,E,D)},C,S),w},x.prototype.find=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,C);T[0];){var w=new x(T[0]);if(y.call(S,w,T[1],T[2]))return w;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}},x.prototype.filter=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);var T=[];return this.each(function(w,_,E){y.call(S,w,_,E)&&T.push(w)},g,C),T},x.prototype.every=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,C);T[0];){var w=new x(T[0]);if(!y.call(S,w,T[1],T[2]))return!1;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}return!0},x.prototype.some=function(y,g,C,S){g===void 0&&(g=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,C);T[0];){var w=new x(T[0]);if(y.call(S,w,T[1],T[2]))return!0;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}return!1},x.prototype.toArray=function(y,g){y===void 0&&(y=!1),g===void 0&&(g=!1);var C=[];return this.each(function(S){return C.push(S)},y,g),C},x.prototype.toString=function(y){return(y=y||{}).format===void 0&&(y.format="xml"),this._serialize(y)},x.prototype.toObject=function(y){return(y=y||{}).format===void 0&&(y.format="object"),this._serialize(y)},x.prototype.end=function(y){return(y=y||{}).format===void 0&&(y.format="xml"),this.doc()._serialize(y)},x.prototype._getFirstDescendantNode=function(y,g,C){return g?[this._domNode,0,0]:C?this._getNextDescendantNode(y,y,C,0,0):[this._domNode.firstChild,0,1]},x.prototype._getNextDescendantNode=function(y,g,C,S,T){if(!C)return y===g?[g.firstChild,0,T+1]:[g.nextSibling,S+1,T];if(g.firstChild)return[g.firstChild,0,T+1];if(g===y)return[null,-1,-1];if(g.nextSibling)return[g.nextSibling,S+1,T];for(var w=g.parentNode;w&&w!==y;){if(w.nextSibling)return[w.nextSibling,f.tree_index(w.nextSibling),T-1];w=w.parentNode,T--}return[null,-1,-1]},x.prototype._serialize=function(y){if(y.format==="xml")return new l.XMLWriter(this._options,y).serialize(this.node);if(y.format==="map")return new l.MapWriter(this._options,y).serialize(this.node);if(y.format==="object")return new l.ObjectWriter(this._options,y).serialize(this.node);if(y.format==="json")return new l.JSONWriter(this._options,y).serialize(this.node);if(y.format==="yaml")return new l.YAMLWriter(this._options,y).serialize(this.node);throw new Error("Invalid writer format: "+y.format+". "+this._debugInfo())},x.prototype._extractNamespace=function(y,g,C){var S=g.indexOf("@");if(S>0&&(y===void 0&&(y=g.slice(S+1)),g=g.slice(0,S)),y===void 0)y=C?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(y!==null&&y[0]==="@"){var T=y.slice(1);if((y=this._options.namespaceAlias[T])===void 0)throw new Error("Namespace alias `"+T+"` is not defined. "+this._debugInfo())}return[y,g]},x.prototype._updateNamespace=function(y){var g,C,S,T,w=this._domNode;if(u.Guard.isElementNode(w)&&y!==null&&w.namespaceURI!==y){var _=i(f.namespace_extractQName(w.prefix?w.prefix+":"+w.localName:w.localName),2),E=_[0],D=_[1],O=f.create_element(this._doc,D,y,E);try{for(var M=o(w.attributes),N=M.next();!N.done;N=M.next()){var R=N.value,B=R.prefix?R.prefix+":"+R.localName:R.localName,I=i(f.namespace_extractQName(B),1)[0],P=R.namespaceURI;P===null&&I!==null&&(P=w.lookupNamespaceURI(I)),P===null?O.setAttribute(B,R.value):O.setAttributeNS(P,B,R.value)}}catch(Y){g={error:Y}}finally{try{N&&!N.done&&(C=M.return)&&C.call(M)}finally{if(g)throw g.error}}var L=w.parentNode;if(L===null)throw new Error("Parent node is null."+this._debugInfo());L.replaceChild(O,w),this._domNode=O;try{for(var k=o(w.childNodes),A=k.next();!A.done;A=k.next()){var j=A.value.cloneNode(!0);if(O.appendChild(j),u.Guard.isElementNode(j)){var H=i(f.namespace_extractQName(j.prefix?j.prefix+":"+j.localName:j.localName),1)[0],K=O.lookupNamespaceURI(H);new x(j)._updateNamespace(K)}}}catch(Y){S={error:Y}}finally{try{A&&!A.done&&(T=k.return)&&T.call(k)}finally{if(S)throw S.error}}}},Object.defineProperty(x.prototype,"_doc",{get:function(){var y=this.node;if(u.Guard.isDocumentNode(y))return y;var g=y.ownerDocument;if(!g)throw new Error("Owner document is null. "+this._debugInfo());return g},enumerable:!0,configurable:!0}),x.prototype._debugInfo=function(y){var g=this.node,C=g.parentNode;y=y||g.nodeName;var S=C?C.nodeName:"";return S?"node: <"+y+">, parent: <"+S+">":"node: <"+y+">"},Object.defineProperty(x.prototype,"_options",{get:function(){var y=this._doc;if(y._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return y._xmlBuilderOptions},set:function(y){this._doc._xmlBuilderOptions=y},enumerable:!0,configurable:!0}),x}();n.XMLBuilderImpl=m},function(a,n,r){var i=r(11),o=r(117),s=i.WeakMap;a.exports=typeof s=="function"&&/native code/.test(o(s))},function(a,n,r){var i=r(46),o=r(82),s=r(85),c=r(18);a.exports=i("Reflect","ownKeys")||function(l){var p=o.f(c(l)),u=s.f;return u?p.concat(u(l)):p}},function(a,n,r){var i=r(16),o=r(15),s=r(18),c=r(61);a.exports=i?Object.defineProperties:function(l,p){s(l);for(var u,f=c(p),h=f.length,d=0;h>d;)o.f(l,u=f[d++],p[u]);return l}},function(a,n,r){var i=r(46);a.exports=i("document","documentElement")},function(a,n,r){var i=r(24),o=r(82).f,s={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(l){return c&&s.call(l)=="[object Window]"?function(p){try{return o(p)}catch{return c.slice()}}(l):o(i(l))}},function(a,n,r){var i=r(4),o=r(36).every,s=r(48),c=r(28),l=s("every"),p=c("every");i({target:"Array",proto:!0,forced:!l||!p},{every:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(4),o=r(36).filter,s=r(63),c=r(28),l=s("filter"),p=c("filter");i({target:"Array",proto:!0,forced:!l||!p},{filter:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(46);a.exports=i("navigator","userAgent")||""},function(a,n,r){var i=r(4),o=r(36).find,s=r(130),c=r(28),l=!0,p=c("find");"find"in[]&&Array(1).find(function(){l=!1}),i({target:"Array",proto:!0,forced:l||!p},{find:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}}),s("find")},function(a,n,r){var i=r(131).IteratorPrototype,o=r(60),s=r(40),c=r(62),l=r(49),p=function(){return this};a.exports=function(u,f,h){var d=f+" Iterator";return u.prototype=o(i,{next:s(1,h)}),c(u,d,!1,!0),l[d]=p,u}},function(a,n,r){var i=r(8);a.exports=!i(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(a,n,r){var i=r(13);a.exports=function(o){if(!i(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}},function(a,n,r){var i=r(4),o=r(36).map,s=r(63),c=r(28),l=s("map"),p=c("map");i({target:"Array",proto:!0,forced:!l||!p},{map:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(4),o=r(200).left,s=r(48),c=r(28),l=s("reduce"),p=c("reduce",{1:0});i({target:"Array",proto:!0,forced:!l||!p},{reduce:function(u){return o(this,u,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(127),o=r(27),s=r(41),c=r(26),l=function(p){return function(u,f,h,d){i(f);var v=o(u),m=s(v),x=c(v.length),y=p?x-1:0,g=p?-1:1;if(h<2)for(;;){if(y in m){d=m[y],y+=g;break}if(y+=g,p?y<0:x<=y)throw TypeError("Reduce of empty array with no initial value")}for(;p?y>=0:x>y;y+=g)y in m&&(d=f(d,m[y],y,v));return d}};a.exports={left:l(!1),right:l(!0)}},function(a,n,r){var i=r(4),o=r(36).some,s=r(48),c=r(28),l=s("some"),p=c("some");i({target:"Array",proto:!0,forced:!l||!p},{some:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(90),o=r(135);a.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},function(a,n){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(a,n,r){var i=r(8);a.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(a,n,r){var i=r(5),o=r(49),s=i("iterator"),c=Array.prototype;a.exports=function(l){return l!==void 0&&(o.Array===l||c[s]===l)}},function(a,n,r){var i=r(135),o=r(49),s=r(5)("iterator");a.exports=function(c){if(c!=null)return c[s]||c["@@iterator"]||o[i(c)]}},function(a,n,r){var i=r(18);a.exports=function(o,s,c,l){try{return l?s(i(c)[0],c[1]):s(c)}catch(u){var p=o.return;throw p!==void 0&&i(p.call(o)),u}}},function(a,n,r){var i=r(5)("iterator"),o=!1;try{var s=0,c={next:function(){return{done:!!s++}},return:function(){o=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}a.exports=function(l,p){if(!p&&!o)return!1;var u=!1;try{var f={};f[i]=function(){return{next:function(){return{done:u=!0}}}},l(f)}catch{}return u}},function(a,n,r){var i=r(13),o=r(133);a.exports=function(s,c,l){var p,u;return o&&typeof(p=c.constructor)=="function"&&p!==l&&i(u=p.prototype)&&u!==l.prototype&&o(s,u),s}},function(a,n,r){var i=r(25);a.exports=function(o,s,c){for(var l in s)i(o,l,s[l],c);return o}},function(a,n,r){var i=r(46),o=r(15),s=r(5),c=r(16),l=s("species");a.exports=function(p){var u=i(p),f=o.f;c&&u&&!u[l]&&f(u,l,{configurable:!0,get:function(){return this}})}},function(a,n,r){var i=this&&this.__generator||function(c,l){var p,u,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(m){return function(x){return function(y){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,u&&(f=2&y[0]?u.return:y[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,y[1])).done)return f;switch(u=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,u=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(f=d.trys,!((f=f.length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=l.call(c,d)}catch(g){y=[6,g],u=0}finally{p=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([m,x])}}},o=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&c[l],u=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(l){l===void 0&&(l=1e3),this._items=new Set,this._limit=l}return c.prototype.add=function(l){if(this._items.add(l),this._items.size>this._limit){var p=this._items.values().next();p.done||this._items.delete(p.value)}return this},c.prototype.delete=function(l){return this._items.delete(l)},c.prototype.has=function(l){return this._items.has(l)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(l,p){var u=this;this._items.forEach(function(f){return l.call(p,f,f,u)})},c.prototype.keys=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},c.prototype.values=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),c}();n.FixedSizeSet=s},function(a,n,r){var i=this&&this.__generator||function(c,l){var p,u,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(m){return function(x){return function(y){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,u&&(f=2&y[0]?u.return:y[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,y[1])).done)return f;switch(u=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,u=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(f=d.trys,!((f=f.length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=l.call(c,d)}catch(g){y=[6,g],u=0}finally{p=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([m,x])}}},o=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&c[l],u=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(l){l===void 0&&(l=1e3),this._items=new Map,this._limit=l}return c.prototype.get=function(l){return this._items.get(l)},c.prototype.set=function(l,p){if(this._items.set(l,p),this._items.size>this._limit){var u=this._items.keys().next();u.done||this._items.delete(u.value)}},c.prototype.delete=function(l){return this._items.delete(l)},c.prototype.has=function(l){return this._items.has(l)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(l,p){this._items.forEach(function(u,f){return l.call(p,f,u)})},c.prototype.keys=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},c.prototype.values=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),c}();n.ObjectCache=s},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(s){s===void 0&&(s=1e3),this._items=new Map,this._limit=s}return o.prototype.check=function(s,c){if(this._items.get(s)===c)return!0;if(this._items.get(c)===s)return!1;var l=Math.random()<.5;if(l?this._items.set(s,c):this._items.set(c,s),this._items.size>this._limit){var p=this._items.keys().next();p.done||this._items.delete(p.value)}return l},o}();n.CompareCache=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(s){this._initialized=!1,this._value=void 0,this._initFunc=s}return Object.defineProperty(o.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),o}();n.Lazy=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(s){this._pointer=0,this._chars=Array.from(s),this._length=this._chars.length}return Object.defineProperty(o.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),o.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var s=this._chars[this._pointer].codePointAt(0);this._codePoint=s!==void 0?s:-1}return this._codePoint},o.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},o.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},o.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(o.prototype,"pointer",{get:function(){return this._pointer},set:function(s){s!==this._pointer&&(this._pointer=s,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),o}();n.StringWalker=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(218);n.MapWriter=i.MapWriter;var o=r(258);n.XMLWriter=o.XMLWriter;var s=r(67);n.ObjectWriter=s.ObjectWriter;var c=r(260);n.JSONWriter=c.JSONWriter;var l=r(261);n.YAMLWriter=l.YAMLWriter},function(a,n,r){r(19),r(219),r(20),r(22),r(23);var i,o=this&&this.__extends||(i=function(p,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])})(p,u)},function(p,u){function f(){this.constructor=p}i(p,u),p.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),c=r(67),l=function(p){function u(f,h){var d=p.call(this,f)||this;return d._writerOptions=s.applyDefaults(h,{format:"map",wellFormed:!1,group:!1,verbose:!1}),d}return o(u,p),u.prototype.serialize=function(f){var h=s.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),d=new c.ObjectWriter(this._builderOptions,h).serialize(f);return this._convertObject(d)},u.prototype._convertObject=function(f){if(s.isArray(f)){for(var h=0;h<f.length;h++)f[h]=this._convertObject(f[h]);return f}if(s.isObject(f)){var d=new Map;for(var v in f)d.set(v,this._convertObject(f[v]));return d}return f},u}(r(50).BaseWriter);n.MapWriter=l},function(a,n,r){var i=r(139),o=r(143);a.exports=i("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(a,n,r){var i=r(4),o=r(8),s=r(59),c=r(13),l=r(27),p=r(26),u=r(134),f=r(128),h=r(63),d=r(5),v=r(129),m=d("isConcatSpreadable"),x=v>=51||!o(function(){var C=[];return C[m]=!1,C.concat()[0]!==C}),y=h("concat"),g=function(C){if(!c(C))return!1;var S=C[m];return S!==void 0?!!S:s(C)};i({target:"Array",proto:!0,forced:!x||!y},{concat:function(C){var S,T,w,_,E,D=l(this),O=f(D,0),M=0;for(S=-1,w=arguments.length;S<w;S++)if(g(E=S===-1?D:arguments[S])){if(M+(_=p(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(T=0;T<_;T++,M++)T in E&&u(O,M,E[T])}else{if(M>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(O,M++,E)}return O.length=M,O}})},function(a,n,r){var i=r(8);function o(s,c){return RegExp(s,c)}n.UNSUPPORTED_Y=i(function(){var s=o("a","y");return s.lastIndex=2,s.exec("abcd")!=null}),n.BROKEN_CARET=i(function(){var s=o("^r","gy");return s.lastIndex=2,s.exec("str")!=null})},function(a,n,r){var i=r(223);a.exports=function(o){if(i(o))throw TypeError("The method doesn't accept regular expressions");return o}},function(a,n,r){var i=r(13),o=r(42),s=r(5)("match");a.exports=function(c){var l;return i(c)&&((l=c[s])!==void 0?!!l:o(c)=="RegExp")}},function(a,n,r){var i=r(5)("match");a.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[i]=!1,"/./"[o](s)}catch{}}return!1}},function(a,n,r){r(68);var i=r(25),o=r(8),s=r(5),c=r(93),l=r(21),p=s("species"),u=!o(function(){var m=/./;return m.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(m,"$<a>")!=="7"}),f="a".replace(/./,"$0")==="$0",h=s("replace"),d=!!/./[h]&&/./[h]("a","$0")==="",v=!o(function(){var m=/(?:)/,x=m.exec;m.exec=function(){return x.apply(this,arguments)};var y="ab".split(m);return y.length!==2||y[0]!=="a"||y[1]!=="b"});a.exports=function(m,x,y,g){var C=s(m),S=!o(function(){var O={};return O[C]=function(){return 7},""[m](O)!=7}),T=S&&!o(function(){var O=!1,M=/a/;return m==="split"&&((M={}).constructor={},M.constructor[p]=function(){return M},M.flags="",M[C]=/./[C]),M.exec=function(){return O=!0,null},M[C](""),!O});if(!S||!T||m==="replace"&&(!u||!f||d)||m==="split"&&!v){var w=/./[C],_=y(C,""[m],function(O,M,N,R,B){return M.exec===c?S&&!B?{done:!0,value:w.call(M,N,R)}:{done:!0,value:O.call(N,M,R)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),E=_[0],D=_[1];i(String.prototype,m,E),i(RegExp.prototype,C,x==2?function(O,M){return D.call(O,this,M)}:function(O){return D.call(O,this)})}g&&l(RegExp.prototype[C],"sham",!0)}},function(a,n,r){var i=r(137).charAt;a.exports=function(o,s,c){return s+(c?i(o,s).length:1)}},function(a,n,r){var i=r(42),o=r(93);a.exports=function(s,c){var l=s.exec;if(typeof l=="function"){var p=l.call(s,c);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(i(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(s,c)}},function(a,n,r){(function(i){Object.defineProperty(n,"__esModule",{value:!0});var o=r(96);n.forgivingBase64Encode=function(s){return i.from(s).toString("base64")},n.forgivingBase64Decode=function(s){return s===""?"":((s=s.replace(o.ASCIIWhiteSpace,"")).length%4==0&&(s.endsWith("==")?s=s.substr(0,s.length-2):s.endsWith("=")&&(s=s.substr(0,s.length-1))),s.length%4==1?null:/[0-9A-Za-z+/]/.test(s)?i.from(s,"base64").toString("utf8"):null)}}).call(this,r(145).Buffer)},function(a,n,r){n.byteLength=function(h){var d=u(h),v=d[0],m=d[1];return 3*(v+m)/4-m},n.toByteArray=function(h){var d,v,m=u(h),x=m[0],y=m[1],g=new s(function(T,w,_){return 3*(w+_)/4-_}(0,x,y)),C=0,S=y>0?x-4:x;for(v=0;v<S;v+=4)d=o[h.charCodeAt(v)]<<18|o[h.charCodeAt(v+1)]<<12|o[h.charCodeAt(v+2)]<<6|o[h.charCodeAt(v+3)],g[C++]=d>>16&255,g[C++]=d>>8&255,g[C++]=255&d;return y===2&&(d=o[h.charCodeAt(v)]<<2|o[h.charCodeAt(v+1)]>>4,g[C++]=255&d),y===1&&(d=o[h.charCodeAt(v)]<<10|o[h.charCodeAt(v+1)]<<4|o[h.charCodeAt(v+2)]>>2,g[C++]=d>>8&255,g[C++]=255&d),g},n.fromByteArray=function(h){for(var d,v=h.length,m=v%3,x=[],y=0,g=v-m;y<g;y+=16383)x.push(f(h,y,y+16383>g?g:y+16383));return m===1?(d=h[v-1],x.push(i[d>>2]+i[d<<4&63]+"==")):m===2&&(d=(h[v-2]<<8)+h[v-1],x.push(i[d>>10]+i[d>>4&63]+i[d<<2&63]+"=")),x.join("")};for(var i=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=c.length;l<p;++l)i[l]=c[l],o[c.charCodeAt(l)]=l;function u(h){var d=h.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=h.indexOf("=");return v===-1&&(v=d),[v,v===d?0:4-v%4]}function f(h,d,v){for(var m,x,y=[],g=d;g<v;g+=3)m=(h[g]<<16&16711680)+(h[g+1]<<8&65280)+(255&h[g+2]),y.push(i[(x=m)>>18&63]+i[x>>12&63]+i[x>>6&63]+i[63&x]);return y.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(a,n){n.read=function(r,i,o,s,c){var l,p,u=8*c-s-1,f=(1<<u)-1,h=f>>1,d=-7,v=o?c-1:0,m=o?-1:1,x=r[i+v];for(v+=m,l=x&(1<<-d)-1,x>>=-d,d+=u;d>0;l=256*l+r[i+v],v+=m,d-=8);for(p=l&(1<<-d)-1,l>>=-d,d+=s;d>0;p=256*p+r[i+v],v+=m,d-=8);if(l===0)l=1-h;else{if(l===f)return p?NaN:1/0*(x?-1:1);p+=Math.pow(2,s),l-=h}return(x?-1:1)*p*Math.pow(2,l-s)},n.write=function(r,i,o,s,c,l){var p,u,f,h=8*l-c-1,d=(1<<h)-1,v=d>>1,m=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=s?0:l-1,y=s?1:-1,g=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,p=d):(p=Math.floor(Math.log(i)/Math.LN2),i*(f=Math.pow(2,-p))<1&&(p--,f*=2),(i+=p+v>=1?m/f:m*Math.pow(2,1-v))*f>=2&&(p++,f/=2),p+v>=d?(u=0,p=d):p+v>=1?(u=(i*f-1)*Math.pow(2,c),p+=v):(u=i*Math.pow(2,v-1)*Math.pow(2,c),p=0));c>=8;r[o+x]=255&u,x+=y,u/=256,c-=8);for(p=p<<c|u,h+=c;h>0;r[o+x]=255&p,x+=y,p/=256,h-=8);r[o+x-y]|=128*g}},function(a,n){var r={}.toString;a.exports=Array.isArray||function(i){return r.call(i)=="[object Array]"}},function(a,n,r){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&c[l],u=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1);function s(c){var l,p;if(c===null||o.isString(c)||o.isNumber(c))return c;if(o.isArray(c)){var u=new Array;try{for(var f=i(c),h=f.next();!h.done;h=f.next()){var d=h.value;u.push(s(d))}}catch(x){l={error:x}}finally{try{h&&!h.done&&(p=f.return)&&p.call(f)}finally{if(l)throw l.error}}return u}if(o.isObject(c)){u=new Map;for(var v in c)if(c.hasOwnProperty(v)){var m=c[v];u.set(v,s(m))}return u}return c}n.parseJSONFromBytes=function(c){var l=o.utf8Decode(c);return JSON.parse.call(void 0,l)},n.serializeJSONToBytes=function(c){var l=JSON.stringify.call(void 0,c);return o.utf8Encode(l)},n.parseJSONIntoInfraValues=function(c){return s(JSON.parse.call(void 0,c))},n.convertAJSONDerivedJavaScriptValueToAnInfraValue=s},function(a,n,r){var i=this&&this.__generator||function(p,u){var f,h,d,v,m={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function x(y){return function(g){return function(C){if(f)throw new TypeError("Generator is already executing.");for(;m;)try{if(f=1,h&&(d=2&C[0]?h.return:C[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,C[1])).done)return d;switch(h=0,d&&(C=[2&C[0],d.value]),C[0]){case 0:case 1:d=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,h=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(d=m.trys,!((d=d.length>0&&d[d.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){m.label=C[1];break}if(C[0]===6&&m.label<d[1]){m.label=d[1],d=C;break}if(d&&m.label<d[2]){m.label=d[2],m.ops.push(C);break}d[2]&&m.ops.pop(),m.trys.pop();continue}C=u.call(p,m)}catch(S){C=[6,S],h=0}finally{f=d=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,g])}}},o=this&&this.__read||function(p,u){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,d,v=f.call(p),m=[];try{for(;(u===void 0||u-- >0)&&!(h=v.next()).done;)m.push(h.value)}catch(x){d={error:x}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return m},s=this&&this.__spread||function(){for(var p=[],u=0;u<arguments.length;u++)p=p.concat(o(arguments[u]));return p},c=this&&this.__values||function(p){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&p[u],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var l=r(1);n.append=function(p,u){p.push(u)},n.extend=function(p,u){p.push.apply(p,s(u))},n.prepend=function(p,u){p.unshift(u)},n.replace=function(p,u,f){var h,d,v=0;try{for(var m=c(p),x=m.next();!x.done;x=m.next()){var y=x.value;if(l.isFunction(u))u.call(null,y)&&(p[v]=f);else if(y===u)return void(p[v]=f);v++}}catch(g){h={error:g}}finally{try{x&&!x.done&&(d=m.return)&&d.call(m)}finally{if(h)throw h.error}}},n.insert=function(p,u,f){p.splice(f,0,u)},n.remove=function(p,u){for(var f=p.length;f--;){var h=p[f];if(l.isFunction(u))u.call(null,h)&&p.splice(f,1);else if(h===u)return void p.splice(f,1)}},n.empty=function(p){p.length=0},n.contains=function(p,u){var f,h;try{for(var d=c(p),v=d.next();!v.done;v=d.next()){var m=v.value;if(l.isFunction(u)){if(u.call(null,m))return!0}else if(m===u)return!0}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}return!1},n.size=function(p,u){var f,h;if(u===void 0)return p.length;var d=0;try{for(var v=c(p),m=v.next();!m.done;m=v.next()){var x=m.value;u.call(null,x)&&d++}}catch(y){f={error:y}}finally{try{m&&!m.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}return d},n.isEmpty=function(p){return p.length===0},n.forEach=function(p,u){var f,h,d,v,m,x;return i(this,function(y){switch(y.label){case 0:return u!==void 0?[3,2]:[5,c(p)];case 1:return y.sent(),[3,9];case 2:y.trys.push([2,7,8,9]),f=c(p),h=f.next(),y.label=3;case 3:return h.done?[3,6]:(d=h.value,u.call(null,d)?[4,d]:[3,5]);case 4:y.sent(),y.label=5;case 5:return h=f.next(),[3,3];case 6:return[3,9];case 7:return v=y.sent(),m={error:v},[3,9];case 8:try{h&&!h.done&&(x=f.return)&&x.call(f)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},n.clone=function(p){return new(Array.bind.apply(Array,s([void 0],p)))},n.sortInAscendingOrder=function(p,u){return p.sort(function(f,h){return u.call(null,f,h)?-1:1})},n.sortInDescendingOrder=function(p,u){return p.sort(function(f,h){return u.call(null,f,h)?1:-1})}},function(a,n,r){var i=this&&this.__generator||function(p,u){var f,h,d,v,m={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function x(y){return function(g){return function(C){if(f)throw new TypeError("Generator is already executing.");for(;m;)try{if(f=1,h&&(d=2&C[0]?h.return:C[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,C[1])).done)return d;switch(h=0,d&&(C=[2&C[0],d.value]),C[0]){case 0:case 1:d=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,h=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(d=m.trys,!((d=d.length>0&&d[d.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){m.label=C[1];break}if(C[0]===6&&m.label<d[1]){m.label=d[1],d=C;break}if(d&&m.label<d[2]){m.label=d[2],m.ops.push(C);break}d[2]&&m.ops.pop(),m.trys.pop();continue}C=u.call(p,m)}catch(S){C=[6,S],h=0}finally{f=d=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,g])}}},o=this&&this.__values||function(p){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&p[u],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(p,u){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,d,v=f.call(p),m=[];try{for(;(u===void 0||u-- >0)&&!(h=v.next()).done;)m.push(h.value)}catch(x){d={error:x}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return m},c=this&&this.__spread||function(){for(var p=[],u=0;u<arguments.length;u++)p=p.concat(s(arguments[u]));return p};Object.defineProperty(n,"__esModule",{value:!0});var l=r(1);n.get=function(p,u){return p.get(u)},n.set=function(p,u,f){p.set(u,f)},n.remove=function(p,u){var f,h,d,v;if(l.isFunction(u)){var m=[];try{for(var x=o(p),y=x.next();!y.done;y=x.next()){var g=y.value;u.call(null,g)&&m.push(g[0])}}catch(w){f={error:w}}finally{try{y&&!y.done&&(h=x.return)&&h.call(x)}finally{if(f)throw f.error}}try{for(var C=o(m),S=C.next();!S.done;S=C.next()){var T=S.value;p.delete(T)}}catch(w){d={error:w}}finally{try{S&&!S.done&&(v=C.return)&&v.call(C)}finally{if(d)throw d.error}}}else p.delete(u)},n.contains=function(p,u){var f,h;if(l.isFunction(u)){try{for(var d=o(p),v=d.next();!v.done;v=d.next()){var m=v.value;if(u.call(null,m))return!0}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}return!1}return p.has(u)},n.keys=function(p){return new Set(p.keys())},n.values=function(p){return c(p.values())},n.size=function(p,u){var f,h;if(u===void 0)return p.size;var d=0;try{for(var v=o(p),m=v.next();!m.done;m=v.next()){var x=m.value;u.call(null,x)&&d++}}catch(y){f={error:y}}finally{try{m&&!m.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}return d},n.isEmpty=function(p){return p.size===0},n.forEach=function(p,u){var f,h,d,v,m,x;return i(this,function(y){switch(y.label){case 0:return u!==void 0?[3,2]:[5,o(p)];case 1:return y.sent(),[3,9];case 2:y.trys.push([2,7,8,9]),f=o(p),h=f.next(),y.label=3;case 3:return h.done?[3,6]:(d=h.value,u.call(null,d)?[4,d]:[3,5]);case 4:y.sent(),y.label=5;case 5:return h=f.next(),[3,3];case 6:return[3,9];case 7:return v=y.sent(),m={error:v},[3,9];case 8:try{h&&!h.done&&(x=f.return)&&x.call(f)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},n.clone=function(p){return new Map(p)},n.sortInAscendingOrder=function(p,u){var f=new(Array.bind.apply(Array,c([void 0],p)));return f.sort(function(h,d){return u.call(null,h,d)?-1:1}),new Map(f)},n.sortInDescendingOrder=function(p,u){var f=new(Array.bind.apply(Array,c([void 0],p)));return f.sort(function(h,d){return u.call(null,h,d)?1:-1}),new Map(f)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.HTML="http://www.w3.org/1999/xhtml",n.XML="http://www.w3.org/XML/1998/namespace",n.XMLNS="http://www.w3.org/2000/xmlns/",n.MathML="http://www.w3.org/1998/Math/MathML",n.SVG="http://www.w3.org/2000/svg",n.XLink="http://www.w3.org/1999/xlink"},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.enqueue=function(i,o){i.push(o)},n.dequeue=function(i){return i.shift()||null}},function(a,n,r){var i=this&&this.__generator||function(u,f){var h,d,v,m,x={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return m={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function y(g){return function(C){return function(S){if(h)throw new TypeError("Generator is already executing.");for(;x;)try{if(h=1,d&&(v=2&S[0]?d.return:S[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,S[1])).done)return v;switch(d=0,v&&(S=[2&S[0],v.value]),S[0]){case 0:case 1:v=S;break;case 4:return x.label++,{value:S[1],done:!1};case 5:x.label++,d=S[1],S=[0];continue;case 7:S=x.ops.pop(),x.trys.pop();continue;default:if(v=x.trys,!((v=v.length>0&&v[v.length-1])||S[0]!==6&&S[0]!==2)){x=0;continue}if(S[0]===3&&(!v||S[1]>v[0]&&S[1]<v[3])){x.label=S[1];break}if(S[0]===6&&x.label<v[1]){x.label=v[1],v=S;break}if(v&&x.label<v[2]){x.label=v[2],x.ops.push(S);break}v[2]&&x.ops.pop(),x.trys.pop();continue}S=f.call(u,x)}catch(T){S=[6,T],d=0}finally{h=v=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([g,C])}}},o=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(u,f){var h=typeof Symbol=="function"&&u[Symbol.iterator];if(!h)return u;var d,v,m=h.call(u),x=[];try{for(;(f===void 0||f-- >0)&&!(d=m.next()).done;)x.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=m.return)&&h.call(m)}finally{if(v)throw v.error}}return x},c=this&&this.__spread||function(){for(var u=[],f=0;f<arguments.length;f++)u=u.concat(s(arguments[f]));return u};Object.defineProperty(n,"__esModule",{value:!0});var l=r(1);function p(u,f){var h,d;try{for(var v=o(u),m=v.next();!m.done;m=v.next()){var x=m.value;if(!f.has(x))return!1}}catch(y){h={error:y}}finally{try{m&&!m.done&&(d=v.return)&&d.call(v)}finally{if(h)throw h.error}}return!0}n.append=function(u,f){u.add(f)},n.extend=function(u,f){f.forEach(u.add,u)},n.prepend=function(u,f){var h=new Set(u);u.clear(),u.add(f),h.forEach(u.add,u)},n.replace=function(u,f,h){var d,v,m=new Set;try{for(var x=o(u),y=x.next();!y.done;y=x.next()){var g=y.value;l.isFunction(f)?f.call(null,g)?m.add(h):m.add(g):g===f?m.add(h):m.add(g)}}catch(C){d={error:C}}finally{try{y&&!y.done&&(v=x.return)&&v.call(x)}finally{if(d)throw d.error}}u.clear(),m.forEach(u.add,u)},n.insert=function(u,f,h){var d,v,m=new Set,x=0;try{for(var y=o(u),g=y.next();!g.done;g=y.next()){var C=g.value;x===h&&m.add(f),m.add(C),x++}}catch(S){d={error:S}}finally{try{g&&!g.done&&(v=y.return)&&v.call(y)}finally{if(d)throw d.error}}u.clear(),m.forEach(u.add,u)},n.remove=function(u,f){var h,d,v,m;if(l.isFunction(f)){var x=[];try{for(var y=o(u),g=y.next();!g.done;g=y.next()){var C=g.value;f.call(null,C)&&x.push(C)}}catch(_){h={error:_}}finally{try{g&&!g.done&&(d=y.return)&&d.call(y)}finally{if(h)throw h.error}}try{for(var S=o(x),T=S.next();!T.done;T=S.next()){var w=T.value;u.delete(w)}}catch(_){v={error:_}}finally{try{T&&!T.done&&(m=S.return)&&m.call(S)}finally{if(v)throw v.error}}}else u.delete(f)},n.empty=function(u){u.clear()},n.contains=function(u,f){var h,d;if(!l.isFunction(f))return u.has(f);try{for(var v=o(u),m=v.next();!m.done;m=v.next()){var x=m.value;if(f.call(null,x))return!0}}catch(y){h={error:y}}finally{try{m&&!m.done&&(d=v.return)&&d.call(v)}finally{if(h)throw h.error}}return!1},n.size=function(u,f){var h,d;if(f===void 0)return u.size;var v=0;try{for(var m=o(u),x=m.next();!x.done;x=m.next()){var y=x.value;f.call(null,y)&&v++}}catch(g){h={error:g}}finally{try{x&&!x.done&&(d=m.return)&&d.call(m)}finally{if(h)throw h.error}}return v},n.isEmpty=function(u){return u.size===0},n.forEach=function(u,f){var h,d,v,m,x,y;return i(this,function(g){switch(g.label){case 0:return f!==void 0?[3,2]:[5,o(u)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),h=o(u),d=h.next(),g.label=3;case 3:return d.done?[3,6]:(v=d.value,f.call(null,v)?[4,v]:[3,5]);case 4:g.sent(),g.label=5;case 5:return d=h.next(),[3,3];case 6:return[3,9];case 7:return m=g.sent(),x={error:m},[3,9];case 8:try{d&&!d.done&&(y=h.return)&&y.call(h)}finally{if(x)throw x.error}return[7];case 9:return[2]}})},n.clone=function(u){return new Set(u)},n.sortInAscendingOrder=function(u,f){var h=new(Array.bind.apply(Array,c([void 0],u)));return h.sort(function(d,v){return f.call(null,d,v)?-1:1}),new Set(h)},n.sortInDescendingOrder=function(u,f){var h=new(Array.bind.apply(Array,c([void 0],u)));return h.sort(function(d,v){return f.call(null,d,v)?1:-1}),new Set(h)},n.isSubsetOf=p,n.isSupersetOf=function(u,f){return p(f,u)},n.intersection=function(u,f){var h,d,v=new Set;try{for(var m=o(u),x=m.next();!x.done;x=m.next()){var y=x.value;f.has(y)&&v.add(y)}}catch(g){h={error:g}}finally{try{x&&!x.done&&(d=m.return)&&d.call(m)}finally{if(h)throw h.error}}return v},n.union=function(u,f){var h=new Set(u);return f.forEach(h.add,h),h},n.range=function(u,f){for(var h=new Set,d=u;d<=f;d++)h.add(d);return h}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.push=function(i,o){i.push(o)},n.pop=function(i){return i.pop()||null}},function(a,n,r){var i=this&&this.__values||function(x){var y=typeof Symbol=="function"&&Symbol.iterator,g=y&&x[y],C=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(96),s=r(147),c=r(146),l=r(1);function p(x,y){for(var g=0;;){var C=g<x.length?x.charCodeAt(g):null,S=g<y.length?y.charCodeAt(g):null;if(C===null)return!0;if(C!==S)return!1;g++}}function u(x){var y,g,C=Array.from(x),S=new Uint8Array(C.length),T=0;try{for(var w=i(x),_=w.next();!_.done;_=w.next()){var E=_.value.codePointAt(0);console.assert(E!==void 0&&E<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),E!==void 0&&E<=255&&(S[T++]=E)}}catch(D){y={error:D}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(y)throw y.error}}return S}function f(x){return/^[\u0000-\u007F]*$/.test(x)}function h(x){var y,g,C="";try{for(var S=i(x),T=S.next();!T.done;T=S.next()){var w=T.value,_=w.codePointAt(0);C+=_!==void 0&&_>=65&&_<=90?String.fromCodePoint(_+32):w}}catch(E){y={error:E}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}return C}function d(x){return x.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function v(x,y,g){if(!l.isArray(y))return v(x,Array.from(y),g);for(var C="";g.position<y.length&&x.call(null,y[g.position]);)C+=y[g.position],g.position++;return C}function m(x,y){v(function(g){return o.ASCIIWhiteSpace.test(g)},x,y)}n.isCodeUnitPrefix=p,n.isCodeUnitLessThan=function(x,y){if(p(y,x))return!1;if(p(x,y))return!0;for(var g=0;g<Math.min(x.length,y.length);g++){var C=x.charCodeAt(g),S=y.charCodeAt(g);if(C!==S)return C<S}return!1},n.isomorphicEncode=u,n.isASCIIString=f,n.asciiLowercase=h,n.asciiUppercase=function(x){var y,g,C="";try{for(var S=i(x),T=S.next();!T.done;T=S.next()){var w=T.value,_=w.codePointAt(0);C+=_!==void 0&&_>=97&&_<=122?String.fromCodePoint(_-32):w}}catch(E){y={error:E}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}return C},n.asciiCaseInsensitiveMatch=function(x,y){return h(x)===h(y)},n.asciiEncode=function(x){return console.assert(f(x),"asciiEncode requires an ASCII string."),u(x)},n.asciiDecode=function(x){var y,g;try{for(var C=i(x),S=C.next();!S.done;S=C.next()){var T=S.value;console.assert(c.isASCIIByte(T),"asciiDecode requires an ASCII byte sequence.")}}catch(w){y={error:w}}finally{try{S&&!S.done&&(g=C.return)&&g.call(C)}finally{if(y)throw y.error}}return s.isomorphicDecode(x)},n.stripNewlines=function(x){return x.replace(/[\n\r]/g,"")},n.normalizeNewlines=function(x){return x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},n.stripLeadingAndTrailingASCIIWhitespace=d,n.stripAndCollapseASCIIWhitespace=function(x){return d(x.replace(/[\t\n\f\r ]{2,}/g," "))},n.collectASequenceOfCodePoints=v,n.skipASCIIWhitespace=m,n.strictlySplit=function x(y,g){if(!l.isArray(y))return x(Array.from(y),g);var C={position:0},S=[],T=v(function(w){return g!==w},y,C);for(S.push(T);C.position<y.length;)console.assert(y[C.position]===g,"strictlySplit found no delimiter in input string."),C.position++,T=v(function(w){return g!==w},y,C),S.push(T);return S},n.splitAStringOnASCIIWhitespace=function x(y){if(!l.isArray(y))return x(Array.from(y));var g={position:0},C=[];for(m(y,g);g.position<y.length;){var S=v(function(T){return!o.ASCIIWhiteSpace.test(T)},y,g);C.push(S),m(y,g)}return C},n.splitAStringOnCommas=function x(y){if(!l.isArray(y))return x(Array.from(y));for(var g={position:0},C=[];g.position<y.length;){var S=v(function(T){return T!==","},y,g);C.push(d(S)),g.position<y.length&&(console.assert(y[g.position]===",","splitAStringOnCommas found no delimiter in input string."),g.position++)}return C},n.concatenate=function(x,y){return y===void 0&&(y=""),x.length===0?"":x.join(y)}},function(a,n,r){var i=this&&this.__values||function(s){var c=typeof Symbol=="function"&&Symbol.iterator,l=c&&s[c],p=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&p>=s.length&&(s=void 0),{value:s&&s[p++],done:!s}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(97);n.abort_add=function(s,c){c._abortedFlag||c._abortAlgorithms.add(s)},n.abort_remove=function(s,c){c._abortAlgorithms.delete(s)},n.abort_signalAbort=function(s){var c,l;if(!s._abortedFlag){s._abortedFlag=!0;try{for(var p=i(s._abortAlgorithms),u=p.next();!u.done;u=p.next())u.value.call(s)}catch(f){c={error:f}}finally{try{u&&!u.done&&(l=p.return)&&l.call(p)}finally{if(c)throw c.error}}s._abortAlgorithms.clear(),o.event_fireAnEvent("abort",s)}}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(150),o=function(){function s(){}return s.asNode=function(c){if(i.Guard.isNode(c))return c;throw new Error("Invalid object. Node expected.")},s}();n.Cast=o},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){}return Object.defineProperty(s.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.add=function(c){throw new Error("Cannot add to an empty set.")},s.prototype.clear=function(){},s.prototype.delete=function(c){return!1},s.prototype.forEach=function(c,l){},s.prototype.has=function(c){return!1},s.prototype[Symbol.iterator]=function(){return new o},s.prototype.entries=function(){return new o},s.prototype.keys=function(){return new o},s.prototype.values=function(){return new o},Object.defineProperty(s.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),s}();n.EmptySet=i;var o=function(){function s(){}return s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){return{done:!0,value:null}},s}()},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.SchemeStart=0]="SchemeStart",i[i.Scheme=1]="Scheme",i[i.NoScheme=2]="NoScheme",i[i.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",i[i.PathOrAuthority=4]="PathOrAuthority",i[i.Relative=5]="Relative",i[i.RelativeSlash=6]="RelativeSlash",i[i.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",i[i.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",i[i.Authority=9]="Authority",i[i.Host=10]="Host",i[i.Hostname=11]="Hostname",i[i.Port=12]="Port",i[i.File=13]="File",i[i.FileSlash=14]="FileSlash",i[i.FileHost=15]="FileHost",i[i.PathStart=16]="PathStart",i[i.Path=17]="Path",i[i.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",i[i.Query=19]="Query",i[i.Fragment=20]="Fragment"}(n.ParserState||(n.ParserState={})),n.OpaqueOrigin=["","",null,null]},function(a,n,r){var i=r(245),o=r(247);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=S,n.resolve=function(T,w){return S(T,!1,!0).resolve(w)},n.resolveObject=function(T,w){return T?S(T,!1,!0).resolveObject(w):w},n.format=function(T){return o.isString(T)&&(T=S(T)),T instanceof s?T.format():s.prototype.format.call(T)},n.Url=s;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),f=["'"].concat(u),h=["%","/","?",";","#"].concat(f),d=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=r(248);function S(T,w,_){if(T&&o.isObject(T)&&T instanceof s)return T;var E=new s;return E.parse(T,w,_),E}s.prototype.parse=function(T,w,_){if(!o.isString(T))throw new TypeError("Parameter 'url' must be a string, not "+typeof T);var E=T.indexOf("?"),D=E!==-1&&E<T.indexOf("#")?"?":"#",O=T.split(D);O[0]=O[0].replace(/\\/g,"/");var M=T=O.join(D);if(M=M.trim(),!_&&T.split("#").length===1){var N=p.exec(M);if(N)return this.path=M,this.href=M,this.pathname=N[1],N[2]?(this.search=N[2],this.query=w?C.parse(this.search.substr(1)):this.search.substr(1)):w&&(this.search="",this.query={}),this}var R=c.exec(M);if(R){var B=(R=R[0]).toLowerCase();this.protocol=B,M=M.substr(R.length)}if(_||R||M.match(/^\/\/[^@\/]+@[^@\/]+/)){var I=M.substr(0,2)==="//";!I||R&&y[R]||(M=M.substr(2),this.slashes=!0)}if(!y[R]&&(I||R&&!g[R])){for(var P,L,k=-1,A=0;A<d.length;A++)(j=M.indexOf(d[A]))!==-1&&(k===-1||j<k)&&(k=j);for((L=k===-1?M.lastIndexOf("@"):M.lastIndexOf("@",k))!==-1&&(P=M.slice(0,L),M=M.slice(L+1),this.auth=decodeURIComponent(P)),k=-1,A=0;A<h.length;A++){var j;(j=M.indexOf(h[A]))!==-1&&(k===-1||j<k)&&(k=j)}k===-1&&(k=M.length),this.host=M.slice(0,k),M=M.slice(k),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var K=this.hostname.split(/\./),Y=(A=0,K.length);A<Y;A++){var q=K[A];if(q&&!q.match(v)){for(var Z="",re=0,ae=q.length;re<ae;re++)q.charCodeAt(re)>127?Z+="x":Z+=q[re];if(!Z.match(v)){var ee=K.slice(0,A),F=K.slice(A+1),b=q.match(m);b&&(ee.push(b[1]),F.unshift(b[2])),F.length&&(M="/"+F.join(".")+M),this.hostname=ee.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=i.toASCII(this.hostname));var G=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+G,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),M[0]!=="/"&&(M="/"+M))}if(!x[B])for(A=0,Y=f.length;A<Y;A++){var z=f[A];if(M.indexOf(z)!==-1){var W=encodeURIComponent(z);W===z&&(W=escape(z)),M=M.split(z).join(W)}}var $=M.indexOf("#");$!==-1&&(this.hash=M.substr($),M=M.slice(0,$));var J=M.indexOf("?");if(J!==-1?(this.search=M.substr(J),this.query=M.substr(J+1),w&&(this.query=C.parse(this.query)),M=M.slice(0,J)):w&&(this.search="",this.query={}),M&&(this.pathname=M),g[B]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var ne=this.search||"";this.path=G+ne}return this.href=this.format(),this},s.prototype.format=function(){var T=this.auth||"";T&&(T=(T=encodeURIComponent(T)).replace(/%3A/i,":"),T+="@");var w=this.protocol||"",_=this.pathname||"",E=this.hash||"",D=!1,O="";this.host?D=T+this.host:this.hostname&&(D=T+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(D+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(O=C.stringify(this.query));var M=this.search||O&&"?"+O||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||g[w])&&D!==!1?(D="//"+(D||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):D||(D=""),E&&E.charAt(0)!=="#"&&(E="#"+E),M&&M.charAt(0)!=="?"&&(M="?"+M),w+D+(_=_.replace(/[?#]/g,function(N){return encodeURIComponent(N)}))+(M=M.replace("#","%23"))+E},s.prototype.resolve=function(T){return this.resolveObject(S(T,!1,!0)).format()},s.prototype.resolveObject=function(T){if(o.isString(T)){var w=new s;w.parse(T,!1,!0),T=w}for(var _=new s,E=Object.keys(this),D=0;D<E.length;D++){var O=E[D];_[O]=this[O]}if(_.hash=T.hash,T.href==="")return _.href=_.format(),_;if(T.slashes&&!T.protocol){for(var M=Object.keys(T),N=0;N<M.length;N++){var R=M[N];R!=="protocol"&&(_[R]=T[R])}return g[_.protocol]&&_.hostname&&!_.pathname&&(_.path=_.pathname="/"),_.href=_.format(),_}if(T.protocol&&T.protocol!==_.protocol){if(!g[T.protocol]){for(var B=Object.keys(T),I=0;I<B.length;I++){var P=B[I];_[P]=T[P]}return _.href=_.format(),_}if(_.protocol=T.protocol,T.host||y[T.protocol])_.pathname=T.pathname;else{for(var L=(T.pathname||"").split("/");L.length&&!(T.host=L.shift()););T.host||(T.host=""),T.hostname||(T.hostname=""),L[0]!==""&&L.unshift(""),L.length<2&&L.unshift(""),_.pathname=L.join("/")}if(_.search=T.search,_.query=T.query,_.host=T.host||"",_.auth=T.auth,_.hostname=T.hostname||T.host,_.port=T.port,_.pathname||_.search){var k=_.pathname||"",A=_.search||"";_.path=k+A}return _.slashes=_.slashes||T.slashes,_.href=_.format(),_}var j=_.pathname&&_.pathname.charAt(0)==="/",H=T.host||T.pathname&&T.pathname.charAt(0)==="/",K=H||j||_.host&&T.pathname,Y=K,q=_.pathname&&_.pathname.split("/")||[],Z=(L=T.pathname&&T.pathname.split("/")||[],_.protocol&&!g[_.protocol]);if(Z&&(_.hostname="",_.port=null,_.host&&(q[0]===""?q[0]=_.host:q.unshift(_.host)),_.host="",T.protocol&&(T.hostname=null,T.port=null,T.host&&(L[0]===""?L[0]=T.host:L.unshift(T.host)),T.host=null),K=K&&(L[0]===""||q[0]==="")),H)_.host=T.host||T.host===""?T.host:_.host,_.hostname=T.hostname||T.hostname===""?T.hostname:_.hostname,_.search=T.search,_.query=T.query,q=L;else if(L.length)q||(q=[]),q.pop(),q=q.concat(L),_.search=T.search,_.query=T.query;else if(!o.isNullOrUndefined(T.search))return Z&&(_.hostname=_.host=q.shift(),(b=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=b.shift(),_.host=_.hostname=b.shift())),_.search=T.search,_.query=T.query,o.isNull(_.pathname)&&o.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_;if(!q.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var re=q.slice(-1)[0],ae=(_.host||T.host||q.length>1)&&(re==="."||re==="..")||re==="",ee=0,F=q.length;F>=0;F--)(re=q[F])==="."?q.splice(F,1):re===".."?(q.splice(F,1),ee++):ee&&(q.splice(F,1),ee--);if(!K&&!Y)for(;ee--;ee)q.unshift("..");!K||q[0]===""||q[0]&&q[0].charAt(0)==="/"||q.unshift(""),ae&&q.join("/").substr(-1)!=="/"&&q.push("");var b,G=q[0]===""||q[0]&&q[0].charAt(0)==="/";return Z&&(_.hostname=_.host=G?"":q.length?q.shift():"",(b=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=b.shift(),_.host=_.hostname=b.shift())),(K=K||_.host&&q.length)&&!G&&q.unshift(""),q.length?_.pathname=q.join("/"):(_.pathname=null,_.path=null),o.isNull(_.pathname)&&o.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=T.auth||_.auth,_.slashes=_.slashes||T.slashes,_.href=_.format(),_},s.prototype.parseHost=function(){var T=this.host,w=l.exec(T);w&&((w=w[0])!==":"&&(this.port=w.substr(1)),T=T.substr(0,T.length-w.length)),T&&(this.hostname=T)}},function(a,n,r){(function(i,o){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(c){n&&n.nodeType,i&&i.nodeType;var l=typeof o=="object"&&o;l.global!==l&&l.window!==l&&l.self;var p,u=2147483647,f=/^xn--/,h=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,x=String.fromCharCode;function y(O){throw new RangeError(v[O])}function g(O,M){for(var N=O.length,R=[];N--;)R[N]=M(O[N]);return R}function C(O,M){var N=O.split("@"),R="";return N.length>1&&(R=N[0]+"@",O=N[1]),R+g((O=O.replace(d,".")).split("."),M).join(".")}function S(O){for(var M,N,R=[],B=0,I=O.length;B<I;)(M=O.charCodeAt(B++))>=55296&&M<=56319&&B<I?(64512&(N=O.charCodeAt(B++)))==56320?R.push(((1023&M)<<10)+(1023&N)+65536):(R.push(M),B--):R.push(M);return R}function T(O){return g(O,function(M){var N="";return M>65535&&(N+=x((M-=65536)>>>10&1023|55296),M=56320|1023&M),N+=x(M)}).join("")}function w(O,M){return O+22+75*(O<26)-((M!=0)<<5)}function _(O,M,N){var R=0;for(O=N?m(O/700):O>>1,O+=m(O/M);O>455;R+=36)O=m(O/35);return m(R+36*O/(O+38))}function E(O){var M,N,R,B,I,P,L,k,A,j,H,K=[],Y=O.length,q=0,Z=128,re=72;for((N=O.lastIndexOf("-"))<0&&(N=0),R=0;R<N;++R)O.charCodeAt(R)>=128&&y("not-basic"),K.push(O.charCodeAt(R));for(B=N>0?N+1:0;B<Y;){for(I=q,P=1,L=36;B>=Y&&y("invalid-input"),((k=(H=O.charCodeAt(B++))-48<10?H-22:H-65<26?H-65:H-97<26?H-97:36)>=36||k>m((u-q)/P))&&y("overflow"),q+=k*P,!(k<(A=L<=re?1:L>=re+26?26:L-re));L+=36)P>m(u/(j=36-A))&&y("overflow"),P*=j;re=_(q-I,M=K.length+1,I==0),m(q/M)>u-Z&&y("overflow"),Z+=m(q/M),q%=M,K.splice(q++,0,Z)}return T(K)}function D(O){var M,N,R,B,I,P,L,k,A,j,H,K,Y,q,Z,re=[];for(K=(O=S(O)).length,M=128,N=0,I=72,P=0;P<K;++P)(H=O[P])<128&&re.push(x(H));for(R=B=re.length,B&&re.push("-");R<K;){for(L=u,P=0;P<K;++P)(H=O[P])>=M&&H<L&&(L=H);for(L-M>m((u-N)/(Y=R+1))&&y("overflow"),N+=(L-M)*Y,M=L,P=0;P<K;++P)if((H=O[P])<M&&++N>u&&y("overflow"),H==M){for(k=N,A=36;!(k<(j=A<=I?1:A>=I+26?26:A-I));A+=36)Z=k-j,q=36-j,re.push(x(w(j+Z%q,0))),k=m(Z/q);re.push(x(w(k,0))),I=_(N,Y,R==B),N=0,++R}++N,++M}return re.join("")}p={version:"1.4.1",ucs2:{decode:S,encode:T},decode:E,encode:D,toASCII:function(O){return C(O,function(M){return h.test(M)?"xn--"+D(M):M})},toUnicode:function(O){return C(O,function(M){return f.test(M)?E(M.slice(4).toLowerCase()):M})}},(s=function(){return p}.call(n,r,n,i))===void 0||(i.exports=s)})()}).call(this,r(246)(a),r(78))},function(a,n){a.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(a,n,r){a.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}},function(a,n,r){n.decode=n.parse=r(249),n.encode=n.stringify=r(250)},function(a,n,r){function i(s,c){return Object.prototype.hasOwnProperty.call(s,c)}a.exports=function(s,c,l,p){c=c||"&",l=l||"=";var u={};if(typeof s!="string"||s.length===0)return u;var f=/\+/g;s=s.split(c);var h=1e3;p&&typeof p.maxKeys=="number"&&(h=p.maxKeys);var d=s.length;h>0&&d>h&&(d=h);for(var v=0;v<d;++v){var m,x,y,g,C=s[v].replace(f,"%20"),S=C.indexOf(l);S>=0?(m=C.substr(0,S),x=C.substr(S+1)):(m=C,x=""),y=decodeURIComponent(m),g=decodeURIComponent(x),i(u,y)?o(u[y])?u[y].push(g):u[y]=[u[y],g]:u[y]=g}return u};var o=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},function(a,n,r){var i=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};a.exports=function(l,p,u,f){return p=p||"&",u=u||"=",l===null&&(l=void 0),typeof l=="object"?s(c(l),function(h){var d=encodeURIComponent(i(h))+u;return o(l[h])?s(l[h],function(v){return d+encodeURIComponent(i(v))}).join(p):d+encodeURIComponent(i(l[h]))}).join(p):f?encodeURIComponent(i(f))+u+encodeURIComponent(i(l)):""};var o=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function s(l,p){if(l.map)return l.map(p);for(var u=[],f=0;f<l.length;f++)u.push(p(l[f],f));return u}var c=Object.keys||function(l){var p=[];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&p.push(u);return p}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(52);n.attr_setAnExistingAttributeValue=function(o,s){o._element===null?o._value=s:i.element_change(o,o._element,s)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(108),o=r(30),s=r(52);n.tokenList_validationSteps=function(c,l){if(!o.dom_hasSupportedTokens(c._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+c._attribute._localName+"'.");return o.dom_getSupportedTokens(c._attribute._localName).has(l.toLowerCase())},n.tokenList_updateSteps=function(c){(c._element.hasAttribute(c._attribute._localName)||c._tokenSet.size!==0)&&s.element_setAnAttributeValue(c._element,c._attribute._localName,i.orderedSet_serialize(c._tokenSet))},n.tokenList_serializeSteps=function(c){return s.element_getAnAttributeValue(c._element,c._attribute._localName)}},function(a,n,r){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&c[l],u=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1);function s(c){return o.isBoolean(c)?c:c.capture||!1}n.eventTarget_flatten=s,n.eventTarget_flattenMore=function(c){var l=s(c),p=!1,u=!1;return o.isBoolean(c)||(p=c.once||!1,u=c.passive||!1),[l,u,p]},n.eventTarget_addEventListener=function(c,l){if(l.callback!==null){for(var p=0;p<c._eventListenerList.length;p++){var u=c._eventListenerList[p];if(u.type===l.type&&u.callback.handleEvent===l.callback.handleEvent&&u.capture===l.capture)return}c._eventListenerList.push(l)}},n.eventTarget_removeEventListener=function(c,l,p){l.removed=!0,c._eventListenerList.splice(p,1)},n.eventTarget_removeAllEventListeners=function(c){var l,p;try{for(var u=i(c._eventListenerList),f=u.next();!f.done;f=u.next())f.value.removed=!0}catch(h){l={error:h}}finally{try{f&&!f.done&&(p=u.return)&&p.call(u)}finally{if(l)throw l.error}}c._eventListenerList.length=0}},function(a,n,r){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&c[l],u=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=r(29);n.parentNode_convertNodesIntoANode=function(c,l){for(var p,u,f=null,h=0;h<c.length;h++){var d=c[h];if(o.isString(d)){var v=s.create_text(l,d);c[h]=v}}if(c.length===1)f=c[0];else{var m=f=s.create_documentFragment(l);try{for(var x=i(c),y=x.next();!y.done;y=x.next())d=y.value,m.appendChild(d)}catch(g){p={error:g}}finally{try{y&&!y.done&&(u=x.return)&&u.call(x)}finally{if(p)throw p.error}}}return f}},function(a,n,r){var i=this&&this.__values||function(w){var _=typeof Symbol=="function"&&Symbol.iterator,E=_&&w[_],D=0;if(E)return E.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&D>=w.length&&(w=void 0),{value:w&&w[D++],done:!w}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(w,_){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var D,O,M=E.call(w),N=[];try{for(;(_===void 0||_-- >0)&&!(D=M.next()).done;)N.push(D.value)}catch(R){O={error:R}}finally{try{D&&!D.done&&(E=M.return)&&E.call(M)}finally{if(O)throw O.error}}return N},s=this&&this.__spread||function(){for(var w=[],_=0;_<arguments.length;_++)w=w.concat(o(arguments[_]));return w};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),l=r(9),p=r(3),u=r(29),f=r(17),h=r(175),d=r(107),v=r(176),m=r(37),x=r(177);function y(w){return w._startNode===w._endNode&&w._startOffset===w._endOffset}function g(w){return f.tree_rootNode(w._startNode)}function C(w,_){return f.tree_rootNode(w)===g(_)&&h.boundaryPoint_position([w,0],_._start)===c.BoundaryPosition.After&&h.boundaryPoint_position([w,f.tree_nodeLength(w)],_._end)===c.BoundaryPosition.Before}function S(w,_){var E=f.tree_isAncestorOf(_._startNode,w,!0),D=f.tree_isAncestorOf(_._endNode,w,!0);return E&&!D||!E&&D}function T(w){var _,E,D,O,M,N,R=u.create_documentFragment(w._startNode._nodeDocument);if(y(w))return R;var B=w._startNode,I=w._startOffset,P=w._endNode,L=w._endOffset;if(B===P&&p.Guard.isCharacterDataNode(B))return(U=v.node_clone(B))._data=d.characterData_substringData(B,I,L-I),m.mutation_append(U,R),d.characterData_replaceData(B,I,L-I,""),R;for(var k=B;!f.tree_isAncestorOf(P,k,!0);){if(k._parent===null)throw new Error("Parent node  is null.");k=k._parent}var A=null;if(!f.tree_isAncestorOf(P,B,!0))try{for(var j=i(k._children),H=j.next();!H.done;H=j.next())if(S(Z=H.value,w)){A=Z;break}}catch(ne){_={error:ne}}finally{try{H&&!H.done&&(E=j.return)&&E.call(j)}finally{if(_)throw _.error}}var K=null;if(!f.tree_isAncestorOf(B,P,!0))for(var Y=s(k._children),q=Y.length-1;q>0;q--){var Z;if(S(Z=Y[q],w)){K=Z;break}}var re,ae,ee=[];try{for(var F=i(k._children),b=F.next();!b.done;b=F.next())if(C(J=b.value,w)){if(p.Guard.isDocumentTypeNode(J))throw new l.HierarchyRequestError;ee.push(J)}}catch(ne){D={error:ne}}finally{try{b&&!b.done&&(O=F.return)&&O.call(F)}finally{if(D)throw D.error}}if(f.tree_isAncestorOf(P,B,!0))re=B,ae=I;else{for(var G=B;G._parent!==null&&!f.tree_isAncestorOf(P,G._parent);)G=G._parent;if(G._parent===null)throw new Error("Parent node is null.");re=G._parent,ae=1+f.tree_index(G)}if(p.Guard.isCharacterDataNode(A))(U=v.node_clone(B))._data=d.characterData_substringData(B,I,f.tree_nodeLength(B)-I),m.mutation_append(U,R),d.characterData_replaceData(B,I,f.tree_nodeLength(B)-I,"");else if(A!==null){var U=v.node_clone(A);m.mutation_append(U,R);var z=T(u.create_range([B,I],[A,f.tree_nodeLength(A)]));m.mutation_append(z,U)}try{for(var W=i(ee),$=W.next();!$.done;$=W.next()){var J=$.value;m.mutation_append(J,R)}}catch(ne){M={error:ne}}finally{try{$&&!$.done&&(N=W.return)&&N.call(W)}finally{if(M)throw M.error}}return p.Guard.isCharacterDataNode(K)?((U=v.node_clone(P))._data=d.characterData_substringData(P,0,L),m.mutation_append(U,R),d.characterData_replaceData(P,0,L,"")):K!==null&&(U=v.node_clone(K),m.mutation_append(U,R),z=T(u.create_range([K,0],[P,L])),m.mutation_append(z,U)),w._start=[re,ae],w._end=[re,ae],R}n.range_collapsed=y,n.range_root=g,n.range_isContained=C,n.range_isPartiallyContained=S,n.range_setTheStart=function(w,_,E){if(p.Guard.isDocumentTypeNode(_))throw new l.InvalidNodeTypeError;if(E>f.tree_nodeLength(_))throw new l.IndexSizeError;var D=[_,E];g(w)===f.tree_rootNode(_)&&h.boundaryPoint_position(D,w._end)!==c.BoundaryPosition.After||(w._end=D),w._start=D},n.range_setTheEnd=function(w,_,E){if(p.Guard.isDocumentTypeNode(_))throw new l.InvalidNodeTypeError;if(E>f.tree_nodeLength(_))throw new l.IndexSizeError;var D=[_,E];g(w)===f.tree_rootNode(_)&&h.boundaryPoint_position(D,w._start)!==c.BoundaryPosition.Before||(w._start=D),w._end=D},n.range_select=function(w,_){var E=w._parent;if(E===null)throw new l.InvalidNodeTypeError;var D=f.tree_index(w);_._start=[E,D],_._end=[E,D+1]},n.range_extract=T,n.range_cloneTheContents=function w(_){var E,D,O,M,N,R,B=u.create_documentFragment(_._startNode._nodeDocument);if(y(_))return B;var I=_._startNode,P=_._startOffset,L=_._endNode,k=_._endOffset;I===L&&p.Guard.isCharacterDataNode(I)&&((b=v.node_clone(I))._data=d.characterData_substringData(I,P,k-P),m.mutation_append(b,B));for(var A=I;!f.tree_isAncestorOf(L,A,!0);){if(A._parent===null)throw new Error("Parent node  is null.");A=A._parent}var j=null;if(!f.tree_isAncestorOf(L,I,!0))try{for(var H=i(A._children),K=H.next();!K.done;K=H.next())if(S(re=K.value,_)){j=re;break}}catch($){E={error:$}}finally{try{K&&!K.done&&(D=H.return)&&D.call(H)}finally{if(E)throw E.error}}var Y=null;if(!f.tree_isAncestorOf(I,L,!0))for(var q=s(A._children),Z=q.length-1;Z>0;Z--){var re;if(S(re=q[Z],_)){Y=re;break}}var ae=[];try{for(var ee=i(A._children),F=ee.next();!F.done;F=ee.next())if(C(W=F.value,_)){if(p.Guard.isDocumentTypeNode(W))throw new l.HierarchyRequestError;ae.push(W)}}catch($){O={error:$}}finally{try{F&&!F.done&&(M=ee.return)&&M.call(ee)}finally{if(O)throw O.error}}if(p.Guard.isCharacterDataNode(j))(b=v.node_clone(I))._data=d.characterData_substringData(I,P,f.tree_nodeLength(I)-P),m.mutation_append(b,B);else if(j!==null){var b=v.node_clone(j);m.mutation_append(b,B);var G=w(u.create_range([I,P],[j,f.tree_nodeLength(j)]));m.mutation_append(G,b)}try{for(var U=i(ae),z=U.next();!z.done;z=U.next()){var W=z.value,b=v.node_clone(W);m.mutation_append(b,B)}}catch($){N={error:$}}finally{try{z&&!z.done&&(R=U.return)&&R.call(U)}finally{if(N)throw N.error}}return p.Guard.isCharacterDataNode(Y)?((b=v.node_clone(L))._data=d.characterData_substringData(L,0,k),m.mutation_append(b,B)):Y!==null&&(b=v.node_clone(Y),B.append(b),G=T(u.create_range([Y,0],[L,k])),m.mutation_append(G,b)),B},n.range_insert=function(w,_){var E,D;if(p.Guard.isProcessingInstructionNode(_._startNode)||p.Guard.isCommentNode(_._startNode)||p.Guard.isTextNode(_._startNode)&&_._startNode._parent===null||_._startNode===w)throw new l.HierarchyRequestError;var O,M=null;if(p.Guard.isTextNode(_._startNode))M=_._startNode;else{var N=0;try{for(var R=i(_._startNode._children),B=R.next();!B.done;B=R.next()){var I=B.value;if(N===_._startOffset){M=I;break}N++}}catch(L){E={error:L}}finally{try{B&&!B.done&&(D=R.return)&&D.call(R)}finally{if(E)throw E.error}}}if(M===null)O=_._startNode;else{if(M._parent===null)throw new Error("Parent node is null.");O=M._parent}m.mutation_ensurePreInsertionValidity(w,O,M),p.Guard.isTextNode(_._startNode)&&(M=x.text_split(_._startNode,_._startOffset)),w===M&&(M=w._nextSibling),w._parent!==null&&m.mutation_remove(w,w._parent);var P=M===null?f.tree_nodeLength(O):f.tree_index(M);p.Guard.isDocumentFragmentNode(w)?P+=f.tree_nodeLength(w):P++,m.mutation_preInsert(w,O,M),y(_)&&(_._end=[O,P])},n.range_getContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=f.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!C(D,w);)D=f.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var O={done:!1,value:D};return D=f.tree_getNextDescendantNode(E,D),O}}},_},n.range_getPartiallyContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=f.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!S(D,w);)D=f.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var O={done:!1,value:D};return D=f.tree_getNextDescendantNode(E,D),O}}},_}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(9);n.selectors_scopeMatchASelectorsString=function(o,s){throw new i.NotSupportedError}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),o=r(105);n.treeWalker_traverseChildren=function(s,c){for(var l=c?s._current._firstChild:s._current._lastChild;l!==null;){var p=o.traversal_filter(s,l);if(p===i.FilterResult.Accept)return s._current=l,l;if(p===i.FilterResult.Skip){var u=c?l._firstChild:l._lastChild;if(u!==null){l=u;continue}}for(;l!==null;){var f=c?l._nextSibling:l._previousSibling;if(f!==null){l=f;break}var h=l._parent;if(h===null||h===s._root||h===s._current)return null;l=h}}return null},n.treeWalker_traverseSiblings=function(s,c){var l=s._current;if(l===s._root)return null;for(;;){for(var p=c?l._nextSibling:l._previousSibling;p!==null;){l=p;var u=o.traversal_filter(s,l);if(u===i.FilterResult.Accept)return s._current=l,l;p=c?l._firstChild:l._lastChild,u!==i.FilterResult.Reject&&p!==null||(p=c?l._nextSibling:l._previousSibling)}if((l=l._parent)===null||l===s._root||o.traversal_filter(s,l)===i.FilterResult.Accept)return null}}},function(a,n,r){r(89),r(74);var i,o=this&&this.__extends||(i=function(f,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var m in v)v.hasOwnProperty(m)&&(d[m]=v[m])})(f,h)},function(f,h){function d(){this.constructor=f}i(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),c=r(2),l=r(50),p=r(3),u=function(f){function h(d,v){var m=f.call(this,d)||this;return m._indentation={},m._lengthToLastNewline=0,m._writerOptions=s.applyDefaults(v,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),m}return o(h,f),h.prototype.serialize=function(d){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},d.nodeType!==c.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(d,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},h.prototype.declaration=function(d,v,m){this._beginLine(),this._refs.markup+='<?xml version="'+d+'"',v!==void 0&&(this._refs.markup+=' encoding="'+v+'"'),m!==void 0&&(this._refs.markup+=' standalone="'+(m?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},h.prototype.docType=function(d,v,m){this._beginLine(),this._refs.markup+=v&&m?"<!DOCTYPE "+d+' PUBLIC "'+v+'" "'+m+'">':v?"<!DOCTYPE "+d+' PUBLIC "'+v+'">':m?"<!DOCTYPE "+d+' SYSTEM "'+m+'">':"<!DOCTYPE "+d+">",this._endLine()},h.prototype.openTagBegin=function(d){this._beginLine(),this._refs.markup+="<"+d},h.prototype.openTagEnd=function(d,v,m){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!v&&!m){for(var x=!0,y=!0,g=this.currentNode.firstChild,C=0,S=0;g;){if(p.Guard.isExclusiveTextNode(g))S++;else{if(!p.Guard.isCDATASectionNode(g)){x=!1,y=!1;break}C++}g.data!==""&&(y=!1),g=g.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&x&&(C<=1&&S===0||C===0),this._refs.emptyNode=y}(m||v||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+d+">":this._refs.markup+=m?" />":v||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},h.prototype.closeTag=function(d){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+d+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},h.prototype.attribute=function(d,v){var m=d+'="'+v+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+m.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+m):this._refs.markup+=" "+m},h.prototype.text=function(d){d!==""&&(this._beginLine(),this._refs.markup+=d,this._endLine())},h.prototype.cdata=function(d){d!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+d+"]]>",this._endLine())},h.prototype.comment=function(d){this._beginLine(),this._refs.markup+="<!--"+d+"-->",this._endLine()},h.prototype.instruction=function(d,v){this._beginLine(),this._refs.markup+="<?"+(v===""?d:d+" "+v)+"?>",this._endLine()},h.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},h.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},h.prototype._indent=function(d){if(d<=0)return"";if(this._indentation[d]!==void 0)return this._indentation[d];var v=this._writerOptions.indent.repeat(d);return this._indentation[d]=v,v},h}(l.BaseWriter);n.XMLWriter=u},function(a,n,r){var i=r(47),o=r(35);a.exports="".repeat||function(s){var c=String(o(this)),l="",p=i(s);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;p>0;(p>>>=1)&&(c+=c))1&p&&(l+=c);return l}},function(a,n,r){r(31),r(32),r(33),r(19),r(178),r(20),r(22),r(23);var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(67),l=r(1),p=function(u){function f(h,d){var v=u.call(this,h)||this;return v._writerOptions=l.applyDefaults(d,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),v}return o(f,u),f.prototype.serialize=function(h){var d=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),v=new c.ObjectWriter(this._builderOptions,d).serialize(h);return this._beginLine(this._writerOptions,0)+this._convertObject(v,this._writerOptions)},f.prototype._convertObject=function(h,d,v){var m,x,y=this;v===void 0&&(v=0);var g="",C=this._isLeafNode(h);if(l.isArray(h)){g+="[";var S=h.length,T=0;try{for(var w=s(h),_=w.next();!_.done;_=w.next()){var E=_.value;g+=this._endLine(d,v+1)+this._beginLine(d,v+1)+this._convertObject(E,d,v+1),T<S-1&&(g+=","),T++}}catch(M){m={error:M}}finally{try{_&&!_.done&&(x=w.return)&&x.call(w)}finally{if(m)throw m.error}}g+=this._endLine(d,v)+this._beginLine(d,v),g+="]"}else if(l.isObject(h)){g+="{";var D=l.objectLength(h),O=0;l.forEachObject(h,function(M,N){C&&d.prettyPrint?g+=" ":g+=y._endLine(d,v+1)+y._beginLine(d,v+1),g+=y._key(M),d.prettyPrint&&(g+=" "),g+=y._convertObject(N,d,v+1),O<D-1&&(g+=","),O++},this),C&&d.prettyPrint?g+=" ":g+=this._endLine(d,v)+this._beginLine(d,v),g+="}"}else g+=this._val(h);return g},f.prototype._beginLine=function(h,d){if(!h.prettyPrint)return"";var v=h.offset+d+1;return v>0?new Array(v).join(h.indent):""},f.prototype._endLine=function(h,d){return h.prettyPrint?h.newline:""},f.prototype._key=function(h){return'"'+h+'":'},f.prototype._val=function(h){return JSON.stringify(h)},f.prototype._isLeafNode=function(h){return this._descendantCount(h)<=1},f.prototype._descendantCount=function(h,d){var v=this;return d===void 0&&(d=0),l.isArray(h)?l.forEachArray(h,function(m){return d+=v._descendantCount(m,d)},this):l.isObject(h)?l.forEachObject(h,function(m,x){return d+=v._descendantCount(x,d)},this):d++,d},f}(r(50).BaseWriter);n.JSONWriter=p},function(a,n,r){r(31),r(32),r(33),r(19),r(178),r(89),r(20),r(22),r(23);var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&u[f],d=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&d>=u.length&&(u=void 0),{value:u&&u[d++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(67),l=r(1),p=function(u){function f(h,d){var v=u.call(this,h)||this;if(v._writerOptions=l.applyDefaults(d,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),v._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(v._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return v}return o(f,u),f.prototype.serialize=function(h){var d=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),v=new c.ObjectWriter(this._builderOptions,d).serialize(h),m=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(v,this._writerOptions,0);return m.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(m=m.slice(0,-this._writerOptions.newline.length)),m},f.prototype._convertObject=function(h,d,v,m){var x,y,g=this;m===void 0&&(m=!1);var C="";if(l.isArray(h))try{for(var S=s(h),T=S.next();!T.done;T=S.next()){var w=T.value;C+=this._beginLine(d,v,!0),l.isObject(w)?l.isEmpty(w)?C+='""'+this._endLine(d):C+=this._convertObject(w,d,v,!0):C+=this._val(w)+this._endLine(d)}}catch(_){x={error:_}}finally{try{T&&!T.done&&(y=S.return)&&y.call(S)}finally{if(x)throw x.error}}else l.forEachObject(h,function(_,E){m?(C+=g._key(_),m=!1):C+=g._beginLine(d,v)+g._key(_),l.isObject(E)?l.isEmpty(E)?C+=' ""'+g._endLine(d):C+=g._endLine(d)+g._convertObject(E,d,v+1):C+=" "+g._val(E)+g._endLine(d)},this);return C},f.prototype._beginLine=function(h,d,v){v===void 0&&(v=!1);var m=h.offset+d+1,x=new Array(m).join(h.indent);return v?x.substr(0,x.length-2)+"-"+x.substr(-1,1):x},f.prototype._endLine=function(h){return h.newline},f.prototype._key=function(h){return'"'+h+'":'},f.prototype._val=function(h){return JSON.stringify(h)},f}(r(50).BaseWriter);n.YAMLWriter=p},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),r(110).dom.setFeatures(!0);var i=r(110);n.DOMImplementation=i.DOMImplementation;var o=r(271);n.DOMParser=o.DOMParser;var s=r(274);n.XMLSerializer=s.XMLSerializer},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),o=r(0),s=function(){function c(){}return c.prototype.before=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var u=i.Cast.asNode(this),f=u._parent;if(f!==null){for(var h=u._previousSibling,d=!0;d&&h;){d=!1;for(var v=0;v<l.length;v++){var m=l[v];if(m===h){h=h._previousSibling,d=!0;break}}}var x=o.parentNode_convertNodesIntoANode(l,u._nodeDocument);h=h===null?f._firstChild:h._nextSibling,o.mutation_preInsert(x,f,h)}},c.prototype.after=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var u=i.Cast.asNode(this),f=u._parent;if(f){for(var h=u._nextSibling,d=!0;d&&h;){d=!1;for(var v=0;v<l.length;v++){var m=l[v];if(m===h){h=h._nextSibling,d=!0;break}}}var x=o.parentNode_convertNodesIntoANode(l,u._nodeDocument);o.mutation_preInsert(x,f,h)}},c.prototype.replaceWith=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var u=i.Cast.asNode(this),f=u._parent;if(f){for(var h=u._nextSibling,d=!0;d&&h;){d=!1;for(var v=0;v<l.length;v++){var m=l[v];if(m===h){h=h._nextSibling,d=!0;break}}}var x=o.parentNode_convertNodesIntoANode(l,u._nodeDocument);u._parent===f?o.mutation_replace(u,x,f):o.mutation_preInsert(x,f,h)}},c.prototype.remove=function(){var l=i.Cast.asNode(this),p=l._parent;p&&o.mutation_remove(l,p)},c}();n.ChildNodeImpl=s},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){};n.DocumentOrShadowRootImpl=i},function(a,n,r){var i=this&&this.__values||function(p){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&p[u],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=r(3),c=r(7),l=function(){function p(u){this._nodeList=[],this._recordQueue=[],this._callback=u;var f=o.dom.window;c.set.append(f._mutationObservers,this)}return p.prototype.observe=function(u,f){var h,d;if((f=f||{childList:!1,subtree:!1}).attributeOldValue===void 0&&f.attributeFilter===void 0||f.attributes!==void 0||(f.attributes=!0),f.characterDataOldValue!==void 0&&f.characterData===void 0&&(f.characterData=!0),!f.childList&&!f.attributes&&!f.characterData)throw new TypeError;if(f.attributeOldValue&&!f.attributes)throw new TypeError;if(f.attributeFilter!==void 0&&!f.attributes)throw new TypeError;if(f.characterDataOldValue&&!f.characterData)throw new TypeError;var v=!1,m=f,x=function(S){var T,w;if(S.observer===y){v=!0;try{for(var _=(T=void 0,i(y._nodeList)),E=_.next();!E.done;E=_.next()){var D=E.value;c.list.remove(D._registeredObserverList,function(O){return s.Guard.isTransientRegisteredObserver(O)&&O.source===S})}}catch(O){T={error:O}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(T)throw T.error}}S.options=m}},y=this;try{for(var g=i(u._registeredObserverList),C=g.next();!C.done;C=g.next())x(C.value)}catch(S){h={error:S}}finally{try{C&&!C.done&&(d=g.return)&&d.call(g)}finally{if(h)throw h.error}}v||(u._registeredObserverList.push({observer:this,options:f}),this._nodeList.push(u))},p.prototype.disconnect=function(){var u,f,h=this;try{for(var d=i(this._nodeList),v=d.next();!v.done;v=d.next()){var m=v.value;c.list.remove(m._registeredObserverList,function(x){return x.observer===h})}}catch(x){u={error:x}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}this._recordQueue=[]},p.prototype.takeRecords=function(){var u=this._recordQueue;return this._recordQueue=[],u},p}();n.MutationObserverImpl=l},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),o=function(){function s(){}return Object.defineProperty(s.prototype,"previousElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._previousSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._nextSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._nextSibling}return null},enumerable:!0,configurable:!0}),s}();n.NonDocumentTypeChildNodeImpl=o},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),o=r(0),s=function(){function c(){}return c.prototype.getElementById=function(l){for(var p=o.tree_getFirstDescendantNode(i.Cast.asNode(this),!1,!1,function(u){return i.Guard.isElementNode(u)});p!==null;){if(p._uniqueIdentifier===l)return p;p=o.tree_getNextDescendantNode(i.Cast.asNode(this),p,!1,!1,function(u){return i.Guard.isElementNode(u)})}return null},c}();n.NonElementParentNodeImpl=s},function(a,n,r){var i=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,u=p&&l[p],f=0;if(u)return u.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&f>=l.length&&(l=void 0),{value:l&&l[f++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(3),s=r(0),c=function(){function l(){}return Object.defineProperty(l.prototype,"children",{get:function(){return s.create_htmlCollection(o.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstElementChild",{get:function(){for(var p=o.Cast.asNode(this)._firstChild;p;){if(o.Guard.isElementNode(p))return p;p=p._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastElementChild",{get:function(){for(var p=o.Cast.asNode(this)._lastChild;p;){if(o.Guard.isElementNode(p))return p;p=p._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"childElementCount",{get:function(){var p,u,f=0;try{for(var h=i(o.Cast.asNode(this)._children),d=h.next();!d.done;d=h.next()){var v=d.value;o.Guard.isElementNode(v)&&f++}}catch(m){p={error:m}}finally{try{d&&!d.done&&(u=h.return)&&u.call(h)}finally{if(p)throw p.error}}return f},enumerable:!0,configurable:!0}),l.prototype.prepend=function(){for(var p=[],u=0;u<arguments.length;u++)p[u]=arguments[u];var f=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(p,f._nodeDocument);s.mutation_preInsert(h,f,f._firstChild)},l.prototype.append=function(){for(var p=[],u=0;u<arguments.length;u++)p[u]=arguments[u];var f=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(p,f._nodeDocument);s.mutation_append(h,f)},l.prototype.querySelector=function(p){var u=o.Cast.asNode(this),f=s.selectors_scopeMatchASelectorsString(p,u);return f.length===0?null:f[0]},l.prototype.querySelectorAll=function(p){var u=o.Cast.asNode(this),f=s.selectors_scopeMatchASelectorsString(p,u);return s.create_nodeListStatic(u,f)},l}();n.ParentNodeImpl=c},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),o=function(){function s(){}return Object.defineProperty(s.prototype,"_name",{get:function(){return this.__name||""},set:function(c){this.__name=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(c){this.__assignedSlot=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"assignedSlot",{get:function(){return i.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),s}();n.SlotableImpl=o},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(102),c=r(9),l=r(3),p=function(u){function f(h){var d=u.call(this)||this;if(l.Guard.isDocumentTypeNode(h.startContainer)||l.Guard.isAttrNode(h.startContainer)||l.Guard.isDocumentTypeNode(h.endContainer)||l.Guard.isAttrNode(h.endContainer))throw new c.InvalidNodeTypeError;return d._start=[h.startContainer,h.startOffset],d._end=[h.endContainer,h.endOffset],d}return o(f,u),f}(s.AbstractRangeImpl);n.StaticRangeImpl=p},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(272);n.DOMParser=i.DOMParserImpl},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),o=r(273),s=function(){function c(){}return c.prototype.parseFromString=function(l,p){if(p==="text/html")throw new Error("HTML parser not implemented.");try{return(u=new o.XMLParserImpl().parse(l))._contentType=p,u}catch(v){var u,f="http://www.mozilla.org/newlayout/xml/parsererror.xml",h=(u=i.create_xmlDocument()).createElementNS(f,"parsererror"),d=u.createElementNS(f,"error");return d.setAttribute("message",v.message),h.appendChild(d),u.appendChild(h),u}},c}();n.DOMParserImpl=s},function(a,n,r){var i=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var m,x,y=v.call(h),g=[];try{for(;(d===void 0||d-- >0)&&!(m=y.next()).done;)g.push(m.value)}catch(C){x={error:C}}finally{try{m&&!m.done&&(v=y.return)&&v.call(y)}finally{if(x)throw x.error}}return g},o=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],m=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(180),c=r(111),l=r(7),p=r(0),u=r(69),f=function(){function h(){}return h.prototype.parse=function(d){for(var v,m,x,y,g=new s.XMLStringLexer(d,{skipWhitespaceOnlyText:!0}),C=p.create_document(),S=C,T=g.nextToken();T.type!==c.TokenType.EOF;){switch(T.type){case c.TokenType.Declaration:var w=T;if(w.version!=="1.0")throw new Error("Invalid xml version: "+w.version);break;case c.TokenType.DocType:var _=T;if(!p.xml_isPubidChar(_.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!p.xml_isLegalChar(_.sysId)||_.sysId.indexOf('"')!==-1&&_.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");S.appendChild(C.implementation.createDocumentType(_.name,_.pubId,_.sysId));break;case c.TokenType.CDATA:var E=T;if(!p.xml_isLegalChar(E.data)||E.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");S.appendChild(C.createCDATASection(E.data));break;case c.TokenType.Comment:var D=T;if(!p.xml_isLegalChar(D.data)||D.data.indexOf("--")!==-1||D.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");S.appendChild(C.createComment(D.data));break;case c.TokenType.PI:var O=T;if(O.target.indexOf(":")!==-1||/^xml$/i.test(O.target))throw new Error("Processing instruction target contains invalid characters.");if(!p.xml_isLegalChar(O.data)||O.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");S.appendChild(C.createProcessingInstruction(O.target,O.data));break;case c.TokenType.Text:var M=T;if(!p.xml_isLegalChar(M.data))throw new Error("Text data contains invalid characters.");S.appendChild(C.createTextNode(this._decodeText(M.data)));break;case c.TokenType.Element:var N=T,R=i(p.namespace_extractQName(N.name),2),B=R[0],I=R[1];if(I.indexOf(":")!==-1||!p.xml_isName(I))throw new Error("Node local name contains invalid characters.");if(B==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var P=S.lookupNamespaceURI(B),L={};try{for(var k=(v=void 0,o(N.attributes)),A=k.next();!A.done;A=k.next()){var j=i(A.value,2),H=j[0],K=j[1];if(H==="xmlns")P=K;else{var Y=i(p.namespace_extractQName(H),2),q=Y[0],Z=Y[1];q==="xmlns"&&(Z===B&&(P=K),L[Z]=K)}}}catch(z){v={error:z}}finally{try{A&&!A.done&&(m=k.return)&&m.call(k)}finally{if(v)throw v.error}}var re=P!==null?C.createElementNS(P,N.name):C.createElement(N.name);S.appendChild(re);var ae=new u.LocalNameSet;try{for(var ee=(x=void 0,o(N.attributes)),F=ee.next();!F.done;F=ee.next()){var b=i(F.value,2),G=(H=b[0],K=b[1],i(p.namespace_extractQName(H),2)),U=(q=G[0],Z=G[1],null);if(q==="xmlns"||q===null&&Z==="xmlns"?U=l.namespace.XMLNS:(U=re.lookupNamespaceURI(q))!==null&&re.isDefaultNamespace(U)?U=null:U===null&&q!==null&&(U=L[q]||null),ae.has(U,Z))throw new Error("Element contains duplicate attributes.");if(ae.set(U,Z),U===l.namespace.XMLNS&&K===l.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(Z.indexOf(":")!==-1||!p.xml_isName(Z))throw new Error("Attribute local name contains invalid characters.");if(q==="xmlns"&&K==="")throw new Error("Empty XML namespace is not allowed.");U!==null?re.setAttributeNS(U,H,this._decodeAttributeValue(K)):re.setAttribute(H,this._decodeAttributeValue(K))}}catch(z){x={error:z}}finally{try{F&&!F.done&&(y=ee.return)&&y.call(ee)}finally{if(x)throw x.error}}N.selfClosing||(S=re);break;case c.TokenType.ClosingTag:if(T.name!==S.nodeName)throw new Error("Closing tag name does not match opening tag name.");S._parent&&(S=S._parent)}T=g.nextToken()}return C},h.prototype._decodeText=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h.prototype._decodeAttributeValue=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h}();n.XMLParserImpl=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(275);n.XMLSerializer=i.XMLSerializerImpl},function(a,n,r){var i=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],m=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=r(69),c=r(95),l=r(9),p=r(7),u=r(0),f=function(){function h(){}return h.prototype.serializeToString=function(d){return this._xmlSerialization(d,!1)},h.prototype._xmlSerialization=function(d,v){if(d._nodeDocument===void 0||d._nodeDocument._hasNamespaces){var m=new c.NamespacePrefixMap;m.set("xml",p.namespace.XML);try{return this._serializeNodeNS(d,null,m,{value:1},v)}catch{throw new l.InvalidStateError}}else try{return this._serializeNode(d,v)}catch{throw new l.InvalidStateError}},h.prototype._serializeNodeNS=function(d,v,m,x,y){switch(d.nodeType){case o.NodeType.Element:return this._serializeElementNS(d,v,m,x,y);case o.NodeType.Document:return this._serializeDocumentNS(d,v,m,x,y);case o.NodeType.Comment:return this._serializeComment(d,y);case o.NodeType.Text:return this._serializeText(d,y);case o.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(d,v,m,x,y);case o.NodeType.DocumentType:return this._serializeDocumentType(d,y);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,y);case o.NodeType.CData:return this._serializeCData(d,y);default:throw new Error("Unknown node type: "+d.nodeType)}},h.prototype._serializeNode=function(d,v){switch(d.nodeType){case o.NodeType.Element:return this._serializeElement(d,v);case o.NodeType.Document:return this._serializeDocument(d,v);case o.NodeType.Comment:return this._serializeComment(d,v);case o.NodeType.Text:return this._serializeText(d,v);case o.NodeType.DocumentFragment:return this._serializeDocumentFragment(d,v);case o.NodeType.DocumentType:return this._serializeDocumentType(d,v);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,v);case o.NodeType.CData:return this._serializeCData(d,v);default:throw new Error("Unknown node type: "+d.nodeType)}},h.prototype._serializeElementNS=function(d,v,m,x,y){var g,C;if(y&&(d.localName.indexOf(":")!==-1||!u.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var S="<",T="",w=!1,_=!1,E=m.copy(),D={},O=this._recordNamespaceInformation(d,E,D),M=v,N=d.namespaceURI;if(M===N)O!==null&&(_=!0),S+=T=N===p.namespace.XML?"xml:"+d.localName:d.localName;else{var R=d.prefix,B=null;if(R===null&&N===O||(B=E.get(R,N)),R==="xmlns"){if(y)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");B=R}B!==null?(T=B+":"+d.localName,O!==null&&O!==p.namespace.XML&&(M=O||null),S+=T):R!==null?(R in D&&(R=this._generatePrefix(N,E,x)),E.set(R,N),S+=T+=R+":"+d.localName,S+=" xmlns:"+R+'="'+this._serializeAttributeValue(N,y)+'"',O!==null&&(M=O||null)):O===null||O!==null&&O!==N?(_=!0,M=N,S+=T+=d.localName,S+=' xmlns="'+this._serializeAttributeValue(N,y)+'"'):(M=N,S+=T+=d.localName)}S+=this._serializeAttributesNS(d,E,x,D,_,y);var I=N===p.namespace.HTML;if(I&&d.childNodes.length===0&&h._VoidElementNames.has(d.localName)?(S+=" /",w=!0):I||d.childNodes.length!==0||(S+="/",w=!0),S+=">",w)return S;if(!(I&&d.localName==="template"))try{for(var P=i(d._children||d.childNodes),L=P.next();!L.done;L=P.next()){var k=L.value;S+=this._serializeNodeNS(k,M,E,x,y)}}catch(A){g={error:A}}finally{try{L&&!L.done&&(C=P.return)&&C.call(P)}finally{if(g)throw g.error}}return S+="</"+T+">"},h.prototype._serializeDocumentNS=function(d,v,m,x,y){var g,C;if(y&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var S="";try{for(var T=i(d._children||d.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;S+=this._serializeNodeNS(_,v,m,x,y)}}catch(E){g={error:E}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(g)throw g.error}}return S},h.prototype._serializeComment=function(d,v){if(v&&(!u.xml_isLegalChar(d.data)||d.data.indexOf("--")!==-1||d.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+d.data+"-->"},h.prototype._serializeText=function(d,v){if(v&&!u.xml_isLegalChar(d.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var m="",x=0;x<d.data.length;x++){var y=d.data[x];m+=y==="&"?"&amp;":y==="<"?"&lt;":y===">"?"&gt;":y}return m},h.prototype._serializeDocumentFragmentNS=function(d,v,m,x,y){var g,C,S="";try{for(var T=i(d._children||d.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;S+=this._serializeNodeNS(_,v,m,x,y)}}catch(E){g={error:E}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(g)throw g.error}}return S},h.prototype._serializeDocumentType=function(d,v){if(v&&!u.xml_isPubidChar(d.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(v&&(!u.xml_isLegalChar(d.systemId)||d.systemId.indexOf('"')!==-1&&d.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return d.publicId&&d.systemId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'" "'+d.systemId+'">':d.publicId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'">':d.systemId?"<!DOCTYPE "+d.name+' SYSTEM "'+d.systemId+'">':"<!DOCTYPE "+d.name+">"},h.prototype._serializeProcessingInstruction=function(d,v){if(v&&(d.target.indexOf(":")!==-1||/^xml$/i.test(d.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(v&&(!u.xml_isLegalChar(d.data)||d.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(d.data===""?d.target:d.target+" "+d.data)+"?>"},h.prototype._serializeCData=function(d,v){if(v&&d.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+d.data+"]]>"},h.prototype._serializeAttributesNS=function(d,v,m,x,y,g){var C,S,T="",w=g?new s.LocalNameSet:void 0;try{for(var _=i(d.attributes),E=_.next();!E.done;E=_.next()){var D=E.value;if(y||g||D.namespaceURI!==null){if(g&&w&&w.has(D.namespaceURI,D.localName))throw new Error("Element contains duplicate attributes (well-formed required).");g&&w&&w.set(D.namespaceURI,D.localName);var O=D.namespaceURI,M=null;if(O!==null)if(M=v.get(D.prefix,O),O===p.namespace.XMLNS){if(D.value===p.namespace.XML||D.prefix===null&&y||D.prefix!==null&&(!(D.localName in x)||x[D.localName]!==D.value)&&v.has(D.localName,D.value))continue;if(g&&D.value===p.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(g&&D.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");D.prefix==="xmlns"&&(M="xmlns")}else M===null&&(T+=" xmlns:"+(M=D.prefix===null||v.hasPrefix(D.prefix)&&!v.has(D.prefix,O)?this._generatePrefix(O,v,m):D.prefix)+'="'+this._serializeAttributeValue(O,g)+'"');if(T+=" ",M!==null&&(T+=M+":"),g&&(D.localName.indexOf(":")!==-1||!u.xml_isName(D.localName)||D.localName==="xmlns"&&O===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");T+=D.localName+'="'+this._serializeAttributeValue(D.value,g)+'"'}else T+=" "+D.localName+'="'+this._serializeAttributeValue(D.value,g)+'"'}}catch(N){C={error:N}}finally{try{E&&!E.done&&(S=_.return)&&S.call(_)}finally{if(C)throw C.error}}return T},h.prototype._recordNamespaceInformation=function(d,v,m){var x,y,g=null;try{for(var C=i(d.attributes),S=C.next();!S.done;S=C.next()){var T=S.value,w=T.namespaceURI,_=T.prefix;if(w===p.namespace.XMLNS){if(_===null){g=T.value;continue}var E=T.localName,D=T.value;if(D===p.namespace.XML||(D===""&&(D=null),v.has(E,D)))continue;v.set(E,D),m[E]=D||""}}}catch(O){x={error:O}}finally{try{S&&!S.done&&(y=C.return)&&y.call(C)}finally{if(x)throw x.error}}return g},h.prototype._generatePrefix=function(d,v,m){var x="ns"+m.value;return m.value++,v.set(x,d),x},h.prototype._serializeAttributeValue=function(d,v){if(v&&d!==null&&!u.xml_isLegalChar(d))throw new Error("Invalid characters in attribute value.");if(d===null)return"";for(var m="",x=0;x<d.length;x++){var y=d[x];m+=y==='"'?"&quot;":y==="&"?"&amp;":y==="<"?"&lt;":y===">"?"&gt;":y}return m},h.prototype._serializeElement=function(d,v){var m,x;if(v&&(d.localName.indexOf(":")!==-1||!u.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var y=!1,g=d.localName,C="<"+g;if(C+=this._serializeAttributes(d,v),d._children.size===0&&(C+="/",y=!0),C+=">",y)return C;try{for(var S=i(d._children),T=S.next();!T.done;T=S.next()){var w=T.value;C+=this._serializeNode(w,v)}}catch(_){m={error:_}}finally{try{T&&!T.done&&(x=S.return)&&x.call(S)}finally{if(m)throw m.error}}return C+="</"+g+">"},h.prototype._serializeDocument=function(d,v){var m,x;if(v&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var y="";try{for(var g=i(d._children),C=g.next();!C.done;C=g.next()){var S=C.value;y+=this._serializeNode(S,v)}}catch(T){m={error:T}}finally{try{C&&!C.done&&(x=g.return)&&x.call(g)}finally{if(m)throw m.error}}return y},h.prototype._serializeDocumentFragment=function(d,v){var m,x,y="";try{for(var g=i(d._children),C=g.next();!C.done;C=g.next()){var S=C.value;y+=this._serializeNode(S,v)}}catch(T){m={error:T}}finally{try{C&&!C.done&&(x=g.return)&&x.call(g)}finally{if(m)throw m.error}}return y},h.prototype._serializeAttributes=function(d,v){var m,x,y="",g=v?{}:void 0;try{for(var C=i(d.attributes),S=C.next();!S.done;S=C.next()){var T=S.value;if(v&&g&&T.localName in g)throw new Error("Element contains duplicate attributes (well-formed required).");if(v&&g&&(g[T.localName]=!0),v&&(T.localName.indexOf(":")!==-1||!u.xml_isName(T.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");y+=" "+T.localName+'="'+this._serializeAttributeValue(T.value,v)+'"'}}catch(w){m={error:w}}finally{try{S&&!S.done&&(x=C.return)&&x.call(C)}finally{if(m)throw m.error}}return y},h._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),h}();n.XMLSerializerImpl=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(277);n.XMLReader=i.XMLReader;var o=r(112);n.ObjectReader=o.ObjectReader;var s=r(280);n.JSONReader=s.JSONReader;var c=r(281);n.YAMLReader=c.YAMLReader},function(a,n,r){r(31),r(32),r(33),r(19),r(65),r(20),r(22),r(23);var i,o=this&&this.__extends||(i=function(d,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var y in x)x.hasOwnProperty(y)&&(m[y]=x[y])})(d,v)},function(d,v){function m(){this.constructor=d}i(d,v),d.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}),s=this&&this.__read||function(d,v){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var x,y,g=m.call(d),C=[];try{for(;(v===void 0||v-- >0)&&!(x=g.next()).done;)C.push(x.value)}catch(S){y={error:S}}finally{try{x&&!x.done&&(m=g.return)&&m.call(g)}finally{if(y)throw y.error}}return C},c=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,m=v&&d[v],x=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&x>=d.length&&(d=void 0),{value:d&&d[x++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var l=r(180),p=r(111),u=r(7),f=r(0),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return o(v,d),v.prototype._parse=function(m,x){for(var y,g,C,S,T=new l.XMLStringLexer(x,{skipWhitespaceOnlyText:!0}),w=m,_=m,E=T.nextToken();E.type!==p.TokenType.EOF;){switch(E.type){case p.TokenType.Declaration:var D=E,O=this.sanitize(D.version);if(O!=="1.0")throw new Error("Invalid xml version: "+O);var M={version:O};D.encoding&&(M.encoding=this.sanitize(D.encoding)),D.standalone&&(M.standalone=this.sanitize(D.standalone)==="yes"),_.set(M);break;case p.TokenType.DocType:var N=E;_=this.docType(_,this.sanitize(N.name),this.sanitize(N.pubId),this.sanitize(N.sysId))||_;break;case p.TokenType.CDATA:var R=E;_=this.cdata(_,this.sanitize(R.data))||_;break;case p.TokenType.Comment:var B=E;_=this.comment(_,this.sanitize(B.data))||_;break;case p.TokenType.PI:var I=E;_=this.instruction(_,this.sanitize(I.target),this.sanitize(I.data))||_;break;case p.TokenType.Text:var P=E;_=this.text(_,this._decodeText(this.sanitize(P.data)))||_;break;case p.TokenType.Element:var L=E,k=this.sanitize(L.name),A=s(f.namespace_extractQName(k),1)[0],j=_.node.lookupNamespaceURI(A),H={};try{for(var K=(y=void 0,c(L.attributes)),Y=K.next();!Y.done;Y=K.next()){var q=s(Y.value,2),Z=q[0],re=q[1];if(Z=this.sanitize(Z),re=this.sanitize(re),Z==="xmlns")j=re;else{var ae=s(f.namespace_extractQName(Z),2),ee=ae[0],F=ae[1];ee==="xmlns"&&(F===A&&(j=re),H[F]=re)}}}catch(J){y={error:J}}finally{try{Y&&!Y.done&&(g=K.return)&&g.call(K)}finally{if(y)throw y.error}}var b=j!==null?this.element(_,j,k):this.element(_,void 0,k);if(b===void 0)break;_.node===m.node&&(w=b);try{for(var G=(C=void 0,c(L.attributes)),U=G.next();!U.done;U=G.next()){var z=s(U.value,2);Z=z[0],re=z[1],Z=this.sanitize(Z),re=this.sanitize(re);var W=s(f.namespace_extractQName(Z),2),$=(ee=W[0],F=W[1],null);ee==="xmlns"||ee===null&&F==="xmlns"?$=u.namespace.XMLNS:($=b.node.lookupNamespaceURI(ee))!==null&&b.node.isDefaultNamespace($)?$=null:$===null&&ee!==null&&($=H[ee]||null),$!==null?this.attribute(b,$,Z,this._decodeAttributeValue(re)):this.attribute(b,void 0,Z,this._decodeAttributeValue(re))}}catch(J){C={error:J}}finally{try{U&&!U.done&&(S=G.return)&&S.call(G)}finally{if(C)throw C.error}}L.selfClosing||(_=b);break;case p.TokenType.ClosingTag:_.node.parentNode&&(_=_.up())}E=T.nextToken()}return w},v}(r(75).BaseReader);n.XMLReader=h},function(a,n,r){var i=r(4),o=r(279);i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(a,n,r){var i=r(16),o=r(8),s=r(61),c=r(85),l=r(79),p=r(27),u=r(41),f=Object.assign,h=Object.defineProperty;a.exports=!f||o(function(){if(i&&f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},v={},m=Symbol();return d[m]=7,"abcdefghijklmnopqrst".split("").forEach(function(x){v[x]=x}),f({},d)[m]!=7||s(f({},v)).join("")!="abcdefghijklmnopqrst"})?function(d,v){for(var m=p(d),x=arguments.length,y=1,g=c.f,C=l.f;x>y;)for(var S,T=u(arguments[y++]),w=g?s(T).concat(g(T)):s(T),_=w.length,E=0;_>E;)S=w[E++],i&&!C.call(T,S)||(m[S]=T[S]);return m}:f},function(a,n,r){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])})(l,p)},function(l,p){function u(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(112),c=function(l){function p(){return l!==null&&l.apply(this,arguments)||this}return o(p,l),p.prototype._parse=function(u,f){return new s.ObjectReader(this._builderOptions).parse(u,JSON.parse(f))},p}(r(75).BaseReader);n.JSONReader=c},function(a,n,r){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)d.hasOwnProperty(v)&&(h[v]=d[v])})(u,f)},function(u,f){function h(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(112),c=r(75),l=r(282),p=function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return o(f,u),f.prototype._parse=function(h,d){var v=l.safeLoad(d);if(v===void 0)throw new Error("Unable to parse YAML document.");return new s.ObjectReader(this._builderOptions).parse(h,v)},f}(c.BaseReader);n.YAMLReader=p},function(a,n,r){var i=r(283);a.exports=i},function(a,n,r){var i=r(284),o=r(303);function s(c){return function(){throw new Error("Function "+c+" is deprecated and cannot be used.")}}a.exports.Type=r(10),a.exports.Schema=r(39),a.exports.FAILSAFE_SCHEMA=r(113),a.exports.JSON_SCHEMA=r(182),a.exports.CORE_SCHEMA=r(181),a.exports.DEFAULT_SAFE_SCHEMA=r(54),a.exports.DEFAULT_FULL_SCHEMA=r(76),a.exports.load=i.load,a.exports.loadAll=i.loadAll,a.exports.safeLoad=i.safeLoad,a.exports.safeLoadAll=i.safeLoadAll,a.exports.dump=o.dump,a.exports.safeDump=o.safeDump,a.exports.YAMLException=r(53),a.exports.MINIMAL_SCHEMA=r(113),a.exports.SAFE_SCHEMA=r(54),a.exports.DEFAULT_SCHEMA=r(76),a.exports.scan=s("scan"),a.exports.parse=s("parse"),a.exports.compose=s("compose"),a.exports.addConstructor=s("addConstructor")},function(a,n,r){var i=r(38),o=r(53),s=r(285),c=r(54),l=r(76),p=Object.prototype.hasOwnProperty,u=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,h=/[,\[\]\{\}]/,d=/^(?:!|!!|![a-z\-]+!)$/i,v=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(b){return Object.prototype.toString.call(b)}function x(b){return b===10||b===13}function y(b){return b===9||b===32}function g(b){return b===9||b===32||b===10||b===13}function C(b){return b===44||b===91||b===93||b===123||b===125}function S(b){var G;return 48<=b&&b<=57?b-48:97<=(G=32|b)&&G<=102?G-97+10:-1}function T(b){return b===48?"\0":b===97?"\x07":b===98?"\b":b===116||b===9?"	":b===110?`
`:b===118?"\v":b===102?"\f":b===114?"\r":b===101?"\x1B":b===32?" ":b===34?'"':b===47?"/":b===92?"\\":b===78?"":b===95?"":b===76?"\u2028":b===80?"\u2029":""}function w(b){return b<=65535?String.fromCharCode(b):String.fromCharCode(55296+(b-65536>>10),56320+(b-65536&1023))}for(var _=new Array(256),E=new Array(256),D=0;D<256;D++)_[D]=T(D)?1:0,E[D]=T(D);function O(b,G){this.input=b,this.filename=G.filename||null,this.schema=G.schema||l,this.onWarning=G.onWarning||null,this.legacy=G.legacy||!1,this.json=G.json||!1,this.listener=G.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=b.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function M(b,G){return new o(G,new s(b.filename,b.input,b.position,b.line,b.position-b.lineStart))}function N(b,G){throw M(b,G)}function R(b,G){b.onWarning&&b.onWarning.call(null,M(b,G))}var B={YAML:function(b,G,U){var z,W,$;b.version!==null&&N(b,"duplication of %YAML directive"),U.length!==1&&N(b,"YAML directive accepts exactly one argument"),(z=/^([0-9]+)\.([0-9]+)$/.exec(U[0]))===null&&N(b,"ill-formed argument of the YAML directive"),W=parseInt(z[1],10),$=parseInt(z[2],10),W!==1&&N(b,"unacceptable YAML version of the document"),b.version=U[0],b.checkLineBreaks=$<2,$!==1&&$!==2&&R(b,"unsupported YAML version of the document")},TAG:function(b,G,U){var z,W;U.length!==2&&N(b,"TAG directive accepts exactly two arguments"),z=U[0],W=U[1],d.test(z)||N(b,"ill-formed tag handle (first argument) of the TAG directive"),p.call(b.tagMap,z)&&N(b,'there is a previously declared suffix for "'+z+'" tag handle'),v.test(W)||N(b,"ill-formed tag prefix (second argument) of the TAG directive"),b.tagMap[z]=W}};function I(b,G,U,z){var W,$,J,ne;if(G<U){if(ne=b.input.slice(G,U),z)for(W=0,$=ne.length;W<$;W+=1)(J=ne.charCodeAt(W))===9||32<=J&&J<=1114111||N(b,"expected valid JSON character");else u.test(ne)&&N(b,"the stream contains non-printable characters");b.result+=ne}}function P(b,G,U,z){var W,$,J,ne;for(i.isObject(U)||N(b,"cannot merge mappings; the provided source object is unacceptable"),J=0,ne=(W=Object.keys(U)).length;J<ne;J+=1)$=W[J],p.call(G,$)||(G[$]=U[$],z[$]=!0)}function L(b,G,U,z,W,$,J,ne){var oe,ue;if(Array.isArray(W))for(oe=0,ue=(W=Array.prototype.slice.call(W)).length;oe<ue;oe+=1)Array.isArray(W[oe])&&N(b,"nested arrays are not supported inside keys"),typeof W=="object"&&m(W[oe])==="[object Object]"&&(W[oe]="[object Object]");if(typeof W=="object"&&m(W)==="[object Object]"&&(W="[object Object]"),W=String(W),G===null&&(G={}),z==="tag:yaml.org,2002:merge")if(Array.isArray($))for(oe=0,ue=$.length;oe<ue;oe+=1)P(b,G,$[oe],U);else P(b,G,$,U);else b.json||p.call(U,W)||!p.call(G,W)||(b.line=J||b.line,b.position=ne||b.position,N(b,"duplicated mapping key")),G[W]=$,delete U[W];return G}function k(b){var G;(G=b.input.charCodeAt(b.position))===10?b.position++:G===13?(b.position++,b.input.charCodeAt(b.position)===10&&b.position++):N(b,"a line break is expected"),b.line+=1,b.lineStart=b.position}function A(b,G,U){for(var z=0,W=b.input.charCodeAt(b.position);W!==0;){for(;y(W);)W=b.input.charCodeAt(++b.position);if(G&&W===35)do W=b.input.charCodeAt(++b.position);while(W!==10&&W!==13&&W!==0);if(!x(W))break;for(k(b),W=b.input.charCodeAt(b.position),z++,b.lineIndent=0;W===32;)b.lineIndent++,W=b.input.charCodeAt(++b.position)}return U!==-1&&z!==0&&b.lineIndent<U&&R(b,"deficient indentation"),z}function j(b){var G,U=b.position;return!((G=b.input.charCodeAt(U))!==45&&G!==46||G!==b.input.charCodeAt(U+1)||G!==b.input.charCodeAt(U+2)||(U+=3,(G=b.input.charCodeAt(U))!==0&&!g(G)))}function H(b,G){G===1?b.result+=" ":G>1&&(b.result+=i.repeat(`
`,G-1))}function K(b,G){var U,z,W=b.tag,$=b.anchor,J=[],ne=!1;for(b.anchor!==null&&(b.anchorMap[b.anchor]=J),z=b.input.charCodeAt(b.position);z!==0&&z===45&&g(b.input.charCodeAt(b.position+1));)if(ne=!0,b.position++,A(b,!0,-1)&&b.lineIndent<=G)J.push(null),z=b.input.charCodeAt(b.position);else if(U=b.line,Z(b,G,3,!1,!0),J.push(b.result),A(b,!0,-1),z=b.input.charCodeAt(b.position),(b.line===U||b.lineIndent>G)&&z!==0)N(b,"bad indentation of a sequence entry");else if(b.lineIndent<G)break;return!!ne&&(b.tag=W,b.anchor=$,b.kind="sequence",b.result=J,!0)}function Y(b){var G,U,z,W,$=!1,J=!1;if((W=b.input.charCodeAt(b.position))!==33)return!1;if(b.tag!==null&&N(b,"duplication of a tag property"),(W=b.input.charCodeAt(++b.position))===60?($=!0,W=b.input.charCodeAt(++b.position)):W===33?(J=!0,U="!!",W=b.input.charCodeAt(++b.position)):U="!",G=b.position,$){do W=b.input.charCodeAt(++b.position);while(W!==0&&W!==62);b.position<b.length?(z=b.input.slice(G,b.position),W=b.input.charCodeAt(++b.position)):N(b,"unexpected end of the stream within a verbatim tag")}else{for(;W!==0&&!g(W);)W===33&&(J?N(b,"tag suffix cannot contain exclamation marks"):(U=b.input.slice(G-1,b.position+1),d.test(U)||N(b,"named tag handle cannot contain such characters"),J=!0,G=b.position+1)),W=b.input.charCodeAt(++b.position);z=b.input.slice(G,b.position),h.test(z)&&N(b,"tag suffix cannot contain flow indicator characters")}return z&&!v.test(z)&&N(b,"tag name cannot contain such characters: "+z),$?b.tag=z:p.call(b.tagMap,U)?b.tag=b.tagMap[U]+z:U==="!"?b.tag="!"+z:U==="!!"?b.tag="tag:yaml.org,2002:"+z:N(b,'undeclared tag handle "'+U+'"'),!0}function q(b){var G,U;if((U=b.input.charCodeAt(b.position))!==38)return!1;for(b.anchor!==null&&N(b,"duplication of an anchor property"),U=b.input.charCodeAt(++b.position),G=b.position;U!==0&&!g(U)&&!C(U);)U=b.input.charCodeAt(++b.position);return b.position===G&&N(b,"name of an anchor node must contain at least one character"),b.anchor=b.input.slice(G,b.position),!0}function Z(b,G,U,z,W){var $,J,ne,oe,ue,Ce,ye,je,Le=1,ge=!1,tt=!1;if(b.listener!==null&&b.listener("open",b),b.tag=null,b.anchor=null,b.kind=null,b.result=null,$=J=ne=U===4||U===3,z&&A(b,!0,-1)&&(ge=!0,b.lineIndent>G?Le=1:b.lineIndent===G?Le=0:b.lineIndent<G&&(Le=-1)),Le===1)for(;Y(b)||q(b);)A(b,!0,-1)?(ge=!0,ne=$,b.lineIndent>G?Le=1:b.lineIndent===G?Le=0:b.lineIndent<G&&(Le=-1)):ne=!1;if(ne&&(ne=ge||W),Le!==1&&U!==4||(ye=U===1||U===2?G:G+1,je=b.position-b.lineStart,Le===1?ne&&(K(b,je)||function(X,De,Oe){var de,te,ce,he,fe,ve=X.tag,Ae=X.anchor,Se={},Be={},Ie=null,Tt=null,Ft=null,at=!1,$t=!1;for(X.anchor!==null&&(X.anchorMap[X.anchor]=Se),fe=X.input.charCodeAt(X.position);fe!==0;){if(de=X.input.charCodeAt(X.position+1),ce=X.line,he=X.position,fe!==63&&fe!==58||!g(de)){if(!Z(X,Oe,2,!1,!0))break;if(X.line===ce){for(fe=X.input.charCodeAt(X.position);y(fe);)fe=X.input.charCodeAt(++X.position);if(fe===58)g(fe=X.input.charCodeAt(++X.position))||N(X,"a whitespace character is expected after the key-value separator within a block mapping"),at&&(L(X,Se,Be,Ie,Tt,null),Ie=Tt=Ft=null),$t=!0,at=!1,te=!1,Ie=X.tag,Tt=X.result;else{if(!$t)return X.tag=ve,X.anchor=Ae,!0;N(X,"can not read an implicit mapping pair; a colon is missed")}}else{if(!$t)return X.tag=ve,X.anchor=Ae,!0;N(X,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else fe===63?(at&&(L(X,Se,Be,Ie,Tt,null),Ie=Tt=Ft=null),$t=!0,at=!0,te=!0):at?(at=!1,te=!0):N(X,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),X.position+=1,fe=de;if((X.line===ce||X.lineIndent>De)&&(Z(X,De,4,!0,te)&&(at?Tt=X.result:Ft=X.result),at||(L(X,Se,Be,Ie,Tt,Ft,ce,he),Ie=Tt=Ft=null),A(X,!0,-1),fe=X.input.charCodeAt(X.position)),X.lineIndent>De&&fe!==0)N(X,"bad indentation of a mapping entry");else if(X.lineIndent<De)break}return at&&L(X,Se,Be,Ie,Tt,null),$t&&(X.tag=ve,X.anchor=Ae,X.kind="mapping",X.result=Se),$t}(b,je,ye))||function(X,De){var Oe,de,te,ce,he,fe,ve,Ae,Se,Be,Ie=!0,Tt=X.tag,Ft=X.anchor,at={};if((Be=X.input.charCodeAt(X.position))===91)te=93,fe=!1,de=[];else{if(Be!==123)return!1;te=125,fe=!0,de={}}for(X.anchor!==null&&(X.anchorMap[X.anchor]=de),Be=X.input.charCodeAt(++X.position);Be!==0;){if(A(X,!0,De),(Be=X.input.charCodeAt(X.position))===te)return X.position++,X.tag=Tt,X.anchor=Ft,X.kind=fe?"mapping":"sequence",X.result=de,!0;Ie||N(X,"missed comma between flow collection entries"),Se=null,ce=he=!1,Be===63&&g(X.input.charCodeAt(X.position+1))&&(ce=he=!0,X.position++,A(X,!0,De)),Oe=X.line,Z(X,De,1,!1,!0),Ae=X.tag,ve=X.result,A(X,!0,De),Be=X.input.charCodeAt(X.position),!he&&X.line!==Oe||Be!==58||(ce=!0,Be=X.input.charCodeAt(++X.position),A(X,!0,De),Z(X,De,1,!1,!0),Se=X.result),fe?L(X,de,at,Ae,ve,Se):ce?de.push(L(X,null,at,Ae,ve,Se)):de.push(ve),A(X,!0,De),(Be=X.input.charCodeAt(X.position))===44?(Ie=!0,Be=X.input.charCodeAt(++X.position)):Ie=!1}N(X,"unexpected end of the stream within a flow collection")}(b,ye)?tt=!0:(J&&function(X,De){var Oe,de,te,ce,he,fe=1,ve=!1,Ae=!1,Se=De,Be=0,Ie=!1;if((ce=X.input.charCodeAt(X.position))===124)de=!1;else{if(ce!==62)return!1;de=!0}for(X.kind="scalar",X.result="";ce!==0;)if((ce=X.input.charCodeAt(++X.position))===43||ce===45)fe===1?fe=ce===43?3:2:N(X,"repeat of a chomping mode identifier");else{if(!((te=48<=(he=ce)&&he<=57?he-48:-1)>=0))break;te===0?N(X,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ae?N(X,"repeat of an indentation width identifier"):(Se=De+te-1,Ae=!0)}if(y(ce)){do ce=X.input.charCodeAt(++X.position);while(y(ce));if(ce===35)do ce=X.input.charCodeAt(++X.position);while(!x(ce)&&ce!==0)}for(;ce!==0;){for(k(X),X.lineIndent=0,ce=X.input.charCodeAt(X.position);(!Ae||X.lineIndent<Se)&&ce===32;)X.lineIndent++,ce=X.input.charCodeAt(++X.position);if(!Ae&&X.lineIndent>Se&&(Se=X.lineIndent),x(ce))Be++;else{if(X.lineIndent<Se){fe===3?X.result+=i.repeat(`
`,ve?1+Be:Be):fe===1&&ve&&(X.result+=`
`);break}for(de?y(ce)?(Ie=!0,X.result+=i.repeat(`
`,ve?1+Be:Be)):Ie?(Ie=!1,X.result+=i.repeat(`
`,Be+1)):Be===0?ve&&(X.result+=" "):X.result+=i.repeat(`
`,Be):X.result+=i.repeat(`
`,ve?1+Be:Be),ve=!0,Ae=!0,Be=0,Oe=X.position;!x(ce)&&ce!==0;)ce=X.input.charCodeAt(++X.position);I(X,Oe,X.position,!1)}}return!0}(b,ye)||function(X,De){var Oe,de,te;if((Oe=X.input.charCodeAt(X.position))!==39)return!1;for(X.kind="scalar",X.result="",X.position++,de=te=X.position;(Oe=X.input.charCodeAt(X.position))!==0;)if(Oe===39){if(I(X,de,X.position,!0),(Oe=X.input.charCodeAt(++X.position))!==39)return!0;de=X.position,X.position++,te=X.position}else x(Oe)?(I(X,de,te,!0),H(X,A(X,!1,De)),de=te=X.position):X.position===X.lineStart&&j(X)?N(X,"unexpected end of the document within a single quoted scalar"):(X.position++,te=X.position);N(X,"unexpected end of the stream within a single quoted scalar")}(b,ye)||function(X,De){var Oe,de,te,ce,he,fe,ve;if((fe=X.input.charCodeAt(X.position))!==34)return!1;for(X.kind="scalar",X.result="",X.position++,Oe=de=X.position;(fe=X.input.charCodeAt(X.position))!==0;){if(fe===34)return I(X,Oe,X.position,!0),X.position++,!0;if(fe===92){if(I(X,Oe,X.position,!0),x(fe=X.input.charCodeAt(++X.position)))A(X,!1,De);else if(fe<256&&_[fe])X.result+=E[fe],X.position++;else if((he=(ve=fe)===120?2:ve===117?4:ve===85?8:0)>0){for(te=he,ce=0;te>0;te--)(he=S(fe=X.input.charCodeAt(++X.position)))>=0?ce=(ce<<4)+he:N(X,"expected hexadecimal character");X.result+=w(ce),X.position++}else N(X,"unknown escape sequence");Oe=de=X.position}else x(fe)?(I(X,Oe,de,!0),H(X,A(X,!1,De)),Oe=de=X.position):X.position===X.lineStart&&j(X)?N(X,"unexpected end of the document within a double quoted scalar"):(X.position++,de=X.position)}N(X,"unexpected end of the stream within a double quoted scalar")}(b,ye)?tt=!0:function(X){var De,Oe,de;if((de=X.input.charCodeAt(X.position))!==42)return!1;for(de=X.input.charCodeAt(++X.position),De=X.position;de!==0&&!g(de)&&!C(de);)de=X.input.charCodeAt(++X.position);return X.position===De&&N(X,"name of an alias node must contain at least one character"),Oe=X.input.slice(De,X.position),X.anchorMap.hasOwnProperty(Oe)||N(X,'unidentified alias "'+Oe+'"'),X.result=X.anchorMap[Oe],A(X,!0,-1),!0}(b)?(tt=!0,b.tag===null&&b.anchor===null||N(b,"alias node should not have any properties")):function(X,De,Oe){var de,te,ce,he,fe,ve,Ae,Se,Be=X.kind,Ie=X.result;if(g(Se=X.input.charCodeAt(X.position))||C(Se)||Se===35||Se===38||Se===42||Se===33||Se===124||Se===62||Se===39||Se===34||Se===37||Se===64||Se===96||(Se===63||Se===45)&&(g(de=X.input.charCodeAt(X.position+1))||Oe&&C(de)))return!1;for(X.kind="scalar",X.result="",te=ce=X.position,he=!1;Se!==0;){if(Se===58){if(g(de=X.input.charCodeAt(X.position+1))||Oe&&C(de))break}else if(Se===35){if(g(X.input.charCodeAt(X.position-1)))break}else{if(X.position===X.lineStart&&j(X)||Oe&&C(Se))break;if(x(Se)){if(fe=X.line,ve=X.lineStart,Ae=X.lineIndent,A(X,!1,-1),X.lineIndent>=De){he=!0,Se=X.input.charCodeAt(X.position);continue}X.position=ce,X.line=fe,X.lineStart=ve,X.lineIndent=Ae;break}}he&&(I(X,te,ce,!1),H(X,X.line-fe),te=ce=X.position,he=!1),y(Se)||(ce=X.position+1),Se=X.input.charCodeAt(++X.position)}return I(X,te,ce,!1),!!X.result||(X.kind=Be,X.result=Ie,!1)}(b,ye,U===1)&&(tt=!0,b.tag===null&&(b.tag="?")),b.anchor!==null&&(b.anchorMap[b.anchor]=b.result)):Le===0&&(tt=ne&&K(b,je))),b.tag!==null&&b.tag!=="!")if(b.tag==="?"){for(b.result!==null&&b.kind!=="scalar"&&N(b,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+b.kind+'"'),oe=0,ue=b.implicitTypes.length;oe<ue;oe+=1)if((Ce=b.implicitTypes[oe]).resolve(b.result)){b.result=Ce.construct(b.result),b.tag=Ce.tag,b.anchor!==null&&(b.anchorMap[b.anchor]=b.result);break}}else p.call(b.typeMap[b.kind||"fallback"],b.tag)?(Ce=b.typeMap[b.kind||"fallback"][b.tag],b.result!==null&&Ce.kind!==b.kind&&N(b,"unacceptable node kind for !<"+b.tag+'> tag; it should be "'+Ce.kind+'", not "'+b.kind+'"'),Ce.resolve(b.result)?(b.result=Ce.construct(b.result),b.anchor!==null&&(b.anchorMap[b.anchor]=b.result)):N(b,"cannot resolve a node with !<"+b.tag+"> explicit tag")):N(b,"unknown tag !<"+b.tag+">");return b.listener!==null&&b.listener("close",b),b.tag!==null||b.anchor!==null||tt}function re(b){var G,U,z,W,$=b.position,J=!1;for(b.version=null,b.checkLineBreaks=b.legacy,b.tagMap={},b.anchorMap={};(W=b.input.charCodeAt(b.position))!==0&&(A(b,!0,-1),W=b.input.charCodeAt(b.position),!(b.lineIndent>0||W!==37));){for(J=!0,W=b.input.charCodeAt(++b.position),G=b.position;W!==0&&!g(W);)W=b.input.charCodeAt(++b.position);for(z=[],(U=b.input.slice(G,b.position)).length<1&&N(b,"directive name must not be less than one character in length");W!==0;){for(;y(W);)W=b.input.charCodeAt(++b.position);if(W===35){do W=b.input.charCodeAt(++b.position);while(W!==0&&!x(W));break}if(x(W))break;for(G=b.position;W!==0&&!g(W);)W=b.input.charCodeAt(++b.position);z.push(b.input.slice(G,b.position))}W!==0&&k(b),p.call(B,U)?B[U](b,U,z):R(b,'unknown document directive "'+U+'"')}A(b,!0,-1),b.lineIndent===0&&b.input.charCodeAt(b.position)===45&&b.input.charCodeAt(b.position+1)===45&&b.input.charCodeAt(b.position+2)===45?(b.position+=3,A(b,!0,-1)):J&&N(b,"directives end mark is expected"),Z(b,b.lineIndent-1,4,!1,!0),A(b,!0,-1),b.checkLineBreaks&&f.test(b.input.slice($,b.position))&&R(b,"non-ASCII line breaks are interpreted as content"),b.documents.push(b.result),b.position===b.lineStart&&j(b)?b.input.charCodeAt(b.position)===46&&(b.position+=3,A(b,!0,-1)):b.position<b.length-1&&N(b,"end of the stream or a document separator is expected")}function ae(b,G){G=G||{},(b=String(b)).length!==0&&(b.charCodeAt(b.length-1)!==10&&b.charCodeAt(b.length-1)!==13&&(b+=`
`),b.charCodeAt(0)===65279&&(b=b.slice(1)));var U=new O(b,G),z=b.indexOf("\0");for(z!==-1&&(U.position=z,N(U,"null byte is not allowed in input")),U.input+="\0";U.input.charCodeAt(U.position)===32;)U.lineIndent+=1,U.position+=1;for(;U.position<U.length-1;)re(U);return U.documents}function ee(b,G,U){G!==null&&typeof G=="object"&&U===void 0&&(U=G,G=null);var z=ae(b,U);if(typeof G!="function")return z;for(var W=0,$=z.length;W<$;W+=1)G(z[W])}function F(b,G){var U=ae(b,G);if(U.length!==0){if(U.length===1)return U[0];throw new o("expected a single document in the stream, but found more")}}a.exports.loadAll=ee,a.exports.load=F,a.exports.safeLoadAll=function(b,G,U){return typeof G=="object"&&G!==null&&U===void 0&&(U=G,G=null),ee(b,G,i.extend({schema:c},U))},a.exports.safeLoad=function(b,G){return F(b,i.extend({schema:c},G))}},function(a,n,r){var i=r(38);function o(s,c,l,p,u){this.name=s,this.buffer=c,this.position=l,this.line=p,this.column=u}o.prototype.getSnippet=function(s,c){var l,p,u,f,h;if(!this.buffer)return null;for(s=s||4,c=c||75,l="",p=this.position;p>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(p-1))===-1;)if(p-=1,this.position-p>c/2-1){l=" ... ",p+=5;break}for(u="",f=this.position;f<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(f))===-1;)if((f+=1)-this.position>c/2-1){u=" ... ",f-=5;break}return h=this.buffer.slice(p,f),i.repeat(" ",s)+l+h+u+`
`+i.repeat(" ",s+this.position-p+l.length)+"^"},o.prototype.toString=function(s){var c,l="";return this.name&&(l+='in "'+this.name+'" '),l+="at line "+(this.line+1)+", column "+(this.column+1),s||(c=this.getSnippet())&&(l+=`:
`+c),l},a.exports=o},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(o){return o!==null?o:""}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(o){return o!==null?o:[]}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(o){return o!==null?o:{}}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(o){if(o===null)return!0;var s=o.length;return s===1&&o==="~"||s===4&&(o==="null"||o==="Null"||o==="NULL")},construct:function(){return null},predicate:function(o){return o===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(o){if(o===null)return!1;var s=o.length;return s===4&&(o==="true"||o==="True"||o==="TRUE")||s===5&&(o==="false"||o==="False"||o==="FALSE")},construct:function(o){return o==="true"||o==="True"||o==="TRUE"},predicate:function(o){return Object.prototype.toString.call(o)==="[object Boolean]"},represent:{lowercase:function(o){return o?"true":"false"},uppercase:function(o){return o?"TRUE":"FALSE"},camelcase:function(o){return o?"True":"False"}},defaultStyle:"lowercase"})},function(a,n,r){var i=r(38),o=r(10);function s(l){return 48<=l&&l<=55}function c(l){return 48<=l&&l<=57}a.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(l){if(l===null)return!1;var p,u,f=l.length,h=0,d=!1;if(!f)return!1;if((p=l[h])!=="-"&&p!=="+"||(p=l[++h]),p==="0"){if(h+1===f)return!0;if((p=l[++h])==="b"){for(h++;h<f;h++)if((p=l[h])!=="_"){if(p!=="0"&&p!=="1")return!1;d=!0}return d&&p!=="_"}if(p==="x"){for(h++;h<f;h++)if((p=l[h])!=="_"){if(!(48<=(u=l.charCodeAt(h))&&u<=57||65<=u&&u<=70||97<=u&&u<=102))return!1;d=!0}return d&&p!=="_"}for(;h<f;h++)if((p=l[h])!=="_"){if(!s(l.charCodeAt(h)))return!1;d=!0}return d&&p!=="_"}if(p==="_")return!1;for(;h<f;h++)if((p=l[h])!=="_"){if(p===":")break;if(!c(l.charCodeAt(h)))return!1;d=!0}return!(!d||p==="_")&&(p!==":"||/^(:[0-5]?[0-9])+$/.test(l.slice(h)))},construct:function(l){var p,u,f=l,h=1,d=[];return f.indexOf("_")!==-1&&(f=f.replace(/_/g,"")),(p=f[0])!=="-"&&p!=="+"||(p==="-"&&(h=-1),p=(f=f.slice(1))[0]),f==="0"?0:p==="0"?f[1]==="b"?h*parseInt(f.slice(2),2):f[1]==="x"?h*parseInt(f,16):h*parseInt(f,8):f.indexOf(":")!==-1?(f.split(":").forEach(function(v){d.unshift(parseInt(v,10))}),f=0,u=1,d.forEach(function(v){f+=v*u,u*=60}),h*f):h*parseInt(f,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&l%1==0&&!i.isNegativeZero(l)},represent:{binary:function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},octal:function(l){return l>=0?"0"+l.toString(8):"-0"+l.toString(8).slice(1)},decimal:function(l){return l.toString(10)},hexadecimal:function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(a,n,r){var i=r(38),o=r(10),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),c=/^[-+]?[0-9]+e/;a.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(l){return l!==null&&!(!s.test(l)||l[l.length-1]==="_")},construct:function(l){var p,u,f,h;return u=(p=l.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,h=[],"+-".indexOf(p[0])>=0&&(p=p.slice(1)),p===".inf"?u===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:p===".nan"?NaN:p.indexOf(":")>=0?(p.split(":").forEach(function(d){h.unshift(parseFloat(d,10))}),p=0,f=1,h.forEach(function(d){p+=d*f,f*=60}),u*p):u*parseFloat(p,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&(l%1!=0||i.isNegativeZero(l))},represent:function(l,p){var u;if(isNaN(l))switch(p){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(p){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(p){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(l))return"-0.0";return u=l.toString(10),c.test(u)?u.replace("e",".e"):u},defaultStyle:"lowercase"})},function(a,n,r){var i=r(10),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");a.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(c){return c!==null&&(o.exec(c)!==null||s.exec(c)!==null)},construct:function(c){var l,p,u,f,h,d,v,m,x=0,y=null;if((l=o.exec(c))===null&&(l=s.exec(c)),l===null)throw new Error("Date resolve error");if(p=+l[1],u=+l[2]-1,f=+l[3],!l[4])return new Date(Date.UTC(p,u,f));if(h=+l[4],d=+l[5],v=+l[6],l[7]){for(x=l[7].slice(0,3);x.length<3;)x+="0";x=+x}return l[9]&&(y=6e4*(60*+l[10]+ +(l[11]||0)),l[9]==="-"&&(y=-y)),m=new Date(Date.UTC(p,u,f,h,d,v,x)),y&&m.setTime(m.getTime()-y),m},instanceOf:Date,represent:function(c){return c.toISOString()}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(o){return o==="<<"||o===null}})},function(a,n,r){var i;try{i=r(145).Buffer}catch{}var o=r(10),s=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;a.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(c){if(c===null)return!1;var l,p,u=0,f=c.length,h=s;for(p=0;p<f;p++)if(!((l=h.indexOf(c.charAt(p)))>64)){if(l<0)return!1;u+=6}return u%8==0},construct:function(c){var l,p,u=c.replace(/[\r\n=]/g,""),f=u.length,h=s,d=0,v=[];for(l=0;l<f;l++)l%4==0&&l&&(v.push(d>>16&255),v.push(d>>8&255),v.push(255&d)),d=d<<6|h.indexOf(u.charAt(l));return(p=f%4*6)===0?(v.push(d>>16&255),v.push(d>>8&255),v.push(255&d)):p===18?(v.push(d>>10&255),v.push(d>>2&255)):p===12&&v.push(d>>4&255),i?i.from?i.from(v):new i(v):v},predicate:function(c){return i&&i.isBuffer(c)},represent:function(c){var l,p,u="",f=0,h=c.length,d=s;for(l=0;l<h;l++)l%3==0&&l&&(u+=d[f>>18&63],u+=d[f>>12&63],u+=d[f>>6&63],u+=d[63&f]),f=(f<<8)+c[l];return(p=h%3)===0?(u+=d[f>>18&63],u+=d[f>>12&63],u+=d[f>>6&63],u+=d[63&f]):p===2?(u+=d[f>>10&63],u+=d[f>>4&63],u+=d[f<<2&63],u+=d[64]):p===1&&(u+=d[f>>2&63],u+=d[f<<4&63],u+=d[64],u+=d[64]),u}})},function(a,n,r){var i=r(10),o=Object.prototype.hasOwnProperty,s=Object.prototype.toString;a.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(c){if(c===null)return!0;var l,p,u,f,h,d=[],v=c;for(l=0,p=v.length;l<p;l+=1){if(u=v[l],h=!1,s.call(u)!=="[object Object]")return!1;for(f in u)if(o.call(u,f)){if(h)return!1;h=!0}if(!h||d.indexOf(f)!==-1)return!1;d.push(f)}return!0},construct:function(c){return c!==null?c:[]}})},function(a,n,r){var i=r(10),o=Object.prototype.toString;a.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(s){if(s===null)return!0;var c,l,p,u,f,h=s;for(f=new Array(h.length),c=0,l=h.length;c<l;c+=1){if(p=h[c],o.call(p)!=="[object Object]"||(u=Object.keys(p)).length!==1)return!1;f[c]=[u[0],p[u[0]]]}return!0},construct:function(s){if(s===null)return[];var c,l,p,u,f,h=s;for(f=new Array(h.length),c=0,l=h.length;c<l;c+=1)p=h[c],u=Object.keys(p),f[c]=[u[0],p[u[0]]];return f}})},function(a,n,r){var i=r(10),o=Object.prototype.hasOwnProperty;a.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(s){if(s===null)return!0;var c,l=s;for(c in l)if(o.call(l,c)&&l[c]!==null)return!1;return!0},construct:function(s){return s!==null?s:{}}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(o){return o===void 0},represent:function(){return""}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(o){if(o===null||o.length===0)return!1;var s=o,c=/\/([gim]*)$/.exec(o),l="";return!(s[0]==="/"&&(c&&(l=c[1]),l.length>3||s[s.length-l.length-1]!=="/"))},construct:function(o){var s=o,c=/\/([gim]*)$/.exec(o),l="";return s[0]==="/"&&(c&&(l=c[1]),s=s.slice(1,s.length-l.length-1)),new RegExp(s,l)},predicate:function(o){return Object.prototype.toString.call(o)==="[object RegExp]"},represent:function(o){var s="/"+o.source+"/";return o.global&&(s+="g"),o.multiline&&(s+="m"),o.ignoreCase&&(s+="i"),s}})},function(a,n,r){var i;try{i=r(302)}catch{typeof window<"u"&&(i=window.esprima)}var o=r(10);a.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(s){if(s===null)return!1;try{var c="("+s+")",l=i.parse(c,{range:!0});return l.type==="Program"&&l.body.length===1&&l.body[0].type==="ExpressionStatement"&&(l.body[0].expression.type==="ArrowFunctionExpression"||l.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(s){var c,l="("+s+")",p=i.parse(l,{range:!0}),u=[];if(p.type!=="Program"||p.body.length!==1||p.body[0].type!=="ExpressionStatement"||p.body[0].expression.type!=="ArrowFunctionExpression"&&p.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return p.body[0].expression.params.forEach(function(f){u.push(f.name)}),c=p.body[0].expression.body.range,p.body[0].expression.body.type==="BlockStatement"?new Function(u,l.slice(c[0]+1,c[1]-1)):new Function(u,"return "+l.slice(c[0],c[1]))},predicate:function(s){return Object.prototype.toString.call(s)==="[object Function]"},represent:function(s){return s.toString()}})},function(a,n,r){var i;i=function(){return function(o){var s={};function c(l){if(s[l])return s[l].exports;var p=s[l]={exports:{},id:l,loaded:!1};return o[l].call(p.exports,p,p.exports,c),p.loaded=!0,p.exports}return c.m=o,c.c=s,c.p="",c(0)}([function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(1),p=c(3),u=c(8),f=c(15);function h(v,m,x){var y=null,g=function(D,O){x&&x(D,O),y&&y.visit(D,O)},C=typeof x=="function"?g:null,S=!1;if(m){S=typeof m.comment=="boolean"&&m.comment;var T=typeof m.attachComment=="boolean"&&m.attachComment;(S||T)&&((y=new l.CommentHandler).attach=T,m.comment=!0,C=g)}var w,_=!1;m&&typeof m.sourceType=="string"&&(_=m.sourceType==="module"),w=m&&typeof m.jsx=="boolean"&&m.jsx?new p.JSXParser(v,m,C):new u.Parser(v,m,C);var E=_?w.parseModule():w.parseScript();return S&&y&&(E.comments=y.comments),w.config.tokens&&(E.tokens=w.tokens),w.config.tolerant&&(E.errors=w.errorHandler.errors),E}s.parse=h,s.parseModule=function(v,m,x){var y=m||{};return y.sourceType="module",h(v,y,x)},s.parseScript=function(v,m,x){var y=m||{};return y.sourceType="script",h(v,y,x)},s.tokenize=function(v,m,x){var y,g=new f.Tokenizer(v,m);y=[];try{for(;;){var C=g.getNextToken();if(!C)break;x&&(C=x(C)),y.push(C)}}catch(S){g.errorHandler.tolerate(S)}return g.errorHandler.tolerant&&(y.errors=g.errors()),y};var d=c(2);s.Syntax=d.Syntax,s.version="4.0.1"},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(2),p=function(){function u(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return u.prototype.insertInnerComments=function(f,h){if(f.type===l.Syntax.BlockStatement&&f.body.length===0){for(var d=[],v=this.leading.length-1;v>=0;--v){var m=this.leading[v];h.end.offset>=m.start&&(d.unshift(m.comment),this.leading.splice(v,1),this.trailing.splice(v,1))}d.length&&(f.innerComments=d)}},u.prototype.findTrailingComments=function(f){var h=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var v=this.trailing[d];v.start>=f.end.offset&&h.unshift(v.comment)}return this.trailing.length=0,h}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var x=m.node.trailingComments[0];x&&x.range[0]>=f.end.offset&&(h=m.node.trailingComments,delete m.node.trailingComments)}return h},u.prototype.findLeadingComments=function(f){for(var h,d=[];this.stack.length>0&&(x=this.stack[this.stack.length-1])&&x.start>=f.start.offset;)h=x.node,this.stack.pop();if(h){for(var v=(h.leadingComments?h.leadingComments.length:0)-1;v>=0;--v){var m=h.leadingComments[v];m.range[1]<=f.start.offset&&(d.unshift(m),h.leadingComments.splice(v,1))}return h.leadingComments&&h.leadingComments.length===0&&delete h.leadingComments,d}for(v=this.leading.length-1;v>=0;--v){var x;(x=this.leading[v]).start<=f.start.offset&&(d.unshift(x.comment),this.leading.splice(v,1))}return d},u.prototype.visitNode=function(f,h){if(!(f.type===l.Syntax.Program&&f.body.length>0)){this.insertInnerComments(f,h);var d=this.findTrailingComments(h),v=this.findLeadingComments(h);v.length>0&&(f.leadingComments=v),d.length>0&&(f.trailingComments=d),this.stack.push({node:f,start:h.start.offset})}},u.prototype.visitComment=function(f,h){var d=f.type[0]==="L"?"Line":"Block",v={type:d,value:f.value};if(f.range&&(v.range=f.range),f.loc&&(v.loc=f.loc),this.comments.push(v),this.attach){var m={comment:{type:d,value:f.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};f.loc&&(m.comment.loc=f.loc),f.type=d,this.leading.push(m),this.trailing.push(m)}},u.prototype.visit=function(f,h){f.type==="LineComment"||f.type==="BlockComment"?this.visitComment(f,h):this.attach&&this.visitNode(f,h)},u}();s.CommentHandler=p},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(o,s,c){var l,p=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var T in S)S.hasOwnProperty(T)&&(C[T]=S[T])},function(C,S){function T(){this.constructor=C}l(C,S),C.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)});Object.defineProperty(s,"__esModule",{value:!0});var u=c(4),f=c(5),h=c(6),d=c(7),v=c(8),m=c(13),x=c(14);function y(C){var S;switch(C.type){case h.JSXSyntax.JSXIdentifier:S=C.name;break;case h.JSXSyntax.JSXNamespacedName:var T=C;S=y(T.namespace)+":"+y(T.name);break;case h.JSXSyntax.JSXMemberExpression:var w=C;S=y(w.object)+"."+y(w.property)}return S}m.TokenName[100]="JSXIdentifier",m.TokenName[101]="JSXText";var g=function(C){function S(T,w,_){return C.call(this,T,w,_)||this}return p(S,C),S.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():C.prototype.parsePrimaryExpression.call(this)},S.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},S.prototype.finishJSX=function(){this.nextToken()},S.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},S.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},S.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},S.prototype.scanXHTMLEntity=function(T){for(var w="&",_=!0,E=!1,D=!1,O=!1;!this.scanner.eof()&&_&&!E;){var M=this.scanner.source[this.scanner.index];if(M===T)break;if(E=M===";",w+=M,++this.scanner.index,!E)switch(w.length){case 2:D=M==="#";break;case 3:D&&(_=(O=M==="x")||u.Character.isDecimalDigit(M.charCodeAt(0)),D=D&&!O);break;default:_=(_=_&&!(D&&!u.Character.isDecimalDigit(M.charCodeAt(0))))&&!(O&&!u.Character.isHexDigit(M.charCodeAt(0)))}}if(_&&E&&w.length>2){var N=w.substr(1,w.length-2);D&&N.length>1?w=String.fromCharCode(parseInt(N.substr(1),10)):O&&N.length>2?w=String.fromCharCode(parseInt("0"+N.substr(1),16)):D||O||!x.XHTMLEntities[N]||(w=x.XHTMLEntities[N])}return w},S.prototype.lexJSX=function(){var T=this.scanner.source.charCodeAt(this.scanner.index);if(T===60||T===62||T===47||T===58||T===61||T===123||T===125)return{type:7,value:M=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(T===34||T===39){for(var w=this.scanner.index,_=this.scanner.source[this.scanner.index++],E="";!this.scanner.eof()&&(N=this.scanner.source[this.scanner.index++])!==_;)E+=N==="&"?this.scanXHTMLEntity(_):N;return{type:8,value:E,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===46){var D=this.scanner.source.charCodeAt(this.scanner.index+1),O=this.scanner.source.charCodeAt(this.scanner.index+2),M=D===46&&O===46?"...":".";return w=this.scanner.index,this.scanner.index+=M.length,{type:7,value:M,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(u.Character.isIdentifierStart(T)&&T!==92){for(w=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var N=this.scanner.source.charCodeAt(this.scanner.index);if(u.Character.isIdentifierPart(N)&&N!==92)++this.scanner.index;else{if(N!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(w,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}return this.scanner.lex()},S.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var T=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(T)),T},S.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var T=this.scanner.index,w="";!this.scanner.eof();){var _=this.scanner.source[this.scanner.index];if(_==="{"||_==="<")break;++this.scanner.index,w+=_,u.Character.isLineTerminator(_.charCodeAt(0))&&(++this.scanner.lineNumber,_==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var E={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(E)),E},S.prototype.peekJSXToken=function(){var T=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(T),w},S.prototype.expectJSX=function(T){var w=this.nextJSXToken();w.type===7&&w.value===T||this.throwUnexpectedToken(w)},S.prototype.matchJSX=function(T){var w=this.peekJSXToken();return w.type===7&&w.value===T},S.prototype.parseJSXIdentifier=function(){var T=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(T,new f.JSXIdentifier(w.value))},S.prototype.parseJSXElementName=function(){var T=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var _=w;this.expectJSX(":");var E=this.parseJSXIdentifier();w=this.finalize(T,new f.JSXNamespacedName(_,E))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var D=w;this.expectJSX(".");var O=this.parseJSXIdentifier();w=this.finalize(T,new f.JSXMemberExpression(D,O))}return w},S.prototype.parseJSXAttributeName=function(){var T,w=this.createJSXNode(),_=this.parseJSXIdentifier();if(this.matchJSX(":")){var E=_;this.expectJSX(":");var D=this.parseJSXIdentifier();T=this.finalize(w,new f.JSXNamespacedName(E,D))}else T=_;return T},S.prototype.parseJSXStringLiteralAttribute=function(){var T=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var _=this.getTokenRaw(w);return this.finalize(T,new d.Literal(w.value,_))},S.prototype.parseJSXExpressionAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new f.JSXExpressionContainer(w))},S.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},S.prototype.parseJSXNameValueAttribute=function(){var T=this.createJSXNode(),w=this.parseJSXAttributeName(),_=null;return this.matchJSX("=")&&(this.expectJSX("="),_=this.parseJSXAttributeValue()),this.finalize(T,new f.JSXAttribute(w,_))},S.prototype.parseJSXSpreadAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new f.JSXSpreadAttribute(w))},S.prototype.parseJSXAttributes=function(){for(var T=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();T.push(w)}return T},S.prototype.parseJSXOpeningElement=function(){var T=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),_=this.parseJSXAttributes(),E=this.matchJSX("/");return E&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new f.JSXOpeningElement(w,E,_))},S.prototype.parseJSXBoundaryElement=function(){var T=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(T,new f.JSXClosingElement(w))}var _=this.parseJSXElementName(),E=this.parseJSXAttributes(),D=this.matchJSX("/");return D&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new f.JSXOpeningElement(_,D,E))},S.prototype.parseJSXEmptyExpression=function(){var T=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(T,new f.JSXEmptyExpression)},S.prototype.parseJSXExpressionContainer=function(){var T,w=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(T=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),T=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(w,new f.JSXExpressionContainer(T))},S.prototype.parseJSXChildren=function(){for(var T=[];!this.scanner.eof();){var w=this.createJSXChildNode(),_=this.nextJSXText();if(_.start<_.end){var E=this.getTokenRaw(_),D=this.finalize(w,new f.JSXText(_.value,E));T.push(D)}if(this.scanner.source[this.scanner.index]!=="{")break;var O=this.parseJSXExpressionContainer();T.push(O)}return T},S.prototype.parseComplexJSXElement=function(T){for(var w=[];!this.scanner.eof();){T.children=T.children.concat(this.parseJSXChildren());var _=this.createJSXChildNode(),E=this.parseJSXBoundaryElement();if(E.type===h.JSXSyntax.JSXOpeningElement){var D=E;if(D.selfClosing){var O=this.finalize(_,new f.JSXElement(D,[],null));T.children.push(O)}else w.push(T),T={node:_,opening:D,closing:null,children:[]}}if(E.type===h.JSXSyntax.JSXClosingElement){T.closing=E;var M=y(T.opening.name);if(M!==y(T.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",M),!(w.length>0))break;O=this.finalize(T.node,new f.JSXElement(T.opening,T.children,T.closing)),(T=w[w.length-1]).children.push(O),w.pop()}}return T},S.prototype.parseJSXElement=function(){var T=this.createJSXNode(),w=this.parseJSXOpeningElement(),_=[],E=null;if(!w.selfClosing){var D=this.parseComplexJSXElement({node:T,opening:w,closing:E,children:_});_=D.children,E=D.closing}return this.finalize(T,new f.JSXElement(w,_,E))},S.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var T=this.parseJSXElement();return this.finishJSX(),T},S.prototype.isStartOfExpression=function(){return C.prototype.isStartOfExpression.call(this)||this.match("<")},S}(v.Parser);s.JSXParser=g},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};s.Character={fromCodePoint:function(l){return l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023))},isWhiteSpace:function(l){return l===32||l===9||l===11||l===12||l===160||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(l)>=0},isLineTerminator:function(l){return l===10||l===13||l===8232||l===8233},isIdentifierStart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l===92||l>=128&&c.NonAsciiIdentifierStart.test(s.Character.fromCodePoint(l))},isIdentifierPart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||l===92||l>=128&&c.NonAsciiIdentifierPart.test(s.Character.fromCodePoint(l))},isDecimalDigit:function(l){return l>=48&&l<=57},isHexDigit:function(l){return l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102},isOctalDigit:function(l){return l>=48&&l<=55}}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(6),p=function(S){this.type=l.JSXSyntax.JSXClosingElement,this.name=S};s.JSXClosingElement=p;var u=function(S,T,w){this.type=l.JSXSyntax.JSXElement,this.openingElement=S,this.children=T,this.closingElement=w};s.JSXElement=u;var f=function(){this.type=l.JSXSyntax.JSXEmptyExpression};s.JSXEmptyExpression=f;var h=function(S){this.type=l.JSXSyntax.JSXExpressionContainer,this.expression=S};s.JSXExpressionContainer=h;var d=function(S){this.type=l.JSXSyntax.JSXIdentifier,this.name=S};s.JSXIdentifier=d;var v=function(S,T){this.type=l.JSXSyntax.JSXMemberExpression,this.object=S,this.property=T};s.JSXMemberExpression=v;var m=function(S,T){this.type=l.JSXSyntax.JSXAttribute,this.name=S,this.value=T};s.JSXAttribute=m;var x=function(S,T){this.type=l.JSXSyntax.JSXNamespacedName,this.namespace=S,this.name=T};s.JSXNamespacedName=x;var y=function(S,T,w){this.type=l.JSXSyntax.JSXOpeningElement,this.name=S,this.selfClosing=T,this.attributes=w};s.JSXOpeningElement=y;var g=function(S){this.type=l.JSXSyntax.JSXSpreadAttribute,this.argument=S};s.JSXSpreadAttribute=g;var C=function(S,T){this.type=l.JSXSyntax.JSXText,this.value=S,this.raw=T};s.JSXText=C},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(2),p=function(ie){this.type=l.Syntax.ArrayExpression,this.elements=ie};s.ArrayExpression=p;var u=function(ie){this.type=l.Syntax.ArrayPattern,this.elements=ie};s.ArrayPattern=u;var f=function(ie,le,Fe){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=ie,this.body=le,this.generator=!1,this.expression=Fe,this.async=!1};s.ArrowFunctionExpression=f;var h=function(ie,le,Fe){this.type=l.Syntax.AssignmentExpression,this.operator=ie,this.left=le,this.right=Fe};s.AssignmentExpression=h;var d=function(ie,le){this.type=l.Syntax.AssignmentPattern,this.left=ie,this.right=le};s.AssignmentPattern=d;var v=function(ie,le,Fe){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=ie,this.body=le,this.generator=!1,this.expression=Fe,this.async=!0};s.AsyncArrowFunctionExpression=v;var m=function(ie,le,Fe){this.type=l.Syntax.FunctionDeclaration,this.id=ie,this.params=le,this.body=Fe,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionDeclaration=m;var x=function(ie,le,Fe){this.type=l.Syntax.FunctionExpression,this.id=ie,this.params=le,this.body=Fe,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionExpression=x;var y=function(ie){this.type=l.Syntax.AwaitExpression,this.argument=ie};s.AwaitExpression=y;var g=function(ie,le,Fe){var Gt=ie==="||"||ie==="&&";this.type=Gt?l.Syntax.LogicalExpression:l.Syntax.BinaryExpression,this.operator=ie,this.left=le,this.right=Fe};s.BinaryExpression=g;var C=function(ie){this.type=l.Syntax.BlockStatement,this.body=ie};s.BlockStatement=C;var S=function(ie){this.type=l.Syntax.BreakStatement,this.label=ie};s.BreakStatement=S;var T=function(ie,le){this.type=l.Syntax.CallExpression,this.callee=ie,this.arguments=le};s.CallExpression=T;var w=function(ie,le){this.type=l.Syntax.CatchClause,this.param=ie,this.body=le};s.CatchClause=w;var _=function(ie){this.type=l.Syntax.ClassBody,this.body=ie};s.ClassBody=_;var E=function(ie,le,Fe){this.type=l.Syntax.ClassDeclaration,this.id=ie,this.superClass=le,this.body=Fe};s.ClassDeclaration=E;var D=function(ie,le,Fe){this.type=l.Syntax.ClassExpression,this.id=ie,this.superClass=le,this.body=Fe};s.ClassExpression=D;var O=function(ie,le){this.type=l.Syntax.MemberExpression,this.computed=!0,this.object=ie,this.property=le};s.ComputedMemberExpression=O;var M=function(ie,le,Fe){this.type=l.Syntax.ConditionalExpression,this.test=ie,this.consequent=le,this.alternate=Fe};s.ConditionalExpression=M;var N=function(ie){this.type=l.Syntax.ContinueStatement,this.label=ie};s.ContinueStatement=N;var R=function(){this.type=l.Syntax.DebuggerStatement};s.DebuggerStatement=R;var B=function(ie,le){this.type=l.Syntax.ExpressionStatement,this.expression=ie,this.directive=le};s.Directive=B;var I=function(ie,le){this.type=l.Syntax.DoWhileStatement,this.body=ie,this.test=le};s.DoWhileStatement=I;var P=function(){this.type=l.Syntax.EmptyStatement};s.EmptyStatement=P;var L=function(ie){this.type=l.Syntax.ExportAllDeclaration,this.source=ie};s.ExportAllDeclaration=L;var k=function(ie){this.type=l.Syntax.ExportDefaultDeclaration,this.declaration=ie};s.ExportDefaultDeclaration=k;var A=function(ie,le,Fe){this.type=l.Syntax.ExportNamedDeclaration,this.declaration=ie,this.specifiers=le,this.source=Fe};s.ExportNamedDeclaration=A;var j=function(ie,le){this.type=l.Syntax.ExportSpecifier,this.exported=le,this.local=ie};s.ExportSpecifier=j;var H=function(ie){this.type=l.Syntax.ExpressionStatement,this.expression=ie};s.ExpressionStatement=H;var K=function(ie,le,Fe){this.type=l.Syntax.ForInStatement,this.left=ie,this.right=le,this.body=Fe,this.each=!1};s.ForInStatement=K;var Y=function(ie,le,Fe){this.type=l.Syntax.ForOfStatement,this.left=ie,this.right=le,this.body=Fe};s.ForOfStatement=Y;var q=function(ie,le,Fe,Gt){this.type=l.Syntax.ForStatement,this.init=ie,this.test=le,this.update=Fe,this.body=Gt};s.ForStatement=q;var Z=function(ie,le,Fe,Gt){this.type=l.Syntax.FunctionDeclaration,this.id=ie,this.params=le,this.body=Fe,this.generator=Gt,this.expression=!1,this.async=!1};s.FunctionDeclaration=Z;var re=function(ie,le,Fe,Gt){this.type=l.Syntax.FunctionExpression,this.id=ie,this.params=le,this.body=Fe,this.generator=Gt,this.expression=!1,this.async=!1};s.FunctionExpression=re;var ae=function(ie){this.type=l.Syntax.Identifier,this.name=ie};s.Identifier=ae;var ee=function(ie,le,Fe){this.type=l.Syntax.IfStatement,this.test=ie,this.consequent=le,this.alternate=Fe};s.IfStatement=ee;var F=function(ie,le){this.type=l.Syntax.ImportDeclaration,this.specifiers=ie,this.source=le};s.ImportDeclaration=F;var b=function(ie){this.type=l.Syntax.ImportDefaultSpecifier,this.local=ie};s.ImportDefaultSpecifier=b;var G=function(ie){this.type=l.Syntax.ImportNamespaceSpecifier,this.local=ie};s.ImportNamespaceSpecifier=G;var U=function(ie,le){this.type=l.Syntax.ImportSpecifier,this.local=ie,this.imported=le};s.ImportSpecifier=U;var z=function(ie,le){this.type=l.Syntax.LabeledStatement,this.label=ie,this.body=le};s.LabeledStatement=z;var W=function(ie,le){this.type=l.Syntax.Literal,this.value=ie,this.raw=le};s.Literal=W;var $=function(ie,le){this.type=l.Syntax.MetaProperty,this.meta=ie,this.property=le};s.MetaProperty=$;var J=function(ie,le,Fe,Gt,Hc){this.type=l.Syntax.MethodDefinition,this.key=ie,this.computed=le,this.value=Fe,this.kind=Gt,this.static=Hc};s.MethodDefinition=J;var ne=function(ie){this.type=l.Syntax.Program,this.body=ie,this.sourceType="module"};s.Module=ne;var oe=function(ie,le){this.type=l.Syntax.NewExpression,this.callee=ie,this.arguments=le};s.NewExpression=oe;var ue=function(ie){this.type=l.Syntax.ObjectExpression,this.properties=ie};s.ObjectExpression=ue;var Ce=function(ie){this.type=l.Syntax.ObjectPattern,this.properties=ie};s.ObjectPattern=Ce;var ye=function(ie,le,Fe,Gt,Hc,sb){this.type=l.Syntax.Property,this.key=le,this.computed=Fe,this.value=Gt,this.kind=ie,this.method=Hc,this.shorthand=sb};s.Property=ye;var je=function(ie,le,Fe,Gt){this.type=l.Syntax.Literal,this.value=ie,this.raw=le,this.regex={pattern:Fe,flags:Gt}};s.RegexLiteral=je;var Le=function(ie){this.type=l.Syntax.RestElement,this.argument=ie};s.RestElement=Le;var ge=function(ie){this.type=l.Syntax.ReturnStatement,this.argument=ie};s.ReturnStatement=ge;var tt=function(ie){this.type=l.Syntax.Program,this.body=ie,this.sourceType="script"};s.Script=tt;var X=function(ie){this.type=l.Syntax.SequenceExpression,this.expressions=ie};s.SequenceExpression=X;var De=function(ie){this.type=l.Syntax.SpreadElement,this.argument=ie};s.SpreadElement=De;var Oe=function(ie,le){this.type=l.Syntax.MemberExpression,this.computed=!1,this.object=ie,this.property=le};s.StaticMemberExpression=Oe;var de=function(){this.type=l.Syntax.Super};s.Super=de;var te=function(ie,le){this.type=l.Syntax.SwitchCase,this.test=ie,this.consequent=le};s.SwitchCase=te;var ce=function(ie,le){this.type=l.Syntax.SwitchStatement,this.discriminant=ie,this.cases=le};s.SwitchStatement=ce;var he=function(ie,le){this.type=l.Syntax.TaggedTemplateExpression,this.tag=ie,this.quasi=le};s.TaggedTemplateExpression=he;var fe=function(ie,le){this.type=l.Syntax.TemplateElement,this.value=ie,this.tail=le};s.TemplateElement=fe;var ve=function(ie,le){this.type=l.Syntax.TemplateLiteral,this.quasis=ie,this.expressions=le};s.TemplateLiteral=ve;var Ae=function(){this.type=l.Syntax.ThisExpression};s.ThisExpression=Ae;var Se=function(ie){this.type=l.Syntax.ThrowStatement,this.argument=ie};s.ThrowStatement=Se;var Be=function(ie,le,Fe){this.type=l.Syntax.TryStatement,this.block=ie,this.handler=le,this.finalizer=Fe};s.TryStatement=Be;var Ie=function(ie,le){this.type=l.Syntax.UnaryExpression,this.operator=ie,this.argument=le,this.prefix=!0};s.UnaryExpression=Ie;var Tt=function(ie,le,Fe){this.type=l.Syntax.UpdateExpression,this.operator=ie,this.argument=le,this.prefix=Fe};s.UpdateExpression=Tt;var Ft=function(ie,le){this.type=l.Syntax.VariableDeclaration,this.declarations=ie,this.kind=le};s.VariableDeclaration=Ft;var at=function(ie,le){this.type=l.Syntax.VariableDeclarator,this.id=ie,this.init=le};s.VariableDeclarator=at;var $t=function(ie,le){this.type=l.Syntax.WhileStatement,this.test=ie,this.body=le};s.WhileStatement=$t;var ib=function(ie,le){this.type=l.Syntax.WithStatement,this.object=ie,this.body=le};s.WithStatement=ib;var ob=function(ie,le){this.type=l.Syntax.YieldExpression,this.argument=ie,this.delegate=le};s.YieldExpression=ob},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(9),p=c(10),u=c(11),f=c(7),h=c(12),d=c(2),v=c(13),m=function(){function x(y,g,C){g===void 0&&(g={}),this.config={range:typeof g.range=="boolean"&&g.range,loc:typeof g.loc=="boolean"&&g.loc,source:null,tokens:typeof g.tokens=="boolean"&&g.tokens,comment:typeof g.comment=="boolean"&&g.comment,tolerant:typeof g.tolerant=="boolean"&&g.tolerant},this.config.loc&&g.source&&g.source!==null&&(this.config.source=String(g.source)),this.delegate=C,this.errorHandler=new p.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new h.Scanner(y,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return x.prototype.throwError=function(y){for(var g=[],C=1;C<arguments.length;C++)g[C-1]=arguments[C];var S=Array.prototype.slice.call(arguments,1),T=y.replace(/%(\d)/g,function(D,O){return l.assert(O<S.length,"Message reference must be in range"),S[O]}),w=this.lastMarker.index,_=this.lastMarker.line,E=this.lastMarker.column+1;throw this.errorHandler.createError(w,_,E,T)},x.prototype.tolerateError=function(y){for(var g=[],C=1;C<arguments.length;C++)g[C-1]=arguments[C];var S=Array.prototype.slice.call(arguments,1),T=y.replace(/%(\d)/g,function(D,O){return l.assert(O<S.length,"Message reference must be in range"),S[O]}),w=this.lastMarker.index,_=this.scanner.lineNumber,E=this.lastMarker.column+1;this.errorHandler.tolerateError(w,_,E,T)},x.prototype.unexpectedTokenError=function(y,g){var C,S=g||u.Messages.UnexpectedToken;if(y?(g||(S=y.type===2?u.Messages.UnexpectedEOS:y.type===3?u.Messages.UnexpectedIdentifier:y.type===6?u.Messages.UnexpectedNumber:y.type===8?u.Messages.UnexpectedString:y.type===10?u.Messages.UnexpectedTemplate:u.Messages.UnexpectedToken,y.type===4&&(this.scanner.isFutureReservedWord(y.value)?S=u.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(y.value)&&(S=u.Messages.StrictReservedWord))),C=y.value):C="ILLEGAL",S=S.replace("%0",C),y&&typeof y.lineNumber=="number"){var T=y.start,w=y.lineNumber,_=this.lastMarker.index-this.lastMarker.column,E=y.start-_+1;return this.errorHandler.createError(T,w,E,S)}return T=this.lastMarker.index,w=this.lastMarker.line,E=this.lastMarker.column+1,this.errorHandler.createError(T,w,E,S)},x.prototype.throwUnexpectedToken=function(y,g){throw this.unexpectedTokenError(y,g)},x.prototype.tolerateUnexpectedToken=function(y,g){this.errorHandler.tolerate(this.unexpectedTokenError(y,g))},x.prototype.collectComments=function(){if(this.config.comment){var y=this.scanner.scanComments();if(y.length>0&&this.delegate)for(var g=0;g<y.length;++g){var C=y[g],S=void 0;S={type:C.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(C.slice[0],C.slice[1])},this.config.range&&(S.range=C.range),this.config.loc&&(S.loc=C.loc);var T={start:{line:C.loc.start.line,column:C.loc.start.column,offset:C.range[0]},end:{line:C.loc.end.line,column:C.loc.end.column,offset:C.range[1]}};this.delegate(S,T)}}else this.scanner.scanComments()},x.prototype.getTokenRaw=function(y){return this.scanner.source.slice(y.start,y.end)},x.prototype.convertToken=function(y){var g={type:v.TokenName[y.type],value:this.getTokenRaw(y)};if(this.config.range&&(g.range=[y.start,y.end]),this.config.loc&&(g.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),y.type===9){var C=y.pattern,S=y.flags;g.regex={pattern:C,flags:S}}return g},x.prototype.nextToken=function(){var y=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var g=this.scanner.lex();return this.hasLineTerminator=y.lineNumber!==g.lineNumber,g&&this.context.strict&&g.type===3&&this.scanner.isStrictModeReservedWord(g.value)&&(g.type=4),this.lookahead=g,this.config.tokens&&g.type!==2&&this.tokens.push(this.convertToken(g)),y},x.prototype.nextRegexToken=function(){this.collectComments();var y=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(y))),this.lookahead=y,this.nextToken(),y},x.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},x.prototype.startNode=function(y,g){g===void 0&&(g=0);var C=y.start-y.lineStart,S=y.lineNumber;return C<0&&(C+=g,S--),{index:y.start,line:S,column:C}},x.prototype.finalize=function(y,g){if(this.config.range&&(g.range=[y.index,this.lastMarker.index]),this.config.loc&&(g.loc={start:{line:y.line,column:y.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(g.loc.source=this.config.source)),this.delegate){var C={start:{line:y.line,column:y.column,offset:y.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(g,C)}return g},x.prototype.expect=function(y){var g=this.nextToken();g.type===7&&g.value===y||this.throwUnexpectedToken(g)},x.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var y=this.lookahead;y.type===7&&y.value===","?this.nextToken():y.type===7&&y.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(y)):this.tolerateUnexpectedToken(y,u.Messages.UnexpectedToken)}else this.expect(",")},x.prototype.expectKeyword=function(y){var g=this.nextToken();g.type===4&&g.value===y||this.throwUnexpectedToken(g)},x.prototype.match=function(y){return this.lookahead.type===7&&this.lookahead.value===y},x.prototype.matchKeyword=function(y){return this.lookahead.type===4&&this.lookahead.value===y},x.prototype.matchContextualKeyword=function(y){return this.lookahead.type===3&&this.lookahead.value===y},x.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var y=this.lookahead.value;return y==="="||y==="*="||y==="**="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|="},x.prototype.isolateCoverGrammar=function(y){var g=this.context.isBindingElement,C=this.context.isAssignmentTarget,S=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=y.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=g,this.context.isAssignmentTarget=C,this.context.firstCoverInitializedNameError=S,T},x.prototype.inheritCoverGrammar=function(y){var g=this.context.isBindingElement,C=this.context.isAssignmentTarget,S=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=y.call(this);return this.context.isBindingElement=this.context.isBindingElement&&g,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&C,this.context.firstCoverInitializedNameError=S||this.context.firstCoverInitializedNameError,T},x.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},x.prototype.parsePrimaryExpression=function(){var y,g,C,S=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(S,new f.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,u.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),C=this.getTokenRaw(g),y=this.finalize(S,new f.Literal(g.value,C));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),C=this.getTokenRaw(g),y=this.finalize(S,new f.Literal(g.value==="true",C));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),C=this.getTokenRaw(g),y=this.finalize(S,new f.Literal(null,C));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,g=this.nextRegexToken(),C=this.getTokenRaw(g),y=this.finalize(S,new f.RegexLiteral(g.regex,C,g.pattern,g.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(S,new f.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(S,new f.ThisExpression)):y=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},x.prototype.parseSpreadElement=function(){var y=this.createNode();this.expect("...");var g=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(y,new f.SpreadElement(g))},x.prototype.parseArrayInitializer=function(){var y=this.createNode(),g=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),g.push(null);else if(this.match("...")){var C=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),g.push(C)}else g.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(y,new f.ArrayExpression(g))},x.prototype.parsePropertyMethod=function(y){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var g=this.context.strict,C=this.context.allowStrictDirective;this.context.allowStrictDirective=y.simple;var S=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&y.firstRestricted&&this.tolerateUnexpectedToken(y.firstRestricted,y.message),this.context.strict&&y.stricted&&this.tolerateUnexpectedToken(y.stricted,y.message),this.context.strict=g,this.context.allowStrictDirective=C,S},x.prototype.parsePropertyMethodFunction=function(){var y=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters(),S=this.parsePropertyMethod(C);return this.context.allowYield=g,this.finalize(y,new f.FunctionExpression(null,C.params,S,!1))},x.prototype.parsePropertyMethodAsyncFunction=function(){var y=this.createNode(),g=this.context.allowYield,C=this.context.await;this.context.allowYield=!1,this.context.await=!0;var S=this.parseFormalParameters(),T=this.parsePropertyMethod(S);return this.context.allowYield=g,this.context.await=C,this.finalize(y,new f.AsyncFunctionExpression(null,S.params,T))},x.prototype.parseObjectPropertyKey=function(){var y,g=this.createNode(),C=this.nextToken();switch(C.type){case 8:case 6:this.context.strict&&C.octal&&this.tolerateUnexpectedToken(C,u.Messages.StrictOctalLiteral);var S=this.getTokenRaw(C);y=this.finalize(g,new f.Literal(C.value,S));break;case 3:case 1:case 5:case 4:y=this.finalize(g,new f.Identifier(C.value));break;case 7:C.value==="["?(y=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):y=this.throwUnexpectedToken(C);break;default:y=this.throwUnexpectedToken(C)}return y},x.prototype.isPropertyKey=function(y,g){return y.type===d.Syntax.Identifier&&y.name===g||y.type===d.Syntax.Literal&&y.value===g},x.prototype.parseObjectProperty=function(y){var g,C=this.createNode(),S=this.lookahead,T=null,w=null,_=!1,E=!1,D=!1,O=!1;if(S.type===3){var M=S.value;this.nextToken(),_=this.match("["),T=(O=!(this.hasLineTerminator||M!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(C,new f.Identifier(M))}else this.match("*")?this.nextToken():(_=this.match("["),T=this.parseObjectPropertyKey());var N=this.qualifiedPropertyName(this.lookahead);if(S.type===3&&!O&&S.value==="get"&&N)g="get",_=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod();else if(S.type===3&&!O&&S.value==="set"&&N)g="set",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod();else if(S.type===7&&S.value==="*"&&N)g="init",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0;else if(T||this.throwUnexpectedToken(this.lookahead),g="init",this.match(":")&&!O)!_&&this.isPropertyKey(T,"__proto__")&&(y.value&&this.tolerateError(u.Messages.DuplicateProtoProperty),y.value=!0),this.nextToken(),w=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0;else if(S.type===3)if(M=this.finalize(C,new f.Identifier(S.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),D=!0;var R=this.isolateCoverGrammar(this.parseAssignmentExpression);w=this.finalize(C,new f.AssignmentPattern(M,R))}else D=!0,w=M;else this.throwUnexpectedToken(this.nextToken());return this.finalize(C,new f.Property(g,T,_,w,E,D))},x.prototype.parseObjectInitializer=function(){var y=this.createNode();this.expect("{");for(var g=[],C={value:!1};!this.match("}");)g.push(this.parseObjectProperty(C)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(y,new f.ObjectExpression(g))},x.prototype.parseTemplateHead=function(){l.assert(this.lookahead.head,"Template literal must start with a template head");var y=this.createNode(),g=this.nextToken(),C=g.value,S=g.cooked;return this.finalize(y,new f.TemplateElement({raw:C,cooked:S},g.tail))},x.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var y=this.createNode(),g=this.nextToken(),C=g.value,S=g.cooked;return this.finalize(y,new f.TemplateElement({raw:C,cooked:S},g.tail))},x.prototype.parseTemplateLiteral=function(){var y=this.createNode(),g=[],C=[],S=this.parseTemplateHead();for(C.push(S);!S.tail;)g.push(this.parseExpression()),S=this.parseTemplateElement(),C.push(S);return this.finalize(y,new f.TemplateLiteral(C,g))},x.prototype.reinterpretExpressionAsPattern=function(y){switch(y.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:y.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(y.argument);break;case d.Syntax.ArrayExpression:y.type=d.Syntax.ArrayPattern;for(var g=0;g<y.elements.length;g++)y.elements[g]!==null&&this.reinterpretExpressionAsPattern(y.elements[g]);break;case d.Syntax.ObjectExpression:for(y.type=d.Syntax.ObjectPattern,g=0;g<y.properties.length;g++)this.reinterpretExpressionAsPattern(y.properties[g].value);break;case d.Syntax.AssignmentExpression:y.type=d.Syntax.AssignmentPattern,delete y.operator,this.reinterpretExpressionAsPattern(y.left)}},x.prototype.parseGroupExpression=function(){var y;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),y={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var g=this.lookahead,C=[];if(this.match("..."))y=this.parseRestElement(C),this.expect(")"),this.match("=>")||this.expect("=>"),y={type:"ArrowParameterPlaceHolder",params:[y],async:!1};else{var S=!1;if(this.context.isBindingElement=!0,y=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var T=[];for(this.context.isAssignmentTarget=!1,T.push(y);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);S=!0,y={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),T.push(this.parseRestElement(C)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);S=!0,y={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else T.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(S)break}S||(y=this.finalize(this.startNode(g),new f.SequenceExpression(T)))}if(!S){if(this.expect(")"),this.match("=>")&&(y.type===d.Syntax.Identifier&&y.name==="yield"&&(S=!0,y={type:"ArrowParameterPlaceHolder",params:[y],async:!1}),!S)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),y.type===d.Syntax.SequenceExpression)for(w=0;w<y.expressions.length;w++)this.reinterpretExpressionAsPattern(y.expressions[w]);else this.reinterpretExpressionAsPattern(y);y={type:"ArrowParameterPlaceHolder",params:y.type===d.Syntax.SequenceExpression?y.expressions:[y],async:!1}}this.context.isBindingElement=!1}}}return y},x.prototype.parseArguments=function(){this.expect("(");var y=[];if(!this.match(")"))for(;;){var g=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(y.push(g),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),y},x.prototype.isIdentifierName=function(y){return y.type===3||y.type===4||y.type===1||y.type===5},x.prototype.parseIdentifierName=function(){var y=this.createNode(),g=this.nextToken();return this.isIdentifierName(g)||this.throwUnexpectedToken(g),this.finalize(y,new f.Identifier(g.value))},x.prototype.parseNewExpression=function(){var y,g=this.createNode(),C=this.parseIdentifierName();if(l.assert(C.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var S=this.parseIdentifierName();y=new f.MetaProperty(C,S)}else this.throwUnexpectedToken(this.lookahead);else{var T=this.isolateCoverGrammar(this.parseLeftHandSideExpression),w=this.match("(")?this.parseArguments():[];y=new f.NewExpression(T,w),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(g,y)},x.prototype.parseAsyncArgument=function(){var y=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,y},x.prototype.parseAsyncArguments=function(){this.expect("(");var y=[];if(!this.match(")"))for(;;){var g=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(y.push(g),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),y},x.prototype.parseLeftHandSideExpressionAllowCall=function(){var y,g=this.lookahead,C=this.matchContextualKeyword("async"),S=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(y=this.createNode(),this.nextToken(),y=this.finalize(y,new f.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):y=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var T=this.parseIdentifierName();y=this.finalize(this.startNode(g),new f.StaticMemberExpression(y,T))}else if(this.match("(")){var w=C&&g.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=w?this.parseAsyncArguments():this.parseArguments();if(y=this.finalize(this.startNode(g),new f.CallExpression(y,_)),w&&this.match("=>")){for(var E=0;E<_.length;++E)this.reinterpretExpressionAsPattern(_[E]);y={type:"ArrowParameterPlaceHolder",params:_,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),T=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),y=this.finalize(this.startNode(g),new f.ComputedMemberExpression(y,T));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var D=this.parseTemplateLiteral();y=this.finalize(this.startNode(g),new f.TaggedTemplateExpression(y,D))}return this.context.allowIn=S,y},x.prototype.parseSuper=function(){var y=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(y,new f.Super)},x.prototype.parseLeftHandSideExpression=function(){l.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var y=this.startNode(this.lookahead),g=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var C=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),g=this.finalize(y,new f.ComputedMemberExpression(g,C))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),C=this.parseIdentifierName(),g=this.finalize(y,new f.StaticMemberExpression(g,C));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var S=this.parseTemplateLiteral();g=this.finalize(y,new f.TaggedTemplateExpression(g,S))}return g},x.prototype.parseUpdateExpression=function(){var y,g=this.lookahead;if(this.match("++")||this.match("--")){var C=this.startNode(g),S=this.nextToken();y=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&y.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(y.name)&&this.tolerateError(u.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(u.Messages.InvalidLHSInAssignment);var T=!0;y=this.finalize(C,new f.UpdateExpression(S.value,y,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(y=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&y.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(y.name)&&this.tolerateError(u.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(u.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var w=this.nextToken().value;T=!1,y=this.finalize(this.startNode(g),new f.UpdateExpression(w,y,T))}return y},x.prototype.parseAwaitExpression=function(){var y=this.createNode();this.nextToken();var g=this.parseUnaryExpression();return this.finalize(y,new f.AwaitExpression(g))},x.prototype.parseUnaryExpression=function(){var y;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var g=this.startNode(this.lookahead),C=this.nextToken();y=this.inheritCoverGrammar(this.parseUnaryExpression),y=this.finalize(g,new f.UnaryExpression(C.value,y)),this.context.strict&&y.operator==="delete"&&y.argument.type===d.Syntax.Identifier&&this.tolerateError(u.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else y=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return y},x.prototype.parseExponentiationExpression=function(){var y=this.lookahead,g=this.inheritCoverGrammar(this.parseUnaryExpression);if(g.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var C=g,S=this.isolateCoverGrammar(this.parseExponentiationExpression);g=this.finalize(this.startNode(y),new f.BinaryExpression("**",C,S))}return g},x.prototype.binaryPrecedence=function(y){var g=y.value;return y.type===7?this.operatorPrecedence[g]||0:y.type===4&&(g==="instanceof"||this.context.allowIn&&g==="in")?7:0},x.prototype.parseBinaryExpression=function(){var y=this.lookahead,g=this.inheritCoverGrammar(this.parseExponentiationExpression),C=this.lookahead,S=this.binaryPrecedence(C);if(S>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var T=[y,this.lookahead],w=g,_=this.isolateCoverGrammar(this.parseExponentiationExpression),E=[w,C.value,_],D=[S];!((S=this.binaryPrecedence(this.lookahead))<=0);){for(;E.length>2&&S<=D[D.length-1];){_=E.pop();var O=E.pop();D.pop(),w=E.pop(),T.pop();var M=this.startNode(T[T.length-1]);E.push(this.finalize(M,new f.BinaryExpression(O,w,_)))}E.push(this.nextToken().value),D.push(S),T.push(this.lookahead),E.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var N=E.length-1;g=E[N];for(var R=T.pop();N>1;){var B=T.pop(),I=R&&R.lineStart;M=this.startNode(B,I),O=E[N-1],g=this.finalize(M,new f.BinaryExpression(O,E[N-2],g)),N-=2,R=B}}return g},x.prototype.parseConditionalExpression=function(){var y=this.lookahead,g=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var C=this.context.allowIn;this.context.allowIn=!0;var S=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=C,this.expect(":");var T=this.isolateCoverGrammar(this.parseAssignmentExpression);g=this.finalize(this.startNode(y),new f.ConditionalExpression(g,S,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return g},x.prototype.checkPatternParam=function(y,g){switch(g.type){case d.Syntax.Identifier:this.validateParam(y,g,g.name);break;case d.Syntax.RestElement:this.checkPatternParam(y,g.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(y,g.left);break;case d.Syntax.ArrayPattern:for(var C=0;C<g.elements.length;C++)g.elements[C]!==null&&this.checkPatternParam(y,g.elements[C]);break;case d.Syntax.ObjectPattern:for(C=0;C<g.properties.length;C++)this.checkPatternParam(y,g.properties[C].value)}y.simple=y.simple&&g instanceof f.Identifier},x.prototype.reinterpretAsCoverFormalsList=function(y){var g,C=[y],S=!1;switch(y.type){case d.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":C=y.params,S=y.async;break;default:return null}g={simple:!0,paramSet:{}};for(var T=0;T<C.length;++T)(w=C[T]).type===d.Syntax.AssignmentPattern?w.right.type===d.Syntax.YieldExpression&&(w.right.argument&&this.throwUnexpectedToken(this.lookahead),w.right.type=d.Syntax.Identifier,w.right.name="yield",delete w.right.argument,delete w.right.delegate):S&&w.type===d.Syntax.Identifier&&w.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(g,w),C[T]=w;if(this.context.strict||!this.context.allowYield)for(T=0;T<C.length;++T){var w;(w=C[T]).type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(g.message===u.Messages.StrictParamDupe){var _=this.context.strict?g.stricted:g.firstRestricted;this.throwUnexpectedToken(_,g.message)}return{simple:g.simple,params:C,stricted:g.stricted,firstRestricted:g.firstRestricted,message:g.message}},x.prototype.parseAssignmentExpression=function(){var y;if(!this.context.allowYield&&this.matchKeyword("yield"))y=this.parseYieldExpression();else{var g=this.lookahead,C=g;if(y=this.parseConditionalExpression(),C.type===3&&C.lineNumber===this.lookahead.lineNumber&&C.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var S=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(S),y={type:"ArrowParameterPlaceHolder",params:[S],async:!0}}if(y.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=y.async,w=this.reinterpretAsCoverFormalsList(y);if(w){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,E=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var D=this.context.allowYield,O=this.context.await;this.context.allowYield=!0,this.context.await=T;var M=this.startNode(g);this.expect("=>");var N=void 0;if(this.match("{")){var R=this.context.allowIn;this.context.allowIn=!0,N=this.parseFunctionSourceElements(),this.context.allowIn=R}else N=this.isolateCoverGrammar(this.parseAssignmentExpression);var B=N.type!==d.Syntax.BlockStatement;this.context.strict&&w.firstRestricted&&this.throwUnexpectedToken(w.firstRestricted,w.message),this.context.strict&&w.stricted&&this.tolerateUnexpectedToken(w.stricted,w.message),y=T?this.finalize(M,new f.AsyncArrowFunctionExpression(w.params,N,B)):this.finalize(M,new f.ArrowFunctionExpression(w.params,N,B)),this.context.strict=_,this.context.allowStrictDirective=E,this.context.allowYield=D,this.context.await=O}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(u.Messages.InvalidLHSInAssignment),this.context.strict&&y.type===d.Syntax.Identifier){var I=y;this.scanner.isRestrictedWord(I.name)&&this.tolerateUnexpectedToken(C,u.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(I.name)&&this.tolerateUnexpectedToken(C,u.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(y):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var P=(C=this.nextToken()).value,L=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(g),new f.AssignmentExpression(P,y,L)),this.context.firstCoverInitializedNameError=null}}return y},x.prototype.parseExpression=function(){var y=this.lookahead,g=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var C=[];for(C.push(g);this.lookahead.type!==2&&this.match(",");)this.nextToken(),C.push(this.isolateCoverGrammar(this.parseAssignmentExpression));g=this.finalize(this.startNode(y),new f.SequenceExpression(C))}return g},x.prototype.parseStatementListItem=function(){var y;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,u.Messages.IllegalExportDeclaration),y=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,u.Messages.IllegalImportDeclaration),y=this.parseImportDeclaration();break;case"const":y=this.parseLexicalDeclaration({inFor:!1});break;case"function":y=this.parseFunctionDeclaration();break;case"class":y=this.parseClassDeclaration();break;case"let":y=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:y=this.parseStatement()}else y=this.parseStatement();return y},x.prototype.parseBlock=function(){var y=this.createNode();this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseStatementListItem());return this.expect("}"),this.finalize(y,new f.BlockStatement(g))},x.prototype.parseLexicalBinding=function(y,g){var C=this.createNode(),S=this.parsePattern([],y);this.context.strict&&S.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(S.name)&&this.tolerateError(u.Messages.StrictVarName);var T=null;return y==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(u.Messages.DeclarationMissingInitializer,"const")):(!g.inFor&&S.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(C,new f.VariableDeclarator(S,T))},x.prototype.parseBindingList=function(y,g){for(var C=[this.parseLexicalBinding(y,g)];this.match(",");)this.nextToken(),C.push(this.parseLexicalBinding(y,g));return C},x.prototype.isLexicalDeclaration=function(){var y=this.scanner.saveState();this.scanner.scanComments();var g=this.scanner.lex();return this.scanner.restoreState(y),g.type===3||g.type===7&&g.value==="["||g.type===7&&g.value==="{"||g.type===4&&g.value==="let"||g.type===4&&g.value==="yield"},x.prototype.parseLexicalDeclaration=function(y){var g=this.createNode(),C=this.nextToken().value;l.assert(C==="let"||C==="const","Lexical declaration must be either let or const");var S=this.parseBindingList(C,y);return this.consumeSemicolon(),this.finalize(g,new f.VariableDeclaration(S,C))},x.prototype.parseBindingRestElement=function(y,g){var C=this.createNode();this.expect("...");var S=this.parsePattern(y,g);return this.finalize(C,new f.RestElement(S))},x.prototype.parseArrayPattern=function(y,g){var C=this.createNode();this.expect("[");for(var S=[];!this.match("]");)if(this.match(","))this.nextToken(),S.push(null);else{if(this.match("...")){S.push(this.parseBindingRestElement(y,g));break}S.push(this.parsePatternWithDefault(y,g)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(C,new f.ArrayPattern(S))},x.prototype.parsePropertyPattern=function(y,g){var C,S,T=this.createNode(),w=!1,_=!1;if(this.lookahead.type===3){var E=this.lookahead;C=this.parseVariableIdentifier();var D=this.finalize(T,new f.Identifier(E.value));if(this.match("=")){y.push(E),_=!0,this.nextToken();var O=this.parseAssignmentExpression();S=this.finalize(this.startNode(E),new f.AssignmentPattern(D,O))}else this.match(":")?(this.expect(":"),S=this.parsePatternWithDefault(y,g)):(y.push(E),_=!0,S=D)}else w=this.match("["),C=this.parseObjectPropertyKey(),this.expect(":"),S=this.parsePatternWithDefault(y,g);return this.finalize(T,new f.Property("init",C,w,S,!1,_))},x.prototype.parseObjectPattern=function(y,g){var C=this.createNode(),S=[];for(this.expect("{");!this.match("}");)S.push(this.parsePropertyPattern(y,g)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(C,new f.ObjectPattern(S))},x.prototype.parsePattern=function(y,g){var C;return this.match("[")?C=this.parseArrayPattern(y,g):this.match("{")?C=this.parseObjectPattern(y,g):(!this.matchKeyword("let")||g!=="const"&&g!=="let"||this.tolerateUnexpectedToken(this.lookahead,u.Messages.LetInLexicalBinding),y.push(this.lookahead),C=this.parseVariableIdentifier(g)),C},x.prototype.parsePatternWithDefault=function(y,g){var C=this.lookahead,S=this.parsePattern(y,g);if(this.match("=")){this.nextToken();var T=this.context.allowYield;this.context.allowYield=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=T,S=this.finalize(this.startNode(C),new f.AssignmentPattern(S,w))}return S},x.prototype.parseVariableIdentifier=function(y){var g=this.createNode(),C=this.nextToken();return C.type===4&&C.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(C,u.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(C):C.type!==3?this.context.strict&&C.type===4&&this.scanner.isStrictModeReservedWord(C.value)?this.tolerateUnexpectedToken(C,u.Messages.StrictReservedWord):(this.context.strict||C.value!=="let"||y!=="var")&&this.throwUnexpectedToken(C):(this.context.isModule||this.context.await)&&C.type===3&&C.value==="await"&&this.tolerateUnexpectedToken(C),this.finalize(g,new f.Identifier(C.value))},x.prototype.parseVariableDeclaration=function(y){var g=this.createNode(),C=this.parsePattern([],"var");this.context.strict&&C.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(u.Messages.StrictVarName);var S=null;return this.match("=")?(this.nextToken(),S=this.isolateCoverGrammar(this.parseAssignmentExpression)):C.type===d.Syntax.Identifier||y.inFor||this.expect("="),this.finalize(g,new f.VariableDeclarator(C,S))},x.prototype.parseVariableDeclarationList=function(y){var g={inFor:y.inFor},C=[];for(C.push(this.parseVariableDeclaration(g));this.match(",");)this.nextToken(),C.push(this.parseVariableDeclaration(g));return C},x.prototype.parseVariableStatement=function(){var y=this.createNode();this.expectKeyword("var");var g=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(y,new f.VariableDeclaration(g,"var"))},x.prototype.parseEmptyStatement=function(){var y=this.createNode();return this.expect(";"),this.finalize(y,new f.EmptyStatement)},x.prototype.parseExpressionStatement=function(){var y=this.createNode(),g=this.parseExpression();return this.consumeSemicolon(),this.finalize(y,new f.ExpressionStatement(g))},x.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(u.Messages.StrictFunction),this.parseStatement()},x.prototype.parseIfStatement=function(){var y,g=this.createNode(),C=null;this.expectKeyword("if"),this.expect("(");var S=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),C=this.parseIfClause())),this.finalize(g,new f.IfStatement(S,y,C))},x.prototype.parseDoWhileStatement=function(){var y=this.createNode();this.expectKeyword("do");var g=this.context.inIteration;this.context.inIteration=!0;var C=this.parseStatement();this.context.inIteration=g,this.expectKeyword("while"),this.expect("(");var S=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(y,new f.DoWhileStatement(C,S))},x.prototype.parseWhileStatement=function(){var y,g=this.createNode();this.expectKeyword("while"),this.expect("(");var C=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new f.EmptyStatement);else{this.expect(")");var S=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=S}return this.finalize(g,new f.WhileStatement(C,y))},x.prototype.parseForStatement=function(){var y,g,C,S=null,T=null,w=null,_=!0,E=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){S=this.createNode(),this.nextToken();var D=this.context.allowIn;this.context.allowIn=!1;var O=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=D,O.length===1&&this.matchKeyword("in")){var M=O[0];M.init&&(M.id.type===d.Syntax.ArrayPattern||M.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(u.Messages.ForInOfLoopInitializer,"for-in"),S=this.finalize(S,new f.VariableDeclaration(O,"var")),this.nextToken(),y=S,g=this.parseExpression(),S=null}else O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(S=this.finalize(S,new f.VariableDeclaration(O,"var")),this.nextToken(),y=S,g=this.parseAssignmentExpression(),S=null,_=!1):(S=this.finalize(S,new f.VariableDeclaration(O,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){S=this.createNode();var N=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(D=this.context.allowIn,this.context.allowIn=!1,O=this.parseBindingList(N,{inFor:!0}),this.context.allowIn=D,O.length===1&&O[0].init===null&&this.matchKeyword("in")?(S=this.finalize(S,new f.VariableDeclaration(O,N)),this.nextToken(),y=S,g=this.parseExpression(),S=null):O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(S=this.finalize(S,new f.VariableDeclaration(O,N)),this.nextToken(),y=S,g=this.parseAssignmentExpression(),S=null,_=!1):(this.consumeSemicolon(),S=this.finalize(S,new f.VariableDeclaration(O,N)))):(S=this.finalize(S,new f.Identifier(N)),this.nextToken(),y=S,g=this.parseExpression(),S=null)}else{var R=this.lookahead;if(D=this.context.allowIn,this.context.allowIn=!1,S=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=D,this.matchKeyword("in"))this.context.isAssignmentTarget&&S.type!==d.Syntax.AssignmentExpression||this.tolerateError(u.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(S),y=S,g=this.parseExpression(),S=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&S.type!==d.Syntax.AssignmentExpression||this.tolerateError(u.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(S),y=S,g=this.parseAssignmentExpression(),S=null,_=!1;else{if(this.match(",")){for(var B=[S];this.match(",");)this.nextToken(),B.push(this.isolateCoverGrammar(this.parseAssignmentExpression));S=this.finalize(this.startNode(R),new f.SequenceExpression(B))}this.expect(";")}}if(y===void 0&&(this.match(";")||(T=this.parseExpression()),this.expect(";"),this.match(")")||(w=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),C=this.finalize(this.createNode(),new f.EmptyStatement);else{this.expect(")");var I=this.context.inIteration;this.context.inIteration=!0,C=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=I}return y===void 0?this.finalize(E,new f.ForStatement(S,T,w,C)):_?this.finalize(E,new f.ForInStatement(y,g,C)):this.finalize(E,new f.ForOfStatement(y,g,C))},x.prototype.parseContinueStatement=function(){var y=this.createNode();this.expectKeyword("continue");var g=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var C=this.parseVariableIdentifier();g=C;var S="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,S)||this.throwError(u.Messages.UnknownLabel,C.name)}return this.consumeSemicolon(),g!==null||this.context.inIteration||this.throwError(u.Messages.IllegalContinue),this.finalize(y,new f.ContinueStatement(g))},x.prototype.parseBreakStatement=function(){var y=this.createNode();this.expectKeyword("break");var g=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var C=this.parseVariableIdentifier(),S="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,S)||this.throwError(u.Messages.UnknownLabel,C.name),g=C}return this.consumeSemicolon(),g!==null||this.context.inIteration||this.context.inSwitch||this.throwError(u.Messages.IllegalBreak),this.finalize(y,new f.BreakStatement(g))},x.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(u.Messages.IllegalReturn);var y=this.createNode();this.expectKeyword("return");var g=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(y,new f.ReturnStatement(g))},x.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(u.Messages.StrictModeWith);var y,g=this.createNode();this.expectKeyword("with"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(g,new f.WithStatement(C,y))},x.prototype.parseSwitchCase=function(){var y,g=this.createNode();this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var C=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)C.push(this.parseStatementListItem());return this.finalize(g,new f.SwitchCase(y,C))},x.prototype.parseSwitchStatement=function(){var y=this.createNode();this.expectKeyword("switch"),this.expect("(");var g=this.parseExpression();this.expect(")");var C=this.context.inSwitch;this.context.inSwitch=!0;var S=[],T=!1;for(this.expect("{");!this.match("}");){var w=this.parseSwitchCase();w.test===null&&(T&&this.throwError(u.Messages.MultipleDefaultsInSwitch),T=!0),S.push(w)}return this.expect("}"),this.context.inSwitch=C,this.finalize(y,new f.SwitchStatement(g,S))},x.prototype.parseLabelledStatement=function(){var y,g=this.createNode(),C=this.parseExpression();if(C.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var S=C,T="$"+S.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,T)&&this.throwError(u.Messages.Redeclaration,"Label",S.name),this.context.labelSet[T]=!0;var w=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),w=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,E=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,u.Messages.StrictFunction):E.generator&&this.tolerateUnexpectedToken(_,u.Messages.GeneratorInLegacyContext),w=E}else w=this.parseStatement();delete this.context.labelSet[T],y=new f.LabeledStatement(S,w)}else this.consumeSemicolon(),y=new f.ExpressionStatement(C);return this.finalize(g,y)},x.prototype.parseThrowStatement=function(){var y=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(u.Messages.NewlineAfterThrow);var g=this.parseExpression();return this.consumeSemicolon(),this.finalize(y,new f.ThrowStatement(g))},x.prototype.parseCatchClause=function(){var y=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var g=[],C=this.parsePattern(g),S={},T=0;T<g.length;T++){var w="$"+g[T].value;Object.prototype.hasOwnProperty.call(S,w)&&this.tolerateError(u.Messages.DuplicateBinding,g[T].value),S[w]=!0}this.context.strict&&C.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(u.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(y,new f.CatchClause(C,_))},x.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},x.prototype.parseTryStatement=function(){var y=this.createNode();this.expectKeyword("try");var g=this.parseBlock(),C=this.matchKeyword("catch")?this.parseCatchClause():null,S=this.matchKeyword("finally")?this.parseFinallyClause():null;return C||S||this.throwError(u.Messages.NoCatchOrFinally),this.finalize(y,new f.TryStatement(g,C,S))},x.prototype.parseDebuggerStatement=function(){var y=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(y,new f.DebuggerStatement)},x.prototype.parseStatement=function(){var y;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:y=this.parseExpressionStatement();break;case 7:var g=this.lookahead.value;y=g==="{"?this.parseBlock():g==="("?this.parseExpressionStatement():g===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:y=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":y=this.parseBreakStatement();break;case"continue":y=this.parseContinueStatement();break;case"debugger":y=this.parseDebuggerStatement();break;case"do":y=this.parseDoWhileStatement();break;case"for":y=this.parseForStatement();break;case"function":y=this.parseFunctionDeclaration();break;case"if":y=this.parseIfStatement();break;case"return":y=this.parseReturnStatement();break;case"switch":y=this.parseSwitchStatement();break;case"throw":y=this.parseThrowStatement();break;case"try":y=this.parseTryStatement();break;case"var":y=this.parseVariableStatement();break;case"while":y=this.parseWhileStatement();break;case"with":y=this.parseWithStatement();break;default:y=this.parseExpressionStatement()}break;default:y=this.throwUnexpectedToken(this.lookahead)}return y},x.prototype.parseFunctionSourceElements=function(){var y=this.createNode();this.expect("{");var g=this.parseDirectivePrologues(),C=this.context.labelSet,S=this.context.inIteration,T=this.context.inSwitch,w=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)g.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=C,this.context.inIteration=S,this.context.inSwitch=T,this.context.inFunctionBody=w,this.finalize(y,new f.BlockStatement(g))},x.prototype.validateParam=function(y,g,C){var S="$"+C;this.context.strict?(this.scanner.isRestrictedWord(C)&&(y.stricted=g,y.message=u.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(y.paramSet,S)&&(y.stricted=g,y.message=u.Messages.StrictParamDupe)):y.firstRestricted||(this.scanner.isRestrictedWord(C)?(y.firstRestricted=g,y.message=u.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(C)?(y.firstRestricted=g,y.message=u.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(y.paramSet,S)&&(y.stricted=g,y.message=u.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(y.paramSet,S,{value:!0,enumerable:!0,writable:!0,configurable:!0}):y.paramSet[S]=!0},x.prototype.parseRestElement=function(y){var g=this.createNode();this.expect("...");var C=this.parsePattern(y);return this.match("=")&&this.throwError(u.Messages.DefaultRestParameter),this.match(")")||this.throwError(u.Messages.ParameterAfterRestParameter),this.finalize(g,new f.RestElement(C))},x.prototype.parseFormalParameter=function(y){for(var g=[],C=this.match("...")?this.parseRestElement(g):this.parsePatternWithDefault(g),S=0;S<g.length;S++)this.validateParam(y,g[S],g[S].value);y.simple=y.simple&&C instanceof f.Identifier,y.params.push(C)},x.prototype.parseFormalParameters=function(y){var g;if(g={simple:!0,params:[],firstRestricted:y},this.expect("("),!this.match(")"))for(g.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(g),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:g.simple,params:g.params,stricted:g.stricted,firstRestricted:g.firstRestricted,message:g.message}},x.prototype.matchAsyncFunction=function(){var y=this.matchContextualKeyword("async");if(y){var g=this.scanner.saveState();this.scanner.scanComments();var C=this.scanner.lex();this.scanner.restoreState(g),y=g.lineNumber===C.lineNumber&&C.type===4&&C.value==="function"}return y},x.prototype.parseFunctionDeclaration=function(y){var g=this.createNode(),C=this.matchContextualKeyword("async");C&&this.nextToken(),this.expectKeyword("function");var S,T=!C&&this.match("*");T&&this.nextToken();var w=null,_=null;if(!y||!this.match("(")){var E=this.lookahead;w=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(E.value)&&this.tolerateUnexpectedToken(E,u.Messages.StrictFunctionName):this.scanner.isRestrictedWord(E.value)?(_=E,S=u.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(E.value)&&(_=E,S=u.Messages.StrictReservedWord)}var D=this.context.await,O=this.context.allowYield;this.context.await=C,this.context.allowYield=!T;var M=this.parseFormalParameters(_),N=M.params,R=M.stricted;_=M.firstRestricted,M.message&&(S=M.message);var B=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=M.simple;var P=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,S),this.context.strict&&R&&this.tolerateUnexpectedToken(R,S),this.context.strict=B,this.context.allowStrictDirective=I,this.context.await=D,this.context.allowYield=O,C?this.finalize(g,new f.AsyncFunctionDeclaration(w,N,P)):this.finalize(g,new f.FunctionDeclaration(w,N,P,T))},x.prototype.parseFunctionExpression=function(){var y=this.createNode(),g=this.matchContextualKeyword("async");g&&this.nextToken(),this.expectKeyword("function");var C,S=!g&&this.match("*");S&&this.nextToken();var T,w=null,_=this.context.await,E=this.context.allowYield;if(this.context.await=g,this.context.allowYield=!S,!this.match("(")){var D=this.lookahead;w=this.context.strict||S||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(D.value)&&this.tolerateUnexpectedToken(D,u.Messages.StrictFunctionName):this.scanner.isRestrictedWord(D.value)?(T=D,C=u.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(D.value)&&(T=D,C=u.Messages.StrictReservedWord)}var O=this.parseFormalParameters(T),M=O.params,N=O.stricted;T=O.firstRestricted,O.message&&(C=O.message);var R=this.context.strict,B=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var I=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,C),this.context.strict&&N&&this.tolerateUnexpectedToken(N,C),this.context.strict=R,this.context.allowStrictDirective=B,this.context.await=_,this.context.allowYield=E,g?this.finalize(y,new f.AsyncFunctionExpression(w,M,I)):this.finalize(y,new f.FunctionExpression(w,M,I,S))},x.prototype.parseDirective=function(){var y=this.lookahead,g=this.createNode(),C=this.parseExpression(),S=C.type===d.Syntax.Literal?this.getTokenRaw(y).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(g,S?new f.Directive(C,S):new f.ExpressionStatement(C))},x.prototype.parseDirectivePrologues=function(){for(var y=null,g=[];;){var C=this.lookahead;if(C.type!==8)break;var S=this.parseDirective();g.push(S);var T=S.directive;if(typeof T!="string")break;T==="use strict"?(this.context.strict=!0,y&&this.tolerateUnexpectedToken(y,u.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(C,u.Messages.IllegalLanguageModeDirective)):!y&&C.octal&&(y=C)}return g},x.prototype.qualifiedPropertyName=function(y){switch(y.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return y.value==="["}return!1},x.prototype.parseGetterMethod=function(){var y=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();C.params.length>0&&this.tolerateError(u.Messages.BadGetterArity);var S=this.parsePropertyMethod(C);return this.context.allowYield=g,this.finalize(y,new f.FunctionExpression(null,C.params,S,!1))},x.prototype.parseSetterMethod=function(){var y=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();C.params.length!==1?this.tolerateError(u.Messages.BadSetterArity):C.params[0]instanceof f.RestElement&&this.tolerateError(u.Messages.BadSetterRestParameter);var S=this.parsePropertyMethod(C);return this.context.allowYield=g,this.finalize(y,new f.FunctionExpression(null,C.params,S,!1))},x.prototype.parseGeneratorMethod=function(){var y=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();this.context.allowYield=!1;var S=this.parsePropertyMethod(C);return this.context.allowYield=g,this.finalize(y,new f.FunctionExpression(null,C.params,S,!0))},x.prototype.isStartOfExpression=function(){var y=!0,g=this.lookahead.value;switch(this.lookahead.type){case 7:y=g==="["||g==="("||g==="{"||g==="+"||g==="-"||g==="!"||g==="~"||g==="++"||g==="--"||g==="/"||g==="/=";break;case 4:y=g==="class"||g==="delete"||g==="function"||g==="let"||g==="new"||g==="super"||g==="this"||g==="typeof"||g==="void"||g==="yield"}return y},x.prototype.parseYieldExpression=function(){var y=this.createNode();this.expectKeyword("yield");var g=null,C=!1;if(!this.hasLineTerminator){var S=this.context.allowYield;this.context.allowYield=!1,(C=this.match("*"))?(this.nextToken(),g=this.parseAssignmentExpression()):this.isStartOfExpression()&&(g=this.parseAssignmentExpression()),this.context.allowYield=S}return this.finalize(y,new f.YieldExpression(g,C))},x.prototype.parseClassElement=function(y){var g=this.lookahead,C=this.createNode(),S="",T=null,w=null,_=!1,E=!1,D=!1,O=!1;if(this.match("*"))this.nextToken();else if(_=this.match("["),(T=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(g=this.lookahead,D=!0,_=this.match("["),this.match("*")?this.nextToken():T=this.parseObjectPropertyKey()),g.type===3&&!this.hasLineTerminator&&g.value==="async"){var M=this.lookahead.value;M!==":"&&M!=="("&&M!=="*"&&(O=!0,g=this.lookahead,T=this.parseObjectPropertyKey(),g.type===3&&g.value==="constructor"&&this.tolerateUnexpectedToken(g,u.Messages.ConstructorIsAsync))}var N=this.qualifiedPropertyName(this.lookahead);return g.type===3?g.value==="get"&&N?(S="get",_=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod()):g.value==="set"&&N&&(S="set",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod()):g.type===7&&g.value==="*"&&N&&(S="init",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0),!S&&T&&this.match("(")&&(S="init",w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0),S||this.throwUnexpectedToken(this.lookahead),S==="init"&&(S="method"),_||(D&&this.isPropertyKey(T,"prototype")&&this.throwUnexpectedToken(g,u.Messages.StaticPrototype),!D&&this.isPropertyKey(T,"constructor")&&((S!=="method"||!E||w&&w.generator)&&this.throwUnexpectedToken(g,u.Messages.ConstructorSpecialMethod),y.value?this.throwUnexpectedToken(g,u.Messages.DuplicateConstructor):y.value=!0,S="constructor")),this.finalize(C,new f.MethodDefinition(T,_,w,S,D))},x.prototype.parseClassElementList=function(){var y=[],g={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():y.push(this.parseClassElement(g));return this.expect("}"),y},x.prototype.parseClassBody=function(){var y=this.createNode(),g=this.parseClassElementList();return this.finalize(y,new f.ClassBody(g))},x.prototype.parseClassDeclaration=function(y){var g=this.createNode(),C=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var S=y&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),T=null;this.matchKeyword("extends")&&(this.nextToken(),T=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var w=this.parseClassBody();return this.context.strict=C,this.finalize(g,new f.ClassDeclaration(S,T,w))},x.prototype.parseClassExpression=function(){var y=this.createNode(),g=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var C=this.lookahead.type===3?this.parseVariableIdentifier():null,S=null;this.matchKeyword("extends")&&(this.nextToken(),S=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=g,this.finalize(y,new f.ClassExpression(C,S,T))},x.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var y=this.createNode(),g=this.parseDirectivePrologues();this.lookahead.type!==2;)g.push(this.parseStatementListItem());return this.finalize(y,new f.Module(g))},x.prototype.parseScript=function(){for(var y=this.createNode(),g=this.parseDirectivePrologues();this.lookahead.type!==2;)g.push(this.parseStatementListItem());return this.finalize(y,new f.Script(g))},x.prototype.parseModuleSpecifier=function(){var y=this.createNode();this.lookahead.type!==8&&this.throwError(u.Messages.InvalidModuleSpecifier);var g=this.nextToken(),C=this.getTokenRaw(g);return this.finalize(y,new f.Literal(g.value,C))},x.prototype.parseImportSpecifier=function(){var y,g,C=this.createNode();return this.lookahead.type===3?(g=y=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),g=this.parseVariableIdentifier())):(g=y=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),g=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(C,new f.ImportSpecifier(g,y))},x.prototype.parseNamedImports=function(){this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),y},x.prototype.parseImportDefaultSpecifier=function(){var y=this.createNode(),g=this.parseIdentifierName();return this.finalize(y,new f.ImportDefaultSpecifier(g))},x.prototype.parseImportNamespaceSpecifier=function(){var y=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(u.Messages.NoAsAfterImportNamespace),this.nextToken();var g=this.parseIdentifierName();return this.finalize(y,new f.ImportNamespaceSpecifier(g))},x.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(u.Messages.IllegalImportDeclaration);var y,g=this.createNode();this.expectKeyword("import");var C=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?C=C.concat(this.parseNamedImports()):this.match("*")?C.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(C.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?C.push(this.parseImportNamespaceSpecifier()):this.match("{")?C=C.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var S=this.lookahead.value?u.Messages.UnexpectedToken:u.Messages.MissingFromClause;this.throwError(S,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(g,new f.ImportDeclaration(C,y))},x.prototype.parseExportSpecifier=function(){var y=this.createNode(),g=this.parseIdentifierName(),C=g;return this.matchContextualKeyword("as")&&(this.nextToken(),C=this.parseIdentifierName()),this.finalize(y,new f.ExportSpecifier(g,C))},x.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(u.Messages.IllegalExportDeclaration);var y,g=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var C=this.parseFunctionDeclaration(!0);y=this.finalize(g,new f.ExportDefaultDeclaration(C))}else this.matchKeyword("class")?(C=this.parseClassDeclaration(!0),y=this.finalize(g,new f.ExportDefaultDeclaration(C))):this.matchContextualKeyword("async")?(C=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),y=this.finalize(g,new f.ExportDefaultDeclaration(C))):(this.matchContextualKeyword("from")&&this.throwError(u.Messages.UnexpectedToken,this.lookahead.value),C=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),y=this.finalize(g,new f.ExportDefaultDeclaration(C)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var S=this.lookahead.value?u.Messages.UnexpectedToken:u.Messages.MissingFromClause;this.throwError(S,this.lookahead.value)}this.nextToken();var T=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(g,new f.ExportAllDeclaration(T))}else if(this.lookahead.type===4){switch(C=void 0,this.lookahead.value){case"let":case"const":C=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":C=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(g,new f.ExportNamedDeclaration(C,[],null))}else if(this.matchAsyncFunction())C=this.parseFunctionDeclaration(),y=this.finalize(g,new f.ExportNamedDeclaration(C,[],null));else{var w=[],_=null,E=!1;for(this.expect("{");!this.match("}");)E=E||this.matchKeyword("default"),w.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon()):E?(S=this.lookahead.value?u.Messages.UnexpectedToken:u.Messages.MissingFromClause,this.throwError(S,this.lookahead.value)):this.consumeSemicolon(),y=this.finalize(g,new f.ExportNamedDeclaration(null,w,_))}return y},x}();s.Parser=m},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assert=function(c,l){if(!c)throw new Error("ASSERT: "+l)}},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c=function(){function l(){this.errors=[],this.tolerant=!1}return l.prototype.recordError=function(p){this.errors.push(p)},l.prototype.tolerate=function(p){if(!this.tolerant)throw p;this.recordError(p)},l.prototype.constructError=function(p,u){var f=new Error(p);try{throw f}catch(h){Object.create&&Object.defineProperty&&(f=Object.create(h),Object.defineProperty(f,"column",{value:u}))}return f},l.prototype.createError=function(p,u,f,h){var d="Line "+u+": "+h,v=this.constructError(d,f);return v.index=p,v.lineNumber=u,v.description=h,v},l.prototype.throwError=function(p,u,f,h){throw this.createError(p,u,f,h)},l.prototype.tolerateError=function(p,u,f,h){var d=this.createError(p,u,f,h);if(!this.tolerant)throw d;this.recordError(d)},l}();s.ErrorHandler=c},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(9),p=c(4),u=c(11);function f(v){return"0123456789abcdef".indexOf(v.toLowerCase())}function h(v){return"01234567".indexOf(v)}var d=function(){function v(m,x){this.source=m,this.errorHandler=x,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return v.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},v.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},v.prototype.eof=function(){return this.index>=this.length},v.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=u.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},v.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=u.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},v.prototype.skipSingleLineComment=function(m){var x,y,g=[];for(this.trackComment&&(g=[],x=this.index-m,y={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var C=this.source.charCodeAt(this.index);if(++this.index,p.Character.isLineTerminator(C)){if(this.trackComment){y.end={line:this.lineNumber,column:this.index-this.lineStart-1};var S={multiLine:!1,slice:[x+m,this.index-1],range:[x,this.index-1],loc:y};g.push(S)}return C===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,g}}return this.trackComment&&(y.end={line:this.lineNumber,column:this.index-this.lineStart},S={multiLine:!1,slice:[x+m,this.index],range:[x,this.index],loc:y},g.push(S)),g},v.prototype.skipMultiLineComment=function(){var m,x,y=[];for(this.trackComment&&(y=[],m=this.index-2,x={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var g=this.source.charCodeAt(this.index);if(p.Character.isLineTerminator(g))g===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(g===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){x.end={line:this.lineNumber,column:this.index-this.lineStart};var C={multiLine:!0,slice:[m+2,this.index-2],range:[m,this.index],loc:x};y.push(C)}return y}++this.index}else++this.index}return this.trackComment&&(x.end={line:this.lineNumber,column:this.index-this.lineStart},C={multiLine:!0,slice:[m+2,this.index],range:[m,this.index],loc:x},y.push(C)),this.tolerateUnexpectedToken(),y},v.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var x=this.index===0;!this.eof();){var y=this.source.charCodeAt(this.index);if(p.Character.isWhiteSpace(y))++this.index;else if(p.Character.isLineTerminator(y))++this.index,y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,x=!0;else if(y===47)if((y=this.source.charCodeAt(this.index+1))===47){this.index+=2;var g=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(g)),x=!0}else{if(y!==42)break;this.index+=2,g=this.skipMultiLineComment(),this.trackComment&&(m=m.concat(g))}else if(x&&y===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,g=this.skipSingleLineComment(3),this.trackComment&&(m=m.concat(g))}else{if(y!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,g=this.skipSingleLineComment(4),this.trackComment&&(m=m.concat(g))}}return m},v.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},v.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},v.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},v.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},v.prototype.codePointAt=function(m){var x=this.source.charCodeAt(m);if(x>=55296&&x<=56319){var y=this.source.charCodeAt(m+1);y>=56320&&y<=57343&&(x=1024*(x-55296)+y-56320+65536)}return x},v.prototype.scanHexEscape=function(m){for(var x=m==="u"?4:2,y=0,g=0;g<x;++g){if(this.eof()||!p.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;y=16*y+f(this.source[this.index++])}return String.fromCharCode(y)},v.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],x=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],p.Character.isHexDigit(m.charCodeAt(0)));)x=16*x+f(m);return(x>1114111||m!=="}")&&this.throwUnexpectedToken(),p.Character.fromCodePoint(x)},v.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var x=this.source.charCodeAt(this.index);if(x===92)return this.index=m,this.getComplexIdentifier();if(x>=55296&&x<57343)return this.index=m,this.getComplexIdentifier();if(!p.Character.isIdentifierPart(x))break;++this.index}return this.source.slice(m,this.index)},v.prototype.getComplexIdentifier=function(){var m,x=this.codePointAt(this.index),y=p.Character.fromCodePoint(x);for(this.index+=y.length,x===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&p.Character.isIdentifierStart(m.charCodeAt(0))||this.throwUnexpectedToken(),y=m);!this.eof()&&(x=this.codePointAt(this.index),p.Character.isIdentifierPart(x));)y+=m=p.Character.fromCodePoint(x),this.index+=m.length,x===92&&(y=y.substr(0,y.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&p.Character.isIdentifierPart(m.charCodeAt(0))||this.throwUnexpectedToken(),y+=m);return y},v.prototype.octalToDecimal=function(m){var x=m!=="0",y=h(m);return!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(x=!0,y=8*y+h(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(y=8*y+h(this.source[this.index++]))),{code:y,octal:x}},v.prototype.scanIdentifier=function(){var m,x=this.index,y=this.source.charCodeAt(x)===92?this.getComplexIdentifier():this.getIdentifier();if((m=y.length===1?3:this.isKeyword(y)?4:y==="null"?5:y==="true"||y==="false"?1:3)!=3&&x+y.length!==this.index){var g=this.index;this.index=x,this.tolerateUnexpectedToken(u.Messages.InvalidEscapedReservedWord),this.index=g}return{type:m,value:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},v.prototype.scanPunctuator=function(){var m=this.index,x=this.source[this.index];switch(x){case"(":case"{":x==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,x="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(x=this.source.substr(this.index,4))===">>>="?this.index+=4:(x=x.substr(0,3))==="==="||x==="!=="||x===">>>"||x==="<<="||x===">>="||x==="**="?this.index+=3:(x=x.substr(0,2))==="&&"||x==="||"||x==="=="||x==="!="||x==="+="||x==="-="||x==="*="||x==="/="||x==="++"||x==="--"||x==="<<"||x===">>"||x==="&="||x==="|="||x==="^="||x==="%="||x==="<="||x===">="||x==="=>"||x==="**"?this.index+=2:(x=this.source[this.index],"<>=!+-*%&|^/".indexOf(x)>=0&&++this.index)}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:x,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanHexLiteral=function(m){for(var x="";!this.eof()&&p.Character.isHexDigit(this.source.charCodeAt(this.index));)x+=this.source[this.index++];return x.length===0&&this.throwUnexpectedToken(),p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+x,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanBinaryLiteral=function(m){for(var x,y="";!this.eof()&&((x=this.source[this.index])==="0"||x==="1");)y+=this.source[this.index++];return y.length===0&&this.throwUnexpectedToken(),this.eof()||(x=this.source.charCodeAt(this.index),(p.Character.isIdentifierStart(x)||p.Character.isDecimalDigit(x))&&this.throwUnexpectedToken()),{type:6,value:parseInt(y,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanOctalLiteral=function(m,x){var y="",g=!1;for(p.Character.isOctalDigit(m.charCodeAt(0))?(g=!0,y="0"+this.source[this.index++]):++this.index;!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];return g||y.length!==0||this.throwUnexpectedToken(),(p.Character.isIdentifierStart(this.source.charCodeAt(this.index))||p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(y,8),octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},v.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var x=this.source[m];if(x==="8"||x==="9")return!1;if(!p.Character.isOctalDigit(x.charCodeAt(0)))return!0}return!0},v.prototype.scanNumericLiteral=function(){var m=this.index,x=this.source[m];l.assert(p.Character.isDecimalDigit(x.charCodeAt(0))||x===".","Numeric literal must start with a decimal digit or a decimal point");var y="";if(x!=="."){if(y=this.source[this.index++],x=this.source[this.index],y==="0"){if(x==="x"||x==="X")return++this.index,this.scanHexLiteral(m);if(x==="b"||x==="B")return++this.index,this.scanBinaryLiteral(m);if(x==="o"||x==="O")return this.scanOctalLiteral(x,m);if(x&&p.Character.isOctalDigit(x.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(x,m)}for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];x=this.source[this.index]}if(x==="."){for(y+=this.source[this.index++];p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];x=this.source[this.index]}if(x==="e"||x==="E")if(y+=this.source[this.index++],(x=this.source[this.index])!=="+"&&x!=="-"||(y+=this.source[this.index++]),p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)y+=this.source[this.index++];else this.throwUnexpectedToken();return p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(y),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanStringLiteral=function(){var m=this.index,x=this.source[m];l.assert(x==="'"||x==='"',"String literal must starts with a quote"),++this.index;for(var y=!1,g="";!this.eof();){var C=this.source[this.index++];if(C===x){x="";break}if(C==="\\")if((C=this.source[this.index++])&&p.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(C){case"u":if(this.source[this.index]==="{")++this.index,g+=this.scanUnicodeCodePointEscape();else{var S=this.scanHexEscape(C);S===null&&this.throwUnexpectedToken(),g+=S}break;case"x":var T=this.scanHexEscape(C);T===null&&this.throwUnexpectedToken(u.Messages.InvalidHexEscapeSequence),g+=T;break;case"n":g+=`
`;break;case"r":g+="\r";break;case"t":g+="	";break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;case"8":case"9":g+=C,this.tolerateUnexpectedToken();break;default:if(C&&p.Character.isOctalDigit(C.charCodeAt(0))){var w=this.octalToDecimal(C);y=w.octal||y,g+=String.fromCharCode(w.code)}else g+=C}else{if(p.Character.isLineTerminator(C.charCodeAt(0)))break;g+=C}}return x!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:g,octal:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanTemplate=function(){var m="",x=!1,y=this.index,g=this.source[y]==="`",C=!1,S=2;for(++this.index;!this.eof();){var T=this.source[this.index++];if(T==="`"){S=1,C=!0,x=!0;break}if(T==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,x=!0;break}m+=T}else if(T==="\\")if(T=this.source[this.index++],p.Character.isLineTerminator(T.charCodeAt(0)))++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(T){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var w=this.index,_=this.scanHexEscape(T);_!==null?m+=_:(this.index=w,m+=T)}break;case"x":var E=this.scanHexEscape(T);E===null&&this.throwUnexpectedToken(u.Messages.InvalidHexEscapeSequence),m+=E;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:T==="0"?(p.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(u.Messages.TemplateOctalLiteral),m+="\0"):p.Character.isOctalDigit(T.charCodeAt(0))?this.throwUnexpectedToken(u.Messages.TemplateOctalLiteral):m+=T}else p.Character.isLineTerminator(T.charCodeAt(0))?(++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=T}return x||this.throwUnexpectedToken(),g||this.curlyStack.pop(),{type:10,value:this.source.slice(y+1,this.index-S),cooked:m,head:g,tail:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:y,end:this.index}},v.prototype.testRegExp=function(m,x){var y=m,g=this;x.indexOf("u")>=0&&(y=y.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(C,S,T){var w=parseInt(S||T,16);return w>1114111&&g.throwUnexpectedToken(u.Messages.InvalidRegExp),w<=65535?String.fromCharCode(w):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(y)}catch{this.throwUnexpectedToken(u.Messages.InvalidRegExp)}try{return new RegExp(m,x)}catch{return null}},v.prototype.scanRegExpBody=function(){var m=this.source[this.index];l.assert(m==="/","Regular expression literal must start with a slash");for(var x=this.source[this.index++],y=!1,g=!1;!this.eof();)if(x+=m=this.source[this.index++],m==="\\")m=this.source[this.index++],p.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(u.Messages.UnterminatedRegExp),x+=m;else if(p.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(u.Messages.UnterminatedRegExp);else if(y)m==="]"&&(y=!1);else{if(m==="/"){g=!0;break}m==="["&&(y=!0)}return g||this.throwUnexpectedToken(u.Messages.UnterminatedRegExp),x.substr(1,x.length-2)},v.prototype.scanRegExpFlags=function(){for(var m="";!this.eof();){var x=this.source[this.index];if(!p.Character.isIdentifierPart(x.charCodeAt(0)))break;if(++this.index,x!=="\\"||this.eof())m+=x;else if((x=this.source[this.index])==="u"){++this.index;var y=this.index,g=this.scanHexEscape("u");if(g!==null)for(m+=g;y<this.index;++y)this.source[y];else this.index=y,m+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return m},v.prototype.scanRegExp=function(){var m=this.index,x=this.scanRegExpBody(),y=this.scanRegExpFlags();return{type:9,value:"",pattern:x,flags:y,regex:this.testRegExp(x,y),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return p.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?p.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():p.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&p.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},v}();s.Scanner=d},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TokenName={},s.TokenName[1]="Boolean",s.TokenName[2]="<end>",s.TokenName[3]="Identifier",s.TokenName[4]="Keyword",s.TokenName[5]="Null",s.TokenName[6]="Numeric",s.TokenName[7]="Punctuator",s.TokenName[8]="String",s.TokenName[9]="RegularExpression",s.TokenName[10]="Template"},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(10),p=c(12),u=c(13),f=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(v){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(v)>=0},d.prototype.isRegexStart=function(){var v=this.values[this.values.length-1],m=v!==null;switch(v){case"this":case"]":m=!1;break;case")":var x=this.values[this.paren-1];m=x==="if"||x==="while"||x==="for"||x==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function")m=!!(y=this.values[this.curly-4])&&!this.beforeFunctionExpression(y);else if(this.values[this.curly-4]==="function"){var y;m=!(y=this.values[this.curly-5])||!this.beforeFunctionExpression(y)}}return m},d.prototype.push=function(v){v.type===7||v.type===4?(v.value==="{"?this.curly=this.values.length:v.value==="("&&(this.paren=this.values.length),this.values.push(v.value)):this.values.push(null)},d}(),h=function(){function d(v,m){this.errorHandler=new l.ErrorHandler,this.errorHandler.tolerant=!!m&&typeof m.tolerant=="boolean"&&m.tolerant,this.scanner=new p.Scanner(v,this.errorHandler),this.scanner.trackComment=!!m&&typeof m.comment=="boolean"&&m.comment,this.trackRange=!!m&&typeof m.range=="boolean"&&m.range,this.trackLoc=!!m&&typeof m.loc=="boolean"&&m.loc,this.buffer=[],this.reader=new f}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var v=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<v.length;++m){var x=v[m],y=this.scanner.source.slice(x.slice[0],x.slice[1]),g={type:x.multiLine?"BlockComment":"LineComment",value:y};this.trackRange&&(g.range=x.range),this.trackLoc&&(g.loc=x.loc),this.buffer.push(g)}if(!this.scanner.eof()){var C=void 0;this.trackLoc&&(C={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var S=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(S);var T={type:u.TokenName[S.type],value:this.scanner.source.slice(S.start,S.end)};if(this.trackRange&&(T.range=[S.start,S.end]),this.trackLoc&&(C.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},T.loc=C),S.type===9){var w=S.pattern,_=S.flags;T.regex={pattern:w,flags:_}}this.buffer.push(T)}}return this.buffer.shift()},d}();s.Tokenizer=h}])},a.exports=i()},function(a,n,r){var i=r(38),o=r(53),s=r(76),c=r(54),l=Object.prototype.toString,p=Object.prototype.hasOwnProperty,u={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},f=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function h(R){var B,I,P;if(B=R.toString(16).toUpperCase(),R<=255)I="x",P=2;else if(R<=65535)I="u",P=4;else{if(!(R<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");I="U",P=8}return"\\"+I+i.repeat("0",P-B.length)+B}function d(R){this.schema=R.schema||s,this.indent=Math.max(1,R.indent||2),this.noArrayIndent=R.noArrayIndent||!1,this.skipInvalid=R.skipInvalid||!1,this.flowLevel=i.isNothing(R.flowLevel)?-1:R.flowLevel,this.styleMap=function(B,I){var P,L,k,A,j,H,K;if(I===null)return{};for(P={},k=0,A=(L=Object.keys(I)).length;k<A;k+=1)j=L[k],H=String(I[j]),j.slice(0,2)==="!!"&&(j="tag:yaml.org,2002:"+j.slice(2)),(K=B.compiledTypeMap.fallback[j])&&p.call(K.styleAliases,H)&&(H=K.styleAliases[H]),P[j]=H;return P}(this.schema,R.styles||null),this.sortKeys=R.sortKeys||!1,this.lineWidth=R.lineWidth||80,this.noRefs=R.noRefs||!1,this.noCompatMode=R.noCompatMode||!1,this.condenseFlow=R.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function v(R,B){for(var I,P=i.repeat(" ",B),L=0,k=-1,A="",j=R.length;L<j;)(k=R.indexOf(`
`,L))===-1?(I=R.slice(L),L=j):(I=R.slice(L,k+1),L=k+1),I.length&&I!==`
`&&(A+=P),A+=I;return A}function m(R,B){return`
`+i.repeat(" ",R.indent*B)}function x(R){return R===32||R===9}function y(R){return 32<=R&&R<=126||161<=R&&R<=55295&&R!==8232&&R!==8233||57344<=R&&R<=65533&&R!==65279||65536<=R&&R<=1114111}function g(R,B){return y(R)&&R!==65279&&R!==44&&R!==91&&R!==93&&R!==123&&R!==125&&R!==58&&(R!==35||B&&function(I){return y(I)&&!x(I)&&I!==65279&&I!==13&&I!==10}(B))}function C(R){return/^\n* /.test(R)}function S(R,B,I,P,L){var k,A,j,H,K=!1,Y=!1,q=P!==-1,Z=-1,re=y(H=R.charCodeAt(0))&&H!==65279&&!x(H)&&H!==45&&H!==63&&H!==58&&H!==44&&H!==91&&H!==93&&H!==123&&H!==125&&H!==35&&H!==38&&H!==42&&H!==33&&H!==124&&H!==61&&H!==62&&H!==39&&H!==34&&H!==37&&H!==64&&H!==96&&!x(R.charCodeAt(R.length-1));if(B)for(k=0;k<R.length;k++){if(!y(A=R.charCodeAt(k)))return 5;j=k>0?R.charCodeAt(k-1):null,re=re&&g(A,j)}else{for(k=0;k<R.length;k++){if((A=R.charCodeAt(k))===10)K=!0,q&&(Y=Y||k-Z-1>P&&R[Z+1]!==" ",Z=k);else if(!y(A))return 5;j=k>0?R.charCodeAt(k-1):null,re=re&&g(A,j)}Y=Y||q&&k-Z-1>P&&R[Z+1]!==" "}return K||Y?I>9&&C(R)?5:Y?4:3:re&&!L(R)?1:2}function T(R,B,I,P){R.dump=function(){if(B.length===0)return"''";if(!R.noCompatMode&&f.indexOf(B)!==-1)return"'"+B+"'";var L=R.indent*Math.max(1,I),k=R.lineWidth===-1?-1:Math.max(Math.min(R.lineWidth,40),R.lineWidth-L),A=P||R.flowLevel>-1&&I>=R.flowLevel;switch(S(B,A,R.indent,k,function(j){return function(H,K){var Y,q;for(Y=0,q=H.implicitTypes.length;Y<q;Y+=1)if(H.implicitTypes[Y].resolve(K))return!0;return!1}(R,j)})){case 1:return B;case 2:return"'"+B.replace(/'/g,"''")+"'";case 3:return"|"+w(B,R.indent)+_(v(B,L));case 4:return">"+w(B,R.indent)+_(v(function(j,H){for(var K,Y,q=/(\n+)([^\n]*)/g,Z=(ae=j.indexOf(`
`),ae=ae!==-1?ae:j.length,q.lastIndex=ae,E(j.slice(0,ae),H)),re=j[0]===`
`||j[0]===" ",ae;Y=q.exec(j);){var ee=Y[1],F=Y[2];K=F[0]===" ",Z+=ee+(re||K||F===""?"":`
`)+E(F,H),re=K}return Z}(B,k),L));case 5:return'"'+function(j){for(var H,K,Y,q="",Z=0;Z<j.length;Z++)(H=j.charCodeAt(Z))>=55296&&H<=56319&&(K=j.charCodeAt(Z+1))>=56320&&K<=57343?(q+=h(1024*(H-55296)+K-56320+65536),Z++):(Y=u[H],q+=!Y&&y(H)?j[Z]:Y||h(H));return q}(B)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function w(R,B){var I=C(R)?String(B):"",P=R[R.length-1]===`
`;return I+(P&&(R[R.length-2]===`
`||R===`
`)?"+":P?"":"-")+`
`}function _(R){return R[R.length-1]===`
`?R.slice(0,-1):R}function E(R,B){if(R===""||R[0]===" ")return R;for(var I,P,L=/ [^ ]/g,k=0,A=0,j=0,H="";I=L.exec(R);)(j=I.index)-k>B&&(P=A>k?A:j,H+=`
`+R.slice(k,P),k=P+1),A=j;return H+=`
`,R.length-k>B&&A>k?H+=R.slice(k,A)+`
`+R.slice(A+1):H+=R.slice(k),H.slice(1)}function D(R,B,I){var P,L,k,A,j,H;for(k=0,A=(L=I?R.explicitTypes:R.implicitTypes).length;k<A;k+=1)if(((j=L[k]).instanceOf||j.predicate)&&(!j.instanceOf||typeof B=="object"&&B instanceof j.instanceOf)&&(!j.predicate||j.predicate(B))){if(R.tag=I?j.tag:"?",j.represent){if(H=R.styleMap[j.tag]||j.defaultStyle,l.call(j.represent)==="[object Function]")P=j.represent(B,H);else{if(!p.call(j.represent,H))throw new o("!<"+j.tag+'> tag resolver accepts not "'+H+'" style');P=j.represent[H](B,H)}R.dump=P}return!0}return!1}function O(R,B,I,P,L,k){R.tag=null,R.dump=I,D(R,I,!1)||D(R,I,!0);var A=l.call(R.dump);P&&(P=R.flowLevel<0||R.flowLevel>B);var j,H,K=A==="[object Object]"||A==="[object Array]";if(K&&(H=(j=R.duplicates.indexOf(I))!==-1),(R.tag!==null&&R.tag!=="?"||H||R.indent!==2&&B>0)&&(L=!1),H&&R.usedDuplicates[j])R.dump="*ref_"+j;else{if(K&&H&&!R.usedDuplicates[j]&&(R.usedDuplicates[j]=!0),A==="[object Object]")P&&Object.keys(R.dump).length!==0?(function(q,Z,re,ae){var ee,F,b,G,U,z,W="",$=q.tag,J=Object.keys(re);if(q.sortKeys===!0)J.sort();else if(typeof q.sortKeys=="function")J.sort(q.sortKeys);else if(q.sortKeys)throw new o("sortKeys must be a boolean or a function");for(ee=0,F=J.length;ee<F;ee+=1)z="",ae&&ee===0||(z+=m(q,Z)),G=re[b=J[ee]],O(q,Z+1,b,!0,!0,!0)&&((U=q.tag!==null&&q.tag!=="?"||q.dump&&q.dump.length>1024)&&(q.dump&&q.dump.charCodeAt(0)===10?z+="?":z+="? "),z+=q.dump,U&&(z+=m(q,Z)),O(q,Z+1,G,!0,U)&&(q.dump&&q.dump.charCodeAt(0)===10?z+=":":z+=": ",W+=z+=q.dump));q.tag=$,q.dump=W||"{}"}(R,B,R.dump,L),H&&(R.dump="&ref_"+j+R.dump)):(function(q,Z,re){var ae,ee,F,b,G,U="",z=q.tag,W=Object.keys(re);for(ae=0,ee=W.length;ae<ee;ae+=1)G="",ae!==0&&(G+=", "),q.condenseFlow&&(G+='"'),b=re[F=W[ae]],O(q,Z,F,!1,!1)&&(q.dump.length>1024&&(G+="? "),G+=q.dump+(q.condenseFlow?'"':"")+":"+(q.condenseFlow?"":" "),O(q,Z,b,!1,!1)&&(U+=G+=q.dump));q.tag=z,q.dump="{"+U+"}"}(R,B,R.dump),H&&(R.dump="&ref_"+j+" "+R.dump));else if(A==="[object Array]"){var Y=R.noArrayIndent&&B>0?B-1:B;P&&R.dump.length!==0?(function(q,Z,re,ae){var ee,F,b="",G=q.tag;for(ee=0,F=re.length;ee<F;ee+=1)O(q,Z+1,re[ee],!0,!0)&&(ae&&ee===0||(b+=m(q,Z)),q.dump&&q.dump.charCodeAt(0)===10?b+="-":b+="- ",b+=q.dump);q.tag=G,q.dump=b||"[]"}(R,Y,R.dump,L),H&&(R.dump="&ref_"+j+R.dump)):(function(q,Z,re){var ae,ee,F="",b=q.tag;for(ae=0,ee=re.length;ae<ee;ae+=1)O(q,Z,re[ae],!1,!1)&&(ae!==0&&(F+=","+(q.condenseFlow?"":" ")),F+=q.dump);q.tag=b,q.dump="["+F+"]"}(R,Y,R.dump),H&&(R.dump="&ref_"+j+" "+R.dump))}else{if(A!=="[object String]"){if(R.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+A)}R.tag!=="?"&&T(R,R.dump,B,k)}R.tag!==null&&R.tag!=="?"&&(R.dump="!<"+R.tag+"> "+R.dump)}return!0}function M(R,B){var I,P,L=[],k=[];for(function A(j,H,K){var Y,q,Z;if(j!==null&&typeof j=="object")if((q=H.indexOf(j))!==-1)K.indexOf(q)===-1&&K.push(q);else if(H.push(j),Array.isArray(j))for(q=0,Z=j.length;q<Z;q+=1)A(j[q],H,K);else for(Y=Object.keys(j),q=0,Z=Y.length;q<Z;q+=1)A(j[Y[q]],H,K)}(R,L,k),I=0,P=k.length;I<P;I+=1)B.duplicates.push(L[k[I]]);B.usedDuplicates=new Array(P)}function N(R,B){var I=new d(B=B||{});return I.noRefs||M(R,I),O(I,0,R,!0,!0)?I.dump+`
`:""}a.exports.dump=N,a.exports.safeDump=function(R,B){return N(R,i.extend({schema:c},B))}},function(a,n,r){r(31),r(32),r(33),r(64),r(19),r(65),r(20),r(68),r(92),r(144),r(22),r(94),r(23);var i,o=this&&this.__extends||(i=function(S,T){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var E in _)_.hasOwnProperty(E)&&(w[E]=_[E])})(S,T)},function(S,T){function w(){this.constructor=S}i(S,T),S.prototype=T===null?Object.create(T):(w.prototype=T.prototype,new w)}),s=this&&this.__values||function(S){var T=typeof Symbol=="function"&&Symbol.iterator,w=T&&S[T],_=0;if(w)return w.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&_>=S.length&&(S=void 0),{value:S&&S[_++],done:!S}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(S,T){var w=typeof Symbol=="function"&&S[Symbol.iterator];if(!w)return S;var _,E,D=w.call(S),O=[];try{for(;(T===void 0||T-- >0)&&!(_=D.next()).done;)O.push(_.value)}catch(M){E={error:M}}finally{try{_&&!_.done&&(w=D.return)&&w.call(D)}finally{if(E)throw E.error}}return O};Object.defineProperty(n,"__esModule",{value:!0});var l=r(91),p=r(1),u=r(183),f=r(0),h=r(7),d=r(95),v=r(69),m=r(3),x=r(305),y=r(306),g=r(307),C=function(S){function T(w,_){_===void 0&&(_=!1);var E=S.call(this)||this;return E._hasDeclaration=!1,E._docTypeName="",E._hasDocumentElement=!1,E._currentElementSerialized=!1,E._openTags=[],E._ended=!1,E._fragment=_,E._options=p.applyDefaults(w||{},l.DefaultXMLBuilderCBOptions),E._builderOptions={defaultNamespace:E._options.defaultNamespace,namespaceAlias:E._options.namespaceAlias},E._options.format==="json"?E._writer=new y.JSONCBWriter(E._options):E._options.format==="yaml"?E._writer=new g.YAMLCBWriter(E._options):E._writer=new x.XMLCBWriter(E._options),E._options.data!==void 0&&E.on("data",E._options.data),E._options.end!==void 0&&E.on("end",E._options.end),E._options.error!==void 0&&E.on("error",E._options.error),E._prefixMap=new d.NamespacePrefixMap,E._prefixMap.set("xml",h.namespace.XML),E._prefixIndex={value:1},E._push(E._writer.frontMatter()),E}return o(T,S),T.prototype.ele=function(w,_,E){var D,O;if(p.isObject(w)||p.isString(w)&&(/^\s*</.test(w)||/^\s*[\{\[]/.test(w)||/^(\s*|(#.*)|(%.*))*---/.test(w))){var M=u.fragment().set(this._options);try{M.ele(w)}catch(I){return this.emit("error",I),this}try{for(var N=s(M.node.childNodes),R=N.next();!R.done;R=N.next()){var B=R.value;this._fromNode(B)}}catch(I){D={error:I}}finally{try{R&&!R.done&&(O=N.return)&&O.call(N)}finally{if(D)throw D.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=u.fragment(this._builderOptions).ele(w,_,E)}catch(I){return this.emit("error",I),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},T.prototype.att=function(w,_,E){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(w,_,E)}catch(D){return this.emit("error",D),this}return this},T.prototype.com=function(w){var _;this._serializeOpenTag(!0);try{_=u.fragment(this._builderOptions).com(w).first().node}catch(E){return this.emit("error",E),this}return!this._options.wellFormed||f.xml_isLegalChar(_.data)&&_.data.indexOf("--")===-1&&!_.data.endsWith("-")?(this._push(this._writer.comment(_.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},T.prototype.txt=function(w){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var _;this._serializeOpenTag(!0);try{_=u.fragment(this._builderOptions).txt(w).first().node}catch(D){return this.emit("error",D),this}if(this._options.wellFormed&&!f.xml_isLegalChar(_.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var E=_.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(E)),this},T.prototype.ins=function(w,_){var E;_===void 0&&(_=""),this._serializeOpenTag(!0);try{E=u.fragment(this._builderOptions).ins(w,_).first().node}catch(D){return this.emit("error",D),this}return this._options.wellFormed&&(E.target.indexOf(":")!==-1||/^xml$/i.test(E.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!f.xml_isLegalChar(E.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(E.target,E.data)),this)},T.prototype.dat=function(w){var _;this._serializeOpenTag(!0);try{_=u.fragment(this._builderOptions).dat(w).first().node}catch(E){return this.emit("error",E),this}return this._push(this._writer.cdata(_.data)),this},T.prototype.dec=function(w){return w===void 0&&(w={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(w.version||"1.0",w.encoding,w.standalone)),this._hasDeclaration=!0,this)},T.prototype.dtd=function(w){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var _;try{_=u.create().dtd(w).first().node}catch(E){return this.emit("error",E),this}return this._options.wellFormed&&!f.xml_isPubidChar(_.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!f.xml_isLegalChar(_.systemId)||_.systemId.indexOf('"')!==-1&&_.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=w.name,this._push(this._writer.docType(w.name,_.publicId,_.systemId)),this)},T.prototype.import=function(w){var _,E,D=u.fragment().set(this._options);try{D.import(w)}catch(R){return this.emit("error",R),this}try{for(var O=s(D.node.childNodes),M=O.next();!M.done;M=O.next()){var N=M.value;this._fromNode(N)}}catch(R){_={error:R}}finally{try{M&&!M.done&&(E=O.return)&&E.call(O)}finally{if(_)throw _.error}}return this},T.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},T.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},T.prototype._serializeOpenTag=function(w){if(!this._currentElementSerialized&&this._currentElement!==void 0){var _=this._currentElement.node;if(!this._options.wellFormed||_.localName.indexOf(":")===-1&&f.xml_isName(_.localName)){var E="",D=!1,O=this._prefixMap.copy(),M={},N=this._recordNamespaceInformation(_,O,M),R=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],B=_.namespaceURI;if(B===null&&(B=R),R===B)N!==null&&(D=!0),E=B===h.namespace.XML?"xml:"+_.localName:_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E));else{var I=_.prefix,P=null;if(I===null&&B===N||(P=O.get(I,B)),I==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));P=I}P!==null?(E=P+":"+_.localName,N!==null&&N!==h.namespace.XML&&(R=N||null),this._writer.beginElement(E),this._push(this._writer.openTagBegin(E))):I!==null?(I in M&&(I=this._generatePrefix(B,O,this._prefixIndex)),O.set(I,B),E+=I+":"+_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns:"+I,this._serializeAttributeValue(B,this._options.wellFormed))),N!==null&&(R=N||null)):N===null||N!==null&&N!==B?(D=!0,E+=_.localName,R=B,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(B,this._options.wellFormed)))):(E+=_.localName,R=B,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)))}this._serializeAttributes(_,O,this._prefixIndex,M,D,this._options.wellFormed);var L=B===h.namespace.HTML;L&&!w&&T._VoidElementNames.has(_.localName)?(this._push(this._writer.openTagEnd(E,!0,!0)),this._writer.endElement(E)):L||w?this._push(this._writer.openTagEnd(E,!1,!1)):(this._push(this._writer.openTagEnd(E,!0,!1)),this._writer.endElement(E)),this._currentElementSerialized=!0,this._openTags.push([E,R,this._prefixMap,w]),this._isPrefixMapModified(this._prefixMap,O)&&(this._prefixMap=O),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},T.prototype._serializeCloseTag=function(){this._writer.level--;var w=this._openTags.pop();if(w!==void 0){var _=c(w,4),E=_[0],D=(_[1],_[2]),O=_[3];this._prefixMap=D,O&&(this._push(this._writer.closeTag(E)),this._writer.endElement(E))}else this.emit("error",new Error("Last element is undefined."))},T.prototype._push=function(w){w===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):w.length!==0&&(this._writer.hasData=!0,this.emit("data",w,this._writer.level))},T.prototype._fromNode=function(w){var _,E,D,O;if(m.Guard.isElementNode(w)){var M=w.prefix?w.prefix+":"+w.localName:w.localName;w.namespaceURI!==null?this.ele(w.namespaceURI,M):this.ele(M);try{for(var N=s(w.attributes),R=N.next();!R.done;R=N.next()){var B=R.value,I=B.prefix?B.prefix+":"+B.localName:B.localName;B.namespaceURI!==null?this.att(B.namespaceURI,I,B.value):this.att(I,B.value)}}catch(A){_={error:A}}finally{try{R&&!R.done&&(E=N.return)&&E.call(N)}finally{if(_)throw _.error}}try{for(var P=s(w.childNodes),L=P.next();!L.done;L=P.next()){var k=L.value;this._fromNode(k)}}catch(A){D={error:A}}finally{try{L&&!L.done&&(O=P.return)&&O.call(P)}finally{if(D)throw D.error}}this.up()}else m.Guard.isExclusiveTextNode(w)&&w.data?this.txt(w.data):m.Guard.isCommentNode(w)?this.com(w.data):m.Guard.isCDATASectionNode(w)?this.dat(w.data):m.Guard.isProcessingInstructionNode(w)&&this.ins(w.target,w.data)},T.prototype._serializeAttributes=function(w,_,E,D,O,M){var N,R,B=M?new v.LocalNameSet:void 0;try{for(var I=s(w.attributes),P=I.next();!P.done;P=I.next()){var L=P.value;if(M||O||L.namespaceURI!==null){if(M&&B&&B.has(L.namespaceURI,L.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));M&&B&&B.set(L.namespaceURI,L.localName);var k=L.namespaceURI,A=null;if(k!==null)if(A=_.get(L.prefix,k),k===h.namespace.XMLNS){if(L.value===h.namespace.XML||L.prefix===null&&O||L.prefix!==null&&(!(L.localName in D)||D[L.localName]!==L.value)&&_.has(L.localName,L.value))continue;if(M&&L.value===h.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(M&&L.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));L.prefix==="xmlns"&&(A="xmlns")}else A===null&&(A=L.prefix===null||_.hasPrefix(L.prefix)&&!_.has(L.prefix,k)?this._generatePrefix(k,_,E):L.prefix,this._push(this._writer.attribute("xmlns:"+A,this._serializeAttributeValue(k,this._options.wellFormed))));if(M&&(L.localName.indexOf(":")!==-1||!f.xml_isName(L.localName)||L.localName==="xmlns"&&k===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((A!==null?A+":":"")+L.localName,this._serializeAttributeValue(L.value,this._options.wellFormed)))}else this._push(this._writer.attribute(L.localName,this._serializeAttributeValue(L.value,this._options.wellFormed)))}}catch(j){N={error:j}}finally{try{P&&!P.done&&(R=I.return)&&R.call(I)}finally{if(N)throw N.error}}},T.prototype._serializeAttributeValue=function(w,_){return _&&w!==null&&!f.xml_isLegalChar(w)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):w===null?"":w.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},T.prototype._recordNamespaceInformation=function(w,_,E){var D,O,M=null;try{for(var N=s(w.attributes),R=N.next();!R.done;R=N.next()){var B=R.value,I=B.namespaceURI,P=B.prefix;if(I===h.namespace.XMLNS){if(P===null){M=B.value;continue}var L=B.localName,k=B.value;if(k===h.namespace.XML||(k===""&&(k=null),_.has(L,k)))continue;_.set(L,k),E[L]=k||""}}}catch(A){D={error:A}}finally{try{R&&!R.done&&(O=N.return)&&O.call(N)}finally{if(D)throw D.error}}return M},T.prototype._generatePrefix=function(w,_,E){var D="ns"+E.value;return E.value++,_.set(D,w),D},T.prototype._isPrefixMapModified=function(w,_){var E=w._items,D=_._items,O=w._nullItems,M=_._nullItems;for(var N in D){var R=E[N];if(R===void 0)return!0;var B=D[N];if(R.length!==B.length)return!0;for(var I=0;I<R.length;I++)if(R[I]!==B[I])return!0}if(O.length!==M.length)return!0;for(I=0;I<O.length;I++)if(O[I]!==M[I])return!0;return!1},T._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),T}(r(308).EventEmitter);n.XMLBuilderCBImpl=C},function(a,n,r){r(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var f in u)u.hasOwnProperty(f)&&(p[f]=u[f])})(c,l)},function(c,l){function p(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(c){function l(p){var u=c.call(this,p)||this;return u._lineLength=0,u}return o(l,c),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(p,u,f){var h=this._beginLine()+"<?xml";return h+=' version="'+p+'"',u!==void 0&&(h+=' encoding="'+u+'"'),f!==void 0&&(h+=' standalone="'+(f?"yes":"no")+'"'),h+="?>"},l.prototype.docType=function(p,u,f){var h=this._beginLine();return h+=u&&f?"<!DOCTYPE "+p+' PUBLIC "'+u+'" "'+f+'">':u?"<!DOCTYPE "+p+' PUBLIC "'+u+'">':f?"<!DOCTYPE "+p+' SYSTEM "'+f+'">':"<!DOCTYPE "+p+">"},l.prototype.comment=function(p){return this._beginLine()+"<!--"+p+"-->"},l.prototype.text=function(p){return this._beginLine()+p},l.prototype.instruction=function(p,u){return u?this._beginLine()+"<?"+p+" "+u+"?>":this._beginLine()+"<?"+p+"?>"},l.prototype.cdata=function(p){return this._beginLine()+"<![CDATA["+p+"]]>"},l.prototype.openTagBegin=function(p){return this._lineLength+=1+p.length,this._beginLine()+"<"+p},l.prototype.openTagEnd=function(p,u,f){return f?" />":u?this._writerOptions.allowEmptyTags?"></"+p+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},l.prototype.closeTag=function(p){return this._beginLine()+"</"+p+">"},l.prototype.attribute=function(p,u){var f=p+'="'+u+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+f.length>this._writerOptions.width?(f=this._beginLine()+this._indent(1)+f,this._lineLength=f.length,f):(this._lineLength+=1+f.length," "+f)},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){},l.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var p=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=p.length,p}return""},l.prototype._indent=function(p){return p<=0?"":this._writerOptions.indent.repeat(p)},l}(r(114).BaseCBWriter);n.XMLCBWriter=s},function(a,n,r){r(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var f in u)u.hasOwnProperty(f)&&(p[f]=u[f])})(c,l)},function(c,l){function p(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(c){function l(p){var u=c.call(this,p)||this;return u._hasChildren=[],u._additionalLevel=0,u}return o(l,c),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(p,u,f){return""},l.prototype.docType=function(p,u,f){return""},l.prototype.comment=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.text=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.instruction=function(p,u){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(u?p+" "+u:p)+this._sep()+"}"},l.prototype.cdata=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.attribute=function(p,u){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+p)+this._sep()+this._val(u)+this._sep()+"}"},l.prototype.openTagBegin=function(p){var u=this._comma()+this._beginLine()+"{"+this._sep()+this._key(p)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,u+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),u},l.prototype.openTagEnd=function(p,u,f){if(u){var h=this._sep()+"]";return this._additionalLevel--,h+=this._beginLine()+"}"+this._sep()+"}"}return""},l.prototype.closeTag=function(p){var u=this._beginLine()+"]";return this._additionalLevel--,u+=this._beginLine()+"}"+this._sep()+"}"},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){this._hasChildren.pop()},l.prototype._beginLine=function(p){return p===void 0&&(p=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+p):""},l.prototype._indent=function(p){return p+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(p+this._additionalLevel)},l.prototype._comma=function(){var p=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),p},l.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},l.prototype._key=function(p){return'"'+p+'":'},l.prototype._val=function(p){return JSON.stringify(p)},l}(r(114).BaseCBWriter);n.JSONCBWriter=s},function(a,n,r){r(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var f in u)u.hasOwnProperty(f)&&(p[f]=u[f])})(c,l)},function(c,l){function p(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(c){function l(p){var u=c.call(this,p)||this;if(u._rootWritten=!1,u._additionalLevel=0,p.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(p.offset<0)throw new Error("YAML offset should be zero or a positive number.");return u}return o(l,c),l.prototype.frontMatter=function(){return this._beginLine()+"---"},l.prototype.declaration=function(p,u,f){return""},l.prototype.docType=function(p,u,f){return""},l.prototype.comment=function(p){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(p)},l.prototype.text=function(p){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(p)},l.prototype.instruction=function(p,u){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(u?p+" "+u:p)},l.prototype.cdata=function(p){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(p)},l.prototype.attribute=function(p,u){this._additionalLevel++;var f=this._beginLine()+this._key(this._builderOptions.convert.att+p)+" "+this._val(u);return this._additionalLevel--,f},l.prototype.openTagBegin=function(p){var u=this._beginLine()+this._key(p);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,u+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},l.prototype.openTagEnd=function(p,u,f){return u?" "+this._val(""):""},l.prototype.closeTag=function(p){return this._additionalLevel--,""},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){},l.prototype._beginLine=function(p){return p===void 0&&(p=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,p)},l.prototype._indent=function(p,u){if(p+this._additionalLevel<=0)return"";var f=this._writerOptions.indent.repeat(p+this._additionalLevel);return!u&&this._rootWritten?f.substr(0,f.length-2)+"-"+f.substr(-1,1):f},l.prototype._key=function(p){return'"'+p+'":'},l.prototype._val=function(p){return JSON.stringify(p)},l}(r(114).BaseCBWriter);n.YAMLCBWriter=s},function(a,n,r){var i,o=typeof Reflect=="object"?Reflect:null,s=o&&typeof o.apply=="function"?o.apply:function(g,C,S){return Function.prototype.apply.call(g,C,S)};i=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var c=Number.isNaN||function(g){return g!=g};function l(){l.init.call(this)}a.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var p=10;function u(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function f(g){return g._maxListeners===void 0?l.defaultMaxListeners:g._maxListeners}function h(g,C,S,T){var w,_,E,D;if(u(S),(_=g._events)===void 0?(_=g._events=Object.create(null),g._eventsCount=0):(_.newListener!==void 0&&(g.emit("newListener",C,S.listener?S.listener:S),_=g._events),E=_[C]),E===void 0)E=_[C]=S,++g._eventsCount;else if(typeof E=="function"?E=_[C]=T?[S,E]:[E,S]:T?E.unshift(S):E.push(S),(w=f(g))>0&&E.length>w&&!E.warned){E.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=g,O.type=C,O.count=E.length,D=O,console&&console.warn&&console.warn(D)}return g}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(g,C,S){var T={fired:!1,wrapFn:void 0,target:g,type:C,listener:S},w=d.bind(T);return w.listener=S,T.wrapFn=w,w}function m(g,C,S){var T=g._events;if(T===void 0)return[];var w=T[C];return w===void 0?[]:typeof w=="function"?S?[w.listener||w]:[w]:S?function(_){for(var E=new Array(_.length),D=0;D<E.length;++D)E[D]=_[D].listener||_[D];return E}(w):y(w,w.length)}function x(g){var C=this._events;if(C!==void 0){var S=C[g];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function y(g,C){for(var S=new Array(C),T=0;T<C;++T)S[T]=g[T];return S}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(g){if(typeof g!="number"||g<0||c(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");p=g}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||c(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(g){for(var C=[],S=1;S<arguments.length;S++)C.push(arguments[S]);var T=g==="error",w=this._events;if(w!==void 0)T=T&&w.error===void 0;else if(!T)return!1;if(T){var _;if(C.length>0&&(_=C[0]),_ instanceof Error)throw _;var E=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw E.context=_,E}var D=w[g];if(D===void 0)return!1;if(typeof D=="function")s(D,this,C);else{var O=D.length,M=y(D,O);for(S=0;S<O;++S)s(M[S],this,C)}return!0},l.prototype.addListener=function(g,C){return h(this,g,C,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(g,C){return h(this,g,C,!0)},l.prototype.once=function(g,C){return u(C),this.on(g,v(this,g,C)),this},l.prototype.prependOnceListener=function(g,C){return u(C),this.prependListener(g,v(this,g,C)),this},l.prototype.removeListener=function(g,C){var S,T,w,_,E;if(u(C),(T=this._events)===void 0)return this;if((S=T[g])===void 0)return this;if(S===C||S.listener===C)--this._eventsCount==0?this._events=Object.create(null):(delete T[g],T.removeListener&&this.emit("removeListener",g,S.listener||C));else if(typeof S!="function"){for(w=-1,_=S.length-1;_>=0;_--)if(S[_]===C||S[_].listener===C){E=S[_].listener,w=_;break}if(w<0)return this;w===0?S.shift():function(D,O){for(;O+1<D.length;O++)D[O]=D[O+1];D.pop()}(S,w),S.length===1&&(T[g]=S[0]),T.removeListener!==void 0&&this.emit("removeListener",g,E||C)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(g){var C,S,T;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[g]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[g]),this;if(arguments.length===0){var w,_=Object.keys(S);for(T=0;T<_.length;++T)(w=_[T])!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=S[g])=="function")this.removeListener(g,C);else if(C!==void 0)for(T=C.length-1;T>=0;T--)this.removeListener(g,C[T]);return this},l.prototype.listeners=function(g){return m(this,g,!0)},l.prototype.rawListeners=function(g){return m(this,g,!1)},l.listenerCount=function(g,C){return typeof g.listenerCount=="function"?g.listenerCount(C):x.call(g,C)},l.prototype.listenerCount=x,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(77);n.createCB=function(o){return new i.XMLBuilderCBImpl(o)},n.fragmentCB=function(o){return new i.XMLBuilderCBImpl(o,!0)}}])})})(YT);function JT(t,e){e.classHierarchy.push("vtkStringArray"),t.getComponent=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[a*e.numberOfComponents+n]},t.setComponent=(a,n,r)=>{r!==e.values[a*e.numberOfComponents+n]&&(e.values[a*e.numberOfComponents+n]=r,t.modified())},t.getData=()=>e.values,t.getTuple=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=e.numberOfComponents||1;n.length&&(n.length=r);const i=a*r;for(let o=0;o<r;o++)n[o]=e.values[i+o];return n},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.values.length,t.getNumberOfTuples=()=>e.values.length/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>m1({name:e.name,numberOfComponents:e.numberOfComponents,empty:!0}),t.getName=()=>(e.name||t.setName(`vtkStringArray${t.getMTime()}`),e.name),t.setData=(a,n)=>{e.values=a,e.size=a.length,n&&(e.numberOfComponents=n),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.modified()}}const ZT={name:"",numberOfComponents:1,size:0,dataType:"string"};function y1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,ZT,a),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");e.values?Array.isArray(e.values)&&(e.values=[...e.values]):e.values=[],e.values&&(e.size=e.values.length),V.obj(t,e),V.set(t,e,["name"]),JT(t,e)}const m1=V.newInstance(y1,"vtkStringArray");var QT={newInstance:m1,extend:y1};function ew(t,e){return[...t.getElementsByTagName(e)]}function x1(t,e){return ew(t,e)[0]}function tw(t){return fc.create(t)}function nw(t){const e=/^\s*<AppendedData\s+encoding="raw">\s*_/m,a=/\n\s*<\/AppendedData>/m;return ni.extractBinary(t,e,a)}const Kn={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},ri={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function pc(t){const e=t.length-1;return t.filter((a,n)=>n<e&&n%2===0)}function hc(t,e,a){if(!["UInt64","UInt32"].includes(a))throw new Error(`Cannot handle a header type of ${a}`);let n=Kn[a],r=Kn[e],i=!1;a==="UInt64"&&(n=Kn.UInt32),/^U?Int64$/.test(e)&&(i=!0,r=Kn[e.replace("64","32")]);const{byteOffset:o}=t,s=ri[e],c=ri[a];let l;o%c===0?l=new n(t.buffer,o,1):l=new n(t.buffer.slice(o,o+c));const p=Number(l[0]);let u,f=p/s;i&&(f*=2);const h=o+c;return h%s===0?u=new r(t.buffer,h,f):u=new r(t.buffer.slice(h,h+p)),i&&(u=pc(u)),u}function rw(t,e){if(e==="UInt64"){let l=new Uint32Array(t.buffer,0,6);const p=l[0],u=l[2],f=l[4],h=[8,p,u,f];l=new Uint32Array(t.buffer,3*8,p*2);for(let d=0;d<p;d++)h.push(l[d*2]);return h}let a=new Uint32Array(t.buffer,0,3);const n=4,r=a[0],i=a[1],o=a[2],s=[n,r,i,o];a=new Uint32Array(t.buffer,3*4,r);for(let c=0;c<r;c++)s.push(a[c]);return s}function aw(t,e){const[a]=t;return(t.length-1)*a}function iw(t,e){const a=nn(t);e.uint8.set(a,e.offset),e.offset+=a.length}function gc(t,e){const a=rw(t,e),n=a[1],r=a[2],i=a[3];let o=0;n>0&&(i===0?o=n*r:o=(n-1)*r+i);const s=new ArrayBuffer(o),c={offset:0,uint8:new Uint8Array(s)};let l=aw(a);for(;l<t.length&&t[l]!==120;)l++;for(let p=0;p<n;p++){const u=a[4+p],f=new Uint8Array(t.buffer,l,u);iw(f,c),l+=u}return c.uint8}function ai(t,e,a,n,r,i){const o=e.getAttribute("type"),s=e.getAttribute("Name"),c=e.getAttribute("format"),l=Number(e.getAttribute("NumberOfComponents")||"1");let p=null;if(c==="ascii"){p=new Kn[o](t*l);let u=0;e.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(f=>{f.trim().length&&(p[u++]=Number(f))})}else if(c==="binary"){const u=new Uint8Array(Rr.toArrayBuffer(e.firstChild.nodeValue.trim()));if(a==="vtkZLibDataCompressor"){const f=gc(u,r);p=new Kn[o](f.buffer),/^U?Int64$/.test(o)&&(p=pc(p))}else p=new Kn[o](u.buffer,ri[r]),o.indexOf("Int64")!==-1&&(p=pc(p))}else if(c==="appended"){const u=Number(e.getAttribute("offset"));p=hc(new Uint8Array(i,u),o,r)}else console.error("Format not supported",c);return{name:s,values:p,numberOfComponents:l}}function dc(t){return new TextDecoder().decode(t).split("\0").slice(0,-1)}function ow(t,e,a,n,r){const i=t.getAttribute("Name"),o=t.getAttribute("format"),s=Number(t.getAttribute("NumberOfComponents")||"1"),l=Number(t.getAttribute("NumberOfTuples")||"1")*s,p=[];if(o==="ascii"){const u=t.firstChild.nodeValue.trim().split(/\s+/);let f=0;const h=[];for(;p.length<l;){const d=Number(u[f++]);d===0?(p.push(h.join("")),h.length=0):h.push(String.fromCharCode(d))}}else if(o==="binary"){const u=new Uint8Array(Rr.toArrayBuffer(t.firstChild.nodeValue.trim()));if(e==="vtkZLibDataCompressor"){const f=gc(u,n);p.push(...dc(f))}else{const f=hc(u,"UInt8",n);p.push(...dc(f))}}else if(o==="appended"){const u=Number(t.getAttribute("offset")),f=hc(new Uint8Array(r,u),"UInt8",n);p.push(...dc(f))}else V.vtkErrorMacro(`Format not supported: ${o}`);return{name:i,values:p,numberOfComponents:s}}function sw(t,e,a,n,r,i){const o={},s=e.getElementsByTagName("DataArray");for(let d=0;d<s.length;d++){const v=s[d];o[v.getAttribute("Name")]=v}const c=ai(t,o.offsets,a,n,r,i).values,l=c[c.length-1],p=ai(l,o.connectivity,a,n,r,i).values,u=new Uint32Array(t+l);let f=0,h=0;return c.forEach(d=>{const v=d-h;u[f++]=v;for(let m=0;m<v;m++)u[f++]=p[h+m];h=d}),u}function cw(t,e,a,n,r,i,o){if(e){const s=["Scalars","Vectors","Normals","Tensors","TCoords"],c={};s.forEach(u=>{const f=e.getAttribute(u);f&&(c[f]=a[`set${u}`])});const l=e.getElementsByTagName("DataArray"),p=l.length;for(let u=0;u<p;u++){const f=l[u],h=pe.newInstance(ai(t,f,n,r,i,o)),d=h.getName();(c[d]||a.addArray)(h)}}}function uw(t,e,a,n,r){const i=[...t.getElementsByTagName("DataArray")].map(s=>pe.newInstance(ai(Number(s.getAttribute("NumberOfTuples")),s,e,a,n,r))),o=[...t.getElementsByTagName("Array")].filter(s=>s.getAttribute("type")==="String").map(s=>QT.newInstance(ow(s,e,a,n,r)));return[...i,...o]}function lw(t,e){e.classHierarchy.push("vtkXMLReader"),e.dataAccessHelper||(e.dataAccessHelper=aa.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchBinary(n,r)}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.url=n;const i=n.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(r)},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a(e.url,n).then(t.parseAsArrayBuffer)},t.parseAsArrayBuffer=n=>{if(!n)return!1;if(n!==e.rawDataBuffer)t.modified();else return!0;const{text:r,binaryBuffer:i}=nw(n);e.rawDataBuffer=n,e.binaryBuffer=i;const s=tw(r).root(),c=s.node,l=c.getAttribute("type"),p=c.getAttribute("compressor"),u=c.getAttribute("byte_order"),f=c.getAttribute("header_type")||"UInt32";if(p&&p!=="vtkZLibDataCompressor")return console.error("Invalid compressor",p),!1;if(u&&u!=="LittleEndian")return console.error("Only LittleEndian encoding is supported"),!1;if(l!==e.dataType)return console.error("Invalid data type",l,"expecting",e.dataType),!1;if(x1(c,"AppendedData")){const v=x1(c,"AppendedData"),m=v.getAttribute("encoding"),x=s.filter(w=>{const{node:_}=w;return _.nodeType===Node.ELEMENT_NODE&&_.getAttribute("format")==="appended"&&_.hasAttribute("offset")},!1,!0).map(w=>({node:w.node,offset:Number(w.node.getAttribute("offset"))}));x.sort((w,_)=>w.offset-_.offset);let y=e.binaryBuffer;m==="base64"&&(y=v.textContent.trim().substr(1));const g=[];for(let w=0;w<x.length;++w){const _=x[w].offset;let E=0;w===x.length-1?E=y.length||y.byteLength:E=x[w+1].offset,m==="base64"?g.push(new Uint8Array(Rr.toArrayBuffer(y.substring(_,E)))):g.push(new Uint8Array(y.slice(_,E)))}if(p==="vtkZLibDataCompressor")for(let w=0;w<g.length;++w){const _=g[w],E=gc(_,f),D=new Uint8Array(E.length+ri[f]);new Kn[f](D.buffer,0,1)[0]=E.length,D.set(E,ri[f]),g[w]=D}const C=g.reduce((w,_)=>w+_.length,0),S=new ArrayBuffer(C),T=new Uint8Array(S);for(let w=0,_=0;w<g.length;++w)x[w].node.setAttribute("offset",_),T.set(g[w],_),_+=g[w].length;if(e.binaryBuffer=S,!e.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}t.parseXML(c,l,p,u,f);const d=c.getElementsByTagName(l)[0].getElementsByTagName("FieldData")[0];if(d){const v=uw(d,p,u,f,e.binaryBuffer);for(let m=0;m<e.output.length;m++){const x=e.output[m].getFieldData();for(let y=0;y<v.length;y++)x.addArray(v[y])}}return!0},t.requestData=(n,r)=>{t.parseAsArrayBuffer(e.rawDataBuffer)}}const fw={};function pw(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fw,a),V.obj(t,e),V.get(t,e,["url","baseURL"]),V.setGet(t,e,["dataAccessHelper"]),V.algo(t,e,0,1),lw(t,e)}var Xn={extend:pw,processDataArray:ai,processFieldData:cw,processCells:sw};function hw(t,e){e.classHierarchy.push("vtkXMLImageDataReader"),t.parseXML=(a,n,r,i,o)=>{var h;const s=a.getElementsByTagName(e.dataType)[0],c=s.getAttribute("Origin").split(" ").map(d=>Number(d)),l=s.getAttribute("Spacing").split(" ").map(d=>Number(d)),p=(h=s.getAttribute("Direction"))==null?void 0:h.split(" ").map(d=>Number(d)),u=s.getElementsByTagName("Piece"),f=u.length;for(let d=0;d<f;d++){const v=u[d],m=v.getAttribute("Extent").split(" ").map(y=>Number(y)),x=_0.newInstance({origin:c,spacing:l,direction:p,extent:m});Xn.processFieldData(x.getNumberOfPoints(),v.getElementsByTagName("PointData")[0],x.getPointData(),r,i,o,e.binaryBuffer),Xn.processFieldData(x.getNumberOfCells(),v.getElementsByTagName("CellData")[0],x.getCellData(),r,i,o,e.binaryBuffer),e.output[d]=x}}}const gw={dataType:"ImageData"};function dw(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gw,a),Xn.extend(t,e,a),hw(t,e)}V.newInstance(dw,"vtkXMLImageDataReader");function vw(t,e,a,n,r,i,o){const s=Number(a.getAttribute(`NumberOf${e}`));if(s>0){const c=a.getElementsByTagName(e)[0].getElementsByTagName("DataArray")[0],{values:l,numberOfComponents:p}=Xn.processDataArray(s,c,n,r,i,o);t[`get${e}`]().setData(l,p)}return s}function yw(t,e,a,n,r,i,o){const s=Number(a.getAttribute(`NumberOf${e}`));if(s>0){const c=Xn.processCells(s,a.getElementsByTagName(e)[0],n,r,i,o);t[`get${e}`]().setData(c)}return s}function mw(t,e){e.classHierarchy.push("vtkXMLPolyDataReader"),t.parseXML=(a,n,r,i,o)=>{const c=a.getElementsByTagName(e.dataType)[0].getElementsByTagName("Piece"),l=c.length;for(let p=0;p<l;p++){const u=Xe.newInstance(),f=c[p],h=vw(u,"Points",f,r,i,o,e.binaryBuffer);let d=0;["Verts","Lines","Strips","Polys"].forEach(v=>{d+=yw(u,v,f,r,i,o,e.binaryBuffer)}),Xn.processFieldData(h,f.getElementsByTagName("PointData")[0],u.getPointData(),r,i,o,e.binaryBuffer),Xn.processFieldData(d,f.getElementsByTagName("CellData")[0],u.getCellData(),r,i,o,e.binaryBuffer),e.output[p]=u}}}const xw={dataType:"PolyData"};function Cw(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xw,a),Xn.extend(t,e,a),mw(t,e)}V.newInstance(Cw,"vtkXMLPolyDataReader");const Sw={props:{port:{type:Number,default:0},vtkClass:{type:String,default:"vtkConeSource"},state:{type:Object,default:()=>({})}},setup(t){const e=se.ref(null),a=se.inject("downstream"),n=se.inject("representation");se.provide("downstream",e),se.onMounted(()=>{e.value=wt({vtkClass:t.vtkClass,...t.state}),a.value.setInputConnection(e.value.getOutputPort(),t.port)}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),se.watch(()=>t.vtkClass,r=>{e.value=wt({vtkClass:r,...t.state}),a.setInputConnection(e.value.getOutputPort(),t.port)}),se.watch(()=>t.state,r=>{e.value.set(r),n&&n.dataChanged()})},template:'<div :class="`vtk-algorithm-${vtkClass}`"><slot></slot></div>'},{vtkWarningMacro:Io}=V;function Tw(t,e){e.classHierarchy.push("vtkCalculator"),t.setFormula=a=>a===e.formula?!1:(e.formula=a,t.modified(),!0),t.getFormula=()=>e.formula,t.augmentInputArrays=(a,n)=>{const r=n.slice(0);return(a===lt.POINT||a===lt.VERTEX)&&r.push({location:lt.COORDINATE}),r},t.createSimpleFormulaObject=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return{getArrays:s=>{var c;return{input:(c=s[0])!=null&&c.isA("vtkImageData")?n.map(l=>({location:a,name:l})):t.augmentInputArrays(a,n.map(l=>({location:a,name:l}))),output:[{location:a,name:r,attribute:"outputAttributeType"in o?o.outputAttributeType:zf.SCALARS,numberOfComponents:"numberOfOutputComponents"in o?o.numberOfOutputComponents:1}]}},evaluate:(s,c)=>{const l=new Array(s.length),p=s.map((v,m)=>{const x=v.getNumberOfComponents(),y=v.getData();return x===1?g=>y[g]:g=>v.getTuple(g,l[m])}),u=c[0],f=u.getData(),h=u.getNumberOfComponents();let d=new Array(h);if(h===1)f.forEach((v,m)=>{f[m]=i(...p.map(x=>x(m)),m,d)});else{const v=u.getNumberOfTuples();for(let m=0;m<v;++m)d=i(...p.map(x=>x(m)),m,d),u.setTuple(m,d)}}}},t.setFormulaSimple=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return t.setFormula(t.createSimpleFormulaObject(a,n,r,i,o))},t.prepareArrays=(a,n,r)=>{const i=[],o=[];return a.input.forEach(s=>{if(s.location===lt.COORDINATE)i.push(n.getPoints());else{const c=[[lt.UNIFORM,p=>p.getFieldData()],[lt.POINT,p=>p.getPointData()],[lt.CELL,p=>p.getCellData()],[lt.VERTEX,p=>p.getVertexData()],[lt.EDGE,p=>p.getEdgeData()],[lt.ROW,p=>p.getRowData()]].reduce((p,u)=>(p[u[0]]=u[1],p),{}),l="location"in s&&s.location in c?c[s.location](n):null;l?s.name?i.push(l.getArrayByName(s.name)):"index"in s?i.push(l.getArrayByIndex(s.index)):"attribute"in s&&s.location!==lt.UNIFORM?i.push(l.getActiveAttribute(s.attribute)):(Io(`No matching array for specifier "${JSON.stringify(s)}".`),i.push(null)):(Io(`Specifier "${JSON.stringify(s)}" did not provide a usable location.`),i.push(null))}}),a.output.forEach(s=>{const c={...s},l="numberOfComponents"in c?c.numberOfComponents:1;if(s.location===lt.UNIFORM&&"tuples"in c&&(c.size=l*c.tuples),s.location===lt.COORDINATE){const p=n.getPoints(),u=dn.newInstance({dataType:p.getDataType()});u.setNumberOfPoints(p.getNumberOfPoints(),p.getNumberOfComponents()),r.setPoints(u),o.push(u)}else{const p=[[lt.UNIFORM,h=>h.getFieldData(),(h,d)=>"tuples"in d?d.tuples:0],[lt.POINT,h=>h.getPointData(),h=>h.getNumberOfPoints()],[lt.CELL,h=>h.getCellData(),h=>h.getNumberOfCells()],[lt.VERTEX,h=>h.getVertexData(),h=>h.getNumberOfVertices()],[lt.EDGE,h=>h.getEdgeData(),h=>h.getNumberOfEdges()],[lt.ROW,h=>h.getRowData(),h=>h.getNumberOfRows()]].reduce((h,d)=>(h[d[0]]={getData:d[1],getSize:d[2]},h),{});let u=null,f=0;if("location"in s&&s.location in p&&(u=p[s.location].getData(r),f=p[s.location].getSize(n,c)),f<=0)Io(`Output array size could not be determined for ${JSON.stringify(s)}.`),o.push(null);else if(u){c.size=l*f;const h=pe.newInstance(c),d=u.addArray(h);"attribute"in c&&s.location!==lt.UNIFORM&&u.setActiveAttributeByIndex(d,c.attribute),o.push(h)}else Io(`Specifier "${JSON.stringify(s)}" did not provide a usable location.`),o.push(null)}}),{arraysIn:i,arraysOut:o}},t.requestData=(a,n)=>{var s;if(!e.formula)return 0;const r=e.formula.getArrays(a),i=((s=n[0])==null?void 0:s.initialize())||wt({vtkClass:a[0].getClassName()});i.shallowCopy(a[0]),n[0]=i;const o=t.prepareArrays(r,a[0],n[0]);return e.formula.evaluate(o.arraysIn,o.arraysOut),1}}const ww={formula:{getArrays:()=>({input:[],output:[]}),evaluate:()=>null}};function C1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ww,a),V.obj(t,e),V.algo(t,e,1,1),Tw(t,e)}var _w={newInstance:V.newInstance(C1,"vtkCalculator"),extend:C1};const{FieldDataTypes:S1}=dr,Ew={props:{port:{type:Number,default:0},name:{type:String,default:"scalars"},location:{type:String,default:"POINT"},arrays:{type:Array,default:()=>[]},formula:{type:Function,default:t=>t[0]}},setup(t){const e=se.ref(_w.newInstance()),a=se.inject("downstream");se.provide("downstream",e),se.onMounted(()=>{e.value.setFormulaSimple(S1[t.location],t.arrays,t.name,t.formula),a.value.setInputConnection(e.value.getOutputPort(),t.port)}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),se.onUpdated(()=>{e.value.setFormulaSimple(S1[t.location],t.arrays,t.name,t.formula)})},template:'<div class="vtk-calculator"><slot></slot></div>'},T1={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getCellData())},template:'<div class="vtk-cell-data"><slot></slot></div>'},Dw={int32:Int32Array,int16:Int16Array,int8:Int8Array,uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,float32:Float32Array,float64:Float64Array};function w1(t,e){if(!t)return null;if(Array.isArray(t))return e.from(t);if(t.dtype){const{bvals:a,dtype:n}=t,r=Rr.toArrayBuffer(a);return new Dw[n](r)}return t}const _1={props:{name:{type:String,default:"scalars"},registration:{type:String,default:"addArray"},type:{type:String,default:"Float32Array"},values:{type:[Array,Object,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]},numberOfComponents:{type:Number,default:1}},setup(t){const e=se.inject("dataset"),a=se.inject("fields"),n=se.inject("representation"),r=pe.newInstance({empty:!0}),i=wn(()=>{const p=xt[t.type];r.setData(w1(t.values,p),t.numberOfComponents),e&&e.modified(),n&&n.dataChanged()},1),{name:o,type:s,values:c,numberOfComponents:l}=se.toRefs(t);se.watch(o,r.setName),se.watch(s,i),se.watch(c,i),se.watch(l,i),se.onMounted(()=>{a&&a[t.registration](r),t.name&&r.setName(t.name),t.values&&(t.values.bvals||t.values.length)&&i()}),se.onBeforeUnmount(()=>{a&&a.removeArray(r),r.delete()}),se.provide("array",r)},template:'<div class="vtk-data-array" :name="name" />'},Ow={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getFieldData())},template:'<div class="vtk-field-data"><slot></slot></div>'};var bw=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"Grayscale-DICOM-sigmoid",Notes:"This is a 16 point sample of a sigmoid grayscale colormap described in the DICOM standard. See equation C.11-1 in section C.11.2",NanColor:[1,0,0],BelowRangeColor:[0,0,0],AboveRangeColor:[1,1,1],RGBPoints:[-1,.01798620996209156,.01798620996209156,.01798620996209156,-.8666666666666667,.030275691986950463,.030275691986950463,.030275691986950463,-.7333333333333334,.05053016223541345,.05053016223541345,.05053016223541345,-.6,.08317269649392238,.08317269649392238,.08317269649392238,-.4666666666666667,.13392788832407365,.13392788832407365,.13392788832407365,-.33333333333333337,.2086085273260449,.2086085273260449,.2086085273260449,-.19999999999999996,.31002551887238755,.31002551887238755,.31002551887238755,-.06666666666666665,.4337256058045608,.4337256058045608,.4337256058045608,.06666666666666665,.5662743941954392,.5662743941954392,.5662743941954392,.19999999999999996,.6899744811276125,.6899744811276125,.6899744811276125,.33333333333333326,.791391472673955,.791391472673955,.791391472673955,.46666666666666656,.8660721116759263,.8660721116759263,.8660721116759263,.6000000000000001,.9168273035060777,.9168273035060777,.9168273035060777,.7333333333333334,.9494698377645865,.9494698377645865,.9494698377645865,.8666666666666667,.9697243080130495,.9697243080130495,.9697243080130495,1,.9820137900379085,.9820137900379085,.9820137900379085]},{ColorSpace:"RGB",Name:"Inverted-Grayscale",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Inverted-Grayscale-DICOM-sigmoid",Notes:"This is a 16 point sample of a sigmoid inverted-grayscale colormap described in the DICOM standard. See equation C.11-1 in section C.11.2",BelowRangeColor:[1,1,1],AboveRangeColor:[0,0,0],NanColor:[1,0,0],RGBPoints:[-1,.9820137900379085,.9820137900379085,.9820137900379085,-.8666666666666667,.9697243080130495,.9697243080130495,.9697243080130495,-.7333333333333334,.9494698377645866,.9494698377645866,.9494698377645866,-.6,.9168273035060777,.9168273035060777,.9168273035060777,-.4666666666666667,.8660721116759263,.8660721116759263,.8660721116759263,-.33333333333333337,.791391472673955,.791391472673955,.791391472673955,-.19999999999999996,.6899744811276125,.6899744811276125,.6899744811276125,-.06666666666666665,.5662743941954391,.5662743941954391,.5662743941954391,.06666666666666665,.43372560580456077,.43372560580456077,.43372560580456077,.19999999999999996,.3100255188723875,.3100255188723875,.3100255188723875,.33333333333333326,.20860852732604496,.20860852732604496,.20860852732604496,.46666666666666656,.13392788832407365,.13392788832407365,.13392788832407365,.6000000000000001,.08317269649392234,.08317269649392234,.08317269649392234,.7333333333333334,.05053016223541351,.05053016223541351,.05053016223541351,.8666666666666667,.03027569198695046,.03027569198695046,.03027569198695046,1,.01798620996209155,.01798620996209155,.01798620996209155]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}];const ua=Object.create(null);bw.filter(t=>t.RGBPoints).filter(t=>t.ColorSpace!=="CIELAB").forEach(t=>{ua[t.Name]=t});const la=Object.keys(ua);la.sort();function Mw(t){return ua[t]}function Nw(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(ua[t.Name]||(la.push(t.Name),la.sort()),ua[t.Name]=t)}function Rw(t){const e=la.indexOf(t);e>-1&&la.splice(e,1),delete ua[t]}var vc={addPreset:Nw,removePresetByName:Rw,getPresetByName:Mw,rgbPresetNames:la},E1={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};const{ColorSpace:Wt,Scale:yc}=E1,{ScalarMappingTarget:Po}=ho,{vtkDebugMacro:Lw,vtkErrorMacro:Rn,vtkWarningMacro:Fw}=V;function D1(t,e){const a=t[0],n=t[1],r=t[2],i=Math.sqrt(a*a+n*n+r*r),o=i>.001?Math.acos(a/i):0,s=o>.001?Math.atan2(r,n):0;e[0]=i,e[1]=o,e[2]=s}function kw(t,e){const a=t[0],n=t[1],r=t[2];e[0]=a*Math.cos(n),e[1]=a*Math.sin(n)*Math.cos(r),e[2]=a*Math.sin(n)*Math.sin(r)}function O1(t,e){if(t[0]>=e-.1)return t[2];const a=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+a:t[2]-a}function Vw(t,e){let a=t-e;for(a<0&&(a=-a);a>=2*Math.PI;)a-=2*Math.PI;return a>Math.PI&&(a=2*Math.PI-a),a}function b1(t,e,a,n){const r=[],i=[];fr(e,r),fr(a,i);const o=[],s=[];D1(r,o),D1(i,s);let c=t;if(o[1]>.05&&s[1]>.05&&Vw(o[2],s[2])>.33*Math.PI){let u=Math.max(o[0],s[0]);u=Math.max(88,u),t<.5?(s[0]=u,s[1]=0,s[2]=0,c*=2):(o[0]=u,o[1]=0,o[2]=0,c=2*c-1)}o[1]<.05&&s[1]>.05?o[2]=O1(s,o[0]):s[1]<.05&&o[1]>.05&&(s[2]=O1(o,s[0]));const l=[];l[0]=(1-c)*o[0]+c*s[0],l[1]=(1-c)*o[1]+c*s[1],l[2]=(1-c)*o[2]+c*s[2];const p=[];kw(l,p),Qi(p,n)}function Aw(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(a,n,r,i)=>t.addRGBPointLong(a,n,r,i,.5,0),t.addRGBPointLong=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return Rn("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return Rn("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(a);const c={x:a,r:n,g:r,b:i,midpoint:o,sharpness:s};e.nodes.push(c),t.sortAndUpdateRange();let l=0;for(;l<e.nodes.length&&e.nodes[l].x!==a;l++);return l<e.nodes.length?l:-1},t.addHSVPoint=(a,n,r,i)=>t.addHSVPointLong(a,n,r,i,.5,0),t.addHSVPointLong=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const c=[];return lr([n,r,i],c),t.addRGBPoint(a,c[0],c[1],c[2],o,s)},t.setNodes=a=>{if(e.nodes!==a){const n=JSON.stringify(e.nodes);e.nodes=a;const r=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||n!==r)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const a=JSON.stringify(e.nodes);e.nodes.sort((i,o)=>i.x-o.x);const n=JSON.stringify(e.nodes),r=t.updateRange();return!r&&a!==n?(t.modified(),!0):r},t.updateRange=()=>{const a=[2];a[0]=e.mappingRange[0],a[1]=e.mappingRange[1];const n=e.nodes.length;return n?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[n-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),a[0]===e.mappingRange[0]&&a[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=a=>{let n=0;for(;n<e.nodes.length&&e.nodes[n].x!==a;n++);const r=n;if(n>=e.nodes.length)return-1;let i=!1;return e.nodes.splice(n,1),(n===0||n===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),r},t.movePoint=(a,n)=>{if(a!==n){t.removePoint(n);for(let r=0;r<e.nodes.length;r++)if(e.nodes[r].x===a){e.nodes[r].x=n,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(a,n,r,i,o,s,c,l)=>{t.sortAndUpdateRange();for(let p=0;p<e.nodes.length;)e.nodes[p].x>=a&&e.nodes[p].x<=o?e.nodes.splice(p,1):p++;t.addRGBPointLong(a,n,r,i,.5,0),t.addRGBPointLong(o,s,c,l,.5,0),t.modified()},t.addHSVSegment=(a,n,r,i,o,s,c,l)=>{const p=[n,r,i],u=[s,c,l],f=[],h=[];lr(p,f),lr(u,h),t.addRGBSegment(a,f[0],f[1],f[2],o,h[0],h[1],h[2])},t.mapValue=a=>{const n=[];return t.getColor(a,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},t.getColor=(a,n)=>{if(e.indexedLookup){const r=t.getSize(),i=t.getAnnotatedValueIndexInternal(a);if(i<0||r===0){const o=t.getNanColorByReference();n[0]=o[0],n[1]=o[1],n[2]=o[2]}else{const o=[];t.getNodeValue(i%r,o),n[0]=o[1],n[1]=o[2],n[2]=o[3]}return}t.getTable(a,a,1,n)},t.getRedValue=a=>{const n=[];return t.getColor(a,n),n[0]},t.getGreenValue=a=>{const n=[];return t.getColor(a,n),n[1]},t.getBlueValue=a=>{const n=[];return t.getColor(a,n),n[2]},t.logScaleEnabled=()=>e.scale===yc.LOG10,t.usingLogScale=()=>t.logScaleEnabled()&&e.mappingRange[0]>0,t.getTable=(a,n,r,i)=>{const o=t.usingLogScale(),s=o?Math.log10(Number(a)):Number(a),c=o?Math.log10(Number(n)):Number(n);if(to(s)||to(c)){for(let w=0;w<r;w++)i[w*3+0]=e.nanColor[0],i[w*3+1]=e.nanColor[1],i[w*3+2]=e.nanColor[2];return}let l=0;const p=e.nodes.length;let u=0,f=0,h=0;p!==0&&(u=e.nodes[p-1].r,f=e.nodes[p-1].g,h=e.nodes[p-1].b);let d=0,v=0,m=0;const x=[0,0,0],y=[0,0,0];let g=0,C=0;const S=[];let T=e.mappingRange;o&&(T=[Math.log10(e.mappingRange[0]),Math.log10(e.mappingRange[1])]);for(let w=0;w<r;w++){const _=3*w;if(r>1?d=s+w/(r-1)*(c-s):d=.5*(s+c),e.discretize){const E=T;if(d>=E[0]&&d<=E[1]){const D=e.numberOfValues,O=E[1]-E[0];if(D<=1)d=E[0]+O/2;else{const M=(d-E[0])/O,N=Ys(D*M);d=E[0]+N/(D-1)*O}}}for(;l<p&&d>e.nodes[l].x;)l++,l<p&&(v=e.nodes[l-1].x,m=e.nodes[l].x,x[0]=e.nodes[l-1].r,y[0]=e.nodes[l].r,x[1]=e.nodes[l-1].g,y[1]=e.nodes[l].g,x[2]=e.nodes[l-1].b,y[2]=e.nodes[l].b,g=e.nodes[l-1].midpoint,C=e.nodes[l-1].sharpness,g<1e-5&&(g=1e-5),g>.99999&&(g=.99999));if(d>T[1])i[_]=0,i[_+1]=0,i[_+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(i[_]=e.aboveRangeColor[0],i[_+1]=e.aboveRangeColor[1],i[_+2]=e.aboveRangeColor[2]):(i[_]=u,i[_+1]=f,i[_+2]=h));else if(d<T[0]||$l(d)&&d<0)i[_]=0,i[_+1]=0,i[_+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(i[_]=e.belowRangeColor[0],i[_+1]=e.belowRangeColor[1],i[_+2]=e.belowRangeColor[2]):p>0&&(i[_]=e.nodes[0].r,i[_+1]=e.nodes[0].g,i[_+2]=e.nodes[0].b));else if(l===0&&(Math.abs(d-s)<1e-6||e.discretize))p>0?(i[_]=e.nodes[0].r,i[_+1]=e.nodes[0].g,i[_+2]=e.nodes[0].b):(i[_]=0,i[_+1]=0,i[_+2]=0);else{let E=0;if(E=(d-v)/(m-v),E<g?E=.5*E/g:E=.5+.5*(E-g)/(1-g),C>.99)if(E<.5){i[_]=x[0],i[_+1]=x[1],i[_+2]=x[2];continue}else{i[_]=y[0],i[_+1]=y[1],i[_+2]=y[2];continue}if(C<.01){if(e.colorSpace===Wt.RGB)i[_]=(1-E)*x[0]+E*y[0],i[_+1]=(1-E)*x[1]+E*y[1],i[_+2]=(1-E)*x[2]+E*y[2];else if(e.colorSpace===Wt.HSV){const L=[],k=[];Va(x,L),Va(y,k),e.hSVWrap&&(L[0]-k[0]>.5||k[0]-L[0]>.5)&&(L[0]>k[0]?L[0]-=1:k[0]-=1);const A=[];A[0]=(1-E)*L[0]+E*k[0],A[0]<0&&(A[0]+=1),A[1]=(1-E)*L[1]+E*k[1],A[2]=(1-E)*L[2]+E*k[2],lr(A,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]}else if(e.colorSpace===Wt.LAB){const L=[],k=[];fr(x,L),fr(y,k);const A=[];A[0]=(1-E)*L[0]+E*k[0],A[1]=(1-E)*L[1]+E*k[1],A[2]=(1-E)*L[2]+E*k[2],Qi(A,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]}else e.colorSpace===Wt.DIVERGING?(b1(E,x,y,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]):Rn("ColorSpace set to invalid value.",e.colorSpace);continue}E<.5?E=.5*(E*2)**(1+10*C):E>.5&&(E=1-.5*((1-E)*2)**(1+10*C));const D=E*E,O=D*E,M=2*O-3*D+1,N=-2*O+3*D,R=O-2*D+E,B=O-D;let I,P;if(e.colorSpace===Wt.RGB)for(let L=0;L<3;L++)I=y[L]-x[L],P=(1-C)*I,i[_+L]=M*x[L]+N*y[L]+R*P+B*P;else if(e.colorSpace===Wt.HSV){const L=[],k=[];Va(x,L),Va(y,k),e.hSVWrap&&(L[0]-k[0]>.5||k[0]-L[0]>.5)&&(L[0]>k[0]?L[0]-=1:k[0]-=1);const A=[];for(let j=0;j<3;j++)I=k[j]-L[j],P=(1-C)*I,A[j]=M*L[j]+N*k[j]+R*P+B*P,j===0&&A[j]<0&&(A[j]+=1);lr(A,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]}else if(e.colorSpace===Wt.LAB){const L=[],k=[];fr(x,L),fr(y,k);const A=[];for(let j=0;j<3;j++)I=k[j]-L[j],P=(1-C)*I,A[j]=M*L[j]+N*k[j]+R*P+B*P;Qi(A,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]}else e.colorSpace===Wt.DIVERGING?(b1(E,x,y,S),i[_]=S[0],i[_+1]=S[1],i[_+2]=S[2]):Rn("ColorSpace set to invalid value.");for(let L=0;L<3;L++)i[_+L]=i[_+L]<0?0:i[_+L],i[_+L]=i[_+L]>1?1:i[_+L]}}},t.getUint8Table=function(a,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===r&&e.tableWithAlpha!==i)return e.table;if(e.nodes.length===0)return Rn("Attempting to lookup a value with no points in the function"),e.table;const o=i?4:3;(e.tableSize!==r||e.tableWithAlpha!==i)&&(e.table=new Uint8Array(r*o),e.tableSize=r,e.tableWithAlpha=i);const s=[];t.getTable(a,n,r,s);for(let c=0;c<r;c++)e.table[c*o+0]=Math.floor(s[c*3+0]*255+.5),e.table[c*o+1]=Math.floor(s[c*3+1]*255+.5),e.table[c*o+2]=Math.floor(s[c*3+2]*255+.5),i&&(e.table[c*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=a=>{t.removeAllPoints();const n=a.getNumberOfComponents();for(let r=0;r<a.getNumberOfTuples();r++)switch(n){case 3:{e.nodes.push({x:r,r:a.getComponent(r,0),g:a.getComponent(r,1),b:a.getComponent(r,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:a.getComponent(r,0),r:a.getComponent(r,1),g:a.getComponent(r,2),b:a.getComponent(r,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:r,r:a.getComponent(r,0),g:a.getComponent(r,1),b:a.getComponent(r,2),midpoint:a.getComponent(r,4),sharpness:a.getComponent(r,5)});break}case 6:{e.nodes.push({x:a.getComponent(r,0),r:a.getComponent(r,1),g:a.getComponent(r,2),b:a.getComponent(r,3),midpoint:a.getComponent(r,4),sharpness:a.getComponent(r,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(a,n,r,i)=>{let o=0;t.removeAllPoints(),r>1&&(o=(n-a)/(r-1));for(let s=0;s<r;s++){const c={x:a+o*s,r:i[s*3],g:i[s*3+1],b:i[s*3+2],sharpness:0,midpoint:.5};e.nodes.push(c)}t.sortAndUpdateRange()},t.getNodeValue=(a,n)=>a<0||a>=e.nodes.length?(Rn("Index out of range!"),-1):(n[0]=e.nodes[a].x,n[1]=e.nodes[a].r,n[2]=e.nodes[a].g,n[3]=e.nodes[a].b,n[4]=e.nodes[a].midpoint,n[5]=e.nodes[a].sharpness,1),t.setNodeValue=(a,n)=>{if(a<0||a>=e.nodes.length)return Rn("Index out of range!"),-1;const r=e.nodes[a].x;return e.nodes[a].x=n[0],e.nodes[a].r=n[1],e.nodes[a].g=n[2],e.nodes[a].b=n[3],e.nodes[a].midpoint=n[4],e.nodes[a].sharpness=n[5],r!==n[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>{var n;if(e.indexedLookup&&t.getSize())return t.getSize();if(e.tableSize)return e.tableSize;const a=((n=e.nodes)==null?void 0:n.length)??0;return Math.max(4094,a)},t.getIndexedColor=(a,n)=>{const r=t.getSize();if(r>0&&a>=0){const o=[];t.getNodeValue(a%r,o);for(let s=0;s<3;++s)n[s]=o[s+1];n[3]=1;return}const i=t.getNanColorByReference();n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=1},t.fillFromDataPointer=(a,n)=>{if(!(a<=0||!n)){t.removeAllPoints();for(let r=0;r<a;r++)t.addRGBPoint(n[r*4],n[r*4+1],n[r*4+2],n[r*4+3])}},t.setMappingRange=(a,n)=>{const r=[a,n],i=[a,n],o=t.getRange(),s=t.logScaleEnabled();if(o[1]===r[1]&&o[0]===r[0])return;if(r[1]===r[0]){Rn("attempt to set zero width color range");return}s&&(r[0]<=0?console.warn("attempt to set log scale color range with non-positive minimum"):(i[0]=Math.log10(r[0]),i[1]=Math.log10(r[1])));const c=(i[1]-i[0])/(o[1]-o[0]),l=i[0]-o[0]*c;for(let p=0;p<e.nodes.length;++p)e.nodes[p].x=e.nodes[p].x*c+l;e.mappingRange[0]=r[0],e.mappingRange[1]=r[1],t.modified()},t.adjustRange=a=>{const n=t.getRange(),r=[];n[0]<a[0]?(t.getColor(a[0],r),t.addRGBPoint(a[0],r[0],r[1],r[2])):(t.getColor(n[0],r),t.addRGBPoint(a[0],r[0],r[1],r[2])),n[1]>a[1]?(t.getColor(a[1],r),t.addRGBPoint(a[1],r[0],r[1],r[2])):(t.getColor(n[1],r),t.addRGBPoint(a[1],r[0],r[1],r[2])),t.sortAndUpdateRange();for(let i=0;i<e.nodes.length;)e.nodes[i].x>=a[0]&&e.nodes[i].x<=a[1]?e.nodes.splice(i,1):++i;return 1},t.estimateMinNumberOfSamples=(a,n)=>{const r=t.findMinimumXDistance();return Math.ceil((n-a)/r)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let a=Number.MAX_VALUE;for(let n=0;n<e.nodes.length-1;n++){const r=e.nodes[n+1].x-e.nodes[n].x;r<a&&(a=r)}return a},t.mapScalarsThroughTable=(a,n,r,i)=>{if(t.getSize()===0){Lw("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(a,n,r,i):t.mapData(a,n,r,i)},t.mapData=(a,n,r,i)=>{if(t.getSize()===0){Fw("Transfer Function Has No Points!");return}const o=Math.floor(t.getAlpha()*255+.5),s=a.getNumberOfTuples(),c=a.getNumberOfComponents(),l=n.getData(),p=a.getData(),u=[];if(r===Po.RGBA)for(let f=0;f<s;f++){const h=p[f*c+i];t.getColor(h,u),l[f*4]=Math.floor(u[0]*255+.5),l[f*4+1]=Math.floor(u[1]*255+.5),l[f*4+2]=Math.floor(u[2]*255+.5),l[f*4+3]=o}if(r===Po.RGB)for(let f=0;f<s;f++){const h=p[f*c+i];t.getColor(h,u),l[f*3]=Math.floor(u[0]*255+.5),l[f*3+1]=Math.floor(u[1]*255+.5),l[f*3+2]=Math.floor(u[2]*255+.5)}if(r===Po.LUMINANCE)for(let f=0;f<s;f++){const h=p[f*c+i];t.getColor(h,u),l[f]=Math.floor(u[0]*76.5+u[1]*150.45+u[2]*28.05+.5)}if(r===Po.LUMINANCE_ALPHA)for(let f=0;f<s;f++){const h=p[f*c+i];t.getColor(h,u),l[f*2]=Math.floor(u[0]*76.5+u[1]*150.45+u[2]*28.05+.5),l[f*2+1]=o}},t.applyColorMap=a=>{const n=JSON.stringify(e.colorSpace);a.ColorSpace&&(e.colorSpace=Wt[a.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(Rn(`ColorSpace ${a.ColorSpace} not supported, using RGB instead`),e.colorSpace=Wt.RGB));let r=n!==JSON.stringify(e.colorSpace);const i=r||JSON.stringify(e.nanColor);if(a.NanColor)for(e.nanColor=[].concat(a.NanColor);e.nanColor.length<4;)e.nanColor.push(1);r=r||i!==JSON.stringify(e.nanColor);const o=r||JSON.stringify(e.nodes);if(a.RGBPoints){const l=a.RGBPoints.length;e.nodes=[];const p=.5,u=0;for(let f=0;f<l;f+=4)e.nodes.push({x:a.RGBPoints[f],r:a.RGBPoints[f+1],g:a.RGBPoints[f+2],b:a.RGBPoints[f+3],midpoint:p,sharpness:u})}const s=t.sortAndUpdateRange(),c=!s&&(r||o!==JSON.stringify(e.nodes));return c&&t.modified(),s||c}}const Bw={clamping:!0,colorSpace:Wt.RGB,hSVWrap:!0,scale:yc.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function M1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Bw,a),ho.extend(t,e,a),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},V.obj(e.buildTime),V.get(t,e,["buildTime","mappingRange"]),V.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:Wt},{type:"enum",name:"scale",enum:yc}]),V.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),V.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),Aw(t,e)}var mc={newInstance:V.newInstance(M1,"vtkColorTransferFunction"),extend:M1,...E1};const N1={id:{type:String},colorMapPreset:{type:String,default:"erdc_rainbow_bright"},colorDataRange:{type:Array,default:()=>[0,1]},actor:{type:Object},mapper:{type:Object},property:{type:Object}};let Uw=class{constructor(e,a,n,r){this.refs={presetName:a,colorRange:n},this.view=r,this.actor=pn.newInstance(),this.lookupTable=mc.newInstance(),this.mapper=e({lookupTable:this.lookupTable,useLookupTableScalarRange:!0}),this.actor.setMapper(this.mapper),this.property=this.actor.getProperty()}updateColorMapPreset(){const e=vc.getPresetByName(this.refs.presetName.value);this.lookupTable.applyColorMap(e),this.updateColorDataRange()}updateColorDataRange(){this.lookupTable.setMappingRange(...this.refs.colorRange.value),this.lookupTable.updateRange(),this.dataChanged()}dataChanged(){this.view&&se.nextTick(this.view.render)}};function R1(t,e){const a=se.inject("view"),{colorMapPreset:n,colorDataRange:r}=se.toRefs(t),i=new Uw(e,n,r,a),o=se.ref(i.mapper);se.provide("representation",i),se.provide("downstream",o),se.onMounted(()=>{["actor","mapper","property"].forEach(s=>{i[s].set(t[s])}),i.actor.set({representationId:t.id},!0),i.updateColorMapPreset(),a.renderer.addActor(i.actor)}),se.onBeforeUnmount(()=>{var s;(s=a==null?void 0:a.renderer)==null||s.removeActor(i.actor),i.actor.delete(),i.actor=null,i.mapper.delete(),i.mapper=null,i.lookupTable.delete(),i.lookupTable=null}),["actor","mapper","property"].forEach(s=>{se.watch(()=>t[s],c=>{i[s].set(c)&&i.dataChanged()})}),["colorMapPreset","colorDataRange"].forEach(s=>{se.watch(()=>t[s],()=>i[`update${$r(s)}`]())}),se.watch(()=>t.id,s=>i.actor.set({representationId:s},!0))}const Gw={props:N1,setup(t){R1(t,gn.newInstance)},template:'<div class="vtk-geometry-representation"><slot></slot></div>'};var L1={OrientationModes:{DIRECTION:0,ROTATION:1,MATRIX:2},ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}};const{OrientationModes:qn,ScaleModes:Ln}=L1,{vtkErrorMacro:Iw}=V;function Pw(t,e){e.classHierarchy.push("vtkGlyph3DMapper"),t.getOrientationModeAsString=()=>V.enumToString(qn,e.orientationMode),t.setOrientationModeToDirection=()=>t.setOrientationMode(qn.DIRECTION),t.setOrientationModeToRotation=()=>t.setOrientationMode(qn.ROTATION),t.setOrientationModeToMatrix=()=>t.setOrientationMode(qn.MATRIX),t.getOrientationArrayData=()=>{const a=t.getInputData(0);return!a||!a.getPointData()?null:e.orientationArray?a.getPointData().getArray(e.orientationArray):a.getPointData().getVectors()},t.getScaleModeAsString=()=>V.enumToString(Ln,e.scaleMode),t.setScaleModeToScaleByMagnitude=()=>t.setScaleMode(Ln.SCALE_BY_MAGNITUDE),t.setScaleModeToScaleByComponents=()=>t.setScaleMode(Ln.SCALE_BY_COMPONENTS),t.setScaleModeToScaleByConstant=()=>t.setScaleMode(Ln.SCALE_BY_CONSTANT),t.getScaleArrayData=()=>{const a=t.getInputData(0);return!a||!a.getPointData()?null:e.scaleArray?a.getPointData().getArray(e.scaleArray):a.getPointData().getScalars()},t.getBounds=()=>{const a=t.getInputData(0),n=t.getInputData(1);return!a||!n?In():(t.buildArrays(),e.bounds)},t.buildArrays=()=>{const a=t.getInputData(0),n=t.getInputData(1);if(e.buildTime.getMTime()<n.getMTime()||e.buildTime.getMTime()<a.getMTime()||e.buildTime.getMTime()<t.getMTime()){const r=a.getPoints().getData();let i=t.getScaleArrayData(),o=null,s=0;i&&(o=i.getData(),s=i.getNumberOfComponents()),e.scaling&&i&&e.scaleMode===Ln.SCALE_BY_COMPONENTS&&i.getNumberOfComponents()!==3&&(Iw("Cannot scale by components since scale array does not have 3 components."),i=null);const c=n.getBounds(),l=[];we.getCorners(c,l),e.bounds[0]=we.INIT_BOUNDS[0],e.bounds[1]=we.INIT_BOUNDS[1],e.bounds[2]=we.INIT_BOUNDS[2],e.bounds[3]=we.INIT_BOUNDS[3],e.bounds[4]=we.INIT_BOUNDS[4],e.bounds[5]=we.INIT_BOUNDS[5];const p=new Float64Array(3),u=t.getOrientationArrayData(),f=Te(new Float64Array(16)),h=[],d=[],v=r.length/3;e.matrixArray=new Float32Array(16*v);const m=e.matrixArray.buffer;e.normalArray=new Float32Array(9*v);const x=e.normalArray.buffer,y=[],g=[];for(let T=0;T<v;++T){const w=new Float32Array(m,T*64,16);if(h[0]=r[T*3],h[1]=r[T*3+1],h[2]=r[T*3+2],Ye(w,f,h),u)switch(u.getTuple(T,g),e.orientationMode){case qn.MATRIX:{const E=[...g.slice(0,3),0,...g.slice(3,6),0,...g.slice(6,9),0,0,0,0,1];Ee(w,w,E);break}case qn.ROTATION:vi(w,w,g[2]),di(w,w,g[0]),da(w,w,g[1]);break;case qn.DIRECTION:if(g[1]===0&&g[2]===0)g[0]<0&&da(w,w,3.1415926);else{const E=St(g),D=[];D[0]=(g[0]+E)/2,D[1]=g[1]/2,D[2]=g[2]/2,mt(w,w,3.1415926,D)}break}if(e.scaling){if(d[0]=e.scaleFactor,d[1]=e.scaleFactor,d[2]=e.scaleFactor,i)switch(e.scaleMode){case Ln.SCALE_BY_MAGNITUDE:for(let E=0;E<s;++E)y[E]=o[T*s+E];d[0]*=St(y,s),d[1]=d[0],d[2]=d[0];break;case Ln.SCALE_BY_COMPONENTS:for(let E=0;E<s;++E)y[E]=o[T*s+E];d[0]*=y[0],d[1]*=y[1],d[2]*=y[2];break;case Ln.SCALE_BY_CONSTANT:}d[0]===0&&(d[0]=1e-10),d[1]===0&&(d[1]=1e-10),d[2]===0&&(d[2]=1e-10),An(w,w,d)}for(let E=0;E<8;++E)_e(p,l[E],w),p[0]<e.bounds[0]&&(e.bounds[0]=p[0]),p[1]<e.bounds[2]&&(e.bounds[2]=p[1]),p[2]<e.bounds[4]&&(e.bounds[4]=p[2]),p[0]>e.bounds[1]&&(e.bounds[1]=p[0]),p[1]>e.bounds[3]&&(e.bounds[3]=p[1]),p[2]>e.bounds[5]&&(e.bounds[5]=p[2]);const _=new Float32Array(x,T*36,9);Vn(_,w),Tn(_,_),Br(_,_)}const C=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),e.colorArray=null;const S=t.getLookupTable();S&&C&&(S.build(),e.colorArray=S.mapScalars(C,e.colorMode,0)),e.buildTime.modified()}},t.getPrimitiveCount=()=>{const a=t.getInputData(1),n=t.getInputData().getPoints().getNumberOfValues()/3;return{points:n*a.getPoints().getNumberOfValues()/3,verts:n*(a.getVerts().getNumberOfValues()-a.getVerts().getNumberOfCells()),lines:n*(a.getLines().getNumberOfValues()-2*a.getLines().getNumberOfCells()),triangles:n*(a.getPolys().getNumberOfValues()-3*a.getLines().getNumberOfCells())}},t.setSourceConnection=a=>t.setInputConnection(a,1)}const zw={orient:!0,orientationMode:qn.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:Ln.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function F1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zw,a),gn.extend(t,e,a),V.algo(t,e,2,0),e.buildTime={},V.obj(e.buildTime,{mtime:0}),e.boundsTime={},V.obj(e.boundsTime,{mtime:0}),V.setGet(t,e,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),V.get(t,e,["colorArray","matrixArray","normalArray","buildTime"]),Pw(t,e)}var k1={newInstance:V.newInstance(F1,"vtkGlyph3DMapper"),extend:F1,...L1};const jw={props:N1,setup(t){R1(t,k1.newInstance)},template:'<div class="vtk-glyph-representation"><slot></slot></div>'},Ww=[Array,Float32Array,Float64Array,Object],zo=[Array,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Object],V1={props:{port:{type:Number,default:0},points:{type:Ww},verts:{type:zo},lines:{type:zo},polys:{type:zo},strips:{type:zo},connectivity:{type:String,default:"manual"}},setup(t){const e=se.computed(()=>t.points&&t.points.length>196608?Uint32Array:Uint16Array),a=se.inject("downstream"),n=se.inject("representation"),r=Xe.newInstance(),i=wn(()=>{if(t.connectivity!=="manual"){const f=t.points.length/3;switch(t.connectivity){case"points":{const h=new Uint32Array(f+1);h[0]=f;for(let d=0;d<f;d++)h[d+1]=d;r.getVerts().setData(h)}break;case"triangles":{const h=new Uint32Array(f+f/3);let d=0;for(let v=0;v<f;v+=3)h[d++]=3,h[d++]=v+0,h[d++]=v+1,h[d++]=v+2;r.getPolys().setData(h)}break;case"strips":{const h=new Uint32Array(f+1);h[0]=f;for(let d=0;d<f;d++)h[d+1]=d;r.getStrips().setData(h)}break}}r.modified(),n&&n.dataChanged()},1);function o(f,h,d,v){const m=w1(f,d);m&&(r[h]().setData(m,v||1),i())}const{points:s,verts:c,lines:l,polys:p,strips:u}=se.toRefs(t);se.watch(s,f=>o(f,"getPoints",Float64Array,3)),se.watch(c,f=>o(f,"getVerts",e.value)),se.watch(l,f=>o(f,"getLines",e.value)),se.watch(p,f=>o(f,"getPolys",e.value)),se.watch(u,f=>o(f,"getStrips",e.value)),se.watch(a,()=>{a.value&&a.value.setInputData(r,t.port)}),se.onMounted(()=>{o(t.points,"getPoints",Float64Array,3),o(t.verts,"getVerts",e.value),o(t.lines,"getLines",e.value),o(t.polys,"getPolys",e.value),o(t.strips,"getStrips",e.value),a.value&&a.value.setInputData(r,t.port)}),se.onBeforeUnmount(()=>{r.delete()}),se.provide("dataset",r)},template:'<div class="vtk-polydata"><slot></slot></div>'},A1={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getPointData())},template:'<div class="vtk-point-data"><slot></slot></div>'},$w={props:{port:{type:Number,default:0},state:{type:Object}},components:{VtkPolydata:V1,VtkCellData:T1,VtkPointData:A1,VtkDataArray:_1},template:`
    <vtk-polydata v-if="state" v-bind="state.mesh">
      <vtk-point-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'PointData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.pointArrays"
          v-for="array, idx in state.pointArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-point-data>
      <vtk-cell-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'CellData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.cellArrays"
          v-for="array, idx in state.cellArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-cell-data>
    </vtk-polydata>
  `},Hw={props:{port:{type:Number,default:0},vtkClass:{type:String,default:""},url:{type:String},parseAsText:{type:String},parseAsArrayBuffer:{type:String},renderOnUpdate:{type:Boolean,default:!1},resetCameraOnUpdate:{type:Boolean,default:!1}},setup(t){const e=se.ref(null),a=se.inject("downstream"),n=se.inject("representation"),r=se.inject("view");function i(){e.value&&(n&&n.dataChanged(),t.resetCameraOnUpdate&&r.resetCamera(),t.renderOnUpdate&&r.render())}const{vtkClass:o,url:s,parseAsText:c,parseAsArrayBuffer:l}=se.toRefs(t);se.watch(o,p=>{let u=e.value;e.value=wt({vtkClass:p}),a.setInputConnection(e.value.getOutputPort(),t.port),u&&u.delete()}),se.watch(s,async p=>{await e.value.setUrl(p),i()}),se.watch(c,p=>{e.value.parseAsText(p),i()}),se.watch(l,p=>{e.value.parseAsArrayBuffer(Rr.toArrayBuffer(p)),i()}),se.onMounted(async()=>{let p=!1;e.value=wt({vtkClass:t.vtkClass}),a.value.setInputConnection(e.value.getOutputPort(),t.port),t.url&&(await e.value.setUrl(t.url),p=!0),t.parseAsText&&(e.value.parseAsText(t.parseAsText),p=!0),t.parseAsArrayBuffer&&(e.value.parseAsArrayBuffer(Rr.toArrayBuffer(t.parseAsArrayBuffer)),p=!0),p&&i()}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)})}},{vtkErrorMacro:Kw}=V;function Xw(t,e){e.classHierarchy.push("vtkCanvasView");function a(){e._renderable&&(e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none")}t.onModified(a),t.setContainer=n=>{e.el&&e.el!==n&&(e.canvas.parentNode!==e.el&&Kw("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==n&&(e.el=n,e.el&&e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage),t.modified())},t.setBackgroundImage=n=>{e.bgImage.src=n.src},t.setUseBackgroundImage=n=>{e.useBackgroundImage=n,e.useBackgroundImage&&e.el&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)},t.setViewStream=n=>e.viewStream===n?!1:(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=n,e.viewStream&&(t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(r=>t.setBackgroundImage(r.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()),!0),t.delete=V.chain(t.setViewStream,t.delete),e._renderable=t,e._renderers=[t],t.traverseAllPasses=()=>{},t.isInViewport=()=>!0,t.getInteractive=()=>!0}const qw={canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",useOffScreen:!1,useBackgroundImage:!1};function B1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qw,a),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",V.obj(t,e,a),V.get(t,e,["useBackgroundImage","_renderable"]),V.setGet(t,e,["canvas","cursor","useOffScreen","interactor"]),V.setGetArray(t,e,["size"],2),V.getArray(t,e,["_renderers"]),V.moveToProtected(t,e,["renderable","renderers"]),Xw(t,e)}var Yw={newInstance:V.newInstance(B1,"vtkCanvasView"),extend:B1};function Jw(t){return{subscribeToImageStream:e=>t.subscribe("viewport.image.push.subscription",e),unsubscribeToImageStream:e=>t.unsubscribe(e),registerView:e=>t.call("viewport.image.push.observer.add",[e]),unregisterView:e=>t.call("viewport.image.push.observer.remove",[e]),enableView:(e,a)=>t.call("viewport.image.push.enabled",[e,a]),render:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{size:[400,400],view:-1};return t.call("viewport.image.push",[e])},resetCamera:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.camera.reset",[e])},invalidateCache:e=>t.call("viewport.image.push.invalidate.cache",[e]),setQuality:function(e,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t.call("viewport.image.push.quality",[e,a,n])},setSize:function(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:400,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:400;return t.call("viewport.image.push.original.size",[e,a,n])},setServerAnimationFPS:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;return t.call("viewport.image.animation.fps.max",[e])},getServerAnimationFPS:()=>t.call("viewport.image.animation.fps.get",[]),startAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.start",[e])},stopAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.stop",[e])},updateCamera:function(e,a,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return t.call("viewport.camera.update",[e??-1,a,n,r,i])},updateCameraParameters:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t.call("viewport.camera.update.params",[e,a,n])}}}function Zw(t,e){e.classHierarchy.push("vtkViewStream"),e.imageDecodingPool=[new Image,new Image],e.eventPool=[],e.nextPoolImageIndex=0,e.urlToRevoke=[],e.activeURL=null,e.fps=[],e.lastTime=Date.now(),e.lastImageEvent=null;function a(i){if(e.deleted)return;const o=Number(this.dataset.id);t.invokeImageReady(e.eventPool[o])}function n(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;for(;e.imageDecodingPool.length<i;)e.imageDecodingPool.push(new Image);for(let o=0;o<e.imageDecodingPool.length;o++)e.imageDecodingPool[o].dataset.id=o,e.imageDecodingPool[o].onload=a}function r(i){e.eventPool[e.nextPoolImageIndex]=i,i.image=e.imageDecodingPool[e.nextPoolImageIndex++],e.nextPoolImageIndex%=e.imageDecodingPool.length,i.image.src=i.url}t.pushCamera=()=>{const i=e.camera.getReferenceByName("focalPoint"),o=e.camera.getReferenceByName("viewUp"),s=e.camera.getReferenceByName("position"),c=e.camera.getParallelProjection(),l=e.camera.getViewAngle(),p=e.camera.getParallelScale();let u=null;return e.useCameraParameters?u=e.protocol.updateCameraParameters(e.viewId,{focalPoint:i,viewUp:o,position:s,parallelProjection:c,viewAngle:l,parallelScale:p},!1):u=e.protocol.updateCamera(e.viewId,i,o,s,!1),e.isAnimating&&setTimeout(t.pushCamera,1e3/e.cameraUpdateRate),u},t.invalidateCache=()=>e.protocol.invalidateCache(e.viewId),t.render=()=>e.protocol.render({view:e.viewId,size:e.size}),t.resetCamera=()=>e.protocol.resetCamera(e.viewId),t.startAnimation=()=>e.protocol.startAnimation(e.viewId),t.stopAnimation=()=>e.protocol.stopAnimation(e.viewId),t.setSize=(i,o)=>{let s=!1;return(e.size[0]!==i||e.size[1]!==o)&&(e.size=[i,o],s=!0),s&&(t.modified(),e.protocol)?e.protocol.setSize(e.viewId,i,o):Promise.resolve(!1)},t.startInteraction=()=>{const i=[e.protocol.setQuality(e.viewId,e.interactiveQuality,e.interactiveRatio)];return e.camera&&(i.push(t.startAnimation()),e.isAnimating=!0,i.push(t.pushCamera())),Promise.all(i)},t.endInteraction=()=>{const i=[];return i.push(e.protocol.setQuality(e.viewId,e.stillQuality,e.stillRatio)),e.camera?(i.push(t.stopAnimation()),e.isAnimating=!1,i.push(t.pushCamera())):i.push(t.render()),Promise.all(i)},t.setViewId=i=>e.viewId===i||!e.protocol?!1:(e.viewId&&e.protocol.unregisterView(e.viewId),e.viewId=i,e.viewId&&e.protocol.registerView(e.viewId).then(o=>{let{viewId:s}=o;e.viewId=s}),!0),t.processMessage=i=>{if(i.id!=e.viewId)return;const o=new Blob([i.image],{type:e.mimeType});if(e.activeURL)for(e.urlToRevoke.push(e.activeURL),e.activeURL=null;e.urlToRevoke.length>60;){const l=e.urlToRevoke.shift();window.URL.revokeObjectURL(l)}e.activeURL=URL.createObjectURL(o);const s=Date.now(),c=Math.floor(1e4/(s-e.lastTime))/10;for(e.fps.push(c),e.lastTime=s,e.lastImageEvent={url:e.activeURL,fps:c,metadata:{size:i.size,id:i.id,memory:i.memsize,workTime:i.workTime}},e.decodeImage?r(e.lastImageEvent):t.invokeImageReady(e.lastImageEvent);e.fps.length>e.fpsWindowSize;)e.fps.shift()},t.delete=V.chain(()=>{for(e.unregisterViewStream(t),t.setViewId(null);e.urlToRevoke.length;)window.URL.revokeObjectURL(e.urlToRevoke.pop())},t.delete),n()}const Qw={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function U1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qw,a),V.obj(t,e),V.event(t,e,"ImageReady"),V.get(t,e,["viewId","size","fps","lastImageEvent"]),V.setGet(t,e,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),Zw(t,e),Object.assign(t,e.sharedAPI)}var e_={newInstance:V.newInstance(U1,"vtkViewStream"),extend:U1};function t_(t,e){e.classHierarchy.push("vtkImageStream");function a(n){const r=n[0];if(!(!r||!r.image))for(let i=0;i<e.viewStreams.length;i++)e.viewStreams[i].processMessage(r)}t.setServerAnimationFPS=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,r=!1;return e.serverAnimationFPS!==n&&(e.serverAnimationFPS=n,r=!0),e.protocol?(r&&t.modified(),e.protocol.setServerAnimationFPS(n)):Promise.resolve(!0)},t.connect=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jw;e.connected||!n||!r||(e.protocol=r(n),e.protocol.subscribeToImageStream(a).promise.then(i=>{e.renderTopicSubscription=i,e.connected=!0}).catch(i=>{e.connected=!1,console.error(i)}))},t.disconnect=()=>{e.protocol&&e.connected&&e.renderTopicSubscription&&(e.protocol.unsubscribeToImageStream(e.renderTopicSubscription),e.renderTopicSubscription=null),e.connected=!1},t.registerViewStream=n=>{e.viewStreams.push(n)},t.unregisterViewStream=n=>{e.viewStreams=e.viewStreams.filter(r=>r!==n)},t.createViewStream=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-1",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[400,400];const{setServerAnimationFPS:i,getServerAnimationFPS:o,unregisterViewStream:s}=t,c=e_.newInstance({protocol:e.protocol,unregisterViewStream:s,sharedAPI:{setServerAnimationFPS:i,getServerAnimationFPS:o}});return c.setViewId(n),c.setSize(r[0],r[1]),t.registerViewStream(c),c},t.delete=V.chain(()=>{for(;e.viewStreams.length;)e.viewStreams.pop().delete();t.disconnect()},t.delete)}const n_={viewStreams:[],serverAnimationFPS:-1};function G1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n_,a),V.obj(t,e),V.get(t,e,["serverAnimationFPS","protocol"]),t_(t,e)}var r_={newInstance:V.newInstance(G1,"vtkImageStream"),extend:G1};const jo={Unknown:0,LeftController:1,RightController:2},Wo={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},a_={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},Fr={LeftButton:1,MiddleButton:2,RightButton:3};var I1={Device:jo,Input:Wo,Axis:a_,MouseButton:Fr};const{Device:$o,Input:kr}=I1,{vtkWarningMacro:Ho,vtkErrorMacro:Ko,normalizeWheel:i_,vtkOnceErrorMacro:o_}=V,fa={ctrlKey:!1,altKey:!1,shiftKey:!1},xc={"xr-standard":[kr.Trigger,kr.Grip,kr.TrackPad,kr.Thumbstick,kr.A,kr.B]},Cc=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function ii(t){t.cancelable&&t.preventDefault()}function Xo(t){const e=Object.create(null);return t.forEach(a=>{let{pointerId:n,position:r}=a;e[n]=r}),e}function s_(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const a={...t},n=new Set,r=new Map;let i=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=v=>{Ko("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=v=>{e.interactorStyle!==v&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=v,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>Ho("empty event loop");function o(v,m){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(v,m))}t.getCurrentRenderer=()=>(e.currentRenderer||o(0,0),e.currentRenderer);function s(v){const m=e._view.getCanvas(),x=m.getBoundingClientRect(),y=m.width/x.width,g=m.height/x.height,C={x:y*(v.clientX-x.left),y:g*(x.height-v.clientY+x.top),z:0,movementX:y*v.movementX,movementY:g*v.movementY};return(r.size<=1||!e.currentRenderer)&&o(C.x,C.y),C}const c=e._getScreenEventPositionFor||s;function l(v){return{controlKey:v.ctrlKey,altKey:v.altKey,shiftKey:v.shiftKey}}function p(v){const m=l(v);return{key:v.key,keyCode:v.charCode,...m}}function u(v){return v.pointerType||""}const f=()=>{if(e.container===null)return;const{container:v}=e;v.addEventListener("contextmenu",ii),v.addEventListener("wheel",t.handleWheel),v.addEventListener("DOMMouseScroll",t.handleWheel),v.addEventListener("pointerenter",t.handlePointerEnter),v.addEventListener("pointerleave",t.handlePointerLeave),v.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),v.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),v.addEventListener("pointerup",t.handlePointerUp),v.addEventListener("pointercancel",t.handlePointerCancel),v.addEventListener("keypress",t.handleKeyPress),v.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),v.tabIndex=0,v.style.touchAction="none",v.style.userSelect="none",v.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=v=>{if(v===null)return;a.setContainer(v)&&f()};const h=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,i=1;const{container:v}=e;v&&(v.removeEventListener("contextmenu",ii),v.removeEventListener("wheel",t.handleWheel),v.removeEventListener("DOMMouseScroll",t.handleWheel),v.removeEventListener("pointerenter",t.handlePointerEnter),v.removeEventListener("pointerleave",t.handlePointerLeave),v.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),v.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),v.removeEventListener("pointerup",t.handlePointerUp),v.removeEventListener("pointercancel",t.handlePointerCancel),v.removeEventListener("keypress",t.handleKeyPress),v.removeEventListener("keydown",t.handleKeyDown)),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),r.clear()};t.unbindEvents=()=>{h(),a.setContainer(null)},t.handleKeyPress=v=>{const m=p(v);t.keyPressEvent(m)},t.handleKeyDown=v=>{const m=p(v);t.keyDownEvent(m)},t.handleKeyUp=v=>{const m=p(v);t.keyUpEvent(m)},t.handlePointerEnter=v=>{const m={...l(v),position:c(v),deviceType:u(v)};t.pointerEnterEvent(m),m.deviceType==="mouse"&&t.mouseEnterEvent(m)},t.handlePointerLeave=v=>{const m={...l(v),position:c(v),deviceType:u(v)};t.pointerLeaveEvent(m),m.deviceType==="mouse"&&t.mouseLeaveEvent(m)},t.handlePointerDown=v=>{if(!(v.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&ii(v),v.target.hasPointerCapture(v.pointerId)&&v.target.releasePointerCapture(v.pointerId),e.container.setPointerCapture(v.pointerId),r.has(v.pointerId)&&Ho("[RenderWindowInteractor] duplicate pointerId detected"),r.set(v.pointerId,{pointerId:v.pointerId,position:c(v)}),v.pointerType){case"pen":case"touch":t.handleTouchStart(v);break;case"mouse":default:t.handleMouseDown(v);break}},t.handlePointerUp=v=>{if(r.has(v.pointerId))switch(e.preventDefaultOnPointerUp&&ii(v),r.delete(v.pointerId),e.container.releasePointerCapture(v.pointerId),v.pointerType){case"pen":case"touch":t.handleTouchEnd(v);break;case"mouse":default:t.handleMouseUp(v);break}},t.handlePointerCancel=v=>{if(r.has(v.pointerId))switch(r.delete(v.pointerId),v.pointerType){case"pen":case"touch":t.handleTouchEnd(v);break;case"mouse":default:t.handleMouseUp(v);break}},t.handlePointerMove=v=>{if(r.has(v.pointerId)){const m=r.get(v.pointerId);m.position=c(v)}switch(v.pointerType){case"pen":case"touch":t.handleTouchMove(v);break;case"mouse":default:t.handleMouseMove(v);break}},t.handleMouseDown=v=>{const m={...l(v),position:c(v),deviceType:u(v)};switch(v.button){case 0:t.leftButtonPressEvent(m);break;case 1:t.middleButtonPressEvent(m);break;case 2:t.rightButtonPressEvent(m);break;default:Ko(`Unknown mouse button pressed: ${v.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var v;return(v=document.exitPointerLock)==null?void 0:v.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function d(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=v=>{if(v===void 0){Ko("undefined requester, can not start animating");return}if(n.has(v)){Ho("requester is already registered for animating");return}n.add(v),!e.animationRequest&&n.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=v=>{const m=Date.now()+v;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,m),!e.animationRequest&&n.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(v){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n.has(v)){if(!m){const x=v&&v.getClassName?v.getClassName():v;Ho(`${x} did not request an animation`)}return}n.delete(v),e.animationRequest&&n.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,n.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(v,m,x)=>{v.inputSources.forEach(y=>{const g=y.gripSpace==null?null:m.getPose(y.gripSpace,x),C=y.gripSpace==null?null:m.getPose(y.targetRaySpace,x),S=y.gamepad,T=y.handedness;if(S){S.index in e.lastGamepadValues||(e.lastGamepadValues[S.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let w=0;w<S.buttons.length;++w)w in e.lastGamepadValues[S.index][T].buttons||(e.lastGamepadValues[S.index][T].buttons[w]=!1),e.lastGamepadValues[S.index][T].buttons[w]!==S.buttons[w].pressed&&g!=null&&(t.button3DEvent({gamepad:S,position:g.transform.position,orientation:g.transform.orientation,targetPosition:C.transform.position,targetOrientation:C.transform.orientation,pressed:S.buttons[w].pressed,device:y.handedness==="left"?$o.LeftController:$o.RightController,input:xc[S.mapping]&&xc[S.mapping][w]?xc[S.mapping][w]:kr.Trigger}),e.lastGamepadValues[S.index][T].buttons[w]=S.buttons[w].pressed),e.lastGamepadValues[S.index][T].buttons[w]&&g!=null&&t.move3DEvent({gamepad:S,position:g.transform.position,orientation:g.transform.orientation,targetPosition:C.transform.position,targetOrientation:C.transform.orientation,device:y.handedness==="left"?$o.LeftController:$o.RightController})}})},t.handleMouseMove=v=>{const m={...l(v),position:c(v),deviceType:u(v)};e.moveTimeoutID===0?t.startMouseMoveEvent(m):(t.mouseMoveEvent(m),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const v=Date.now();e._animationFrameCount++,v-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(v-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=v,e._animationFrameCount=1),t.animationEvent(),d(),n.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=v=>{ii(v);const m={...i_(v),...l(v),position:c(v),deviceType:u(v)};e.wheelTimeoutID===0&&(Math.abs(m.spinY)>=.3?i=Math.abs(m.spinY):i=1),m.spinY/=i,e.wheelTimeoutID===0?(t.startMouseWheelEvent(m),t.mouseWheelEvent(m)):(t.mouseWheelEvent(m),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=v=>{const m={...l(v),position:c(v),deviceType:u(v)};switch(v.button){case 0:t.leftButtonReleaseEvent(m);break;case 1:t.middleButtonReleaseEvent(m);break;case 2:t.rightButtonReleaseEvent(m);break;default:Ko(`Unknown mouse button released: ${v.button}`);break}},t.handleTouchStart=v=>{const m=[...r.values()];if(e.recognizeGestures&&m.length>1){const x=Xo(r);if(m.length===2){const y={...l(fa),position:m[0].position,deviceType:u(v)};t.leftButtonReleaseEvent(y)}t.recognizeGesture("TouchStart",x)}else if(m.length===1){const x={...l(fa),position:c(v),deviceType:u(v)};t.leftButtonPressEvent(x)}},t.handleTouchMove=v=>{const m=[...r.values()];if(e.recognizeGestures&&m.length>1){const x=Xo(r);t.recognizeGesture("TouchMove",x)}else if(m.length===1){const x={...l(fa),position:m[0].position,deviceType:u(v)};t.mouseMoveEvent(x)}},t.handleTouchEnd=v=>{const m=[...r.values()];if(e.recognizeGestures)if(m.length===0){const x={...l(fa),position:c(v),deviceType:u(v)};t.leftButtonReleaseEvent(x)}else if(m.length===1){const x=Xo(r);t.recognizeGesture("TouchEnd",x);const y={...l(fa),position:m[0].position,deviceType:u(v)};t.leftButtonPressEvent(y)}else{const x=Xo(r);t.recognizeGesture("TouchMove",x)}else if(m.length===1){const x={...l(fa),position:m[0].position,deviceType:u(v)};t.leftButtonReleaseEvent(x)}},t.setView=v=>{e._view!==v&&(e._view=v,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var v,m,x;return(x=(m=(v=e._view)==null?void 0:v.getRenderable())==null?void 0:m.getRenderersByReference())==null?void 0:x[0]},t.findPokedRenderer=function(){var T,w;let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const x=(w=(T=e._view)==null?void 0:T.getRenderable())==null?void 0:w.getRenderers();if(!x||x.length===0)return null;x.sort((_,E)=>_.getLayer()-E.getLayer());let y=null,g=null,C=null,S=x.length;for(;S--;){const _=x[S];if(e._view.isInViewport(v,m,_)&&_.getInteractive()){C=_;break}y===null&&_.getInteractive()&&(y=_),g===null&&e._view.isInViewport(v,m,_)&&(g=_)}return C===null&&(C=y),C===null&&(C=g),C==null&&(C=x[0]),C},t.render=()=>{!t.isAnimating()&&!e.inRender&&d()},Cc.forEach(v=>{const m=v.charAt(0).toLowerCase()+v.slice(1);t[`${m}Event`]=x=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){o_(`
          Can not forward events without a current renderer on the interactor.
        `);return}const g={type:v,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...x};t[`invoke${v}`](g)}}),t.recognizeGesture=(v,m)=>{if(Object.keys(m).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),v==="TouchStart"){Object.keys(m).forEach(D=>{e.startingEventPositions[D]=m[D]}),e.currentGesture="Start";return}if(v==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let x=0;const y=[],g=[];Object.keys(m).forEach(D=>{y[x]=m[D],g[x]=e.startingEventPositions[D],x++});const C=Math.sqrt((g[0].x-g[1].x)*(g[0].x-g[1].x)+(g[0].y-g[1].y)*(g[0].y-g[1].y)),S=Math.sqrt((y[0].x-y[1].x)*(y[0].x-y[1].x)+(y[0].y-y[1].y)*(y[0].y-y[1].y));let T=Ra(Math.atan2(g[1].y-g[0].y,g[1].x-g[0].x)),w=Ra(Math.atan2(y[1].y-y[0].y,y[1].x-y[0].x)),_=w-T;w=w+180>=360?w-180:w+180,T=T+180>=360?T-180:T+180,Math.abs(w-T)<Math.abs(_)&&(_=w-T);const E=[];if(E[0]=(y[0].x-g[0].x+y[1].x-g[1].x)/2,E[1]=(y[0].y-g[0].y+y[1].y-g[1].y)/2,v==="TouchMove")if(e.currentGesture==="Start"){let D=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);D<15&&(D=15);const O=Math.abs(S-C),M=S*3.1415926*Math.abs(_)/360,N=Math.sqrt(E[0]*E[0]+E[1]*E[1]);if(O>D&&O>M&&O>N){e.currentGesture="Pinch";const R={scale:1,touches:m};t.startPinchEvent(R)}else if(M>D&&M>N){e.currentGesture="Rotate";const R={rotation:0,touches:m};t.startRotateEvent(R)}else if(N>D){e.currentGesture="Pan";const R={translation:[0,0],touches:m};t.startPanEvent(R)}}else{if(e.currentGesture==="Rotate"){const D={rotation:_,touches:m};t.rotateEvent(D)}if(e.currentGesture==="Pinch"){const D={scale:S/C,touches:m};t.pinchEvent(D)}if(e.currentGesture==="Pan"){const D={translation:E,touches:m};t.panEvent(D)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=v=>{e._forcedRenderer=!!v,e.currentRenderer=v},t.setContainer=v=>{h();const m=a.setContainer(v??null);return m&&f(),m},t.delete=()=>{for(;n.size;)t.cancelAnimation(n.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),a.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const c_={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function P1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c_,a),V.obj(t,e),e._animationExtendedEnd=0,V.event(t,e,"RenderEvent"),Cc.forEach(n=>V.event(t,e,n)),V.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),V.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),V.moveToProtected(t,e,["view"]),s_(t,e)}var qo={newInstance:V.newInstance(P1,"vtkRenderWindowInteractor"),extend:P1,handledEvents:Cc,...I1};const{vtkErrorMacro:u_,VOID:l_}=V;function f_(t,e,a,n){return t.getRenderWindow().getViews()[0].worldToDisplay(e,a,n,t)}function p_(t,e,a,n){return t.getRenderWindow().getViews()[0].displayToWorld(e,a,n,t)}const h_={computeWorldToDisplay:f_,computeDisplayToWorld:p_};function g_(t,e){e.classHierarchy.push("vtkInteractorObserver");const a={...t};function n(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function r(){qo.handledEvents.forEach(i=>{t[`handle${i}`]&&e.subscribedEvents.push(e._interactor[`on${i}`](o=>e.processEvents?t[`handle${i}`](o):l_,e.priority))})}t.setInteractor=i=>{i!==e._interactor&&(n(),e._interactor=i,i&&e.enabled&&r(),t.modified())},t.setEnabled=i=>{i!==e.enabled&&(n(),i&&(e._interactor?r():u_(`
          The interactor must be set before subscribing to events
        `)),e.enabled=i,t.modified())},t.computeDisplayToWorld=(i,o,s,c)=>i?e._interactor.getView().displayToWorld(o,s,c,i):null,t.computeWorldToDisplay=(i,o,s,c)=>i?e._interactor.getView().worldToDisplay(o,s,c,i):null,t.setPriority=i=>{a.setPriority(i)&&e._interactor&&(n(),r())}}const d_={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function z1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d_,a),V.obj(t,e),V.event(t,e,"InteractionEvent"),V.event(t,e,"StartInteractionEvent"),V.event(t,e,"EndInteractionEvent"),V.get(t,e,["_interactor","enabled"]),V.setGet(t,e,["priority","processEvents"]),V.moveToProtected(t,e,["interactor"]),g_(t,e)}var v_={newInstance:V.newInstance(z1,"vtkInteractorObserver"),extend:z1,...h_};const j1={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var W1={States:j1};const{States:Sn}=W1,Sc={Rotate:Sn.IS_ROTATE,Pan:Sn.IS_PAN,Spin:Sn.IS_SPIN,Dolly:Sn.IS_DOLLY,CameraPose:Sn.IS_CAMERA_POSE,WindowLevel:Sn.IS_WINDOW_LEVEL,Slice:Sn.IS_SLICE};function y_(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(Sc).forEach(a=>{V.event(t,e,`Start${a}Event`),t[`start${a}`]=()=>{e.state===Sn.IS_NONE&&(e.state=Sc[a],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${a}Event`]({type:`Start${a}Event`}))},V.event(t,e,`End${a}Event`),t[`end${a}`]=()=>{e.state===Sc[a]&&(e.state=Sn.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${a}Event`]({type:`End${a}Event`}),e._interactor.render())}}),e.getRenderer=a=>e.focusedRenderer||a.pokedRenderer,t.handleKeyPress=a=>{const n=e._interactor;let r=null;switch(a.key){case"r":case"R":e.getRenderer(a).resetCamera(),n.render();break;case"w":case"W":r=e.getRenderer(a).getActors(),r.forEach(i=>{const o=i.getProperty();o.setRepresentationToWireframe&&o.setRepresentationToWireframe()}),n.render();break;case"s":case"S":r=e.getRenderer(a).getActors(),r.forEach(i=>{const o=i.getProperty();o.setRepresentationToSurface&&o.setRepresentationToSurface()}),n.render();break;case"v":case"V":r=e.getRenderer(a).getActors(),r.forEach(i=>{const o=i.getProperty();o.setRepresentationToPoints&&o.setRepresentationToPoints()}),n.render();break}}}const m_={state:Sn.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function $1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m_,a),v_.extend(t,e,a),V.setGet(t,e,["focusedRenderer"]),y_(t,e)}var Tc={newInstance:V.newInstance($1,"vtkInteractorStyle"),extend:$1,...W1};const oi={type:"StartInteractionEvent"},H1={type:"InteractionEvent"},si={type:"EndInteractionEvent"};function x_(t,e){e.classHierarchy.push("vtkInteractorStyleRemoteMouse");function a(n){const{buttonLeft:r,buttonMiddle:i,buttonRight:o}=e,s=n.shiftKey?1:0,c=n.controlKey?1:0,l=n.altKey?1:0,p=n.metaKey?1:0,u=r||i||o?"down":"up",[f,h]=e._interactor.getView().getSizeByReference();let{x:d,y:v}=n.position;return d/=f,v/=h,{action:u,x:d,y:v,buttonLeft:r,buttonMiddle:i,buttonRight:o,shiftKey:s,altKey:l,ctrlKey:c,metaKey:p,...e.remoteEventAddOn}}t.handleLeftButtonPress=n=>{e.previousPosition=n.position,e.buttonLeft=1,t.onButtonDown(1,n)},t.handleMiddleButtonPress=n=>{e.previousPosition=n.position,e.buttonMiddle=1,t.onButtonDown(2,n)},t.handleRightButtonPress=n=>{e.previousPosition=n.position,e.buttonRight=1,t.onButtonDown(3,n)},t.handleLeftButtonRelease=n=>{e.buttonLeft=0,t.onButtonUp(1,n)},t.handleMiddleButtonRelease=n=>{e.buttonMiddle=0,t.onButtonUp(2,n)},t.handleRightButtonRelease=n=>{e.buttonRight=0,t.onButtonUp(3,n)},t.onButtonDown=(n,r)=>{e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(oi),t.invokeRemoteMouseEvent(a(r))},t.onButtonUp=(n,r)=>{t.invokeRemoteMouseEvent(a(r)),t.invokeEndInteractionEvent(si),e._interactor.cancelAnimation(t.onButtonDown)},t.handleStartMouseWheel=n=>{e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(oi),t.invokeRemoteWheelEvent({type:"StartMouseWheel",...a(n),spinY:n.spinY})},t.handleMouseWheel=n=>{let r=!0;if(e.wheelThrottleDelay){const i=Date.now();r=e.wheelThrottleDelay<i-e.wheelLastThrottleTime,r&&(e.wheelLastThrottleTime=i)}r&&(t.invokeRemoteWheelEvent({type:"MouseWheel",...a(n),spinY:n.spinY}),t.invokeInteractionEvent(H1))},t.handleEndMouseWheel=()=>{t.invokeRemoteWheelEvent({type:"EndMouseWheel",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(si)},t.handleMouseMove=n=>{const r=Date.now();e.throttleDelay<r-e.lastThrottleTime&&(e.sendMouseMove||e.buttonLeft||e.buttonMiddle||e.buttonRight)&&(e.lastThrottleTime=r,t.invokeRemoteMouseEvent(a(n))),t.invokeInteractionEvent(H1)},t.handleKeyPress=()=>{},t.handleStartPinch=n=>{t.startDolly();const{scale:r}=n;e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(oi),t.invokeRemoteGestureEvent({type:"StartPinch",scale:r,...e.remoteEventAddOn})},t.handlePinch=n=>{const{scale:r}=n;t.invokeRemoteGestureEvent({type:"Pinch",scale:r,...e.remoteEventAddOn})},t.handleEndPinch=()=>{t.endDolly(),t.invokeRemoteGestureEvent({type:"EndPinch",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(si)},t.handleStartRotate=n=>{t.startRotate();const{rotation:r}=n;e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(oi),t.invokeRemoteGestureEvent({type:"StartRotate",rotation:r,...e.remoteEventAddOn})},t.handleRotate=n=>{const{rotation:r}=n;t.invokeRemoteGestureEvent({type:"Rotate",rotation:r,...e.remoteEventAddOn})},t.handleEndRotate=()=>{t.endRotate(),t.invokeRemoteGestureEvent({type:"EndRotate",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(si)},t.handleStartPan=n=>{t.startPan();const{translation:r}=n;e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(oi),t.invokeRemoteGestureEvent({type:"StartPan",translation:r,...e.remoteEventAddOn})},t.handlePan=n=>{const{translation:r}=n;t.invokeRemoteGestureEvent({type:"Pan",translation:r,...e.remoteEventAddOn})},t.handleEndPan=()=>{t.endPan(),t.invokeRemoteGestureEvent({type:"EndPan",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(si)}}const C_={buttonLeft:0,buttonMiddle:0,buttonRight:0,sendMouseMove:!1,throttleDelay:33.3,lastThrottleTime:0,wheelThrottleDelay:0,wheelLastThrottleTime:0};function K1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C_,a),Tc.extend(t,e,a),V.setGet(t,e,["sendMouseMove","remoteEventAddOn","throttleDelay","wheelThrottleDelay"]),V.event(t,e,"RemoteMouseEvent"),V.event(t,e,"RemoteWheelEvent"),V.event(t,e,"RemoteGestureEvent"),x_(t,e)}var S_={newInstance:V.newInstance(K1,"vtkInteractorStyleRemoteMouse"),extend:K1};const Yo=r_.newInstance(),T_=Yo.connect,w_=Yo.disconnect;function __(t,e){e.classHierarchy.push("vtkRemoteView"),e.canvasView=Yw.newInstance({canvas:e.canvasElement}),e.interactorStyle=S_.newInstance(),e.interactor=qo.newInstance(),e.interactor.setView(e.canvasView),e.interactor.initialize(),e.interactor.setInteractorStyle(e.interactorStyle),e.interactorStyle.onRemoteMouseEvent(n=>{e.session&&e.rpcMouseEvent&&e.session.call(e.rpcMouseEvent,[n])}),e.interactorStyle.onRemoteWheelEvent(n=>{e.session&&e.rpcWheelEvent&&e.session.call(e.rpcWheelEvent,[n])}),e.interactorStyle.onRemoteGestureEvent(n=>{e.session&&e.rpcGestureEvent&&e.session.call(e.rpcGestureEvent,[n])}),t.delete=V.chain(()=>{e.session=null,e.canvasView&&(e.canvasView.setViewStream(null),e.canvasView.delete()),e.interactor&&e.interactor.delete(),e.viewStream&&e.viewStream.delete()},t.delete),t.getCanvasElement=()=>e.canvasView.getCanvas(),t.setViewStream=n=>{e.viewStream=n,e.canvasView.setViewStream(e.viewStream),e.viewStream.setStillQuality(e.stillQuality),e.viewStream.setStillRatio(e.stillRatio),e.viewStream.setInteractiveQuality(e.interactiveQuality),e.viewStream.setInteractiveRatio(e.interactiveRatio),e.interactor.onStartAnimation(e.viewStream.startInteraction),e.interactor.onEndAnimation(e.viewStream.endInteraction),t.setViewId(n.getViewId())},t.setViewId=n=>{e.viewStream||t.setViewStream(Yo.createViewStream(n)),e.viewStream.setViewId(n),e.interactorStyle.setRemoteEventAddOn({view:n}),t.modified()},t.setContainer=n=>{e.container&&e.interactor.unbindEvents(n),e.container=n,e.canvasView.setContainer(e.container),n&&(e.interactor.bindEvents(n),t.resize())},t.resize=()=>{if(e.container&&e.canvasView){const{width:n,height:r}=e.container.getBoundingClientRect();e.canvasView.setSize(n,r),t.render()}},t.render=()=>{e.viewStream&&e.viewStream.render()},t.resetCamera=()=>{e.viewStream&&e.viewStream.resetCamera()};const a={modified:t.modified};V.set(a,e,["interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),t.setInteractiveQuality=n=>{const r=a.setInteractiveQuality(n);return e.viewStream&&r&&e.viewStream.setInteractiveQuality(e.interactiveQuality),r},t.setInteractiveRatio=n=>{const r=a.setInteractiveRatio(n);return e.viewStream&&r&&e.viewStream.setInteractiveRatio(e.interactiveRatio),r},t.setStillQuality=n=>{const r=a.setStillQuality(n);return e.viewStream&&r&&e.viewStream.setStillQuality(e.stillQuality),r},t.setStillRatio=n=>{const r=a.setStillRatio(n);return e.viewStream&&r&&e.viewStream.setStillRatio(e.stillRatio),r},e.viewStream&&t.setViewStream(e.viewStream)}const E_={viewId:"-1",interactiveQuality:60,interactiveRatio:1/window.devicePixelRatio,stillQuality:100,stillRatio:1,rpcMouseEvent:"viewport.mouse.interaction",rpcGestureEvent:null,rpcWheelEvent:null,canvasElement:null};function X1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E_,a),V.obj(t,e,a),V.get(t,e,["container","viewStream","canvasView","interactor","interactorStyle","interactiveQuality","interactiveRatio","stillQuality","stillRatio","canvasElement"]),V.setGet(t,e,["session","rpcMouseEvent","rpcGestureEvent","rpcWheelEvent"]),__(t,e)}var D_={newInstance:V.newInstance(X1,"vtkRemoteView"),extend:X1,SHARED_IMAGE_STREAM:Yo,connectImageStream:T_,disconnectImageStream:w_};function O_(t,e){e.classHierarchy.push("vtkCompositeMouseManipulator"),t.startInteraction=()=>{},t.endInteraction=()=>{},t.onButtonDown=(a,n,r)=>{},t.onButtonUp=a=>{},t.onMouseMove=(a,n,r)=>{},t.onStartScroll=(a,n,r)=>{},t.onScroll=(a,n,r)=>{},t.onEndScroll=a=>{},t.isDragEnabled=()=>e.dragEnabled,t.isScrollEnabled=()=>e.scrollEnabled}const b_={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};function M_(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b_,a),V.setGet(t,e,["button","shift","control","alt"]),V.set(t,e,["dragEnabled","scrollEnabled"]),O_(t,e)}var pa={extend:M_};const N_=[-2,-1,-2,-1],R_={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function L_(t,e){Object.keys(e).forEach(a=>{t.style[a]=e[a]})}function F_(t,e){e.classHierarchy.push("vtkMouseBoxSelectionManipulator");let a=null,n=null,r=null,i=null,o=null,s=!1;function c(){return!r||!i?N_:[Math.min(r.x,i.x),Math.max(r.x,i.x),Math.min(r.y,i.y),Math.max(r.y,i.y)]}function l(){if(!a||!n)return;const[p,u]=a.getSize(),{width:f,height:h}=n.getBoundingClientRect(),[d,v,m,x]=c();o.style.left=`${f*d/p}px`,o.style.top=`${h-h*x/u}px`,o.style.width=`${f*(v-d)/p}px`,o.style.height=`${h*(x-m)/u}px`}t.onButtonDown=(p,u,f)=>{r=f,e.renderSelection&&(a||(a=p.getView()),!n&&(a!=null&&a.getContainer)&&(n=a.getContainer()),n||(n=e.container),o||(o=document.createElement("div"),L_(o,e.selectionStyle)),l(),n&&!s&&(s=!0,n.appendChild(o)))},t.onMouseMove=(p,u,f)=>{r&&f&&(i=f,t.invokeBoxSelectInput({view:a,container:n,selection:c()}),e.renderSelection&&l())},t.onButtonUp=(p,u)=>{!r||!i&&!e.boxChangeOnClick||(i||(i=r),t.invokeBoxSelectChange({view:a,container:n,selection:c()}),s&&(o.parentElement.removeChild(o),s=!1),a=null,n=null,r=null,i=null)}}function k_(t){return{boxChangeOnClick:!1,renderSelection:!0,...t,selectionStyle:{...R_,...t.selectionStyle}}}function q1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k_(a)),ut(t,e),pa.extend(t,e,a),Hr(t,e,"BoxSelectChange"),Hr(t,e,"BoxSelectInput"),pt(t,e,["renderSelection","boxChangeOnClick","selectionStyle","container"]),F_(t,e)}var Y1={newInstance:Je(q1,"vtkMouseBoxSelectionManipulator"),extend:q1};const{vtkDebugMacro:wc}=V,{States:V_}=Tc,ci={type:"StartInteractionEvent"},Yn={type:"InteractionEvent"},ui={type:"EndInteractionEvent"};function _c(t,e,a,n,r,i){const o=t.getActiveCamera();let s=o.getFocalPoint();s=e.getInteractorStyle().computeWorldToDisplay(t,s[0],s[1],s[2]);const c=s[2],l=e.getInteractorStyle().computeDisplayToWorld(t,a,n,c),p=e.getInteractorStyle().computeDisplayToWorld(t,r,i,c),u=[p[0]-l[0],p[1]-l[1],p[2]-l[2]];s=o.getFocalPoint();const f=o.getPosition();o.setFocalPoint(u[0]+s[0],u[1]+s[1],u[2]+s[2]),o.setPosition(u[0]+f[0],u[1]+f[1],u[2]+f[2])}function A_(t,e,a,n){const r=a.getActiveCamera();if(r.getParallelProjection()){const i=n.getView(),o=i.getViewportSize(a),s=a.getViewport(),c=i.getSize(),l=o[0],p=o[1],u=l/2,f=p/2,h=e.x-s[0]*c[0],d=e.y-s[1]*c[1];_c(a,n,u,f,h,d),r.setParallelScale(r.getParallelScale()/t),_c(a,n,h,d,u,f)}else{let i=r.getFocalPoint();const o=r.getViewPlaneNormal();i=n.getInteractorStyle().computeWorldToDisplay(a,i[0],i[1],i[2]);const s=n.getInteractorStyle().computeDisplayToWorld(a,e.x,e.y,i[2]);r.setFocalPoint(s[0],s[1],s[2]),r.dolly(t),a.resetCameraClippingRange();const c=r.getPosition();i=r.getFocalPoint();const l=[0,0,0];let p=o[0]*(i[0]-c[0])+o[1]*(i[1]-c[1])+o[2]*(i[2]-c[2]);p/=o[0]**2+o[1]**2+o[2]**2,l[0]=c[0]+o[0]*p,l[1]=c[1]+o[1]*p,l[2]=c[2]+o[2]*p,r.setFocalPoint(l[0],l[1],l[2]),a.resetCameraClippingRange()}}function B_(t,e,a){if(Number.isNaN(a))return;const n=e.getActiveCamera();n.getParallelProjection()?n.setParallelScale(n.getParallelScale()/a):(n.dolly(a),e.resetCameraClippingRange()),t.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}const U_={dollyToPosition:A_,translateCamera:_c,dollyByFactor:B_};function G_(t,e){e.classHierarchy.push("vtkInteractorStyleManipulator"),e.currentVRManipulators=new Map,e.mouseManipulators=[],e.keyboardManipulators=[],e.vrManipulators=[],e.gestureManipulators=[],e.currentManipulator=null,e.currentWheelManipulator=null,e.centerOfRotation=[0,0,0],e.rotationFactor=1,t.removeAllManipulators=()=>{t.removeAllMouseManipulators(),t.removeAllKeyboardManipulators(),t.removeAllVRManipulators(),t.removeAllGestureManipulators()},t.removeAllMouseManipulators=()=>{e.mouseManipulators=[]},t.removeAllKeyboardManipulators=()=>{e.keyboardManipulators=[]},t.removeAllVRManipulators=()=>{e.vrManipulators=[]},t.removeAllGestureManipulators=()=>{e.gestureManipulators=[]};const a=(r,i)=>{const o=i.indexOf(r);return o===-1?!1:(i.splice(o,1),t.modified(),!0)};t.removeMouseManipulator=r=>a(r,e.mouseManipulators),t.removeKeyboardManipulator=r=>a(r,e.keyboardManipulators),t.removeVRManipulator=r=>a(r,e.vrManipulators),t.removeGestureManipulator=r=>a(r,e.gestureManipulators);const n=(r,i)=>i.indexOf(r)!==-1?!1:(i.push(r),t.modified(),!0);t.addMouseManipulator=r=>n(r,e.mouseManipulators),t.addKeyboardManipulator=r=>n(r,e.keyboardManipulators),t.addVRManipulator=r=>n(r,e.vrManipulators),t.addGestureManipulator=r=>n(r,e.gestureManipulators),t.getNumberOfMouseManipulators=()=>e.mouseManipulators.length,t.getNumberOfKeyboardManipulators=()=>e.keyboardManipulators.length,t.getNumberOfVRManipulators=()=>e.vrManipulators.length,t.getNumberOfGestureManipulators=()=>e.gestureManipulators.length,t.resetCurrentManipulator=()=>{e.currentManipulator=null,e.currentWheelManipulator=null},t.handleLeftButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(Fr.LeftButton,r)},t.handleMiddleButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(Fr.MiddleButton,r)},t.handleRightButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(Fr.RightButton,r)},t.handleButton3D=r=>{if(!r)return;const i=t.findVRManipulator(r.device,r.input,r.pressed);i?(e.currentVRManipulators.set(r.device,i),i.onButton3D(t,e.getRenderer(r),e.state,r),r.pressed?t.startCameraPose():(e.currentVRManipulators.delete(r.device),e.currentVRManipulators.size===0&&t.endCameraPose())):wc("No manipulator found")},t.handleMove3D=r=>{const i=e.currentVRManipulators.get(r.device);i&&e.state===V_.IS_CAMERA_POSE&&i.onMove3D(t,e.getRenderer(r),e.state,r)},t.onButtonDown=(r,i)=>{e.currentManipulator||(e.currentManipulator=t.findMouseManipulator(r,i.shiftKey,i.controlKey,i.altKey),e.currentManipulator?(e.currentManipulator.setCenter&&e.currentManipulator.setCenter(e.centerOfRotation),e.currentManipulator.setRotationFactor&&e.currentManipulator.setRotationFactor(e.rotationFactor),e.currentManipulator.startInteraction(),e.currentManipulator.onButtonDown(e._interactor,e.getRenderer(i),i.position),e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(ci)):wc("No manipulator found"))},t.findMouseManipulator=(r,i,o,s)=>{let c=null,l=e.mouseManipulators.length;for(;l--;){const p=e.mouseManipulators[l];p&&p.getButton()===r&&p.getShift()===i&&p.getControl()===o&&p.getAlt()===s&&p.isDragEnabled()&&(c=p)}return c},t.findVRManipulator=(r,i)=>{let o=null,s=e.vrManipulators.length;for(;s--;){const c=e.vrManipulators[s];c&&c.getDevice()===r&&c.getInput()===i&&(o=c)}return o},t.handleLeftButtonRelease=()=>{t.onButtonUp(Fr.LeftButton)},t.handleMiddleButtonRelease=()=>{t.onButtonUp(Fr.MiddleButton)},t.handleRightButtonRelease=()=>{t.onButtonUp(Fr.RightButton)},t.onButtonUp=r=>{e.currentManipulator&&e.currentManipulator.getButton&&e.currentManipulator.getButton()===r&&(e.currentManipulator.onButtonUp(e._interactor),e.currentManipulator.endInteraction(),e._interactor.isPointerLocked()||(e.currentManipulator=null),e._interactor.cancelAnimation(t.onButtonDown),t.invokeEndInteractionEvent(ui))},t.handleEndPointerLock=()=>{e.currentManipulator=null},t.handleStartMouseWheel=r=>{if(e.currentWheelManipulator)return;let i=null,o=e.mouseManipulators.length;for(;o--;){const s=e.mouseManipulators[o];s&&s.isScrollEnabled()&&s.getShift()===r.shiftKey&&s.getControl()===r.controlKey&&s.getAlt()===r.altKey&&(i=s)}i?(e.currentWheelManipulator=i,e.currentWheelManipulator.onStartScroll(e._interactor,e.getRenderer(r),r.spinY),e.currentWheelManipulator.startInteraction(),e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(ci)):wc("No manipulator found")},t.handleEndMouseWheel=()=>{e.currentWheelManipulator&&e.currentWheelManipulator.onEndScroll&&(e.currentWheelManipulator.onEndScroll(e._interactor),e.currentWheelManipulator.endInteraction(),e.currentWheelManipulator=null,e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(ui))},t.handleMouseWheel=r=>{e.currentWheelManipulator&&e.currentWheelManipulator.onScroll&&(e.currentWheelManipulator.onScroll(e._interactor,e.getRenderer(r),r.spinY,e.cachedMousePosition),t.invokeInteractionEvent(Yn))},t.handleMouseMove=r=>{e.cachedMousePosition=r.position,e.currentManipulator&&e.currentManipulator.onMouseMove&&(e.currentManipulator.onMouseMove(e._interactor,e.getRenderer(r),r.position),t.invokeInteractionEvent(Yn))},t.handleKeyPress=r=>{e.keyboardManipulators.filter(i=>i.onKeyPress).forEach(i=>{i.onKeyPress(e._interactor,e.getRenderer(r),r.key),t.invokeInteractionEvent(Yn)})},t.handleKeyDown=r=>{e.keyboardManipulators.filter(i=>i.onKeyDown).forEach(i=>{i.onKeyDown(e._interactor,e.getRenderer(r),r.key),t.invokeInteractionEvent(Yn)})},t.handleKeyUp=r=>{e.keyboardManipulators.filter(i=>i.onKeyUp).forEach(i=>{i.onKeyUp(e._interactor,e.getRenderer(r),r.key),t.invokeInteractionEvent(Yn)})},t.handleStartPinch=r=>{t.startDolly();let i=e.gestureManipulators.length;for(;i--;){const o=e.gestureManipulators[i];o&&o.isPinchEnabled()&&(o.onStartPinch(e._interactor,r.scale),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(ci)},t.handleEndPinch=()=>{t.endDolly();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isPinchEnabled()&&(i.onEndPinch(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(ui)},t.handleStartRotate=r=>{t.startRotate();let i=e.gestureManipulators.length;for(;i--;){const o=e.gestureManipulators[i];o&&o.isRotateEnabled()&&(o.onStartRotate(e._interactor,r.rotation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(ci)},t.handleEndRotate=()=>{t.endRotate();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isRotateEnabled()&&(i.onEndRotate(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(ui)},t.handleStartPan=r=>{t.startPan();let i=e.gestureManipulators.length;for(;i--;){const o=e.gestureManipulators[i];o&&o.isPanEnabled()&&(o.onStartPan(e._interactor,r.translation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(ci)},t.handleEndPan=()=>{t.endPan();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isPanEnabled()&&(i.onEndPan(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(ui)},t.handlePinch=r=>{let i=e.gestureManipulators.length,o=0;for(;i--;){const s=e.gestureManipulators[i];s&&s.isPinchEnabled()&&(s.onPinch(e._interactor,e.getRenderer(r),r.scale),o++)}o&&t.invokeInteractionEvent(Yn)},t.handlePan=r=>{const i=e.getRenderer(r);let o=e.gestureManipulators.length,s=0;for(;o--;){const c=e.gestureManipulators[o];c&&c.isPanEnabled()&&(c.onPan(e._interactor,i,r.translation),s++)}s&&t.invokeInteractionEvent(Yn)},t.handleRotate=r=>{let i=e.gestureManipulators.length,o=0;for(;i--;){const s=e.gestureManipulators[i];s&&s.isRotateEnabled()&&(s.onRotate(e._interactor,e.getRenderer(r),r.rotation),o++)}o&&t.invokeInteractionEvent(Yn)}}const I_=t=>({cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1,...t});function J1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I_(a)),Tc.extend(t,e,a),V.setGet(t,e,["rotationFactor"]),V.get(t,e,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),V.setGetArray(t,e,["centerOfRotation"],3),G_(t,e)}var Vr={newInstance:V.newInstance(J1,"vtkInteractorStyleManipulator"),extend:J1,...U_};const Z1={props:{viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},enablePicking:{type:Boolean,default:!1},interactorEvents:{type:Array,default:()=>["EndAnimation"]},boxSelection:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},pickingModes:{type:Array,default:()=>[]}},emits:["onImageCapture","BoxSelection","select","hover","click","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const a=se.ref(!1),n=se.ref(null),r=se.inject("trame"),i=t.wsClient||(r==null?void 0:r.client);let o=null;if(!i)throw new Error("VtkRemoteView can not be created without a wsClient");const s=i.getImageStream().createViewStream(t.viewId);s.get("protocol").protocol.setQuality(t.viewId,5,.1);const c=D_.newInstance({rpcWheelEvent:"viewport.mouse.zoom.wheel",viewStream:s});t.interactiveRatio&&c.setInteractiveRatio(Number(t.interactiveRatio)),t.interactiveQuality&&c.setInteractiveQuality(Number(t.interactiveQuality)),t.stillRatio&&c.setStillRatio(Number(t.stillRatio)),t.stillQuality&&c.setStillQuality(Number(t.stillQuality));const l=c.render,p=c.resetCamera,u=c.setInteractiveQuality,f=c.setInteractiveRatio,h=c.setStillQuality,d=c.setStillRatio,v=c.getInteractiveQuality,m=c.getInteractiveRatio,x=c.getStillQuality,y=c.getStillRatio,g=c.getInteractor(),C=[];t.interactorEvents.forEach(M=>{const N=`on${M}`;C.push(g[N](R=>e(M,R)))});const S=Vr.newInstance({enabled:t.boxSelection}),T=Y1.newInstance({button:1});S.addMouseManipulator(T),C.push(T.onBoxSelectChange(({container:M,selection:N})=>{if(M){const{width:R,height:B}=M.getBoundingClientRect(),I={selection:N,size:[R,B],mode:"remote"};e("BoxSelection",I),t.pickingModes.includes("select")&&e("select",{...I,action:"select"})}})),S.setInteractor(g);function w(){const M=c.getCanvasView(),[N,R]=M.getSize();M.setSize(N+2,R+2),se.nextTick(c.resize)}const _=async()=>{const M=c.getCanvasView().get("bgImage").bgImage.src,R=await(await fetch(M)).blob();return e("onImageCapture",R),R};se.onMounted(async()=>{const M=se.unref(n);c.getCanvasView().setUseBackgroundImage(0),c.setContainer(M),T.setContainer(M),T.setBoxChangeOnClick(t.enablePicking);const N=i.getConnection().getSession();c.setSession(N),c.setViewId(t.viewId),await se.nextTick();const{width:R,height:B}=M.getBoundingClientRect(),I=R<10||B<10?10:0;c.getCanvasView().setSize(Math.round(R+I),Math.round(B+I)),await new Promise(P=>{const L=s.onImageReady(({image:k,metadata:A})=>{const[j,H]=A.size;if(j!==k.width||H!==k.height){s.render();return}const K=s.getStillRatio()*Math.round(I+R),Y=s.getStillRatio()*Math.round(I+B);j===K&&H===Y?(L.unsubscribe(),c.getCanvasView().setBackgroundImage(k),P()):s.render()});s.endInteraction()}),c.getCanvasView().setUseBackgroundImage(1),a.value=!0,window.ResizeObserver?(o=new ResizeObserver(c.resize),o.observe(M)):window.addEventListener("resize",c.resize)}),se.onBeforeUnmount(()=>{for(o?(o.disconnect(),o=null):window.removeEventListener("resize",c.resize);C.length;)C.pop().unsubscribe();S.setEnabled(!1),S.delete(),T.delete(),c.delete()}),se.watch(()=>t.viewId,M=>{a.value&&(c.setViewId(se.unref(M)),c.resize())}),se.watch(()=>t.visible,M=>{se.unref(M)&&w()}),se.watch(()=>t.enablePicking,M=>{c.getInteractorStyle().setSendMouseMove(M),T.setBoxChangeOnClick(M)}),se.watch(()=>t.interactiveRatio,M=>{c.setInteractiveRatio(M)}),se.watch(()=>t.interactiveQuality,M=>{c.setInteractiveQuality(M)}),se.watch(()=>t.stillRatio,M=>{c.setStillRatio(M)}),se.watch(()=>t.stillQuality,M=>{c.setStillQuality(M)}),se.watch(()=>[t.pickingModes.includes("select"),t.boxSelection],([M,N])=>{S.setEnabled(M||N),c.getInteractorStyle().setEnabled(!M||t.enablePicking)});function E(M){const N=n.value;if(!N)return;const R=N.getBoundingClientRect(),[B,I]=c.getCanvasView().getSize(),P=B/R.width,L=I/R.height;return{position:{x:P*(M.clientX-R.left),y:L*(R.height-M.clientY+R.top),z:0},size:[B,I],scale:[P,L]}}function D(M){t.pickingModes.includes("click")&&e("click",{mode:"remote",action:"click",...E(M)})}function O(M){t.pickingModes.includes("hover")&&e("hover",{mode:"remote",action:"hover",...E(M)})}return{connected:a,vtkContainer:n,onClick:D,onMouseMove:O,render:l,resetCamera:p,resize:w,setInteractiveQuality:u,setInteractiveRatio:f,setStillQuality:h,setStillRatio:d,getInteractiveQuality:v,getInteractiveRatio:m,getStillQuality:x,getStillRatio:y,captureImage:_}},template:`
    <div style="position:relative;width:100%;height:100%;z-index:0;" @click="onClick" @mousemove="onMouseMove">
      <div ref="vtkContainer" style="position:absolute;width:100%;height:100%;overflow:hidden;" />
      <slot style="display: none;"></slot>
    </div>
  `},P_="WebGL",Jo=Object.create(null);function Q1(t,e){Jo[t]=e}function z_(){return Object.keys(Jo)}function eg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jo[t]&&Jo[t](e)}function j_(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=a=>{t.hasRenderer(a)||(a.setRenderWindow(t),e.renderers.push(a),t.modified())},t.removeRenderer=a=>{e.renderers=e.renderers.filter(n=>n!==a),t.modified()},t.hasRenderer=a=>e.renderers.indexOf(a)!==-1,t.newAPISpecificView=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return eg(a||e.defaultViewAPI,n)},t.addView=a=>{t.hasView(a)||(a.setRenderable(t),e._views.push(a),t.modified())},t.removeView=a=>{e._views=e._views.filter(n=>n!==a),t.modified()},t.hasView=a=>e._views.indexOf(a)!==-1,t.preRender=()=>{e.renderers.forEach(a=>{a.isActiveCameraCreated()||a.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(a=>a.traverseAllPasses())},t.getStatistics=()=>{const a={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(n=>{n.getGraphicsMemoryInfo&&(a.gpuMemoryMB+=n.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(n=>{const r=n.getViewProps(),i=e._views[0].getViewNodeFor(n);r.forEach(o=>{if(o.getVisibility()){a.propCount+=1;const s=o.getMapper&&o.getMapper();if(s&&s.getPrimitiveCount){const c=i.getViewNodeFor(s);if(c){c.getAllocatedGPUMemoryInBytes&&(a.gpuMemoryMB+=c.getAllocatedGPUMemoryInBytes()/1e6);const l=s.getPrimitiveCount();Object.keys(l).forEach(p=>{a[p]||(a[p]=0),a[p]+=l[p]})}}}else a.invisiblePropCount+=1})}),a.str=Object.keys(a).map(n=>`${n}: ${a[n]}`).join(`
`),a},t.captureImages=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return V.setImmediate(t.render),e._views.map(r=>r.captureNextImage?r.captureNextImage(a,n):void 0).filter(r=>!!r)},t.addRenderWindow=a=>e.childRenderWindows.includes(a)?!1:(e.childRenderWindows.push(a),t.modified(),!0),t.removeRenderWindow=a=>{const n=e.childRenderWindows.findIndex(r=>r===a);return n<0?!1:(e.childRenderWindows.splice(n,1),t.modified(),!0)}}const W_={defaultViewAPI:P_,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function tg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W_,a),V.obj(t,e),V.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),V.get(t,e,["neverRendered"]),V.getArray(t,e,["renderers","childRenderWindows"]),V.moveToProtected(t,e,["views"]),V.event(t,e,"completion"),j_(t,e)}var Ec={newInstance:V.newInstance(tg,"vtkRenderWindow"),extend:tg,registerViewConstructor:Q1,listViewAPIs:z_,newAPISpecificView:eg};const{vtkDebugMacro:Zo}=V;function $_(t,e){e.classHierarchy.push("vtkCamera");const a=new Float64Array(3),n=new Float64Array([0,0,-1]),r=new Float64Array([0,1,0]),i=Te(new Float64Array(16)),o=Te(new Float64Array(16)),s=new Float64Array(3),c=new Float64Array(3),l=new Float64Array(3),p=Te(new Float64Array(16)),u=Te(new Float64Array(16)),f=new Float64Array(3),h=new Float64Array(3);function d(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const v=t.getViewMatrix();e.viewUp[0]=v[4],e.viewUp[1]=v[5],e.viewUp[2]=v[6],t.modified()},t.setPosition=(v,m,x)=>{v===e.position[0]&&m===e.position[1]&&x===e.position[2]||(e.position[0]=v,e.position[1]=m,e.position[2]=x,t.computeDistance(),t.modified())},t.setFocalPoint=(v,m,x)=>{v===e.focalPoint[0]&&m===e.focalPoint[1]&&x===e.focalPoint[2]||(e.focalPoint[0]=v,e.focalPoint[1]=m,e.focalPoint[2]=x,t.computeDistance(),t.modified())},t.setDistance=v=>{if(e.distance===v)return;e.distance=v,e.distance<1e-20&&(e.distance=1e-20,Zo("Distance is set to minimum."));const m=e.directionOfProjection;e.focalPoint[0]=e.position[0]+m[0]*e.distance,e.focalPoint[1]=e.position[1]+m[1]*e.distance,e.focalPoint[2]=e.position[2]+m[2]*e.distance,t.modified()},t.computeDistance=()=>{const v=e.focalPoint[0]-e.position[0],m=e.focalPoint[1]-e.position[1],x=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(v*v+m*m+x*x),e.distance<1e-20){e.distance=1e-20,Zo("Distance is set to minimum.");const y=e.directionOfProjection;e.focalPoint[0]=e.position[0]+y[0]*e.distance,e.focalPoint[1]=e.position[1]+y[1]*e.distance,e.focalPoint[2]=e.position[2]+y[2]*e.distance}e.directionOfProjection[0]=v/e.distance,e.directionOfProjection[1]=m/e.distance,e.directionOfProjection[2]=x/e.distance,d()},t.dolly=v=>{if(v<=0)return;const m=e.distance/v;t.setPosition(e.focalPoint[0]-m*e.directionOfProjection[0],e.focalPoint[1]-m*e.directionOfProjection[1],e.focalPoint[2]-m*e.directionOfProjection[2])},t.roll=v=>{const m=e.position,x=e.focalPoint,y=e.viewUp,g=new Float64Array([y[0],y[1],y[2],0]);Te(p);const C=new Float64Array([x[0]-m[0],x[1]-m[1],x[2]-m[2]]);mt(p,p,Qe(v),C),er(g,g,p),e.viewUp[0]=g[0],e.viewUp[1]=g[1],e.viewUp[2]=g[2],t.modified()},t.azimuth=v=>{const m=e.focalPoint;Te(u),Ye(u,u,m),mt(u,u,Qe(v),e.viewUp),Ye(u,u,[-m[0],-m[1],-m[2]]),_e(f,e.position,u),t.setPosition(f[0],f[1],f[2])},t.yaw=v=>{const m=e.position;Te(u),Ye(u,u,m),mt(u,u,Qe(v),e.viewUp),Ye(u,u,[-m[0],-m[1],-m[2]]),_e(h,e.focalPoint,u),t.setFocalPoint(h[0],h[1],h[2])},t.elevation=v=>{const m=e.focalPoint,x=t.getViewMatrix(),y=[-x[0],-x[1],-x[2]];Te(u),Ye(u,u,m),mt(u,u,Qe(v),y),Ye(u,u,[-m[0],-m[1],-m[2]]),_e(f,e.position,u),t.setPosition(f[0],f[1],f[2])},t.pitch=v=>{const m=e.position,x=t.getViewMatrix(),y=[x[0],x[1],x[2]];Te(u),Ye(u,u,m),mt(u,u,Qe(v),y),Ye(u,u,[-m[0],-m[1],-m[2]]),_e(h,e.focalPoint,u),t.setFocalPoint(...h)},t.zoom=v=>{v<=0||(e.parallelProjection?e.parallelScale/=v:e.viewAngle/=v,t.modified())},t.translate=(v,m,x)=>{const y=[v,m,x];ur(e.position,y,e.position),ur(e.focalPoint,y,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=v=>{const m=[...e.viewUp,1],x=[],y=[],g=[];m[0]+=e.position[0],m[1]+=e.position[1],m[2]+=e.position[2],er(x,[...e.position,1],v),er(y,[...e.focalPoint,1],v),er(g,m,v),g[0]-=x[0],g[1]-=x[1],g[2]-=x[2],t.setPosition(...x.slice(0,3)),t.setFocalPoint(...y.slice(0,3)),t.setViewUp(...g.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=v=>{let m=v;m<1e-20&&(m=1e-20,Zo("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+m)},t.setThicknessFromFocalPoint=v=>{let m=v;m<1e-20&&(m=1e-20,Zo("Thickness is set to minimum.")),t.setClippingRange(e.distance-m/2,e.distance+m/2)},t.setRoll=v=>{},t.getRoll=()=>{},t.setObliqueAngles=(v,m)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Float64Array(24);const x=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],y=t.getCompositeProjectionMatrix(v,-1,1);for(let g=0;g<6;g++)er(x[g],x[g],y),$y(x[g]),m[4*g+0]=x[g][0],m[4*g+1]=x[g][1],m[4*g+2]=x[g][2],m[4*g+3]=x[g][3];return m},t.getCameraLightTransformMatrix=v=>(gt(v,e.cameraLightTransform),v),t.computeCameraLightTransform=()=>{gt(i,t.getViewMatrix()),Et(i,i),yi(o,[e.distance,e.distance,e.distance]),Ee(i,i,o),Te(e.cameraLightTransform),Ye(e.cameraLightTransform,i,[0,0,-1])},t.deepCopy=v=>{},t.physicalOrientationToWorldDirection=v=>{const m=fu(v[0],v[1],v[2],v[3]),x=Bn(),y=fu(0,0,1,0);return ps(x,m),Oi(y,m,y),Oi(y,y,x),[y[0],y[1],y[2]]},t.getPhysicalToWorldMatrix=v=>{t.getWorldToPhysicalMatrix(v),Et(v,v)},t.getWorldToPhysicalMatrix=v=>{Te(v);const m=[3];et(e.physicalViewNorth,e.physicalViewUp,m),v[0]=m[0],v[1]=m[1],v[2]=m[2],v[4]=e.physicalViewUp[0],v[5]=e.physicalViewUp[1],v[6]=e.physicalViewUp[2],v[8]=-e.physicalViewNorth[0],v[9]=-e.physicalViewNorth[1],v[10]=-e.physicalViewNorth[2],We(v,v),on(s,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),An(v,v,s),Ye(v,v,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=v=>{Et(i,v),_e(s,a,i),t.computeDistance();const m=e.distance;t.setPosition(s[0],s[1],s[2]),_e(c,n,i),sn(c,c,s),cn(c,c),t.setDirectionOfProjection(c[0],c[1],c[2]),_e(l,r,i),sn(l,l,s),cn(l,l),t.setViewUp(l[0],l[1],l[2]),t.setDistance(m)},t.computeViewParametersFromPhysicalMatrix=v=>{t.getWorldToPhysicalMatrix(i),Ee(i,v,i),t.computeViewParametersFromViewMatrix(i)},t.setModelTransformMatrix=v=>{e.modelTransformMatrix=v},t.getModelTransformMatrix=()=>e.modelTransformMatrix,t.setViewMatrix=v=>{e.viewMatrix=v,e.viewMatrix&&(gt(i,e.viewMatrix),t.computeViewParametersFromViewMatrix(i),We(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.modelTransformMatrix?(Ee(i,e.viewMatrix,e.modelTransformMatrix),i):e.viewMatrix;nu(i,e.position,e.focalPoint,e.viewUp),We(i,i);const v=new Float64Array(16);return e.modelTransformMatrix?Ee(v,i,e.modelTransformMatrix):gt(v,i),v},t.setProjectionMatrix=v=>{e.projectionMatrix=v},t.getProjectionMatrix=(v,m,x)=>{const y=new Float64Array(16);if(Te(y),e.projectionMatrix){const S=1/e.physicalScale;return on(s,S,S,S),gt(y,e.projectionMatrix),An(y,y,s),We(y,y),y}Te(i);const g=e.clippingRange[1]-e.clippingRange[0],C=[e.clippingRange[0]+(m+1)*g/2,e.clippingRange[0]+(x+1)*g/2];if(e.parallelProjection){const S=e.parallelScale*v,T=e.parallelScale,w=(e.windowCenter[0]-1)*S,_=(e.windowCenter[0]+1)*S,E=(e.windowCenter[1]-1)*T,D=(e.windowCenter[1]+1)*T;tu(i,w,_,E,D,C[0],C[1]),We(i,i)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const S=Math.tan(Qe(e.viewAngle)/2);let T,w;e.useHorizontalViewAngle===!0?(T=e.clippingRange[0]*S,w=e.clippingRange[0]*S/v):(T=e.clippingRange[0]*S*v,w=e.clippingRange[0]*S);const _=(e.windowCenter[0]-1)*T,E=(e.windowCenter[0]+1)*T,D=(e.windowCenter[1]-1)*w,O=(e.windowCenter[1]+1)*w,M=C[0],N=C[1];i[0]=2*M/(E-_),i[5]=2*M/(O-D),i[2]=(_+E)/(E-_),i[6]=(D+O)/(O-D),i[10]=-(M+N)/(N-M),i[14]=-1,i[11]=-2*M*N/(N-M),i[15]=0}}return gt(y,i),y},t.getCompositeProjectionMatrix=(v,m,x)=>{const y=t.getViewMatrix(),g=t.getProjectionMatrix(v,m,x);return Ee(g,y,g),g},t.setDirectionOfProjection=(v,m,x)=>{if(e.directionOfProjection[0]===v&&e.directionOfProjection[1]===m&&e.directionOfProjection[2]===x)return;e.directionOfProjection[0]=v,e.directionOfProjection[1]=m,e.directionOfProjection[2]=x;const y=e.directionOfProjection;e.focalPoint[0]=e.position[0]+y[0]*e.distance,e.focalPoint[1]=e.position[1]+y[1]*e.distance,e.focalPoint[2]=e.position[2]+y[2]*e.distance,d()},t.setDeviceAngles=(v,m,x,y)=>{const g=[3];et(e.physicalViewNorth,e.physicalViewUp,g);const C=Te(new Float64Array(16));mt(C,C,Qe(v),e.physicalViewUp),mt(C,C,Qe(m),g),mt(C,C,Qe(x),e.physicalViewNorth),mt(C,C,Qe(-y),e.physicalViewUp);const S=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),T=new Float64Array(e.physicalViewNorth);_e(S,S,C),_e(T,T,C),t.setDirectionOfProjection(S[0],S[1],S[2]),t.setViewUp(T[0],T[1],T[2]),t.modified()},t.setOrientationWXYZ=(v,m,x,y)=>{const g=Te(new Float64Array(16));if(v!==0&&(m!==0||x!==0||y!==0)){const T=Qe(v),w=Bn();Di(w,[m,x,y],T),Gr(g,w)}const C=new Float64Array(3);_e(C,[0,0,-1],g);const S=new Float64Array(3);_e(S,[0,1,0],g),t.setDirectionOfProjection(...C),t.setViewUp(...S),t.modified()},t.computeClippingRange=v=>{let m=null,x=null;m=e.viewPlaneNormal,x=e.position;const y=-m[0],g=-m[1],C=-m[2],S=-(y*x[0]+g*x[1]+C*x[2]),T=[y*v[0]+g*v[2]+C*v[4]+S,1e-18];for(let w=0;w<2;w++)for(let _=0;_<2;_++)for(let E=0;E<2;E++){const D=y*v[E]+g*v[2+_]+C*v[4+w]+S;T[0]=D<T[0]?D:T[0],T[1]=D>T[1]?D:T[1]}return T}}const H_={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:Ur(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function ng(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,H_,a),V.obj(t,e),V.get(t,e,["distance"]),V.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),V.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),V.setGetArray(t,e,["clippingRange","windowCenter"],2),V.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),$_(t,e)}var Dc={newInstance:V.newInstance(ng,"vtkCamera"),extend:ng};const K_=["HeadLight","CameraLight","SceneLight"];function X_(t,e){e.classHierarchy.push("vtkLight");const a=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?_e(a,e.position,e.transformMatrix):on(a,e.position[0],e.position[1],e.position[2]),a),t.getTransformedFocalPoint=()=>(e.transformMatrix?_e(a,e.focalPoint,e.transformMatrix):on(a,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),a),t.getDirection=()=>(e.directionMTime<e.mtime&&(uu(e.direction,e.focalPoint,e.position),Ke(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=n=>{const r=new Float64Array(3);uu(r,e.position,n),e.focalPoint=r},t.setDirectionAngle=(n,r)=>{const i=Qe(n),o=Qe(r);t.setPosition(Math.cos(i)*Math.sin(o),Math.sin(i),Math.cos(i)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const q_={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function rg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q_,a),V.obj(t,e),V.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),V.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),X_(t,e)}var ag={newInstance:V.newInstance(rg,"vtkLight"),extend:rg,LIGHT_TYPES:K_};const{vtkErrorMacro:Qo}=V;function Y_(t){return()=>Qo(`vtkViewport::${t} - NOT IMPLEMENTED`)}function J_(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=n=>e.props.includes(n),t.addViewProp=n=>{n&&!t.hasViewProp(n)&&e.props.push(n)},t.removeViewProp=n=>{const r=e.props.filter(i=>i!==n);e.props.length!==r.length&&(e.props=r)},t.removeAllViewProps=()=>{e.props=[]};function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.push(n);const i=n.getNestedProps();if(i&&i.length)for(let o=0;o<i.length;o++)a(i[o],r);return r}t.getViewPropsWithNestedProps=()=>{let n=[];e.actors2D=[];for(let r=0;r<e.props.length;r++){const i=e.props[r].getActors2D();i&&(!Array.isArray(i)||i.length>0)?e.actors2D=e.actors2D.concat(i):a(e.props[r],n)}return e.actors2D.sort((r,i)=>r.getLayerNumber()-i.getLayerNumber()),n=n.concat(e.actors2D),n},t.addActor2D=t.addViewProp,t.removeActor2D=n=>{t.removeViewProp(n)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(n=>{e.actors2D=e.actors2D.concat(n.getActors2D())}),e.actors2D),t.displayToView=()=>Qo("call displayToView on your view instead"),t.viewToDisplay=()=>Qo("callviewtodisplay on your view instead"),t.getSize=()=>Qo("call getSize on your View instead"),t.normalizedDisplayToProjection=(n,r,i)=>{const o=t.normalizedDisplayToNormalizedViewport(n,r,i);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=(n,r,i)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(n-e.viewport[0])/o[0],(r-e.viewport[1])/o[1],i]},t.normalizedViewportToProjection=(n,r,i)=>[n*2-1,r*2-1,i*2-1],t.projectionToNormalizedDisplay=(n,r,i)=>{const o=t.projectionToNormalizedViewport(n,r,i);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=(n,r,i)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[n*o[0]+e.viewport[0],r*o[1]+e.viewport[1],i]},t.projectionToNormalizedViewport=(n,r,i)=>[(n+1)*.5,(r+1)*.5,(i+1)*.5],t.PickPropFrom=Y_("PickPropFrom")}const Z_={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function ig(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z_,a),V.obj(t,e),V.event(t,e,"event"),V.setGetArray(t,e,["viewport"],4),V.setGetArray(t,e,["background","background2"],3),J_(t,e)}var Q_={newInstance:V.newInstance(ig,"vtkViewport"),extend:ig};const{vtkDebugMacro:li,vtkErrorMacro:Jn,vtkWarningMacro:eE}=Dt;function og(t){return()=>Jn(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function tE(t,e){e.classHierarchy.push("vtkRenderer");const a={type:"ComputeVisiblePropBoundsEvent",renderer:t},n={type:"ResetCameraClippingRangeEvent",renderer:t},r={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(li("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const i=t.getActiveCameraAndResetIfCreated();e.lights.forEach(o=>{o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(i.getPositionByReference()),o.setFocalPointFrom(i.getFocalPointByReference()),o.modified(i.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(i.getCameraLightTransformMatrix(Ur())):Jn("light has unknown light type",o.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=og("allocateTime"),t.updateGeometry=og("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=i=>{li(t.getClassName(),t,"setting Layer to ",i),e.layer!==i&&(e.layer=i,t.modified()),t.setPreserveColorBuffer(!!i)},t.setActiveCamera=i=>e.activeCamera===i?!1:(e.activeCamera=i,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:i}),!0),t.makeCamera=()=>{const i=Dc.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:i}),i},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(i=>{e.actors=e.actors.concat(i.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=i=>{e.actors=e.actors.filter(o=>o!==i),t.removeViewProp(i),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(o=>{t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(i=>{e.volumes=e.volumes.concat(i.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=i=>{e.volumes=e.volumes.filter(o=>o!==i),t.removeViewProp(i),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(o=>{t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=i=>e.lights.includes(i),t.addLight=i=>{i&&!t.hasLight(i)&&(e.lights.push(i),t.modified())},t.removeLight=i=>{e.lights=e.lights.filter(o=>o!==i),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=i=>{e.lights=i,t.modified()},t.makeLight=ag.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(i,o,s,c)=>{let l=t.normalizedDisplayToProjection(i,o,s);return l=t.projectionToView(l[0],l[1],l[2],c),t.viewToWorld(l[0],l[1],l[2])},t.worldToNormalizedDisplay=(i,o,s,c)=>{let l=t.worldToView(i,o,s);return l=t.viewToProjection(l[0],l[1],l[2],c),t.projectionToNormalizedDisplay(l[0],l[1],l[2])},t.viewToWorld=(i,o,s)=>{if(e.activeCamera===null)return Jn("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();Et(c,c),We(c,c);const l=new Float64Array([i,o,s]);return _e(l,l,c),l},t.projectionToView=(i,o,s,c)=>{if(e.activeCamera===null)return Jn("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(c,-1,1);Et(l,l),We(l,l);const p=new Float64Array([i,o,s]);return _e(p,p,l),p},t.worldToView=(i,o,s)=>{if(e.activeCamera===null)return Jn("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();We(c,c);const l=new Float64Array([i,o,s]);return _e(l,l,c),l},t.viewToProjection=(i,o,s,c)=>{if(e.activeCamera===null)return Jn("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(c,-1,1);We(l,l);const p=new Float64Array([i,o,s]);return _e(p,p,l),p},t.computeVisiblePropBounds=()=>{e.allBounds[0]=we.INIT_BOUNDS[0],e.allBounds[1]=we.INIT_BOUNDS[1],e.allBounds[2]=we.INIT_BOUNDS[2],e.allBounds[3]=we.INIT_BOUNDS[3],e.allBounds[4]=we.INIT_BOUNDS[4],e.allBounds[5]=we.INIT_BOUNDS[5];let i=!0;t.invokeEvent(a);for(let o=0;o<e.props.length;++o){const s=e.props[o];if(s.getVisibility()&&s.getUseBounds()){const c=s.getBounds();c&&eo(c)&&(i=!1,c[0]<e.allBounds[0]&&(e.allBounds[0]=c[0]),c[1]>e.allBounds[1]&&(e.allBounds[1]=c[1]),c[2]<e.allBounds[2]&&(e.allBounds[2]=c[2]),c[3]>e.allBounds[3]&&(e.allBounds[3]=c[3]),c[4]<e.allBounds[4]&&(e.allBounds[4]=c[4]),c[5]>e.allBounds[5]&&(e.allBounds[5]=c[5]))}}return i&&(o0(e.allBounds),li("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),s=[0,0,0];if(!eo(o))return li("Cannot reset camera!"),!1;let c=null;if(t.getActiveCamera())c=e.activeCamera.getViewPlaneNormal();else return Jn("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),s[0]=(o[0]+o[1])/2,s[1]=(o[2]+o[3])/2,s[2]=(o[4]+o[5])/2;let l=o[1]-o[0],p=o[3]-o[2],u=o[5]-o[4];l*=l,p*=p,u*=u;let f=l+p+u;f=f===0?1:f,f=Math.sqrt(f)*.5;const h=Qe(e.activeCamera.getViewAngle()),d=f,v=f/Math.sin(h*.5),m=e.activeCamera.getViewUp();return Math.abs(xe(m,c))>.999&&(eE("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-m[2],m[0],m[1])),e.activeCamera.setFocalPoint(s[0],s[1],s[2]),e.activeCamera.setPosition(s[0]+v*c[0],s[1]+v*c[1],s[2]+v*c[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(d),e.activeCamera.setPhysicalScale(f),e.activeCamera.setPhysicalTranslation(-s[0],-s[1],-s[2]),t.invokeEvent(r),!0},t.resetCameraClippingRange=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!eo(o))return li("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Jn("Trying to reset clipping range of non-existent camera"),!1;const s=e.activeCamera.computeClippingRange(o);let c=0;if(e.activeCamera.getParallelProjection())c=.2*e.activeCamera.getParallelScale();else{const l=Qe(e.activeCamera.getViewAngle());c=.2*Math.tan(l/2)*s[1]}return s[1]-s[0]<c&&(c=c-s[1]+s[0],s[1]+=c/2,s[0]-=c/2),s[0]<0&&(s[0]=0),s[0]=.99*s[0]-(s[1]-s[0])*e.clippingRangeExpansion,s[1]=1.01*s[1]+(s[1]-s[0])*e.clippingRangeExpansion,s[0]=s[0]>=s[1]?.01*s[1]:s[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),s[0]<e.nearClippingPlaneTolerance*s[1]&&(s[0]=e.nearClippingPlaneTolerance*s[1]),e.activeCamera.setClippingRange(s[0],s[1]),t.invokeEvent(n),!1},t.setRenderWindow=i=>{i!==e._renderWindow&&(e._vtkWindow=i,e._renderWindow=i)},t.visibleActorCount=()=>e.props.filter(i=>i.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let i=e.mtime;const o=e.activeCamera?e.activeCamera.getMTime():0;o>i&&(i=o);const s=e._createdLight?e._createdLight.getMTime():0;return s>i&&(i=s),i},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const nE={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:In(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function sg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,nE,a),Q_.extend(t,e,a),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),At(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),pt(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Sa(t,e,["actors","volumes","lights"]),Bi(t,e,["background"],4,1),Ta(t,e,["renderWindow"]),tE(t,e)}var cg={newInstance:Je(sg,"vtkRenderer"),extend:sg};const{vtkErrorMacro:es}=V;function rE(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=()=>e.nodes.length,t.getType=()=>{let a,n=0,r=0;e.nodes.length>0&&(n=e.nodes[0].y);for(let i=1;i<e.nodes.length;i++){if(a=e.nodes[i].y,a!==n)if(a>n)switch(r){case 0:case 1:r=1;break;case 2:default:r=3;break}else switch(r){case 0:case 2:r=2;break;case 1:default:r=3;break}if(n=a,r===3)break}switch(r){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=()=>{const a=e.nodes.length;if(e.function=null,a>0){e.function=[];for(let n=0;n<a;n++)e.function[2*n]=e.nodes[n].x,e.function[2*n+1]=e.nodes[n].y}return e.function},t.getFirstNonZeroValue=()=>{if(e.nodes.length===0)return 0;let a=1,n=0,r=0;for(;r<e.nodes.length;r++)if(e.nodes[r].y!==0){a=0;break}return a?n=Number.MAX_VALUE:r>0?n=e.nodes[r-1].x:e.clamping?n=-Number.MAX_VALUE:n=e.nodes[0].x,n},t.getNodeValue=(a,n)=>{const r=e.nodes.length;return a<0||a>=r?(es("Index out of range!"),-1):(n[0]=e.nodes[a].x,n[1]=e.nodes[a].y,n[2]=e.nodes[a].midpoint,n[3]=e.nodes[a].sharpness,1)},t.setNodeValue=(a,n)=>{const r=e.nodes.length;if(a<0||a>=r)return es("Index out of range!"),-1;const i=e.nodes[a].x;return e.nodes[a].x=n[0],e.nodes[a].y=n[1],e.nodes[a].midpoint=n[2],e.nodes[a].sharpness=n[3],i!==n[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=(a,n)=>t.addPointLong(a,n,.5,0),t.addPointLong=(a,n,r,i)=>{if(r<0||r>1)return es("Midpoint outside range [0.0, 1.0]"),-1;if(i<0||i>1)return es("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(a);const o={x:a,y:n,midpoint:r,sharpness:i};e.nodes.push(o),t.sortAndUpdateRange();let s;for(s=0;s<e.nodes.length&&e.nodes[s].x!==a;s++);return s<e.nodes.length?s:-1},t.setNodes=a=>{e.nodes!==a&&(e.nodes=a,t.sortAndUpdateRange())},t.sortAndUpdateRange=()=>{e.nodes.sort((n,r)=>n.x-r.x),t.updateRange()||t.modified()},t.updateRange=()=>{const a=e.range.slice(),n=e.nodes.length;return n?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[n-1].x):(e.range[0]=0,e.range[1]=0),a[0]===e.range[0]&&a[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=a=>{let n;for(n=0;n<e.nodes.length&&e.nodes[n].x!==a;n++);if(n>=e.nodes.length)return-1;const r=n;let i=!1;return e.nodes.splice(n,1),(n===0||n===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),r},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addSegment=(a,n,r,i)=>{t.sortAndUpdateRange();for(let o=0;o<e.nodes.length;)e.nodes[o].x>=a&&e.nodes[o].x<=r?e.nodes.splice(o,1):o++;t.addPoint(a,n,.5,0),t.addPoint(r,i,.5,0)},t.getValue=a=>{const n=[];return t.getTable(a,a,1,n),n[0]},t.adjustRange=a=>{if(a.length<2)return 0;const n=t.getRange();n[0]<a[0]?t.addPoint(a[0],t.getValue(a[0])):t.addPoint(a[0],t.getValue(n[0])),n[1]>a[1]?t.addPoint(a[1],t.getValue(a[1])):t.addPoint(a[1],t.getValue(n[1])),t.sortAndUpdateRange();for(let r=0;r<e.nodes.length;)e.nodes[r].x>=a[0]&&e.nodes[r].x<=a[1]?e.nodes.splice(r,1):++r;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=(a,n)=>{const r=t.findMinimumXDistance();return Math.ceil((n-a)/r)},t.findMinimumXDistance=()=>{const a=e.nodes.length;if(a<2)return-1;let n=e.nodes[1].x-e.nodes[0].x;for(let r=0;r<a-1;r++){const i=e.nodes[r+1].x-e.nodes[r].x;i<n&&(n=i)}return n},t.getTable=function(a,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s,c=0;const l=e.nodes.length;let p=0;l!==0&&(p=e.nodes[l-1].y);let u=0,f=0,h=0,d=0,v=0,m=0,x=0;for(s=0;s<r;s++){const y=o*s;for(r>1?u=a+s/(r-1)*(n-a):u=.5*(a+n);c<l&&u>e.nodes[c].x;)c++,c<l&&(f=e.nodes[c-1].x,h=e.nodes[c].x,d=e.nodes[c-1].y,v=e.nodes[c].y,m=e.nodes[c-1].midpoint,x=e.nodes[c-1].sharpness,m<1e-5&&(m=1e-5),m>.99999&&(m=.99999));if(c>=l)i[y]=e.clamping?p:0;else if(c===0)i[y]=e.clamping?e.nodes[0].y:0;else{let g=(u-f)/(h-f);if(g<m?g=.5*g/m:g=.5+.5*(g-m)/(1-m),x>.99)if(g<.5){i[y]=d;continue}else{i[y]=v;continue}if(x<.01){i[y]=(1-g)*d+g*v;continue}g<.5?g=.5*(g*2)**(1+10*x):g>.5&&(g=1-.5*((1-g)*2)**(1+10*x));const C=g*g,S=C*g,T=2*S-3*C+1,w=-2*S+3*C,_=S-2*C+g,E=S-C,D=v-d,O=(1-x)*D;i[y]=T*d+w*v+_*O+E*O;const M=d<v?d:v,N=d>v?d:v;i[y]=i[y]<M?M:i[y],i[y]=i[y]>N?N:i[y]}}}}const aE={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function ug(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aE,a),V.obj(t,e),e.nodes=[],V.setGet(t,e,["allowDuplicateScalars","clamping"]),V.setArray(t,e,["range"],2),V.getArray(t,e,["range"]),rE(t,e)}var ts={newInstance:V.newInstance(ug,"vtkPiecewiseFunction"),extend:ug};const{InterpolationType:fi,OpacityMode:iE,FilterMode:pi,ColorMixPreset:oE}=Bh,{vtkErrorMacro:Oc}=V,ns=4;function sE(t,e){e.classHierarchy.push("vtkVolumeProperty");const a={...t};t.getMTime=()=>{let i=e.mtime,o;for(let s=0;s<ns;s++)e.componentData[s].colorChannels===1?e.componentData[s].grayTransferFunction&&(o=e.componentData[s].grayTransferFunction.getMTime(),i=i>o?i:o):e.componentData[s].colorChannels===3&&e.componentData[s].rGBTransferFunction&&(o=e.componentData[s].rGBTransferFunction.getMTime(),i=i>o?i:o),e.componentData[s].scalarOpacity&&(o=e.componentData[s].scalarOpacity.getMTime(),i=i>o?i:o),e.componentData[s].gradientOpacity&&(e.componentData[s].disableGradientOpacity||(o=e.componentData[s].gradientOpacity.getMTime(),i=i>o?i:o));return i},t.getColorChannels=i=>i<0||i>3?(Oc("Bad index - must be between 0 and 3"),0):e.componentData[i].colorChannels,t.setGrayTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=!1;return e.componentData[i].grayTransferFunction!==o&&(e.componentData[i].grayTransferFunction=o,s=!0),e.componentData[i].colorChannels!==1&&(e.componentData[i].colorChannels=1,s=!0),s&&t.modified(),s},t.getGrayTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].grayTransferFunction===null&&(e.componentData[i].grayTransferFunction=ts.newInstance(),e.componentData[i].grayTransferFunction.addPoint(0,0),e.componentData[i].grayTransferFunction.addPoint(1024,1),e.componentData[i].colorChannels!==1&&(e.componentData[i].colorChannels=1),t.modified()),e.componentData[i].grayTransferFunction},t.setRGBTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=!1;return e.componentData[i].rGBTransferFunction!==o&&(e.componentData[i].rGBTransferFunction=o,s=!0),e.componentData[i].colorChannels!==3&&(e.componentData[i].colorChannels=3,s=!0),s&&t.modified(),s},t.getRGBTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].rGBTransferFunction===null&&(e.componentData[i].rGBTransferFunction=mc.newInstance(),e.componentData[i].rGBTransferFunction.addRGBPoint(0,0,0,0),e.componentData[i].rGBTransferFunction.addRGBPoint(1024,1,1,1),e.componentData[i].colorChannels!==3&&(e.componentData[i].colorChannels=3),t.modified()),e.componentData[i].rGBTransferFunction},t.setScalarOpacity=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.componentData[i].scalarOpacity!==o?(e.componentData[i].scalarOpacity=o,t.modified(),!0):!1},t.getScalarOpacity=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].scalarOpacity===null&&(e.componentData[i].scalarOpacity=ts.newInstance(),e.componentData[i].scalarOpacity.addPoint(0,1),e.componentData[i].scalarOpacity.addPoint(1024,1),t.modified()),e.componentData[i].scalarOpacity},t.setComponentWeight=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(i<0||i>=ns)return Oc("Invalid index"),!1;const s=Math.min(1,Math.max(0,o));return e.componentData[i].componentWeight!==s?(e.componentData[i].componentWeight=s,t.modified(),!0):!1},t.getComponentWeight=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return i<0||i>=ns?(Oc("Invalid index"),0):e.componentData[i].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(fi.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(fi.LINEAR),t.setInterpolationTypeToFastLinear=()=>t.setInterpolationType(fi.FAST_LINEAR),t.getInterpolationTypeAsString=()=>V.enumToString(fi,e.interpolationType),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(i=>{const o=V.capitalize(i);t[`set${o}`]=(s,c)=>e.componentData[s][`${i}`]!==c?(e.componentData[s][`${i}`]=c,t.modified(),!0):!1}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(i=>{const o=V.capitalize(i);t[`get${o}`]=s=>e.componentData[s][`${i}`]}),t.setAverageIPScalarRange=(i,o)=>{console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),t.setIpScalarRange(i,o)},t.getFilterModeAsString=()=>V.enumToString(pi,e.filterMode),t.setFilterModeToOff=()=>{t.setFilterMode(pi.OFF)},t.setFilterModeToNormalized=()=>{t.setFilterMode(pi.NORMALIZED)},t.setFilterModeToRaw=()=>{t.setFilterMode(pi.RAW)},t.setGlobalIlluminationReach=i=>a.setGlobalIlluminationReach(Yt(i,0,1)),t.setVolumetricScatteringBlending=i=>a.setVolumetricScatteringBlending(Yt(i,0,1)),t.setAnisotropy=i=>a.setAnisotropy(Yt(i,-.99,.99)),t.setLAOKernelSize=i=>a.setLAOKernelSize(Ys(Yt(i,1,32))),t.setLAOKernelRadius=i=>a.setLAOKernelRadius(i>=1?i:1)}const cE=t=>({colorMixPreset:oE.DEFAULT,independentComponents:!0,interpolationType:fi.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1,ipScalarRange:[-1e6,1e6],filterMode:pi.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7,updatedExtents:[],...t});function lg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,cE(a)),V.obj(t,e),!e.componentData){e.componentData=[];for(let n=0;n<ns;++n)e.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:iE.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1,forceNearestInterpolation:!1})}V.setGet(t,e,["colorMixPreset","independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineOpacity","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius","updatedExtents"]),V.setGetArray(t,e,["ipScalarRange"],2),V.setGetArray(t,e,["labelOutlineThickness"]),sE(t,e)}var fg={newInstance:V.newInstance(lg,"vtkVolumeProperty"),extend:lg,...Bh};function uE(t,e){e.classHierarchy.push("vtkVolume"),t.getVolumes=()=>[t],t.makeProperty=fg.newInstance,t.getRedrawMTime=()=>{let a=e.mtime;if(e.mapper!==null){let n=e.mapper.getMTime();a=n>a?n:a,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),n=e.mapper.getInput().getMTime(),a=n>a?n:a)}return a}}const lE={mapper:null};function pg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lE,a),x0.extend(t,e,a),e.boundsMTime={},V.obj(e.boundsMTime),V.setGet(t,e,["mapper"]),uE(t,e)}var fE={newInstance:V.newInstance(pg,"vtkVolume"),extend:pg};const{BlendMode:Zn}=R8;function pE(t,e,a,n,r){let i=null;return r?(i=r,i.removeAllPoints()):i=ts.newInstance(),i.addPointLong(-1024,0,1,1),i.addPoint(t,e),i.addPoint(a,n),i}const hE=["getAnisotropy","getComputeNormalFromOpacity","getFilterMode","getFilterModeAsString","getGlobalIlluminationReach","getIpScalarRange","getIpScalarRangeByReference","getLAOKernelRadius","getLAOKernelSize","getLocalAmbientOcclusion","getPreferSizeOverAccuracy","getVolumetricScatteringBlending","setAnisotropy","setAverageIPScalarRange","setComputeNormalFromOpacity","setFilterMode","setFilterModeToNormalized","setFilterModeToOff","setFilterModeToRaw","setGlobalIlluminationReach","setIpScalarRange","setIpScalarRangeFrom","setLAOKernelRadius","setLAOKernelSize","setLocalAmbientOcclusion","setPreferSizeOverAccuracy","setVolumetricScatteringBlending"],gE={createRadonTransferFunction:pE};function dE(t,e){e.classHierarchy.push("vtkVolumeMapper");const a={...t};t.getBounds=()=>(e.static||t.update(),e.bounds=[...t.getInputData().getBounds()],e.bounds),t.setBlendModeToComposite=()=>{t.setBlendMode(Zn.COMPOSITE_BLEND)},t.setBlendModeToMaximumIntensity=()=>{t.setBlendMode(Zn.MAXIMUM_INTENSITY_BLEND)},t.setBlendModeToMinimumIntensity=()=>{t.setBlendMode(Zn.MINIMUM_INTENSITY_BLEND)},t.setBlendModeToAverageIntensity=()=>{t.setBlendMode(Zn.AVERAGE_INTENSITY_BLEND)},t.setBlendModeToAdditiveIntensity=()=>{t.setBlendMode(Zn.ADDITIVE_INTENSITY_BLEND)},t.setBlendModeToRadonTransform=()=>{t.setBlendMode(Zn.RADON_TRANSFORM_BLEND)},t.getBlendModeAsString=()=>V.enumToString(Zn,e.blendMode),t.setVolumeShadowSamplingDistFactor=n=>a.setVolumeShadowSamplingDistFactor(n>=1?n:1),hE.forEach(n=>{const r=()=>{throw new Error(`The method "volumeMapper.${n}()" doesn't exist anymore. It is a rendering property that has been moved to the volume property. Replace your code with:
volumeActor.getProperty().${n}()
`)};t[n]=r})}const vE=t=>({bounds:[...we.INIT_BOUNDS],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,initialInteractionScale:1,interactionSampleDistanceFactor:1,blendMode:Zn.COMPOSITE_BLEND,volumeShadowSamplingDistFactor:5,colorTextureWidth:1024,opacityTextureWidth:1024,labelOutlineTextureWidth:1024,...t});function hg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vE(a)),T0.extend(t,e,a),V.setGet(t,e,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","initialInteractionScale","interactionSampleDistanceFactor","blendMode","volumeShadowSamplingDistFactor","colorTextureWidth","opacityTextureWidth","labelOutlineTextureWidth"]),V.event(t,e,"lightingActivated"),dE(t,e)}var yE={newInstance:V.newInstance(hg,"vtkVolumeMapper"),extend:hg,...gE};const{InterpolationType:rs}=u8,{vtkErrorMacro:gg}=V,as=4;function mE(t,e){e.classHierarchy.push("vtkImageProperty"),t.getMTime=()=>{let a=e.mtime,n;for(let r=0;r<as;r++)e.componentData[r].rGBTransferFunction&&(n=e.componentData[r].rGBTransferFunction.getMTime(),a=a>n?a:n),e.componentData[r].piecewiseFunction&&(n=e.componentData[r].piecewiseFunction.getMTime(),a=a>n?a:n);return a},t.setRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),e.componentData[r].rGBTransferFunction!==i?(e.componentData[r].rGBTransferFunction=i,t.modified(),!0):!1},t.getRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].rGBTransferFunction},t.setPiecewiseFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),e.componentData[r].piecewiseFunction!==i?(e.componentData[r].piecewiseFunction=i,t.modified(),!0):!1},t.getPiecewiseFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].piecewiseFunction},t.setScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),t.setPiecewiseFunction(r,i)},t.getScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.getPiecewiseFunction(a)},t.setComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(a<0||a>=as)return gg("Invalid index"),!1;const r=Math.min(1,Math.max(0,n));return e.componentData[a].componentWeight!==r?(e.componentData[a].componentWeight=r,t.modified(),!0):!1},t.getComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return a<0||a>=as?(gg("Invalid index"),0):e.componentData[a].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(rs.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(rs.LINEAR),t.getInterpolationTypeAsString=()=>V.enumToString(rs,e.interpolationType)}const xE=t=>({independentComponents:!1,interpolationType:rs.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1,updatedExtents:[],...t});function dg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,xE(a)),V.obj(t,e),!e.componentData){e.componentData=[];for(let n=0;n<as;n++)e.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}V.setGet(t,e,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange","useLabelOutline","labelOutlineOpacity","updatedExtents"]),V.setGetArray(t,e,["labelOutlineThickness"]),mE(t,e)}var vg={newInstance:V.newInstance(dg,"vtkImageProperty"),extend:dg};function CE(t,e){e.classHierarchy.push("vtkImageSlice"),t.getActors=()=>t,t.getImages=()=>t,t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let a=e.properties[0].getOpacity()>=1;return a=a&&(!e.mapper||e.mapper.getIsOpaque()),a},t.hasTranslucentPolygonalGeometry=()=>!1,t.makeProperty=vg.newInstance,t.getBoundsForSlice=(a,n)=>{const r=e.mapper.getBoundsForSlice(a,n);if(!we.isValid(r))return r;t.computeMatrix();const i=new Float64Array(16);return We(i,e.matrix),we.transformBounds(r,i)},t.getMinXBound=()=>t.getBounds()[0],t.getMaxXBound=()=>t.getBounds()[1],t.getMinYBound=()=>t.getBounds()[2],t.getMaxYBound=()=>t.getBounds()[3],t.getMinZBound=()=>t.getBounds()[4],t.getMaxZBound=()=>t.getBounds()[5],t.getRedrawMTime=()=>{let a=e.mtime;if(e.mapper!==null){let n=e.mapper.getMTime();a=n>a?n:a,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),n=e.mapper.getInput().getMTime(),a=n>a?n:a)}return e.properties.forEach(n=>{a=Math.max(a,n.getMTime());const r=n.getRGBTransferFunction();r!==null&&(a=Math.max(a,r.getMTime()))}),a},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1}const SE={mapper:null,forceOpaque:!1,forceTranslucent:!1};function yg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SE,a),x0.extend(t,e,a),e.boundsMTime={},V.obj(e.boundsMTime),V.setGet(t,e,["mapper","forceOpaque","forceTranslucent"]),CE(t,e)}var TE={newInstance:V.newInstance(yg,"vtkImageSlice"),extend:yg};function wE(t,e){e.classHierarchy.push("vtkAbstractImageMapper"),t.getIsOpaque=()=>!0,t.getCurrentImage=()=>null,t.getBoundsForSlice=()=>(V.vtkErrorMacro("vtkAbstractImageMapper.getBoundsForSlice - NOT IMPLEMENTED"),In())}const _E={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1],colorTextureWidth:1024,opacityTextureWidth:1024,labelOutlineTextureWidth:1024};function EE(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_E,a),T0.extend(t,e,a),V.setGet(t,e,["slice","useCustomExtents","colorTextureWidth","opacityTextureWidth","labelOutlineTextureWidth"]),V.setGetArray(t,e,["customDisplayExtent"],6),V.setGetArray(t,e,["backgroundColor"],4),wE(t,e)}var DE={extend:EE};function mg(t,e,a){const n=a.getCurrentImage(),r=n.getExtent(),i=[r[0],r[2],r[4]],{ijkMode:o}=a.getClosestIJKAxis();let s=a.isA("vtkImageArrayMapper")?a.getSubSlice():a.getSlice();o!==a.getSlicingMode()&&(s=a.getSliceAtPosition(s)),i[o]+=s;const c=[0,0,0];n.indexToWorld(i,c),i[o]+=1;const l=[0,0,0];n.indexToWorld(i,l),l[0]-=c[0],l[1]-=c[1],l[2]-=c[2],cn(l,l);const p=fn.intersectWithLine(t,e,c,l);if(p.intersection){const u=p.x,f=[0,0,0];return n.worldToIndex(u,f),{t:p.t,absoluteIJK:f}}return null}function OE(t,e,a){const n=mg(t,e,a);if(n){const i=a.getCurrentImage().getExtent(),o=[Math.round(n.absoluteIJK[0]),Math.round(n.absoluteIJK[1]),Math.round(n.absoluteIJK[2])];return o[0]<i[0]||o[0]>i[1]||o[1]<i[2]||o[1]>i[3]||o[2]<i[4]||o[2]>i[5]?null:{t:n.t,ijk:o}}return null}function bE(t,e,a){const n=mg(t,e,a);if(n){const i=a.getCurrentImage().getExtent(),o=n.absoluteIJK,s=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(s[0]<i[0]||s[0]>i[1]-1||s[1]<i[2]||s[1]>i[3]-1||s[2]<i[4]||s[2]>(i[5]?i[5]-1:i[5]))return null;const c=[o[0]-s[0],o[1]-s[1],o[2]-s[2]];return{t:n.t,ijk:s,pCoords:c}}return null}const{staticOffsetAPI:ME,otherStaticMethods:NE}=yo,{SlicingMode:Ge}=q0;function RE(t,e){e.classHierarchy.push("vtkImageMapper"),t.getSliceAtPosition=n=>{const r=t.getCurrentImage();let i;if(n.length===3)i=n;else if(Number.isFinite(n)){const p=r.getBounds();switch(e.slicingMode){case Ge.X:i=[n,(p[3]+p[2])/2,(p[5]+p[4])/2];break;case Ge.Y:i=[(p[1]+p[0])/2,n,(p[5]+p[4])/2];break;case Ge.Z:i=[(p[1]+p[0])/2,(p[3]+p[2])/2,n];break}}const o=[0,0,0];r.worldToIndex(i,o);const s=r.getExtent(),{ijkMode:c}=t.getClosestIJKAxis();let l=0;switch(c){case Ge.I:l=Yt(o[0],s[0],s[1]);break;case Ge.J:l=Yt(o[1],s[2],s[3]);break;case Ge.K:l=Yt(o[2],s[4],s[5]);break;default:return 0}return l},t.setSliceFromCamera=n=>{const r=n.getFocalPoint();switch(e.slicingMode){case Ge.I:case Ge.J:case Ge.K:{const i=t.getSliceAtPosition(r);t.setSlice(i)}break;case Ge.X:t.setSlice(r[0]);break;case Ge.Y:t.setSlice(r[1]);break;case Ge.Z:t.setSlice(r[2]);break}},t.setXSlice=n=>{t.setSlicingMode(Ge.X),t.setSlice(n)},t.setYSlice=n=>{t.setSlicingMode(Ge.Y),t.setSlice(n)},t.setZSlice=n=>{t.setSlicingMode(Ge.Z),t.setSlice(n)},t.setISlice=n=>{t.setSlicingMode(Ge.I),t.setSlice(n)},t.setJSlice=n=>{t.setSlicingMode(Ge.J),t.setSlice(n)},t.setKSlice=n=>{t.setSlicingMode(Ge.K),t.setSlice(n)},t.getSlicingModeNormal=()=>{const n=[0,0,0],r=t.getCurrentImage().getDirection();switch(e.slicingMode){case Ge.X:n[0]=1;break;case Ge.Y:n[1]=1;break;case Ge.Z:n[2]=1;break;case Ge.I:Yi(r,[1,0,0],n);break;case Ge.J:Yi(r,[0,1,0],n);break;case Ge.K:Yi(r,[0,0,1],n);break}return n};function a(){let n;switch(e.slicingMode){case Ge.X:n=0;break;case Ge.Y:n=1;break;case Ge.Z:n=2;break;default:e.closestIJKAxis={ijkMode:e.slicingMode,flip:!1};return}const r=t.getCurrentImage().getDirection(),i=Hl(r);let o=0;for(;o<3&&i[n+3*o]===0;++o);const s=i[n+3*o]<0;e.closestIJKAxis={ijkMode:o,flip:s}}t.setSlicingMode=n=>{e.slicingMode!==n&&(e.slicingMode=n,t.getCurrentImage()&&a(),t.modified())},t.getClosestIJKAxis=()=>((e.closestIJKAxis===void 0||e.closestIJKAxis.ijkMode===Ge.NONE)&&t.getCurrentImage()&&a(),e.closestIJKAxis),t.getBounds=()=>{const n=t.getCurrentImage();if(!n)return In();if(!e.useCustomExtents)return n.getBounds();const r=e.customDisplayExtent.slice(),{ijkMode:i}=t.getClosestIJKAxis();let o=e.slice;switch(i!==e.slicingMode&&(o=t.getSliceAtPosition(e.slice)),i){case Ge.I:r[0]=o,r[1]=o;break;case Ge.J:r[2]=o,r[3]=o;break;case Ge.K:r[4]=o,r[5]=o;break}return n.extentToBounds(r)},t.getBoundsForSlice=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.slice,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getCurrentImage();if(!i)return In();const o=i.getSpatialExtent(),{ijkMode:s}=t.getClosestIJKAxis();let c=n;switch(s!==e.slicingMode&&(c=t.getSliceAtPosition(n)),s){case Ge.I:o[0]=c-r,o[1]=c+r;break;case Ge.J:o[2]=c-r,o[3]=c+r;break;case Ge.K:o[4]=c-r,o[5]=c+r;break}return i.extentToBounds(o)},t.intersectWithLineForPointPicking=(n,r)=>OE(n,r,t),t.intersectWithLineForCellPicking=(n,r)=>bE(n,r,t),t.getCurrentImage=()=>t.getInputData()}const LE={slicingMode:Ge.NONE,closestIJKAxis:{ijkMode:Ge.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function xg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LE,a),DE.extend(t,e,a),V.get(t,e,["slicingMode"]),V.setGet(t,e,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),yo.implementCoincidentTopologyMethods(t,e),RE(t,e)}var FE={newInstance:V.newInstance(xg,"vtkImageMapper"),extend:xg,...ME,...NE,...q0};const{vtkErrorMacro:kE}=V;function VE(t,e){let a=0;return t.map((n,r)=>r===a?(a+=n+1,n):n+e)}function is(t,e,a,n){t.set(VE(e,a),n)}function AE(t,e){e.classHierarchy.push("vtkAppendPolyData"),t.requestData=(a,n)=>{const r=t.getNumberOfInputPorts();if(!r){kE("No input specified.");return}if(r===1){n[0]=a[0];return}const i=n[0]&&a[0]!==n[0]?n[0].initialize():Xe.newInstance();let o=0,s=0,c=1,l=1,p=0,u=0,f=0,h=0,d=!0,v=!0,m=!0;for(let O=0;O<r;O++){const M=a[O];if(!M)continue;const N=M.getPoints().getNumberOfPoints();o+=N,p+=M.getVerts().getNumberOfValues(),u+=M.getLines().getNumberOfValues(),f+=M.getStrips().getNumberOfValues(),h+=M.getPolys().getNumberOfValues(),N&&(l&&(l=0,s=M.getPoints().getDataType()),c=M.getPoints().getDataType(),s=s>c?s:c);const R=M.getPointData();R?(d=d&&R.getNormals()!==null,v=v&&R.getTCoords()!==null,m=m&&R.getScalars()!==null):(d=!1,v=!1,m=!1)}e.outputPointsPrecision===hr.SINGLE?s=Ne.FLOAT:e.outputPointsPrecision===hr.DOUBLE&&(s=Ne.DOUBLE);const x=dn.newInstance({dataType:s});x.setNumberOfPoints(o);const y=x.getData(),g=new Uint32Array(p),C=new Uint32Array(u),S=new Uint32Array(f),T=new Uint32Array(h);let w=null,_=null,E=null;const D=a[r-1];if(d){const O=D.getPointData().getNormals();w=pe.newInstance({numberOfComponents:3,numberOfTuples:o,size:3*o,dataType:O.getDataType(),name:O.getName()})}if(v){const O=D.getPointData().getTCoords();_=pe.newInstance({numberOfComponents:2,numberOfTuples:o,size:2*o,dataType:O.getDataType(),name:O.getName()})}if(m){const O=D.getPointData().getScalars();E=pe.newInstance({numberOfComponents:O.getNumberOfComponents(),numberOfTuples:o,size:o*O.getNumberOfComponents(),dataType:O.getDataType(),name:O.getName()})}o=0,p=0,u=0,f=0,h=0;for(let O=0;O<r;O++){const M=a[O];y.set(M.getPoints().getData(),o*3),is(g,M.getVerts().getData(),o,p),p+=M.getVerts().getNumberOfValues(),is(C,M.getLines().getData(),o,u),u+=M.getLines().getNumberOfValues(),is(S,M.getStrips().getData(),o,f),f+=M.getStrips().getNumberOfValues(),is(T,M.getPolys().getData(),o,h),h+=M.getPolys().getNumberOfValues();const N=M.getPointData();if(d){const R=N.getNormals();w.getData().set(R.getData(),o*3)}if(v){const R=N.getTCoords();_.getData().set(R.getData(),o*2)}if(m){const R=N.getScalars();E.getData().set(R.getData(),o*E.getNumberOfComponents())}o+=M.getPoints().getNumberOfPoints()}i.setPoints(x),i.getVerts().setData(g),i.getLines().setData(C),i.getStrips().setData(S),i.getPolys().setData(T),w&&i.getPointData().setNormals(w),_&&i.getPointData().setTCoords(_),E&&i.getPointData().setScalars(E),n[0]=i}}const BE={outputPointsPrecision:hr.DEFAULT};function Cg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BE,a),V.setGet(t,e,["outputPointsPrecision"]),V.obj(t,e),V.algo(t,e,1,1),AE(t,e)}var Sg={newInstance:V.newInstance(Cg,"vtkAppendPolyData"),extend:Cg};function UE(t,e){e.classHierarchy.push("vtkArrowSource"),t.requestData=(a,n)=>{const r=L7.newInstance({capping:!0});r.setResolution(e.shaftResolution),r.setRadius(e.shaftRadius),r.setHeight(1-e.tipLength),r.setCenter(0,(1-e.tipLength)*.5,0);const i=r.getOutputData(),o=i.getPoints().getData(),s=i.getPointData().getNormals().getData();bt.buildFromDegree().rotateZ(-90).apply(o).apply(s);const c=M7.newInstance();c.setResolution(e.tipResolution),c.setHeight(e.tipLength),c.setRadius(e.tipRadius);const l=c.getOutputData(),p=l.getPoints().getData();bt.buildFromRadian().translate(1-e.tipLength*.5,0,0).apply(p);const u=Sg.newInstance();u.setInputData(i),u.addInputData(l);const f=u.getOutputData(),h=f.getPoints().getData();bt.buildFromRadian().translate(-.5+e.tipLength*.5,0,0).apply(h),e.invert?(bt.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(-1,-1,-1).apply(h),n[0]=f):(bt.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(1,1,1).apply(h),n[0]=u.getOutputData())}}const GE={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function Tg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GE,a),V.obj(t,e),V.setGet(t,e,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),V.setGetArray(t,e,["direction"],3),V.algo(t,e,0,1),UE(t,e)}var bc={newInstance:V.newInstance(Tg,"vtkArrowSource"),extend:Tg};function Mc(t){const e=t.getPoints().getBounds(),a=[-(e[0]+e[1])*.5,-(e[2]+e[3])*.5,-(e[4]+e[5])*.5];bt.buildFromDegree().translate(...a).apply(t.getPoints().getData())}function Nc(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=t.getPoints().getBounds(),r=[0,0,0];a?r[e]=-n[e*2+1]:r[e]=-n[e*2],bt.buildFromDegree().translate(...r).apply(t.getPoints().getData())}function Rc(t,e,a,n){const r=t.getPoints().getData().length,i=new Uint8ClampedArray(r);let o=0;for(;o<r;)i[o++]=e,i[o++]=a,i[o++]=n;t.getPointData().setScalars(pe.newInstance({name:"color",numberOfComponents:3,values:i}))}function IE(t,e){e.classHierarchy.push("vtkAxesActor");const a=gn.newInstance();t.setMapper(a),t.update=()=>{let r={...e.config,...e.xConfig};const i=bc.newInstance({direction:[1,0,0],...r}).getOutputData();e.config.recenter?Mc(i):Nc(i,0,r.invert),Rc(i,...r.color),r={...e.config,...e.yConfig};const o=bc.newInstance({direction:[0,1,0],...r}).getOutputData();e.config.recenter?Mc(o):Nc(o,1,r.invert),Rc(o,...r.color),r={...e.config,...e.zConfig};const s=bc.newInstance({direction:[0,0,1],...r}).getOutputData();e.config.recenter?Mc(s):Nc(s,2,r.invert),Rc(s,...r.color);const c=Sg.newInstance();c.setInputData(i),c.addInputData(o),c.addInputData(s),a.setInputConnection(c.getOutputPort())},t.update();const n=V.debounce(t.update,0);t.setXAxisColor=r=>t.setXConfig({...t.getXConfig(),color:r}),t.setYAxisColor=r=>t.setYConfig({...t.getYConfig(),color:r}),t.setZAxisColor=r=>t.setZConfig({...t.getZConfig(),color:r}),t.getXAxisColor=()=>e.getXConfig().color,t.getYAxisColor=()=>e.getYConfig().color,t.getZAxisColor=()=>e.getZConfig().color,e._onConfigChanged=n,e._onXConfigChanged=n,e._onYConfigChanged=n,e._onZConfigChanged=n}function PE(t){return{config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1,...t==null?void 0:t.config},xConfig:{color:[255,0,0],invert:!1,...t==null?void 0:t.xConfig},yConfig:{color:[255,255,0],invert:!1,...t==null?void 0:t.yConfig},zConfig:{color:[0,128,0],invert:!1,...t==null?void 0:t.zConfig}}}function wg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};pn.extend(t,e,PE(a)),V.setGet(t,e,["config","xConfig","yConfig","zConfig"]),IE(t,e)}var zE={newInstance:V.newInstance(wg,"vtkAxesActor"),extend:wg};const _g="resetcamera",Lc="orientation",jE={MODE_RESET_CAMERA:_g,MODE_ORIENTATION:Lc,MODE_SAME:"same"};function WE(t,e){e.classHierarchy.push("vtkCameraSynchronizer");const a=new Float64Array(9),n=new Float64Array(3),r=[];function i(){for(;r.length;)r.pop().unsubscribe();if(!e.srcRenderer||!e.dstRenderer)return;const s=e.srcRenderer.getActiveCamera(),c=e.srcRenderer.getRenderWindow().getInteractor();r.push(s.onModified(()=>{c.isAnimating()||t.update()})),r.push(c.onAnimation(t.update)),r.push(c.onEndAnimation(t.update))}e._onSrcRendererChanged=i,e._onDstRendererChanged=i;function o(s,c,l){return a[0]!==s[0]||a[1]!==s[1]||a[2]!==s[2]||a[3]!==c[0]||a[4]!==c[1]||a[5]!==c[2]||a[6]!==l[0]||a[7]!==l[1]||a[8]!==l[2]?(a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=c[0],a[4]=c[1],a[5]=c[2],a[6]=l[0],a[7]=l[1],a[8]=l[2],a):!1}t.update=()=>{if(!e.active||!e.srcRenderer||!e.dstRenderer)return;const s=e.srcRenderer.getActiveCamera(),c=e.dstRenderer.getActiveCamera(),l=s.getReferenceByName("position"),p=s.getReferenceByName("focalPoint"),u=s.getReferenceByName("viewUp"),f=o(l,p,u);f&&(e.mode===Lc?(n[0]=f[0]-f[3],n[1]=f[1]-f[4],n[2]=f[2]-f[5],Ke(n),c.setPosition(e.focalPoint[0]+e.distance*n[0],e.focalPoint[1]+e.distance*n[1],e.focalPoint[2]+e.distance*n[2]),c.setFocalPoint(e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),c.setViewUp(f[6],f[7],f[8])):(c.setPosition(f[0],f[1],f[2]),c.setFocalPoint(f[3],f[4],f[5]),c.setViewUp(f[6],f[7],f[8])),e.mode===_g&&e.dstRenderer.resetCamera())},t.delete=Gn(()=>t.setSrcRenderer(null),t.delete),i()}const $E={mode:Lc,focalPoint:[0,0,0],distance:6.8,active:!0};function Eg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$E,a),ut(t,e),pt(t,e,["mode","active","srcRenderer","dstRenderer","distance"]),Bi(t,e,["focalPoint"],3,0),WE(t,e)}var Fc={newInstance:Je(Eg,"vtkCameraSynchronizer"),extend:Eg,SynchronizationMode:jE};const kc={};class HE{constructor(e,a){this.ctx=e,this.behavior=Fc.newInstance(this.getProperties(a)),this.behavior.update()}getProperties(e){let{actorBounds:a,srcRenderer:n,dstRenderer:r}=e;const i=3.4*Math.max(a[1]-a[0],a[3]-a[2],a[5]-a[4]),o=[.5*(a[0]+a[1]),.5*(a[2]+a[3]),.5*(a[4]+a[5])],s=Fc.SynchronizationMode.MODE_ORIENTATION;return{distance:i,focalPoint:o,mode:s,srcRenderer:this.ctx.getInstance(n),dstRenderer:this.ctx.getInstance(r)}}update(e){this.behavior.set(this.getProperties(e)),this.behavior.update()}delete(){this.behavior.delete()}}const Dg={CameraSync:HE};function KE(t,e,a){const n=t.get("synchronizedViewId").synchronizedViewId;if(!e.behaviors||!n)return;kc[n]||(kc[n]={});const r=kc[n];if(e.behaviors.autoOrientation){const s=t.getRenderers();if(!r.autoOrientationAxes&&s.length===2){let c=null,l=null;for(let p=0;p<s.length;p++){const u=s[p];u.getInteractive()?c=u:l=u}c&&l&&(r.autoOrientationAxes=Fc.newInstance({srcRenderer:c,dstRenderer:l}))}r.autoOrientationAxes&&s.length!==2&&(r.autoOrientationAxes.delete(),delete r.autoOrientationAxes)}const i=Object.keys(e.behaviors),o=Object.keys(r);for(let s=0;s<i.length;s++){const c=i[s];if(r[c])r[c].update(e.behaviors[c]);else{const l=e.behaviors[c];Dg[l.type]?r[c]=new Dg[l.type](a,l):console.log("No mapping for",l)}}for(let s=0;s<o.length;s++){const c=i[s];e.behaviors[c]||(r[c].delete(),delete r[c])}}var XE={applyBehaviors:KE};const Fn={},Og=/instance:\${([^}]+)}/,qE=t=>`instance:\${${t}}`,hi={},Vc=[],os={},YE={vtkPoints:dn,vtkCellArray:jn,vtkDataArray:pe};function JE(t,e){return e.map(a=>{const n=Og.exec(a);return n?t.getInstance(n[1]):a})}function bg(t){return t.map(e=>Og.exec(e)).filter(e=>e).map(e=>e[1])}function Mg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.dependencies&&t.dependencies.forEach(a=>{e.push(a.id),Mg(a,e)}),e}function ZE(t){for(;t.length;){const[e,a]=t.shift();e(...a)}}function QE(t,e,a){return n=>{const r=e.registration?e.registration:"addArray",i=e.location?t.getReferenceByName(e.location):t;let o=null;if(e.location?o=t.getReferenceByName(e.location).getArray(e.name):o=t[`get${r.substring(3)}`](),o)return o.getData()!==n&&a.push([o.setData,[n,e.numberOfComponents]]),o;const s=e.vtkClass?e.vtkClass:"vtkDataArray",c=YE[s].newInstance({...e,values:n});return a.push([i[r],[c]]),c}}function ss(t,e,a,n){if(!e)return Promise.reject(new Error("No instance provided."));const r=Fn[t];return r&&r.update?r.update(e,a,n):Promise.reject(new Error(`No updater for ${t}`))}function Ac(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=Fn[t];return a&&a.build?a.build(e):(console.log("No builder for",t),null)}function eD(t,e,a){os[t]={key:e,value:a}}function tD(){return Object.keys(Fn)}function Ng(){Object.keys(Fn).forEach(t=>{delete Fn[t]})}function nD(t,e,a){return ss("vtkRenderWindow",t,e,a)}function rD(){Object.keys(hi).forEach(t=>{delete hi[t]})}function aD(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];if(e.length===0)return rD();let n=e;return n.length===1&&Array.isArray(n[0])&&(n=n[0]),n.forEach(r=>{delete hi[r]}),n}function Bc(t){if(t[1].length===1)return Vc.indexOf(t[1][0])===-1;let e=!1;for(let a=0;a<t[1].length;a++)e=e||Vc.indexOf(t[1][a])===-1;return e}function ct(t,e,a){a.start(),t.set(e.properties),e.dependencies&&e.dependencies.forEach(r=>{const{id:i,type:o}=r;if(os[o]){const{key:c,value:l}=os[o];if(!c||r.properties[c]===l){Vc.push(qE(i));return}}let s=a.getInstance(i);s||(s=Ac(o,{managedInstanceId:i}),a.registerInstance(i,s)),ss(o,s,r,a)}),e.calls&&e.calls.filter(Bc).forEach(r=>{t[r[0]].apply(null,JE(a,r[1]))});const n=[];if(e.arrays){const r=[],i=Object.values(e.arrays).map(o=>(a.start(),a.getArray(o.hash,o.dataType,a).then(QE(t,o,r)).catch(s=>{console.log("Error fetching array",JSON.stringify(o),s)}).finally(a.end)));a.start(),n.push(Promise.all(i).then(()=>(r.length&&t.modified(),ZE(r),!0)).catch(o=>{console.error("Error in array handling for state",JSON.stringify(e),o)}).finally(a.end))}return a.end(),Promise.all(n)}function Rg(t,e,a){hi[e.id]||ct(t,e,a),hi[e.id]=!0}function iD(t,e,a){ct(t,e,a);const n=new Set;e.dependencies&&e.dependencies.forEach(o=>{const s=a.getInstance(o.id);if(s){const c=Mg(o);s.set({flattenedDepIds:c},!0),c.forEach(l=>n.add(l))}});const r=new Set;e.calls&&e.calls.filter(Bc).filter(o=>o[0]==="removeViewProp").forEach(o=>{bg(o[1]).forEach(s=>{const c=a.getInstance(s).get("flattenedDepIds").flattenedDepIds;c&&c.forEach(l=>r.add(l)),r.add(s)})}),[...r].filter(o=>!n.has(o)).forEach(o=>a.unregisterInstance(o))}function oD(t,e,a){e.calls&&e.calls.filter(Bc).filter(n=>n[0]==="removeRenderer").forEach(n=>{bg(n[1]).forEach(r=>{a.getInstance(r).getViewProps().forEach(s=>{const c=s.get("flattenedDepIds").flattenedDepIds;c&&c.forEach(l=>a.unregisterInstance(l)),a.unregisterInstance(a.getInstanceId(s))})})}),t.render(),ct(t,e,a),XE.applyBehaviors(t,e,a)}function sD(t,e,a){if(a.start(),!e.properties.nodes)t.set(e.properties);else{const n=e.properties.nodes.map(r=>{let[i,o,s,c,l,p]=r;return{x:i,r:o,g:s,b:c,midpoint:l,sharpness:p}});t.set({...e.properties,nodes:n},!0)}a.end()}function cD(t,e,a){if(a.start(),!e.properties.nodes)t.set(e.properties);else{const n=e.properties.nodes.map(r=>{let[i,o,s,c]=r;return{x:i,y:o,midpoint:s,sharpness:c}});t.set({...e.properties,nodes:n},!0),t.sortAndUpdateRange()}a.end()}function Lg(t,e){const a=[],n=t.getNumberOfArrays();for(let r=0;r<n;r++){const o=t.getArray(r).getName();e.has(o)||a.push(o)}for(let r=0;r<a.length;r++)t.removeArray(a[r])}function Fg(t){const e=t.name?`_${t.name}`:"";return`${t.hash}_${t.dataType}${e}`}function kg(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(e,a,n)=>{n.start();const r={...a.properties};a.arrays||(a.arrays={});for(let l=0;l<t.length;l++){const p=t[l];if(a.properties[p]){const u=a.properties[p];u.registration=`set${$r(p)}`;const f=Fg(u);a.arrays[f]=u,delete r[p]}}const i=a.properties.fields||[];for(let l=0;l<i.length;l++){const p=i[l],u=Fg(p);a.arrays[u]=p}delete r.fields;const o={pointData:new Set,cellData:new Set,fieldData:new Set};i.forEach(l=>{let{location:p,name:u}=l;o[p].add(u)}),Lg(e.getPointData(),o.pointData),Lg(e.getCellData(),o.cellData);const s={...a};s.properties=r;const c=ct(e,s,n);return n.end(),c}}const uD=kg(["points","polys","verts","lines","strips"]),lD=kg([]);function Uc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ct;if(!Ac&&!ss){delete Fn[t];return}Fn[t]={build:e,update:a}}const Vg={vtkMapper:["vtkOpenGLPolyDataMapper","vtkCompositePolyDataMapper2","vtkDataSetMapper"],vtkProperty:["vtkOpenGLProperty"],vtkRenderer:["vtkOpenGLRenderer"],vtkCamera:["vtkOpenGLCamera"],vtkColorTransferFunction:["vtkPVDiscretizableColorTransferFunction"],vtkActor:["vtkOpenGLActor","vtkPVLODActor"],vtkLight:["vtkOpenGLLight","vtkPVLight"],vtkTexture:["vtkOpenGLTexture"],vtkImageMapper:["vtkOpenGLImageSliceMapper"],vtkVolumeMapper:["vtkFixedPointVolumeRayCastMapper"]},Ag={vtkAxesActor:{build:zE.newInstance,update:ct},vtkRenderWindow:{build:Ec.newInstance,update:oD},vtkRenderer:{build:cg.newInstance,update:iD},vtkLookupTable:{build:rp.newInstance,update:ct},vtkCamera:{build:Dc.newInstance,update:Rg},vtkPolyData:{build:Xe.newInstance,update:uD},vtkImageData:{build:_0.newInstance,update:lD},vtkMapper:{build:gn.newInstance,update:ct},vtkGlyph3DMapper:{build:k1.newInstance,update:ct},vtkProperty:{build:pr.newInstance,update:ct},vtkActor:{build:pn.newInstance,update:ct},vtkLight:{build:ag.newInstance,update:ct},vtkColorTransferFunction:{build:mc.newInstance,update:sD},vtkTexture:{build:A0.newInstance,update:ct},vtkVolume:{build:fE.newInstance,update:ct},vtkVolumeMapper:{build:yE.newInstance,update:ct},vtkVolumeProperty:{build:fg.newInstance,update:ct},vtkImageSlice:{build:TE.newInstance,update:ct},vtkImageMapper:{build:FE.newInstance,update:ct},vtkImageProperty:{build:vg.newInstance,update:ct},vtkPiecewiseFunction:{build:ts.newInstance,update:cD},vtkCubeAxesActor:{build:G0.newInstance,update:ct},vtkScalarBarActor:{build:ph.newInstance,update:ct}};function Bg(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&Ng(),Object.keys(Ag).forEach(e=>{const a=Ag[e];Uc(e,a.build,a.update)})}function Gc(){Object.keys(Vg).forEach(t=>{Vg[t].forEach(a=>{Fn[a]=Fn[t]})})}function fD(){Uc("vtkCamera",Dc.newInstance),Gc()}Bg(),Gc(),os.vtkPVLight={};var Ic={build:Ac,update:ss,genericUpdater:ct,oneTimeGenericUpdater:Rg,setTypeMapping:Uc,clearTypeMapping:Ng,getSupportedTypes:tD,clearOneTimeUpdaters:aD,updateRenderWindow:nD,excludeInstance:eD,setDefaultMapping:Bg,applyDefaultAliases:Gc,alwaysUpdateCamera:fD};const Ar={};function Ug(){const t={};let e=null;function a(o){e=o}function n(o,s,c){const l=t[o];return l?(l.mtimes[c.getActiveViewId()]=c.getMTime(),new Promise((p,u)=>{p(l.array)})):e?new Promise((p,u)=>{e(o).then(f=>{let h=f;if(typeof f=="string"&&(h=Rr.toArrayBuffer(f)),h instanceof Blob){const d=new FileReader;d.onload=()=>{const v=ar(s,d.result),m={[c.getActiveViewId()]:c.getMTime()};t[o]={mtimes:m,array:v},p(v)},d.readAsArrayBuffer(h)}else{const d=ar(s,h),v={[c.getActiveViewId()]:c.getMTime()};t[o]={mtimes:v,array:d},p(d)}},f=>{console.log("Error getting data array:"),console.log(f),u(f)})}):Promise.reject(new Error('No array fetcher found, please use "setArrayFetcher" to provide one'))}function r(){Object.keys(t).forEach(o=>{delete t[o]})}function i(o,s){const c=s.getMTime()-o;Object.keys(t).filter(l=>t[l].mtimes[s.getActiveViewId()]).filter(l=>t[l].mtimes[s.getActiveViewId()]<c).forEach(l=>{delete t[l]})}return{setFetchArrayFunction:a,getArray:n,emptyCachedArrays:r,freeOldArrays:i}}function Gg(){const t={};function e(o){return t[o]}function a(o){let s=null;return Object.keys(t).forEach(c=>{o===t[c]&&(s=c)}),s}function n(o,s){t[o]=s,s.set({remoteId:o},!0,!0)}function r(o){delete t[o]}function i(){Object.keys(t).forEach(o=>{delete t[o]})}return{getInstance:e,getInstanceId:a,registerInstance:n,unregisterInstance:r,emptyCachedInstances:i}}function Ig(){let t=0;const e={start(){t+=1,e.invokeProgressEvent(t)},end(){t-=1,e.invokeProgressEvent(t),t===0&&e.invokeProgressDone()},resetProgress(){t=0}},a={};return Hr(e,a,"progressEvent"),Hr(e,a,"progressDone"),e}function Pg(){const t={};let e="default";function a(o){return t[o||e]||1}function n(o){const s=o||e;t[s]||(t[s]=1),t[s]+=1}function r(o){e=o}function i(){return e}return{getMTime:a,incrementMTime:n,setActiveViewId:r,getActiveViewId:i}}function Pc(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",e=Ar[t];return e||(e={...Ug(),...Gg(),...Ig(),...Pg()},Ar[t]=e),e}function pD(t,e){Ar[t]=e}function hD(t){if(t&&Ar[t]&&delete Ar[t],!t){const e=Object.keys(Ar);for(let a=0;a<e.length;a++)delete Ar[e[a]]}}function zg(t,e){let a=-1,n=100;const r=u=>u.get("managedInstanceId").managedInstanceId,i=()=>wa(t,r);function o(){Ic.clearOneTimeUpdaters(i())}function s(u){t.set({synchronizedViewId:u},!0,!0)}function c(){return t.get("synchronizedViewId").synchronizedViewId}function l(u){n=u}function p(u){c()||s(u.id);const f=u.mtime||0;return c()===u.id&&a<f?new Promise((h,d)=>{const v=e.onProgressDone(()=>{v.unsubscribe(),t.render(),h(!0)});a=f,e.setActiveViewId(u.id),e.incrementMTime(),Ic.updateRenderWindow(t,u,e),e.freeOldArrays(n,e)}):Promise.resolve(!1)}return{synchronize:p,setSynchronizedViewId:s,getSynchronizedViewId:c,updateGarbageCollectorThreshold:l,getManagedInstanceIds:i,clearOneTimeUpdaters:o}}function gD(t,e){e.classHierarchy.push("vtkSynchronizableRenderWindow"),e.synchronizerContext||(e.synchronizerContext=Pc(e.synchronizerContextName));const a=zg(t,e.synchronizerContext);Object.keys(a).forEach(n=>{t[n]?t[n]=Gn(t[n],a[n]):t[n]=a[n]})}const dD={synchronizerContextName:"default",synchronizerContext:null,synchronizedViewId:null};function jg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dD,a),Ec.extend(t,e),At(t,e,["synchronizerContext"]),gD(t,e)}const vD=Je(jg,"vtkSynchronizableRenderWindow");function yD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default";const a=zg(t,Pc(e));return{...a,...t,delete:Gn(t.delete,a.delete)}}var Wg={newInstance:vD,extend:jg,getSynchronizerContext:Pc,setSynchronizerContext:pD,clearSynchronizerContext:hD,decorate:yD,createInstanceMap:Gg,createArrayHandler:Ug,createProgressHandler:Ig,createSceneMtimeHandler:Pg,vtkObjectManager:Ic};function mD(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=a=>{e.currentOperation=a,e.currentTraverseOperation=`traverse${V.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=n,e.preDelegateOperations.forEach(r=>{t.setCurrentOperation(r),a.traverse(t)}),e.delegates.forEach(r=>{r.traverse(a,t)}),e.postDelegateOperations.forEach(r=>{t.setCurrentOperation(r),a.traverse(t)}))}}const xD={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function $g(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xD,a),V.obj(t,e),V.get(t,e,["currentOperation"]),V.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),V.moveToProtected(t,e,["currentParent"]),mD(t,e)}var zc={newInstance:V.newInstance($g,"vtkRenderPass"),extend:$g};const{Representation:CD}=pr,{vtkErrorMacro:Hg}=V;function SD(t){const e=Q.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const TD=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function wD(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const a=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array([4,0,1,3,2]),i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const o=pe.newInstance({numberOfComponents:2,values:n});o.setName("tcoords");const s=pe.newInstance({numberOfComponents:1,values:r});e.tris.getCABO().createVBO(s,"polys",CD.SURFACE,{points:i,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=a=>{const n=a.getSize(),r=a.getContext();e.framebuffer=Er.newInstance(),e.framebuffer.setOpenGLRenderWindow(a),e.framebuffer.create(...n),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Re.newInstance(),e.translucentRGBATexture.setInternalFormat(r.RGBA16F),e.translucentRGBATexture.setFormat(r.RGBA),e.translucentRGBATexture.setOpenGLDataType(r.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(a),e.translucentRGBATexture.create2DFromRaw({width:n[0],height:n[1],numComps:4,dataType:"Float32Array",data:null}),e.translucentRTexture=Re.newInstance(),e.translucentRTexture.setInternalFormat(r.R16F),e.translucentRTexture.setFormat(r.RED),e.translucentRTexture.setOpenGLDataType(r.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(a),e.translucentRTexture.create2DFromRaw({width:n[0],height:n[1],numComps:1,dataType:"Float32Array",data:null}),e.translucentZTexture=Re.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(a),e.translucentZTexture.createDepthFromRaw({width:n[0],height:n[1],dataType:"Float32Array",data:null}),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=a=>{e.copyShader=a.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),TD,"")},t.createVBO=a=>{const n=a.getContext();e.tris.setOpenGLRenderWindow(a),t.createVertexBuffer();const r=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(r,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),n.FLOAT,3,n.FALSE)||Hg("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(r,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),n.FLOAT,2,n.FALSE)||Hg("Error setting vertexDC in copy shader VAO.")},t.traverse=(a,n,r)=>{if(e.deleted)return;const i=a.getSize(),o=a.getContext();if(e._supported=!1,n.getSelector()||!o||!a.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),n.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(a);else{const c=e.framebuffer.getSize();c===null||c[0]!==i[0]||c[1]!==i[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(a),e.translucentRTexture.releaseGraphicsResources(a),e.translucentZTexture.releaseGraphicsResources(a),t.createFramebuffer(a)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),r.getOpaqueActorCount()>0&&(r.setCurrentOperation("opaqueZBufferPass"),n.traverse(r)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),n.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(a):a.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=ja.newInstance(),e.copyVAO.setOpenGLRenderWindow(a)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(a),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const s=n.getTiledSizeAndOrigin();o.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),o.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize)},t.getShaderReplacement=()=>e._supported?SD:null,t.releaseGraphicsResources=a=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(a),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(a),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(a),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(a),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(a),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(a),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(a),e.tris=null),t.modified()}}const _D={framebuffer:null,copyShader:null,tris:null};function Kg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_D,a),zc.extend(t,e,a),e.VBOBuildTime={},V.obj(e.VBOBuildTime,{mtime:0}),e.tris=jt.newInstance(),V.get(t,e,["framebuffer"]),wD(t,e)}var ED={newInstance:V.newInstance(Kg,"vtkOpenGLOrderIndependentTranslucentPass"),extend:Kg};function DD(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=n,t.setCurrentOperation("buildPass"),a.traverse(t);const r=a.getRenderable().getNumberOfLayers(),i=a.getRenderable().getRenderersByReference();for(let o=0;o<r;o++)for(let s=0;s<i.length;s++){const c=i[s],l=a.getViewNodeFor(c);if(c.getDraw()&&c.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),l.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const p=a.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Er.newInstance()),e.framebuffer.setOpenGLRenderWindow(a),e.framebuffer.saveCurrentBindingsAndBuffers();const u=e.framebuffer.getSize();(u===null||u[0]!==p[0]||u[1]!==p[1])&&(e.framebuffer.create(p[0],p[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),l.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),l.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=ED.newInstance()),e.translucentPass.traverse(a,l,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),l.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),l.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const OD={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function Xg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OD,a),zc.extend(t,e,a),V.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),DD(t,e)}var bD={newInstance:V.newInstance(Xg,"vtkForwardPass"),extend:Xg},jc={},MD={get exports(){return jc},set exports(t){jc=t}};(function(t,e){(function(a){t.exports=a()})(function(a){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(x,y){var g=x[0],C=x[1],S=x[2],T=x[3];g+=(C&S|~C&T)+y[0]-680876936|0,g=(g<<7|g>>>25)+C|0,T+=(g&C|~g&S)+y[1]-389564586|0,T=(T<<12|T>>>20)+g|0,S+=(T&g|~T&C)+y[2]+606105819|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&g)+y[3]-1044525330|0,C=(C<<22|C>>>10)+S|0,g+=(C&S|~C&T)+y[4]-176418897|0,g=(g<<7|g>>>25)+C|0,T+=(g&C|~g&S)+y[5]+1200080426|0,T=(T<<12|T>>>20)+g|0,S+=(T&g|~T&C)+y[6]-1473231341|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&g)+y[7]-45705983|0,C=(C<<22|C>>>10)+S|0,g+=(C&S|~C&T)+y[8]+1770035416|0,g=(g<<7|g>>>25)+C|0,T+=(g&C|~g&S)+y[9]-1958414417|0,T=(T<<12|T>>>20)+g|0,S+=(T&g|~T&C)+y[10]-42063|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&g)+y[11]-1990404162|0,C=(C<<22|C>>>10)+S|0,g+=(C&S|~C&T)+y[12]+1804603682|0,g=(g<<7|g>>>25)+C|0,T+=(g&C|~g&S)+y[13]-40341101|0,T=(T<<12|T>>>20)+g|0,S+=(T&g|~T&C)+y[14]-1502002290|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&g)+y[15]+1236535329|0,C=(C<<22|C>>>10)+S|0,g+=(C&T|S&~T)+y[1]-165796510|0,g=(g<<5|g>>>27)+C|0,T+=(g&S|C&~S)+y[6]-1069501632|0,T=(T<<9|T>>>23)+g|0,S+=(T&C|g&~C)+y[11]+643717713|0,S=(S<<14|S>>>18)+T|0,C+=(S&g|T&~g)+y[0]-373897302|0,C=(C<<20|C>>>12)+S|0,g+=(C&T|S&~T)+y[5]-701558691|0,g=(g<<5|g>>>27)+C|0,T+=(g&S|C&~S)+y[10]+38016083|0,T=(T<<9|T>>>23)+g|0,S+=(T&C|g&~C)+y[15]-660478335|0,S=(S<<14|S>>>18)+T|0,C+=(S&g|T&~g)+y[4]-405537848|0,C=(C<<20|C>>>12)+S|0,g+=(C&T|S&~T)+y[9]+568446438|0,g=(g<<5|g>>>27)+C|0,T+=(g&S|C&~S)+y[14]-1019803690|0,T=(T<<9|T>>>23)+g|0,S+=(T&C|g&~C)+y[3]-187363961|0,S=(S<<14|S>>>18)+T|0,C+=(S&g|T&~g)+y[8]+1163531501|0,C=(C<<20|C>>>12)+S|0,g+=(C&T|S&~T)+y[13]-1444681467|0,g=(g<<5|g>>>27)+C|0,T+=(g&S|C&~S)+y[2]-51403784|0,T=(T<<9|T>>>23)+g|0,S+=(T&C|g&~C)+y[7]+1735328473|0,S=(S<<14|S>>>18)+T|0,C+=(S&g|T&~g)+y[12]-1926607734|0,C=(C<<20|C>>>12)+S|0,g+=(C^S^T)+y[5]-378558|0,g=(g<<4|g>>>28)+C|0,T+=(g^C^S)+y[8]-2022574463|0,T=(T<<11|T>>>21)+g|0,S+=(T^g^C)+y[11]+1839030562|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^g)+y[14]-35309556|0,C=(C<<23|C>>>9)+S|0,g+=(C^S^T)+y[1]-1530992060|0,g=(g<<4|g>>>28)+C|0,T+=(g^C^S)+y[4]+1272893353|0,T=(T<<11|T>>>21)+g|0,S+=(T^g^C)+y[7]-155497632|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^g)+y[10]-1094730640|0,C=(C<<23|C>>>9)+S|0,g+=(C^S^T)+y[13]+681279174|0,g=(g<<4|g>>>28)+C|0,T+=(g^C^S)+y[0]-358537222|0,T=(T<<11|T>>>21)+g|0,S+=(T^g^C)+y[3]-722521979|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^g)+y[6]+76029189|0,C=(C<<23|C>>>9)+S|0,g+=(C^S^T)+y[9]-640364487|0,g=(g<<4|g>>>28)+C|0,T+=(g^C^S)+y[12]-421815835|0,T=(T<<11|T>>>21)+g|0,S+=(T^g^C)+y[15]+530742520|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^g)+y[2]-995338651|0,C=(C<<23|C>>>9)+S|0,g+=(S^(C|~T))+y[0]-198630844|0,g=(g<<6|g>>>26)+C|0,T+=(C^(g|~S))+y[7]+1126891415|0,T=(T<<10|T>>>22)+g|0,S+=(g^(T|~C))+y[14]-1416354905|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~g))+y[5]-57434055|0,C=(C<<21|C>>>11)+S|0,g+=(S^(C|~T))+y[12]+1700485571|0,g=(g<<6|g>>>26)+C|0,T+=(C^(g|~S))+y[3]-1894986606|0,T=(T<<10|T>>>22)+g|0,S+=(g^(T|~C))+y[10]-1051523|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~g))+y[1]-2054922799|0,C=(C<<21|C>>>11)+S|0,g+=(S^(C|~T))+y[8]+1873313359|0,g=(g<<6|g>>>26)+C|0,T+=(C^(g|~S))+y[15]-30611744|0,T=(T<<10|T>>>22)+g|0,S+=(g^(T|~C))+y[6]-1560198380|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~g))+y[13]+1309151649|0,C=(C<<21|C>>>11)+S|0,g+=(S^(C|~T))+y[4]-145523070|0,g=(g<<6|g>>>26)+C|0,T+=(C^(g|~S))+y[11]-1120210379|0,T=(T<<10|T>>>22)+g|0,S+=(g^(T|~C))+y[2]+718787259|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~g))+y[9]-343485551|0,C=(C<<21|C>>>11)+S|0,x[0]=g+x[0]|0,x[1]=C+x[1]|0,x[2]=S+x[2]|0,x[3]=T+x[3]|0}function i(x){var y=[],g;for(g=0;g<64;g+=4)y[g>>2]=x.charCodeAt(g)+(x.charCodeAt(g+1)<<8)+(x.charCodeAt(g+2)<<16)+(x.charCodeAt(g+3)<<24);return y}function o(x){var y=[],g;for(g=0;g<64;g+=4)y[g>>2]=x[g]+(x[g+1]<<8)+(x[g+2]<<16)+(x[g+3]<<24);return y}function s(x){var y=x.length,g=[1732584193,-271733879,-1732584194,271733878],C,S,T,w,_,E;for(C=64;C<=y;C+=64)r(g,i(x.substring(C-64,C)));for(x=x.substring(C-64),S=x.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<S;C+=1)T[C>>2]|=x.charCodeAt(C)<<(C%4<<3);if(T[C>>2]|=128<<(C%4<<3),C>55)for(r(g,T),C=0;C<16;C+=1)T[C]=0;return w=y*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,T[14]=_,T[15]=E,r(g,T),g}function c(x){var y=x.length,g=[1732584193,-271733879,-1732584194,271733878],C,S,T,w,_,E;for(C=64;C<=y;C+=64)r(g,o(x.subarray(C-64,C)));for(x=C-64<y?x.subarray(C-64):new Uint8Array(0),S=x.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<S;C+=1)T[C>>2]|=x[C]<<(C%4<<3);if(T[C>>2]|=128<<(C%4<<3),C>55)for(r(g,T),C=0;C<16;C+=1)T[C]=0;return w=y*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,T[14]=_,T[15]=E,r(g,T),g}function l(x){var y="",g;for(g=0;g<4;g+=1)y+=n[x>>g*8+4&15]+n[x>>g*8&15];return y}function p(x){var y;for(y=0;y<x.length;y+=1)x[y]=l(x[y]);return x.join("")}p(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function x(y,g){return y=y|0||0,y<0?Math.max(y+g,0):Math.min(y,g)}ArrayBuffer.prototype.slice=function(y,g){var C=this.byteLength,S=x(y,C),T=C,w,_,E,D;return g!==a&&(T=x(g,C)),S>T?new ArrayBuffer(0):(w=T-S,_=new ArrayBuffer(w),E=new Uint8Array(_),D=new Uint8Array(this,S,w),E.set(D),_)}}();function u(x){return/[\u0080-\uFFFF]/.test(x)&&(x=unescape(encodeURIComponent(x))),x}function f(x,y){var g=x.length,C=new ArrayBuffer(g),S=new Uint8Array(C),T;for(T=0;T<g;T+=1)S[T]=x.charCodeAt(T);return y?S:C}function h(x){return String.fromCharCode.apply(null,new Uint8Array(x))}function d(x,y,g){var C=new Uint8Array(x.byteLength+y.byteLength);return C.set(new Uint8Array(x)),C.set(new Uint8Array(y),x.byteLength),g?C:C.buffer}function v(x){var y=[],g=x.length,C;for(C=0;C<g-1;C+=2)y.push(parseInt(x.substr(C,2),16));return String.fromCharCode.apply(String,y)}function m(){this.reset()}return m.prototype.append=function(x){return this.appendBinary(u(x)),this},m.prototype.appendBinary=function(x){this._buff+=x,this._length+=x.length;var y=this._buff.length,g;for(g=64;g<=y;g+=64)r(this._hash,i(this._buff.substring(g-64,g)));return this._buff=this._buff.substring(g-64),this},m.prototype.end=function(x){var y=this._buff,g=y.length,C,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T;for(C=0;C<g;C+=1)S[C>>2]|=y.charCodeAt(C)<<(C%4<<3);return this._finish(S,g),T=p(this._hash),x&&(T=v(T)),this.reset(),T},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(x){return this._buff=x.buff,this._length=x.length,this._hash=x.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(x,y){var g=y,C,S,T;if(x[g>>2]|=128<<(g%4<<3),g>55)for(r(this._hash,x),g=0;g<16;g+=1)x[g]=0;C=this._length*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(C[2],16),T=parseInt(C[1],16)||0,x[14]=S,x[15]=T,r(this._hash,x)},m.hash=function(x,y){return m.hashBinary(u(x),y)},m.hashBinary=function(x,y){var g=s(x),C=p(g);return y?v(C):C},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(x){var y=d(this._buff.buffer,x,!0),g=y.length,C;for(this._length+=x.byteLength,C=64;C<=g;C+=64)r(this._hash,o(y.subarray(C-64,C)));return this._buff=C-64<g?new Uint8Array(y.buffer.slice(C-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(x){var y=this._buff,g=y.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S,T;for(S=0;S<g;S+=1)C[S>>2]|=y[S]<<(S%4<<3);return this._finish(C,g),T=p(this._hash),x&&(T=v(T)),this.reset(),T},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var x=m.prototype.getState.call(this);return x.buff=h(x.buff),x},m.ArrayBuffer.prototype.setState=function(x){return x.buff=f(x.buff,!0),m.prototype.setState.call(this,x)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(x,y){var g=c(new Uint8Array(x)),C=p(g);return y?v(C):C},m})})(MD);const ND=jc,RD=["lastShaderProgramBound","context","_openGLRenderWindow"];function LD(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(a,n,r)=>{let i=n;r.length>0&&(i=Q.substitute(i,"VSOut","GSOut").result);const o=e._openGLRenderWindow.getWebgl2();let s=`
`,c=`#version 100
`;o?c=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(s=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(s+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),i=Q.substitute(i,"//VTK::System::Dec",[`${c}
`,o?"":`#extension GL_OES_standard_derivatives : enable
`,s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=Q.substitute(a,"//VTK::System::Dec",[`${c}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){l=Q.substitute(l,"varying","out").result,i=Q.substitute(i,"varying","in").result;let u="",f=0;for(;i.includes(`gl_FragData[${f}]`);)i=Q.substitute(i,`gl_FragData\\[${f}\\]`,`fragOutput${f}`).result,u+=`layout(location = ${f}) out vec4 fragOutput${f};
`,f++;i=Q.substitute(i,"//VTK::Output::Dec",u).result}const p=Q.substitute(r,"//VTK::System::Dec",c).result;return{VSSource:l,FSSource:i,GSSource:p}},t.readyShaderProgramArray=(a,n,r)=>{const i=t.replaceShaderValues(a,n,r),o=t.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=a=>!a||!a.getCompiled()&&!a.compileShader()||!t.bindShaderProgram(a)?null:a,t.getShaderProgram=(a,n,r)=>{const i=`${a}${n}${r}`,o=ND.hash(i);if(!(o in e.shaderPrograms)){const s=Q.newInstance();return s.setContext(e.context),s.getVertexShader().setSource(a),s.getFragmentShader().setSource(n),r&&s.getGeometryShader().setSource(r),s.setMd5Hash(o),e.shaderPrograms[o]=s,s}return e.shaderPrograms[o]},t.releaseGraphicsResources=a=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(n=>e.shaderPrograms[n]).forEach(n=>n.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=a=>(e.lastShaderProgramBound===a||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),a.bind(),e.lastShaderProgramBound=a),1)}const FD={lastShaderProgramBound:null,shaderPrograms:null,context:null};function qg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FD,a),e.shaderPrograms={},V.obj(t,e),V.setGet(t,e,RD),V.moveToProtected(t,e,["openGLRenderWindow"]),LD(t,e)}var kD={newInstance:V.newInstance(qg,"vtkShaderCache"),extend:qg};const{vtkErrorMacro:VD}=V;function AD(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let a=0;a<e.numberOfTextureUnits;++a)e.textureUnits[a]===!0&&VD("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=a=>{if(e.context!==a){if(e.context!==0&&t.deleteTable(),e.context=a,e.context){e.numberOfTextureUnits=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}t.modified()}},t.allocate=()=>{for(let a=0;a<e.numberOfTextureUnits;a++)if(!t.isAllocated(a))return e.textureUnits[a]=!0,a;return-1},t.allocateUnit=a=>t.isAllocated(a)?-1:(e.textureUnits[a]=!0,a),t.isAllocated=a=>e.textureUnits[a],t.free=a=>{e.textureUnits[a]=!1},t.freeAll=()=>{for(let a=0;a<e.numberOfTextureUnits;++a)e.textureUnits[a]=!1}}const BD={context:null,numberOfTextureUnits:0,textureUnits:0};function Yg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BD,a),V.obj(t,e),e.textureUnits=[],V.get(t,e,["numberOfTextureUnits"]),V.setGet(t,e,["context"]),AD(t,e)}var UD={newInstance:V.newInstance(Yg,"vtkOpenGLTextureUnitManager"),extend:Yg};function GD(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=a=>{const n=a.getViewportByReference();return e.size[0]*(n[2]-n[0])/((n[3]-n[1])*e.size[1])},t.isInViewport=(a,n,r)=>{const i=r.getViewportByReference(),o=t.getFramebufferSize();return i[0]*o[0]<=a&&i[2]*o[0]>=a&&i[1]*o[1]<=n&&i[3]*o[1]>=n},t.getViewportSize=a=>{const n=a.getViewportByReference(),r=t.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},t.getViewportCenter=a=>{const n=t.getViewportSize(a);return[n[0]*.5,n[1]*.5]},t.displayToNormalizedDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a/i[0],n/i[1],r]},t.normalizedDisplayToDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a*i[0],n*i[1],r]},t.worldToView=(a,n,r,i)=>i.worldToView(a,n,r),t.viewToWorld=(a,n,r,i)=>i.viewToWorld(a,n,r),t.worldToDisplay=(a,n,r,i)=>{const o=i.worldToView(a,n,r),s=t.getViewportSize(i),c=i.viewToProjection(o[0],o[1],o[2],s[0]/s[1]),l=i.projectionToNormalizedDisplay(c[0],c[1],c[2]);return t.normalizedDisplayToDisplay(l[0],l[1],l[2])},t.displayToWorld=(a,n,r,i)=>{const o=t.displayToNormalizedDisplay(a,n,r),s=i.normalizedDisplayToProjection(o[0],o[1],o[2]),c=t.getViewportSize(i),l=i.projectionToView(s[0],s[1],s[2],c[0]/c[1]);return i.viewToWorld(l[0],l[1],l[2])},t.normalizedDisplayToViewport=(a,n,r,i)=>{let o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=t.normalizedDisplayToDisplay(a,n,r);return[s[0]-o[0]-.5,s[1]-o[1]-.5,r]},t.viewportToNormalizedViewport=(a,n,r,i)=>{const o=t.getViewportSize(i);return o&&o[0]!==0&&o[1]!==0?[a/(o[0]-1),n/(o[1]-1),r]:[a,n,r]},t.normalizedViewportToViewport=(a,n,r,i)=>{const o=t.getViewportSize(i);return[a*(o[0]-1),n*(o[1]-1),r]},t.displayToLocalDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a,i[1]-n-1,r]},t.viewportToNormalizedDisplay=(a,n,r,i)=>{let o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=a+o[0]+.5,c=n+o[1]+.5;return t.displayToNormalizedDisplay(s,c,r)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{V.vtkErrorMacro("not implemented")},t.getPixelData=(a,n,r,i)=>{V.vtkErrorMacro("not implemented")},t.createSelector=()=>{V.vtkErrorMacro("not implemented")}}const ID={size:void 0,selector:void 0};function Jg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ID,a),e.size||(e.size=[300,300]),V.getArray(t,e,["size"],2),V.get(t,e,["selector"]),Ct.extend(t,e,a),GD(t,e)}var PD={newInstance:V.newInstance(Jg,"vtkRenderWindowViewNode"),extend:Jg};const Zg="__getUnderlyingContext";function zD(){const t=new Map,e={apply(r,i,o){return t.has(o[0])?t.get(o[0]):r.apply(i,o)}};function a(r){return{apply(i,o,s){return t.set(r,s[0]),i.apply(o,s)}}}const n=Object.create(null);return n.getParameter=(r,i,o,s)=>new Proxy(s.bind(r),e),n.depthMask=(r,i,o,s)=>new Proxy(s.bind(r),a(r.DEPTH_WRITEMASK)),{get(r,i,o){if(i===Zg)return()=>r;let s=Reflect.get(r,i,r);s instanceof Function&&(s=s.bind(r));const c=n[i];return c?c(r,i,o,s):s}}}const{vtkDebugMacro:Qg,vtkErrorMacro:ed}=V,jD={position:"absolute",top:0,left:0,width:"100%",height:"100%"},WD=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function Lt(t,e,a){const n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,a,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),i===t.FRAMEBUFFER_COMPLETE}let cs=0;const us=[];function $D(){cs++,us.forEach(t=>t(cs))}function HD(){cs--,us.forEach(t=>t(cs))}function KD(t){us.push(t)}function XD(t){return us.pop()}function td(t){t.preventDefault()}function qD(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let a;function n(){return a||(a=zD()),a}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",td,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const r=[0,0];function i(){e.renderable&&(e.size[0]!==r[0]||e.size[1]!==r[1])&&(r[0]=e.size[0],r[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(i),t.buildPass=u=>{if(u){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(f=>{var h;(h=f.setOpenGLRenderWindow)==null||h.call(f,t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&$D(),e.textureUnitManager=UD.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const u=e.context;u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA),u.depthFunc(u.LEQUAL),u.enable(u.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=u=>{e.el&&e.el!==u&&(e.canvas.parentNode!==e.el&&ed("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==u&&(e.el=u,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:u,height:f}=e.el.getBoundingClientRect();e.containerSize=[u,f]}return e.containerSize||e.size},t.getFramebufferSize=()=>{var f;return((f=e.activeFramebuffer)==null?void 0:f.getSize())||e.size},t.getPixelData=(u,f,h,d)=>{const v=new Uint8Array((h-u+1)*(d-f+1)*4);return e.context.readPixels(u,f,h-u+1,d-f+1,e.context.RGBA,e.context.UNSIGNED_BYTE,v),v},t.get3DContext=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},f=null;const h=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&h&&(f=e.canvas.getContext("webgl2",u),f&&(e.webgl2=!0,Qg("using webgl2"))),f||(Qg("using webgl1"),f=e.canvas.getContext("webgl",u)||e.canvas.getContext("experimental-webgl",u)),new Proxy(f,n())},t.get2DContext=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",u)},t.restoreContext=()=>{const u=zc.newInstance();u.setCurrentOperation("Release"),u.traverse(t,null)},t.activateTexture=u=>{const f=e._textureResourceIds.get(u);if(f!==void 0){e.context.activeTexture(e.context.TEXTURE0+f);return}const h=t.getTextureUnitManager().allocate();if(h<0){ed("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(u,h),e.context.activeTexture(e.context.TEXTURE0+h)},t.deactivateTexture=u=>{const f=e._textureResourceIds.get(u);f!==void 0&&(t.getTextureUnitManager().free(f),e._textureResourceIds.delete(u))},t.getTextureUnitForTexture=u=>{const f=e._textureResourceIds.get(u);return f!==void 0?f:-1},t.getDefaultTextureByteSize=function(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(u){case Ne.CHAR:case Ne.SIGNED_CHAR:case Ne.UNSIGNED_CHAR:return 1;case f:case h:case Ne.UNSIGNED_SHORT:case Ne.SHORT:case Ne.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(u,f){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(u){case Ne.UNSIGNED_CHAR:switch(f){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(h&&!d&&Ne.UNSIGNED_SHORT):switch(f){case 1:return h.R16_EXT;case 2:return h.RG16_EXT;case 3:return h.RGB16_EXT;case 4:default:return h.RGBA16_EXT}case(h&&!d&&Ne.SHORT):switch(f){case 1:return h.R16_SNORM_EXT;case 2:return h.RG16_SNORM_EXT;case 3:return h.RGB16_SNORM_EXT;case 4:default:return h.RGBA16_SNORM_EXT}case Ne.UNSIGNED_SHORT:case Ne.SHORT:case Ne.FLOAT:default:switch(f){case 1:return d?e.context.R16F:e.context.R32F;case 2:return d?e.context.RG16F:e.context.RG32F;case 3:return d?e.context.RGB16F:e.context.RGB32F;case 4:default:return d?e.context.RGBA16F:e.context.RGBA32F}}switch(f){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=u=>{e.bgImage.src=u.src},t.setUseBackgroundImage=u=>{e.useBackgroundImage=u,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function o(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const f=document.createElement("canvas"),h=f.getContext("2d");f.width=e.canvas.width,f.height=e.canvas.height,h.drawImage(e.canvas,0,0);const d=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(y=>{y.getViewProps().forEach(C=>{if(C.getContainer){const T=C.getContainer().getElementsByTagName("canvas");for(let w=0;w<T.length;w++){const _=T[w],E=_.getBoundingClientRect(),D=E.x-d.x,O=E.y-d.y;h.drawImage(_,D,O)}}})});const x=f.toDataURL(u);f.remove(),t.invokeImageReady(x)}t.captureNextImage=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:f=!1,size:h=null,scale:d=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=u;const v=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:h||d!==1?h||e.size.map(m=>m*d):null},new Promise((m,x)=>{const y=t.onImageReady(g=>{var C;if(e._screenshot.size===null)e.notifyStartCaptureImage=v,y.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(S=>{let{restoreParamsFn:T,arg:w}=S;return T(w)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),m(g);else{const S=document.createElement("img");if(S.style=jD,S.src=g,e._screenshot.placeHolder=e.el.appendChild(S),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,(C=e.rootOpenGLRenderWindow)==null||C.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),f){const T=f!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(w=>{const _=w.getActiveCamera(),E=_.get("focalPoint","position","parallelScale");return{resetCameraArgs:T?{renderer:w}:void 0,resetCameraFn:T?f:w.resetCamera,restoreParamsFn:_.set,arg:JSON.parse(JSON.stringify(E))}}),e._screenshot.cameras.forEach(w=>{let{resetCameraFn:_,resetCameraArgs:E}=w;return _(E)})}t.traverseAllPasses()}})})};let s;t.getHardwareMaximumLineWidth=()=>{if(s!=null)return s;const u=t.get3DContext(),f=u.getParameter(u.ALIASED_LINE_WIDTH_RANGE);return s=f[1],f[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const u=t.get3DContext(),f=u.getExtension("OES_texture_float"),h=u.getExtension("OES_texture_half_float"),d=u.getExtension("WEBGL_debug_renderer_info"),v=u.getExtension("WEBGL_draw_buffers"),m=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),x=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",u.getParameter(u.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",u.getParameter(u.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",u.getParameter(u.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",u.getParameter(u.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",u.getParameter(u.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",u.getParameter(u.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",u.getParameter(u.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",m&&u.getParameter(m.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",u.getParameter(u.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",u.getParameter(u.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",u.getParameter(u.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",u.getParameter(u.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",u.getParameter(u.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",u.getParameter(u.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",u.getParameter(u.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",u.getParameter(u.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",u.getParameter(u.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",u.getParameter(u.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",u.getParameter(u.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",u.getParameter(u.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",u.getParameter(u.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[f&&Lt(u,u.RGBA,u.UNSIGNED_BYTE)?"RGBA":"",f&&Lt(u,u.RGB,u.UNSIGNED_BYTE)?"RGB":"",f&&Lt(u,u.LUMINANCE,u.UNSIGNED_BYTE)?"LUMINANCE":"",f&&Lt(u,u.ALPHA,u.UNSIGNED_BYTE)?"ALPHA":"",f&&Lt(u,u.LUMINANCE_ALPHA,u.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[h&&Lt(u,u.RGBA,h.HALF_FLOAT_OES)?"RGBA":"",h&&Lt(u,u.RGB,h.HALF_FLOAT_OES)?"RGB":"",h&&Lt(u,u.LUMINANCE,h.HALF_FLOAT_OES)?"LUMINANCE":"",h&&Lt(u,u.ALPHA,h.HALF_FLOAT_OES)?"ALPHA":"",h&&Lt(u,u.LUMINANCE_ALPHA,h.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[f&&Lt(u,u.RGBA,u.FLOAT)?"RGBA":"",f&&Lt(u,u.RGB,u.FLOAT)?"RGB":"",f&&Lt(u,u.LUMINANCE,u.FLOAT)?"LUMINANCE":"",f&&Lt(u,u.ALPHA,u.FLOAT)?"ALPHA":"",f&&Lt(u,u.LUMINANCE_ALPHA,u.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",v?u.getParameter(v.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_FLOAT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_INT).precision," (-2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_INT).rangeMin,"</sup> - 2<sup>",u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",u.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",u.getParameter(u.RENDERER)],["WebGL Vendor","VENDOR",u.getParameter(u.VENDOR)],["WebGL Version","VERSION",u.getParameter(u.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",u.getParameter(u.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",d&&u.getParameter(d.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",d&&u.getParameter(d.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],y={};for(;x.length;){const[g,C,S]=x.pop();C&&(y[C]={label:g,value:S})}return e._glInformation=y,y},t.traverseAllPasses=()=>{var f;if(e.renderPasses)for(let h=0;h<e.renderPasses.length;++h)e.renderPasses[h].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&o();const u=e.renderable.getChildRenderWindowsByReference();for(let h=0;h<u.length;++h)(f=t.getViewNodeFor(u[h]))==null||f.traverseAllPasses()},t.copyParentContent=()=>{const u=e.rootOpenGLRenderWindow;if(!u||!e.context2D||e.children.some(d=>{var v;return!!((v=d.getSelector)!=null&&v.call(d))}))return;const f=u.getCanvas(),h=e.canvas;e.context2D.drawImage(f,0,f.height-h.height,h.width,h.height,0,0,h.width,h.height)},t.resizeFromChildRenderWindows=()=>{var f;const u=e.renderable.getChildRenderWindowsByReference();if(u.length>0){const h=[0,0];for(let d=0;d<u.length;++d){const v=(f=t.getViewNodeFor(u[d]))==null?void 0:f.getSize();v&&(h[0]=v[0]>h[0]?v[0]:h[0],h[1]=v[1]>h[1]?v[1]:h[1])}t.setSize(...h)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=u=>{if(e.viewStream===u)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=u,e.viewStream){const f=e.renderable.getRenderers()[0];f.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(h=>t.setBackgroundImage(h.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const u=Xa.newInstance();return u.setOpenGLRenderWindow(t),u};function c(){e.canvas.removeEventListener("webglcontextlost",td),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=V.chain(()=>{e.context&&HD(),t.setContainer(),t.setViewStream()},c,t.delete),t.setActiveFramebuffer=u=>{e.activeFramebuffer=u};const l=t.setSize;t.setSize=(u,f)=>{const h=l(u,f);return h&&t.invokeWindowResizeEvent({width:u,height:f}),h},t.registerGraphicsResourceUser=(u,f)=>{e._graphicsResources.has(u)||t.setGraphicsResourceForObject(u,null,null);const h=e._graphicsResources.get(u);h==null||h.users.add(f)},t.unregisterGraphicsResourceUser=(u,f)=>{var d;const h=e._graphicsResources.get(u);h&&(h.users.delete(f),h.users.size||((d=h.oglObject)==null||d.releaseGraphicsResources(t),e._graphicsResources.delete(u)))},t.getGraphicsResourceForObject=u=>e._graphicsResources.get(u),t.setGraphicsResourceForObject=(u,f,h)=>{var v;if(!u)return;const d=e._graphicsResources.get(u);(v=d==null?void 0:d.oglObject)==null||v.releaseGraphicsResources(t),e._graphicsResources.set(u,{coreObject:u,oglObject:f,hash:h,users:(d==null?void 0:d.users)??new Set})},t.getGraphicsMemoryInfo=()=>{let u=0;return e._graphicsResources.forEach(f=>{let{oglObject:h}=f;u+=h.getAllocatedGPUMemoryInBytes()}),u},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(u=>{let{oglObject:f}=u;f.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(u=>{const f=t.getViewNodeFor(u);f==null||f.releaseGraphicsResources()})};const p={...t};WD.forEach(u=>{t[u]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[u](...arguments):p[u](...arguments)}})}const YD={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function nd(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YD,a),PD.extend(t,e,a),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=Xa.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=H3.newInstance(),e.shaderCache=kD.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=bD.newInstance(),V.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),V.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),V.setGetArray(t,e,["size"],2),V.event(t,e,"imageReady"),V.event(t,e,"windowResizeEvent"),qD(t,e)}const Wc=V.newInstance(nd,"vtkOpenGLRenderWindow");Q1("WebGL",Wc);var rd={newInstance:Wc,extend:nd,pushMonitorGLContextCount:KD,popMonitorGLContextCount:XD};st("vtkRenderWindow",Wc);function JD(t,e){e.classHierarchy.push("vtkCompositeCameraManipulator"),t.computeDisplayCenter=(a,n)=>{const r=a.computeWorldToDisplay(n,e.center[0],e.center[1],e.center[2]);e.displayCenter[0]=r[0],e.displayCenter[1]=r[1]}}const ZD={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};function QD(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZD,a),V.setGet(t,e,["rotationFactor"]),V.setGetArray(t,e,["displayCenter"],2),V.setGetArray(t,e,["center"],3),JD(t,e)}var ha={extend:QD};function eO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");const a=new Float64Array(3),n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=(l,p,u)=>{e.previousPosition=u},t.onMouseMove=(l,p,u)=>{if(!u)return;const f=p.getActiveCamera(),h=f.getPosition(),d=f.getFocalPoint();Te(i);const{center:v,rotationFactor:m}=e;e.useFocalPointAsCenterOfRotation&&(v[0]=d[0],v[1]=d[1],v[2]=d[2]);const x=e.previousPosition.x-u.x,y=e.previousPosition.y-u.y,g=l.getView().getViewportSize(p),C=f.getViewUp();if(e.useWorldUpVec){const S=new Float64Array(3);Si(S,e.worldUpVec),Js(S,xe(h,e.worldUpVec)/xe(e.worldUpVec,e.worldUpVec)),ur(v,S,S),Ye(i,i,S),mt(i,i,Qe(360*x/g[0]*m),e.worldUpVec),S[0]=-S[0],S[1]=-S[1],S[2]=-S[2],Ye(i,i,S),Ye(i,i,v)}else Ye(i,i,v),mt(i,i,Qe(360*x/g[0]*m),C);et(f.getDirectionOfProjection(),C,o),mt(i,i,Qe(-360*y/g[1]*m),o),s[0]=-v[0],s[1]=-v[1],s[2]=-v[2],Ye(i,i,s),_e(a,h,i),_e(n,d,i),c[0]=C[0]+h[0],c[1]=C[1]+h[1],c[2]=C[2]+h[2],_e(r,c,i),f.setPosition(a[0],a[1],a[2]),f.setFocalPoint(n[0],n[1],n[2]),f.setViewUp(r[0]-a[0],r[1]-a[1],r[2]-a[2]),f.orthogonalizeViewUp(),p.resetCameraClippingRange(),l.getLightFollowCamera()&&p.updateLightsGeometryToFollowCamera(),e.previousPosition=u}}const tO={useWorldUpVec:!1,worldUpVec:[0,1,0],useFocalPointAsCenterOfRotation:!1};function ad(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tO,a),V.obj(t,e),pa.extend(t,e,a),ha.extend(t,e,a),V.setGet(t,e,["useWorldUpVec"]),V.setGetArray(t,e,["worldUpVec"],3),V.setGet(t,e,["useFocalPointAsCenterOfRotation"]),eO(t,e)}var id={newInstance:V.newInstance(ad,"vtkMouseCameraTrackballRotateManipulator"),extend:ad};function nO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");const a=new Float64Array(3),n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=(l,p,u)=>{e.previousPosition=u},t.onMouseMove=(l,p,u)=>{if(!u)return;const f=p.getActiveCamera(),h=f.getPosition(),d=f.getFocalPoint(),v=f.getViewUp();a[0]=d[0]-h[0],a[1]=d[1]-h[1],a[2]=d[2]-h[2],t.computeDisplayCenter(l.getInteractorStyle(),p);const m=e.previousPosition.x-e.displayCenter[0],x=u.x-e.displayCenter[0],y=e.previousPosition.y-e.displayCenter[1],g=u.y-e.displayCenter[1];if(x===0&&g===0||m===0&&y===0)return;const C=Ra((m*g-y*x)/(Math.sqrt(m*m+y*y)*Math.sqrt(x*x+g*g))),{center:S}=e;Te(i),r[0]=-S[0],r[1]=-S[1],r[2]=-S[2],Ye(i,i,S),mt(i,i,Qe(C),a),Ye(i,i,r),_e(o,h,i),_e(s,d,i),n[0]=v[0]+h[0],n[1]=v[1]+h[1],n[2]=v[2]+h[2],_e(c,n,i),f.setPosition(o[0],o[1],o[2]),f.setFocalPoint(s[0],s[1],s[2]),f.setViewUp(c[0]-o[0],c[1]-o[1],c[2]-o[2]),f.orthogonalizeViewUp(),p.resetCameraClippingRange(),l.getLightFollowCamera()&&p.updateLightsGeometryToFollowCamera(),e.previousPosition=u}}const rO={};function od(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rO,a),V.obj(t,e),ha.extend(t,e,a),pa.extend(t,e,a),nO(t,e)}var sd={newInstance:V.newInstance(od,"vtkMouseCameraTrackballRollManipulator"),extend:od};function aO(t,e){return t<e?e:t}function cd(t){return t*t}function iO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");const a=id.newInstance(),n=sd.newInstance();let r=null;t.onButtonDown=(i,o,s)=>{const c=i.getView().getViewportSize(o),l=[.5*c[0],.5*c[1]],p=.9*aO(l[0],l[1]),u=cd(l[0]-s.x)+cd(l[1]-s.y);p*p>u?r=a:r=n,r.setButton(t.getButton()),r.setShift(t.getShift()),r.setControl(t.getControl()),r.setCenter(t.getCenter()),r.onButtonDown(i,s)},t.onButtonUp=i=>{r&&r.onButtonUp(i)},t.onMouseMove=(i,o,s)=>{r&&r.onMouseMove(i,o,s)}}const oO={};function ud(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oO,a),V.obj(t,e),pa.extend(t,e,a),ha.extend(t,e,a),iO(t,e)}var sO={newInstance:V.newInstance(ud,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:ud};function cO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),t.onButtonDown=(a,n,r)=>{e.previousPosition=r},t.onMouseMove=(a,n,r)=>{if(!r)return;const i=r,o=e.previousPosition;e.previousPosition=r;const s=n.getActiveCamera(),c=s.getPosition(),l=s.getFocalPoint();if(s.getParallelProjection()){s.orthogonalizeViewUp();const p=s.getViewUp(),u=s.getViewPlaneNormal(),f=[0,0,0];et(u,p,f);const h=a.getView().getViewportSize(n)[1];let d=(i.x-o.x)/h,v=(o.y-i.y)/h;const m=s.getParallelScale();d*=m*2,v*=m*2;let x=f[0]*d+p[0]*v;c[0]+=x,l[0]+=x,x=f[1]*d+p[1]*v,c[1]+=x,l[1]+=x,x=f[2]*d+p[2]*v,c[2]+=x,l[2]+=x,s.setPosition(c[0],c[1],c[2]),s.setFocalPoint(l[0],l[1],l[2])}else{const{center:p}=e,u=a.getInteractorStyle(),f=u.computeWorldToDisplay(n,p[0],p[1],p[2])[2],h=u.computeDisplayToWorld(n,i.x,i.y,f),d=u.computeDisplayToWorld(n,o.x,o.y,f),v=[c[0]+(d[0]-h[0]),c[1]+(d[1]-h[1]),c[2]+(d[2]-h[2])],m=[l[0]+(d[0]-h[0]),l[1]+(d[1]-h[1]),l[2]+(d[2]-h[2])];s.setPosition(v[0],v[1],v[2]),s.setFocalPoint(m[0],m[1],m[2])}n.resetCameraClippingRange(),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const uO={};function ld(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uO,a),V.obj(t,e),ha.extend(t,e,a),pa.extend(t,e,a),cO(t,e)}var lO={newInstance:V.newInstance(ld,"vtkMouseCameraTrackballPanManipulator"),extend:ld};function fO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),t.onButtonDown=(a,n,r)=>{e.previousPosition=r;const i=a.getView().getViewportSize(n),o=n.getActiveCamera(),s=e.flipDirection?-1:1;if(o.getParallelProjection())e.zoomScale=1.5/i[1]*s;else{const c=o.getClippingRange();e.zoomScale=1.5*(c[1]/i[1])*s}},t.onMouseMove=(a,n,r)=>{if(!r)return;const i=e.previousPosition.y-r.y,o=n.getActiveCamera();if(o.getParallelProjection()){const s=i*e.zoomScale;o.setParallelScale((1-s)*o.getParallelScale())}else{const s=o.getPosition(),c=o.getFocalPoint(),l=o.getDirectionOfProjection(),p=i*e.zoomScale;let u=p*l[0];s[0]+=u,c[0]+=u,u=p*l[1],s[1]+=u,c[1]+=u,u=p*l[2],s[2]+=u,c[2]+=u,o.getFreezeFocalPoint()||o.setFocalPoint(c[0],c[1],c[2]),o.setPosition(s[0],s[1],s[2]),n.resetCameraClippingRange()}a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),e.previousPosition=r},t.onScroll=(a,n,r)=>{if(!r)return;const i=n.getActiveCamera(),o=1-r/10;i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/o):(i.dolly(o),n.resetCameraClippingRange()),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const pO={zoomScale:0,flipDirection:!1};function fd(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pO,a),V.obj(t,e),pa.extend(t,e,a),ha.extend(t,e,a),V.setGet(t,e,["flipDirection"]),fO(t,e)}var pd={newInstance:V.newInstance(fd,"vtkMouseCameraTrackballZoomManipulator"),extend:fd};function hO(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");const a=t.onButtonDown;t.onButtonDown=(n,r,i)=>{a(n,r,i),e.zoomPosition=i},t.onMouseMove=(n,r,i)=>{if(!i)return;const s=(e.previousPosition.y-i.y)*e.zoomScale;Vr.dollyToPosition(1-s,e.zoomPosition,r,n),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera(),e.previousPosition=i},t.onScroll=(n,r,i,o)=>{if(!i||!o)return;const s=1-i*.1;Vr.dollyToPosition(s,o,r,n),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}const gO={zoomPosition:null};function hd(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gO,a),pd.extend(t,e,a),hO(t,e)}var dO={newInstance:V.newInstance(hd,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:hd};function vO(t,e){e.classHierarchy.push("vtkCompositeGestureManipulator"),t.startInteraction=()=>{},t.endInteraction=()=>{},t.onStartPinch=(a,n)=>{},t.onStartRotate=(a,n)=>{},t.onStartPan=(a,n)=>{},t.onPinch=(a,n,r)=>{},t.onRotate=(a,n,r)=>{},t.onPan=(a,n,r)=>{},t.onEndPinch=a=>{},t.onEndRotate=a=>{},t.onEndPan=a=>{},t.isPinchEnabled=()=>e.pinchEnabled,t.isPanEnabled=()=>e.panEnabled,t.isRotateEnabled=()=>e.rotateEnabled}const yO={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};function mO(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yO,a),V.set(t,e,["pinchEnabled","panEnabled","rotateEnabled"]),V.setGet(t,e,["interactorStyle"]),vO(t,e)}var xO={extend:mO};function CO(t,e){e.classHierarchy.push("vtkGestureCameraManipulator"),t.onStartPinch=(a,n)=>{e.previousScale=n},t.onStartRotate=(a,n)=>{e.previousRotation=n},t.onStartPan=(a,n)=>{e.previousTranslation=n},t.onPinch=(a,n,r)=>{Vr.dollyByFactor(a,n,r/e.previousScale),e.previousScale=r},t.onPan=(a,n,r)=>{const i=n.getActiveCamera(),o=a.getInteractorStyle();let s=i.getFocalPoint();s=o.computeWorldToDisplay(n,s[0],s[1],s[2]);const c=s[2],l=r,p=e.previousTranslation,u=o.computeDisplayToWorld(n,s[0]+l[0]-p[0],s[1]+l[1]-p[1],c),f=o.computeDisplayToWorld(n,s[0],s[1],c),h=[];h[0]=f[0]-u[0],h[1]=f[1]-u[1],h[2]=f[2]-u[2],s=i.getFocalPoint();const d=i.getPosition();i.setFocalPoint(h[0]+s[0],h[1]+s[1],h[2]+s[2]),i.setPosition(h[0]+d[0],h[1]+d[1],h[2]+d[2]),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),i.orthogonalizeViewUp(),e.previousTranslation=r},t.onRotate=(a,n,r)=>{const i=n.getActiveCamera();i.roll(r-e.previousRotation),i.orthogonalizeViewUp(),e.previousRotation=r}}const SO={};function gd(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SO,a),V.obj(t,e),xO.extend(t,e,a),ha.extend(t,e,a),CO(t,e)}var TO={newInstance:V.newInstance(gd,"vtkGestureCameraManipulator"),extend:gd};const dd=["focalPoint","parallelProjection","parallelScale","position","viewAngle","viewUp"],wO={None:null,Pan:lO,Zoom:pd,Roll:sd,Rotate:id,MultiRotate:sO,ZoomToMouse:dO,Select:Y1};function vd(t,e,a){t.removeAllMouseManipulators(),e.forEach(n=>{const r=wO[n.action];if(r){const{button:i,shift:o,control:s,alt:c,scrollEnabled:l,dragEnabled:p}=n,u=r.newInstance();u.setButton(i),u.setShift(!!o),u.setControl(!!s),u.setAlt(!!c),l!==void 0&&u.setScrollEnabled(l),p!==void 0&&u.setDragEnabled(p),t.addMouseManipulator(u),u.onBoxSelectChange&&a&&u.onBoxSelectChange(a)}}),t.addGestureManipulator(TO.newInstance())}class _O{constructor(e){this.readyRef=e,this.count=0,this.start=()=>{this.count++,this.readyRef.value&&(this.readyRef.value=!1)},this.stop=()=>{this.count--,this.count===0&&(this.readyRef.value=!0)},this.reset=()=>this.count=0}async wrap(e){this.start();try{await e}finally{setTimeout(this.stop,1)}return e}}class EO{constructor(e,a,n,r,i){this.vueCtx=i,this.pickingModes=a,this.container=null,this.rwId=0,this.mtime=0,this.busy=new _O(i.ready),this.renderer=null,this.activeCamera=null,this.subscriptions=[],this.ctx=Wg.getSynchronizerContext(e),this.ctx.setFetchArrayFunction((c,l=!0)=>(this.render(),this.busy.wrap(n(c,l)))),this.renderWindow=Wg.newInstance({synchronizerContext:this.ctx}),this.openglRenderWindow=rd.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=qo.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),r.forEach(c=>{const l=`on${c}`;this.subscriptions.push(this.interactor[l](p=>this.vueCtx.emit(c,p)))}),this.style=Vr.newInstance(),this.interactor.setInteractorStyle(this.style),this.render=wn(()=>{this.renderer&&this.renderer.resetCameraClippingRange(),this.renderWindow.render()},0),this.selector=Xa.newInstance({captureZValues:!0}),this.selector.setFieldAssociation(w0.FIELD_ASSOCIATION_POINTS);const o=({x:c,y:l})=>{if(!this.pickingModes.includes("click"))return;const p=this.pick(c,l,c,l);this.vueCtx.emit("click",p[0])};this.debouncedHover=wn(({x:c,y:l})=>{if(!this.pickingModes.includes("hover"))return;const p=this.pick(c,l,c,l);this.lastSelection.length===0&&p.length===0||(this.lastSelection=p,this.vueCtx.emit("hover",p[0]))},10);const s=({selection:c})=>{if(!this.pickingModes.includes("select"))return;const[l,p,u,f]=c,h=this.pick(l,u,p,f);this.vueCtx.emit("select",h)};this.onClick=c=>o(this.getScreenEventPositionFor(c)),this.onMouseMove=c=>this.debouncedHover(this.getScreenEventPositionFor(c)),this.lastSelection=[],this.onBoxSelectChange=s}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera()}setSynchronizedViewId(e){const a=this.renderWindow.getRenderersByReference();for(;a.length;)a.pop();this.renderWindow.setSynchronizedViewId(e),this.rwId=e}async updateViewState(e){this.renderWindow.getInteractor().setEnableRender(!1),this.vueCtx.emit("beforeSceneLoaded"),this.mtime=Math.max(this.mtime,e.mtime)+1,this.busy.reset(),this.busy.start(),e.mtime=this.mtime;const a=this.renderWindow.synchronize(e);a&&(this.renderWindow.getRenderersByReference().length&&([this.renderer]=this.renderWindow.getRenderersByReference(),this.activeCamera=this.renderer.getActiveCamera()),e.extra&&e.extra.camera&&this.activeCamera&&this.ctx.registerInstance(e.extra.camera,this.activeCamera)),await a&&(e.extra&&(e.extra.camera&&(this.remoteCamera=this.ctx.getInstance(e.extra.camera),this.remoteCamera&&this.style.setCenterOfRotation(this.remoteCamera.getFocalPoint())),e.extra.centerOfRotation&&this.style.setCenterOfRotation(e.extra.centerOfRotation),e.extra.resetCamera&&this.resetCamera()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("viewStateChange",e),this.busy.stop(),this.vueCtx.emit("afterSceneLoaded"),this.renderWindow.getInteractor().setEnableRender(!0))}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:a,height:n}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(a*e,10)),Math.floor(Math.max(n*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const a={};dd.forEach(n=>{e[n]!==void 0&&(a[n]=e[n])}),this.activeCamera.set(a),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}updateStyle(e,a){vd(this.style,e,a)}captureImage(e,a){return this.renderWindow.captureImages(e,a)[0]}getScreenEventPositionFor(e){if(!this.container)return;const a=this.container.getBoundingClientRect(),[n,r]=this.openglRenderWindow.getSize(),i=n/a.width,o=r/a.height;return{x:i*(e.clientX-a.left),y:o*(a.height-e.clientY+a.top),z:0}}pick(e,a,n,r){if(this.selector.attach(this.openglRenderWindow,this.renderer),!!this.renderer){if(this.selector.setArea(e,a,n,r),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,a,n,r)||[],e!==n||a!==r){const o=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,1,this.renderer))],s=[];return this.selections.forEach(c=>{const{prop:l}=c.getProperties(),{remoteId:p}=l.get("remoteId");p&&s.push(p)}),{frustrum:o,remoteIds:s}}const i=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer))];return this.selections.map(o=>{const{prop:s,compositeID:c,displayPosition:l}=o.getProperties();return{mode:"local",worldPosition:Array.from(this.openglRenderWindow.displayToWorld(l[0],l[1],l[2],this.renderer)),displayPosition:l,compositeID:c,...s.get("remoteId"),ray:i}})}return[]}}beforeDelete(){for(this.render.cancel();this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}function yd(t){let e=!1;function a(){e=!0}function n(){e=!1}function r(i){if(e)switch(i.code){case"KeyR":t.resetCamera();break}}return{onEnter:a,onLeave:n,onKeyUp:r}}class DO{constructor(e,a,n,r,i){this.vueCtx=i,this.pickingModes=a,this.renderWindow=Ec.newInstance(),this.renderer=cg.newInstance({background:e}),this.renderWindow.addRenderer(this.renderer),this.activeCamera=this.renderer.getActiveCamera(),this.activeCamera.set(this.camera),this.openglRenderWindow=rd.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=qo.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),this.subscriptions=[],r.forEach(l=>{const p=`on${l}`;this.subscriptions.push(this.interactor[p](u=>this.vueCtx.emit(l,u)))}),this.style=Vr.newInstance(),this.interactor.setInteractorStyle(this.style),this.selector=Xa.newInstance({captureZValues:!0}),this.selector.setFieldAssociation(w0.FIELD_ASSOCIATION_POINTS),this.selector.attach(this.openglRenderWindow,this.renderer),this.render=wn(()=>{this.renderer.resetCameraClippingRange(),this.renderWindow.render()},1),this.cubeAxes=G0.newInstance({dataBounds:[-1,1,-1,1,-1,1],visibility:!1}),this.cubeAxes.setVisibility(!1),this.cubeAxes.getActors().forEach(({setVisibility:l})=>l(!1)),this.renderer.addActor(this.cubeAxes);const o=we.newInstance({bounds:[0,0,0,0,0,0]});this.updateCubeBounds=()=>{o.reset();const{props:l}=this.renderer.get("props");for(let p=0;p<l.length;p++){const u=l[p];u.getVisibility()&&u.getUseBounds()&&u!==this.cubeAxes&&o.addBounds(...u.getBounds())}this.cubeAxes.setDataBounds(o.getBounds())},this.debouncedCubeBounds=wn(this.updateCubeBounds,50),this.subscriptions=[],this.subscriptions.push(this.renderer.onEvent(({type:l,renderer:p})=>{p&&l==="ComputeVisiblePropBoundsEvent"&&this.debouncedCubeBounds()}));const s=({x:l,y:p})=>{if(!this.pickingModes.includes("click"))return;const u=this.pick(l,p,l,p);this.vueCtx.emit("click",u[0])};this.debouncedHover=wn(({x:l,y:p})=>{if(!this.pickingModes.includes("hover"))return;const u=this.pick(l,p,l,p);this.lastSelection.length===0&&u.length===0||(this.lastSelection=u,this.vueCtx.emit("hover",u[0]))},10);const c=({selection:l})=>{if(!this.pickingModes.includes("select"))return;const[p,u,f,h]=l,d=this.pick(p,f,u,h);this.vueCtx.emit("select",d)};this.onClick=l=>s(this.getScreenEventPositionFor(l)),this.onMouseMove=l=>this.debouncedHover(this.getScreenEventPositionFor(l)),this.lastSelection=[],this.onBoxSelectChange=c,this.updateStyle(n)}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera(),this.resetCameraTimeout=setTimeout(()=>this.resetCamera(),100)}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:a,height:n}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(a*e,10)),Math.floor(Math.max(n*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const a={};dd.forEach(n=>{e[n]&&(a[n]=e[n])}),this.activeCamera.set(a),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}setCubeAxesVisibility(e){this.cubeAxes.setVisibility(e),this.cubeAxes.getActors().forEach(({setVisibility:a})=>a(e)),this.cubeAxes.setCamera(e?this.activeCamera:null),this.vueCtx.nextTick(this.render)}updateStyle(e){vd(this.style,e,this.onBoxSelectChange)}getScreenEventPositionFor(e){if(!this.container)return;const a=this.container.getBoundingClientRect(),[n,r]=this.openglRenderWindow.getSize(),i=n/a.width,o=r/a.height;return{x:i*(e.clientX-a.left),y:o*(a.height-e.clientY+a.top),z:0}}pick(e,a,n,r){if(this.selector.setArea(e,a,n,r),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,a,n,r)||[],e!==n||a!==r){const o=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,1,this.renderer))],s=[];return this.selections.forEach(c=>{const{prop:l}=c.getProperties(),{representationId:p}=l.get("representationId");p&&s.push(p)}),{frustrum:o,representationIds:s}}const i=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer))];return this.selections.map(o=>{const{prop:s,compositeID:c,displayPosition:l}=o.getProperties();return{worldPosition:Array.from(this.openglRenderWindow.displayToWorld(l[0],l[1],l[2],this.renderer)),displayPosition:l,compositeID:c,...s.get("representationId"),ray:i}})}return[]}beforeDelete(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.debouncedCubeBounds&&this.debouncedCubeBounds.cancel(),this.debouncedHover&&this.debouncedHover.cancel(),this.render&&this.render.cancel(),clearTimeout(this.resetCameraTimeout),this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer.delete(),this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}const $c={props:{camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},wsClient:{type:Object},contextName:{type:String,default:"LocalRenderingContext"},viewState:{type:Object},boxSelection:{type:Boolean,default:!1},pickingModes:{type:Array,default:()=>[]}},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onImageCapture","BoxSelection","select","hover","click","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){var _,E,D,O,M,N;const a=se.inject("trame"),n=se.ref(!1),r=se.ref(null);let i=!1;const o=se.computed(()=>t.wsClient||(a==null?void 0:a.client));let s=()=>Promise.resolve(null);const c=(E=(_=o.value)==null?void 0:_.getConnection())==null?void 0:E.getSession();c&&(s=(R,B)=>c.call("viewport.geometry.array.get",[R,B])),(O=(D=o.value.getRemote())==null?void 0:D.SyncView)!=null&&O.getArray&&(s=(N=(M=o.value.getRemote())==null?void 0:M.SyncView)==null?void 0:N.getArray);const l=new EO(t.contextName,t.pickingModes,s,t.interactorEvents,{emit:e,nextTick:se.nextTick,ready:n});l.updateStyle(t.interactorSettings,d);const{onEnter:p,onLeave:u,onKeyUp:f}=yd(l),h=new ResizeObserver(()=>l.resize());function d({container:R,selection:B}){if(t.pickingModes.includes("select")){l.onBoxSelectChange({selection:B});return}!t.boxSelection||!R||e("BoxSelection",{selection:B,mode:"local",size:l.openglRenderWindow.getSize(),camera:l.getCamera()})}se.watch(n,R=>{e("onReady",R)}),se.watch(()=>t.interactorSettings,()=>l.updateStyle(t.interactorSettings,d)),se.watch(()=>t.pickingModes,()=>{l.pickingModes=t.pickingModes}),se.watch(()=>t.viewState,({id:R})=>{R===i&&(i=!1,l.updateViewState(t.viewState))});let v=null;se.onMounted(()=>{const R=r.value;l.setContainer(R),h.observe(R),document.addEventListener("keyup",f),t.viewState&&(l.rwId=t.viewState.id,l.updateViewState(t.viewState)),v=o.value.getConnection().getSession().subscribe("trame.vtk.delta",([B])=>{B.id===l.rwId&&l.updateViewState(B)})}),se.onBeforeUnmount(()=>{l.beforeDelete(),v&&o.value&&(o.value.getConnection().getSession().unsubscribe(v),v=null),document.removeEventListener("keyup",f),h.disconnect()}),se.provide("view",l);const m=async(R="image/png",B={})=>{const I=await l.captureImage(R,B),L=await(await fetch(I)).blob();return e("onImageCapture",L),L},x=()=>l.resetCamera(),y=()=>l.getCamera(),g=R=>l.setCamera(R),C=R=>{i=R,typeof t.viewState.id=="number"&&(i=Number(i)),l.setSynchronizedViewId(i)},S=()=>l.resize(),{onClick:T,onMouseMove:w}=l;return{vtkContainer:r,onEnter:p,onLeave:u,onClick:T,onMouseMove:w,resetCamera:x,getCamera:y,setCamera:g,setSynchronizedViewId:C,resize:S,captureImage:m}},template:`
        <div
            style="position:relative;width:100%;height:100%;"
            @mouseenter="onEnter"
            @mouseleave="onLeave"
            @click="onClick"
            @mousemove="onMouseMove"
        >
            <div
              ref="vtkContainer"
              style="position:absolute;width:100%;height:100%;overflow:hidden;"
            />
            <slot style="display: none;"></slot>
        </div>
    `},md={position:"absolute !important",left:"-20000px"},xd={position:"absolute !important",left:0},OO={components:{VtkRemoteView:Z1,VtkSyncView:$c},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onLocalImageCapture","onRemoteImageCapture","BoxSelection","click","hover","select","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],props:{mode:{type:String,default:"local"},disableAutoSwitch:{type:Boolean,default:!1},namespace:{type:String,default:""},refPrefix:{type:String,default:"refName"},viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",shift:!0},{button:1,action:"Zoom",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},contextName:{type:String,default:"LocalRenderingContext"},enablePicking:{type:Boolean,default:!1},boxSelection:{type:Boolean,default:!1},viewState:{type:Object},pickingModes:{type:Array,default:()=>[]}},setup(t,{emit:e}){const a=se.inject("trame"),n=se.ref(!1),r=se.ref(null),i=se.ref(null),o=se.computed(()=>t.disableAutoSwitch||n.value),s=se.computed(()=>t.mode==="local"&&o.value),c=se.computed(()=>t.mode==="remote"||!o.value),l=se.computed(()=>s.value?xd:md),p=se.computed(()=>c.value?xd:md),u=se.computed(()=>t.namespace?`${t.namespace}Camera`:"camera");function f(){return t.mode==="local"&&o.value?r.value.resetCamera():i.value.resetCamera()}function h(){return r.value.getCamera()}function d(C){return r.value.setCamera(C)}async function v(C="image/png",S={}){r.value.captureImage(C,S),i.value.captureImage()}function m(){r.value.resize(),i.value.resize()}se.watch(()=>t.viewId,C=>r.value.setSynchronizedViewId(C));function x(C,S=[],T={}){return a.trigger(C,S,T)}function y(C){n.value=C}const{pickingModes:g}=se.toRefs(t);return{computedLocalRenderingReady:o,onReady:y,localViewRef:r,remoteViewRef:i,trigger:x,getCamera:h,setCamera:d,resize:m,resetCamera:f,cameraKey:u,localStyle:l,remoteStyle:p,emit:e,captureImage:v,pickingModes:g}},template:`
        <div style="position:relative;width:100%;height:100%;z-index:0;">
          <vtk-sync-view
            ref="localViewRef"

            :pickingModes="pickingModes"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="localStyle"

            :camera="camera"
            :interactorEvents="interactorEvents"
            :interactorSettings="interactorSettings"
            :contextName="contextName"
            :boxSelection="boxSelection"

            :viewState="viewState"

            @resetCamera="trigger(cameraKey, [getCamera()])"
            @beforeSceneLoaded="onReady(false)"
            @onReady="onReady($event)"

            @onImageCapture="emit('onLocalImageCapture', $event)"

            @BoxSelection="emit('BoxSelection', $event)"
            @StartAnimation="emit('StartAnimation', $event)"
            @Animation="emit('Animation', $event)"
            @EndAnimation="trigger(cameraKey, [getCamera()]); emit('EndAnimation', $event)"
            @MouseEnter="emit('MouseEnter', $event)"
            @MouseLeave="emit('MouseLeave', $event)"
            @StartMouseMove="emit('StartMouseMove', $event)"
            @MouseMove="emit('MouseMove', $event)"
            @EndMouseMove="emit('EndMouseMove', $event)"
            @LeftButtonPress="emit('LeftButtonPress', $event)"
            @LeftButtonRelease="emit('LeftButtonRelease', $event)"
            @MiddleButtonPress="emit('MiddleButtonPress', $event)"
            @MiddleButtonRelease="emit('MiddleButtonRelease', $event)"
            @RightButtonPress="emit('RightButtonPress', $event)"
            @RightButtonRelease="emit('RightButtonRelease', $event)"
            @KeyPress="emit('KeyPress', $event)"
            @KeyDown="emit('KeyDown', $event)"
            @KeyUp="emit('KeyUp', $event)"
            @StartMouseWheel="emit('StartMouseWheel', $event)"
            @MouseWheel="emit('MouseWheel', $event)"
            @EndMouseWheel="emit('EndMouseWheel', $event)"
            @StartPinch="emit('StartPinch', $event)"
            @Pinch="emit('Pinch', $event)"
            @EndPinch="emit('EndPinch', $event)"
            @StartPan="emit('StartPan', $event)"
            @Pan="emit('Pan', $event)"
            @EndPan="emit('EndPan', $event)"
            @StartRotate="emit('StartRotate', $event)"
            @Rotate="emit('Rotate', $event)"
            @EndRotate="emit('EndRotate', $event)"
            @Button3D="emit('Button3D', $event)"
            @Move3D="emit('Move3D', $event)"
            @StartPointerLock="emit('StartPointerLock', $event)"
            @EndPointerLock="emit('EndPointerLock', $event)"
            @StartInteraction="emit('StartInteraction', $event)"
            @Interaction="emit('Interaction', $event)"
            @EndInteraction="emit('EndInteraction', $event)"

            @click="emit('click', $event)"
            @hover="emit('hover', $event)"
            @select="emit('select', $event)"
          >
            <slot></slot>
          </vtk-sync-view>
          <vtk-remote-view
            ref="remoteViewRef"

            :pickingModes="pickingModes"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="remoteStyle"
            :visible="mode === 'remote' || !computedLocalRenderingReady"

            @onImageCapture="emit('onRemoteImageCapture', $event)"

            @onEndAnimation="trigger(cameraKey)"

            :interactiveRatio="interactiveRatio"
            :interactiveQuality="interactiveQuality"
            :stillRatio="stillRatio"
            :stillQuality="stillQuality"
            :boxSelection="boxSelection"
            :enablePicking="enablePicking"

            @BoxSelection="emit('BoxSelection', $event)"

            @click="emit('click', $event)"
            @hover="emit('hover', $event)"
            @select="emit('select', $event)"
          />
        </div>
  `},bO={props:{background:{type:Array,default:()=>[.2,.3,.4]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},pickingModes:{type:Array,default:()=>[]},showCubeAxes:{type:Boolean,default:!1},cubeAxesStyle:{type:Object,default:()=>({})}},emits:["resize","resetCamera","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const a=se.ref(null),n=new DO(t.background,t.pickingModes,t.interactorSettings,t.interactorEvents,{emit:e,nextTick:se.nextTick});n.setCubeAxesVisibility(t.showCubeAxes);const{onEnter:r,onLeave:i,onKeyUp:o}=yd(n),s=new ResizeObserver(()=>n.resize());se.onMounted(()=>{const d=a.value;n.setContainer(d),s.observe(d),document.addEventListener("keyup",o)}),se.onBeforeUnmount(()=>{n.beforeDelete(),document.removeEventListener("keyup",o),s.disconnect()}),se.watch(()=>t.interactorSettings,()=>n.updateStyle(t.interactorSettings)),se.watch(()=>t.pickingModes,()=>n.pickingModes=t.pickingModes),se.watch(()=>t.showCubeAxes,()=>n.setCubeAxesVisibility(t.showCubeAxes)),se.provide("view",n);const{onClick:c,onMouseMove:l}=n;return{vtkContainer:a,onEnter:r,onLeave:i,onClick:c,onMouseMove:l,resetCamera:()=>n.resetCamera(),getCamera:()=>n.getCamera(),setCamera:d=>n.setCamera(d),setCubeAxesVisibility:d=>{t.showCubeAxes=d}}},template:`
        <div
          style="position:relative;width:100%;height:100%;"
          @mouseenter="onEnter"
          @mouseleave="onLeave"
          @click="onClick"
          @mousemove="onMouseMove"
        >
          <div
            ref="vtkContainer"
            style="position:absolute;width:100%;height:100%;overflow:hidden;"
          />
          <slot style="display: none;"></slot>
        </div>
      `},gi=[];function MO(t){return new Promise((e,a)=>{if(gi.indexOf(t)===-1){gi.push(t);const n=document.createElement("script");n.type="text/javascript",n.src=t,n.onload=e,n.onerror=a,document.body.appendChild(n)}else e(!1)})}function NO(t){return new Promise((e,a)=>{if(gi.indexOf(t)===-1){gi.push(t);const n=document.createElement("link");n.rel="stylesheet",n.href=t,n.onload=e,n.onerror=a,document.head.appendChild(n)}else e(!1)})}var RO={loadScript:MO,loadCSS:NO,LOADED_URLS:gi},Cd={XrSessionTypes:{HmdVR:0,MobileAR:1,LookingGlassVR:2,HmdAR:3}};const{XrSessionTypes:kn}=Cd,Sd={rescaleFactor:.25,translateZ:-1.5};function LO(){const t=A7.newInstance(),e=gn.newInstance();e.setInputConnection(t.getOutputPort());const a=pn.newInstance();return a.getProperty().setColor(1,0,0),a.getProperty().setLineWidth(5),a.setMapper(e),a.setPickable(!1),{lineSource:t,mapper:e,actor:a,visible:!1}}function FO(t,e){e.classHierarchy.push("vtkWebXRRenderWindowHelper"),t.initialize=a=>{e.initialized||(e.renderWindow=a,e.initialized=!0)},t.getXrSupported=()=>navigator.xr!==void 0,t.startXR=a=>{if(navigator.xr===void 0)throw new Error("WebXR is not available");e.xrSessionType=a!==void 0?a:kn.HmdVR;const n=[kn.HmdAR,kn.MobileAR].includes(e.xrSessionType),r=n?"immersive-ar":"immersive-vr";if(!navigator.xr.isSessionSupported(r))throw n?new Error("Device does not support AR session"):new Error("VR display is not available");if(e.xrSession===null)navigator.xr.requestSession(r).then(t.enterXR,()=>{throw new Error("Failed to create XR session!")});else throw new Error("XR Session already exists!")},t.enterXR=async a=>{if(e.xrSession=a,e.initCanvasSize=e.renderWindow.getSize(),e.xrSession!==null){const n=e.renderWindow.get3DContext();await n.makeXRCompatible();const{XRWebGLLayer:r}=window,i=new r(e.xrSession,n[Zg]());if(e.renderWindow.setSize(i.framebufferWidth,i.framebufferHeight),e.xrSession.updateRenderState({baseLayer:i}),e.xrSession.requestReferenceSpace("local").then(s=>{e.xrReferenceSpace=s}),[kn.HmdAR,kn.MobileAR].includes(e.xrSessionType)){const s=e.renderWindow.getRenderable().getRenderers()[0];e.initBackground=s.getBackground(),s.setBackground([0,0,0,0])}t.resetXRScene(),e.renderWindow.getRenderable().getInteractor().switchToXRAnimation(),e.xrSceneFrame=e.xrSession.requestAnimationFrame(e.xrRender),t.modified()}else throw new Error("Failed to enter XR with a null xrSession.")},t.resetXRScene=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sd.rescaleFactor,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sd.translateZ;const r=e.renderWindow.getRenderable().getRenderers()[0];r.resetCamera();const i=r.getActiveCamera();let o=i.getPhysicalScale();const s=i.getPhysicalTranslation(),c=n*o;o/=a,s[2]+=c,i.setPhysicalScale(o),i.setPhysicalTranslation(s),i.setClippingRange(.1*o,100*o)},t.stopXR=async()=>{if(navigator.xr===void 0)return;if(e.xrSession!==null){e.xrSession.cancelAnimationFrame(e.xrSceneFrame),e.renderWindow.getRenderable().getInteractor().returnFromXRAnimation();const n=e.renderWindow.get3DContext();n.bindFramebuffer(n.FRAMEBUFFER,null);const r=e.renderWindow.getRenderable().getRenderers()[0];e.xrSession.inputSources.forEach(i=>{e.inputSourceToRay[i.handedness]&&(r.removeActor(e.inputSourceToRay[i.handedness].actor),e.inputSourceToRay[i.handedness].visible=!1)}),await e.xrSession.end().catch(i=>{if(!(i instanceof DOMException))throw i}),e.xrSession=null}e.initCanvasSize!==null&&e.renderWindow.setSize(...e.initCanvasSize);const a=e.renderWindow.getRenderable().getRenderers()[0];e.initBackground!=null&&(a.setBackground(e.initBackground),e.initBackground=null),a.getActiveCamera().setProjectionMatrix(null),a.resetCamera(),a.setViewport(0,0,1,1),e.renderWindow.traverseAllPasses(),t.modified()},e.xrRender=async(a,n)=>{const r=n.session,i=[kn.HmdVR,kn.HmdAR].includes(e.xrSessionType);if(i&&e.drawControllersRay&&e.xrReferenceSpace){const s=e.renderWindow.getRenderable().getRenderers()[0],c=s.getActiveCamera(),l=[];c.getPhysicalToWorldMatrix(l),r.inputSources.forEach(p=>{if(p.targetRaySpace==null||p.gripSpace==null||p.targetRayMode!=="tracked-pointer")return;e.inputSourceToRay[p.handedness]==null&&(e.inputSourceToRay[p.handedness]=LO());const u=e.inputSourceToRay[p.handedness],f=n.getPose(p.targetRaySpace,e.xrReferenceSpace);if(f==null)return;const h=Ci(f.transform.position.x,f.transform.position.y,f.transform.position.z),d=c.physicalOrientationToWorldDirection([f.transform.orientation.x,f.transform.orientation.y,f.transform.orientation.z,f.transform.orientation.w]),v=_e([],h,l),m=s.getActiveCamera().getClippingRange()[1];u.visible||(s.addActor(u.actor),u.visible=!0),u.lineSource.setPoint1(v[0]-d[0]*m,v[1]-d[1]*m,v[2]-d[2]*m),u.lineSource.setPoint2(...v)}),e.renderWindow.render()}e.renderWindow.getRenderable().getInteractor().updateXRGamepads(r,n,e.xrReferenceSpace),e.xrSceneFrame=e.xrSession.requestAnimationFrame(e.xrRender);const o=n.getViewerPose(e.xrReferenceSpace);if(o){const s=e.renderWindow.get3DContext();e.xrSessionType===kn.MobileAR&&e.initCanvasSize!==null&&(s.canvas.width=e.initCanvasSize[0],s.canvas.height=e.initCanvasSize[1]);const c=r.renderState.baseLayer;s.bindFramebuffer(s.FRAMEBUFFER,c.framebuffer),s.clear(s.COLOR_BUFFER_BIT),s.clear(s.DEPTH_BUFFER_BIT),e.renderWindow.setSize(c.framebufferWidth,c.framebufferHeight);const l=e.renderWindow.getRenderable().getRenderers()[0];o.views.forEach((p,u)=>{const f=c.getViewport(p);if(i)if(p.eye==="left")l.setViewport(0,0,.5,1);else if(p.eye==="right")l.setViewport(.5,0,1,1);else return;else if(e.xrSessionType===kn.LookingGlassVR){const h=f.x/c.framebufferWidth,d=f.y/c.framebufferHeight,v=(f.x+f.width)/c.framebufferWidth,m=(f.y+f.height)/c.framebufferHeight;l.setViewport(h,d,v,m)}else l.setViewport(0,0,1,1);l.getActiveCamera().computeViewParametersFromPhysicalMatrix(p.transform.inverse.matrix),l.getActiveCamera().setProjectionMatrix(p.projectionMatrix),e.renderWindow.traverseAllPasses()}),s.scissor(0,0,c.framebufferWidth,c.framebufferHeight),s.disable(s.SCISSOR_TEST)}},t.delete=V.chain(t.delete)}function kO(){return{initialized:!1,drawControllersRay:!1,inputSourceToRay:{},initCanvasSize:null,initBackground:null,renderWindow:null,xrSession:null,xrSessionType:0,xrReferenceSpace:null}}function Td(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kO(),a),V.obj(t,e),V.event(t,e,"event"),V.get(t,e,["xrSession"]),V.setGet(t,e,["renderWindow","drawControllersRay"]),FO(t,e)}var VO={newInstance:V.newInstance(Td,"vtkWebXRRenderWindowHelper"),extend:Td,...Cd};function AO(t,e){e.classHierarchy.push("vtkCompositeVRManipulator"),t.onButton3D=(a,n,r,i)=>{},t.onMove3D=(a,n,r,i)=>{}}const BO={};function UO(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BO,a),V.setGet(t,e,["device","input"]),AO(t,e)}var GO={extend:UO,Device:jo,Input:Wo};function IO(t,e){e.classHierarchy.push("vtkAbstractPicker"),t.initialize=()=>{e.renderer=null,e.selectionPoint[0]=0,e.selectionPoint[1]=0,e.selectionPoint[2]=0,e.pickPosition[0]=0,e.pickPosition[1]=0,e.pickPosition[2]=0},t.initializePickList=()=>{e.pickList=[]},t.addPickList=a=>{e.pickList.push(a)},t.deletePickList=a=>{const n=e.pickList.indexOf(a);n!==-1&&e.pickList.splice(n,1)}}const PO={renderer:null,selectionPoint:[0,0,0],pickPosition:[0,0,0],pickFromList:!1,pickList:[]};function wd(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PO,a),V.obj(t,e),V.get(t,e,["renderer"]),V.getArray(t,e,["selectionPoint","pickPosition"]),V.setGet(t,e,["pickFromList","pickList"]),IO(t,e)}var zO={newInstance:V.newInstance(wd,"vtkAbstractPicker"),extend:wd};const{vtkErrorMacro:jO}=V,{vtkWarningMacro:ls}=V;function WO(t,e){e.classHierarchy.push("vtkPicker");const a={...t};function n(){a.initialize(),e.actors=[],e.pickedPositions=[],e.mapperPosition[0]=0,e.mapperPosition[1]=0,e.mapperPosition[2]=0,e.mapper=null,e.dataSet=null,e.globalTMin=Number.MAX_VALUE}function r(o,s,c){let l=0;const p=c.getRenderWindow().getViews()[0],u=c.getViewport(),f=p.getSize();let h=f[0]*u[0],d=f[1]*u[1];const v=p.displayToNormalizedDisplay(h,d,o),m=c.normalizedDisplayToWorld(v[0],v[1],v[2],s);h=f[0]*u[2],d=f[1]*u[3];const x=p.displayToNormalizedDisplay(h,d,o),y=c.normalizedDisplayToWorld(x[0],x[1],x[2],s);for(let g=0;g<3;g++)l+=(y[g]-m[g])*(y[g]-m[g]);return Math.sqrt(l)}function i(o,s,c,l){const p=new Float64Array(4),u=new Float64Array(4),f=[],h=[],d=e.pickFromList?e.pickList:o.getActors(),v=new Float64Array(3),m=new Float64Array(3);d.forEach(y=>{var w,_,E;const g=y.getMapper(),C=((E=(w=y.getProperty)==null?void 0:(_=w.call(y)).getOpacity)==null?void 0:E.call(_))===0;if(!(y.getNestedPickable()&&y.getNestedVisibility()&&!C))return;e.transformMatrix=y.getMatrix().slice(0),We(e.transformMatrix,e.transformMatrix),Et(e.transformMatrix,e.transformMatrix),er(p,c,e.transformMatrix),er(u,l,e.transformMatrix),Kt(p,p,1/p[3]),Kt(u,u,1/u[3]),He(u,p,f);const T=g?we.inflate(g.getBounds(),s):[...we.INIT_BOUNDS];if(we.intersectBox(T,p,f,h,[])){mi(v,e.transformMatrix);const D=e.intersectWithLine(p,u,s*.333*(v[0]+v[1]+v[2]),y,g);if(D<Number.MAX_VALUE){m[0]=(1-D)*c[0]+D*l[0],m[1]=(1-D)*c[1]+D*l[1],m[2]=(1-D)*c[2]+D*l[2];const O=e.actors.indexOf(y);if(O!==-1){const M=e.pickedPositions[O];dt(c,m)<dt(c,M)&&(e.pickedPositions[O]=m.slice(0))}else e.actors.push(y),e.pickedPositions.push(m.slice(0))}}});const x=[];for(let y=0;y<e.pickedPositions.length;y++)x.push({actor:e.actors[y],pickedPosition:e.pickedPositions[y],distance2:dt(c,e.pickedPositions[y])});x.sort((y,g)=>{const C=y.distance2,S=g.distance2;return C<S?-1:C>S?1:0}),e.pickedPositions=[],e.actors=[],x.forEach(y=>{e.pickedPositions.push(y.pickedPosition),e.actors.push(y.actor)})}e.intersectWithLine=(o,s,c,l,p)=>{if(!p)return Number.MAX_VALUE;const u=p.getCenter(),f=sn(new Float64Array(3),s,o),h=xe(f,f);return h===0?2:(f[0]*(u[0]-o[0])+f[1]*(u[1]-o[1])+f[2]*(u[2]-o[2]))/h},t.pick=(o,s)=>{if(o.length!==3&&ls("vtkPicker.pick - selection needs three components"),!s)throw jO("vtkPicker.pick - renderer cannot be null"),new Error("renderer cannot be null");n();const c=o[0],l=o[1];let p=o[2];e.renderer=s,e.selectionPoint[0]=c,e.selectionPoint[1]=l,e.selectionPoint[2]=p;const u=new Float64Array(4),f=new Float64Array(4),h=s.getActiveCamera(),d=h.getPosition(),v=h.getFocalPoint(),m=s.getRenderWindow().getViews()[0],x=m.getViewportSize(s);if(x[1]===0){ls("vtkPicker.pick - viewport area is 0");return}const y=x[0]/x[1];let g=[];g=s.worldToNormalizedDisplay(v[0],v[1],v[2],y),g=m.normalizedDisplayToDisplay(g[0],g[1],g[2]),p=g[2];const C=m.displayToNormalizedDisplay(c,l,p),S=s.normalizedDisplayToWorld(C[0],C[1],C[2],y);for(let N=0;N<3;N++)e.pickPosition[N]=S[N];const T=[];for(let N=0;N<3;N++)T[N]=e.pickPosition[N]-d[N];const w=[];for(let N=0;N<3;N++)w[N]=v[N]-d[N];Ke(w);const _=xe(w,T);if(_===0){ls("Picker::Pick Cannot process points");return}const E=h.getClippingRange();let D,O;if(h.getParallelProjection()){D=E[0]-_,O=E[1]-_;for(let N=0;N<3;N++)u[N]=e.pickPosition[N]+D*w[N],f[N]=e.pickPosition[N]+O*w[N]}else{D=E[0]/_,O=E[1]/_;for(let N=0;N<3;N++)u[N]=d[N]+D*T[N],f[N]=d[N]+O*T[N]}u[3]=1,f[3]=1;const M=r(p,y,s)*e.tolerance;i(e.renderer,M,u,f)},t.pick3DPoint=(o,s,c)=>{if(!c)throw new Error("renderer cannot be null");n(),e.renderer=c,Si(e.selectionPoint,o);const p=c.getRenderWindow().getViews()[0].getViewportSize(c);if(p[1]===0){ls("vtkPicker.pick3DPoint - viewport area is 0");return}const u=p[0]/p[1],f=r(e.selectionPoint[2],u,c)*e.tolerance;i(c,f,o,s)}}const $O={tolerance:.025,mapperPosition:[0,0,0],mapper:null,dataSet:null,actors:[],pickedPositions:[],transformMatrix:null,globalTMin:Number.MAX_VALUE};function _d(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$O,a),zO.extend(t,e,a),V.setGet(t,e,["tolerance"]),V.setGetArray(t,e,["mapperPosition"],3),V.get(t,e,["mapper","dataSet","actors","pickedPositions"]),V.event(t,e,"pickChange"),WO(t,e)}var HO={newInstance:V.newInstance(_d,"vtkPicker"),extend:_d};function KO(t,e){e.classHierarchy.push("vtk3DControllerModelSelectorManipulator");const a=HO.newInstance();let n;const r=new Float64Array(16),i=new Float64Array(3),o=new Float64Array(4),s=new Float64Array(4),c=new Float64Array(3),l=new Float64Array(16),p=new Float64Array(4),u=new Float64Array(16),f=new Float64Array(4),h=new Float64Array(4),d=new Float64Array(3),v=new Float64Array(3),m=new Float64Array(4);function x(S,T,w){sn(i,T,e.lastWorldPosition),ps(s,e.lastOrientation),Oi(o,w,s),Mi(o,o);const _=lu(c,o);Te(l),Ye(l,l,T),mt(l,l,_,c),Ye(l,l,su(new Float64Array(3),T)),Ye(l,l,i),We(u,S.getMatrix()),Ee(l,l,u),xi(p,l),S.getOrientationQuaternion(f),ps(h,f),Oi(m,h,p),Mi(m,m),Jc(d,l),mi(v,l),S.setPosition(...d),S.setScale(...v),S.rotateQuaternion(m)}function y(){e.lastOrientation=null,e.lastWorldPosition=null,n&&n.setDragable(!0),n=null}t.onButton3D=(S,T,w,_)=>{if(!_.pressed)return y(),V.VOID;const E=T.getActiveCamera();E.getPhysicalToWorldMatrix(r);const{targetPosition:D,targetOrientation:O}=_,M=_e([],[D.x,D.y,D.z],r),N=E.physicalOrientationToWorldDirection([O.x,O.y,O.z,O.w]),R=T.getActiveCamera().getClippingRange()[1],B=[...M,1],I=[B[0]-N[0]*R,B[1]-N[1]*R,B[2]-N[2]*R,1];a.pick3DPoint(B,I,T);const P=a.getActors();return P.length>0&&P[0].getNestedDragable()?(n=P[0],n.setDragable(!1)):y(),V.EVENT_ABORT};const g=new Float64Array(3),C=new Float64Array(4);t.onMove3D=(S,T,w,_)=>{if(w!==j1.IS_CAMERA_POSE||n==null)return V.VOID;T.getActiveCamera().getPhysicalToWorldMatrix(r);const{targetPosition:D}=_;return _e(g,[D.x,D.y,D.z],r),A2(C,_.targetOrientation.x,_.targetOrientation.y,_.targetOrientation.z,_.targetOrientation.w),e.lastWorldPosition&&e.lastOrientation?x(n,g,C):(e.lastWorldPosition=new Float64Array(3),e.lastOrientation=new Float64Array(4)),Si(e.lastWorldPosition,g),V2(e.lastOrientation,C),V.EVENT_ABORT}}const XO={};function Ed(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XO,a),V.get(t,e,["lastWorldPosition","lastOrientation"]),V.obj(t,e),GO.extend(t,e,a),KO(t,e)}var Dd={newInstance:V.newInstance(Ed,"vtk3DControllerModelSelectorManipulator"),extend:Ed};function qO(t,e){e.classHierarchy.push("vtkInteractorStyleHMDXR");const a=Dd.newInstance({device:jo.LeftController,input:Wo.A}),n=Dd.newInstance({device:jo.RightController,input:Wo.A});t.addVRManipulator(a),t.addVRManipulator(n)}const YO={};function Od(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YO,a),Vr.extend(t,e,a),qO(t,e)}var JO={newInstance:V.newInstance(Od,"vtkInteractorStyleHMDXR"),extend:Od};const bd={VtkAlgorithm:Sw,VtkCalculator:Ew,VtkCellData:T1,VtkDataArray:_1,VtkFieldData:Ow,VtkGeometryRepresentation:Gw,VtkGlyphRepresentation:jw,VtkMesh:$w,VtkPointData:A1,VtkPolydata:V1,VtkReader:Hw,VtkRemoteLocalView:OO,VtkRemoteView:Z1,VtkSyncView:$c,VtkLocalView:$c,VtkView:bO,VtkWebXRHelper:{props:{drawControllersRay:{type:Boolean,default:!1}},emits:["enterXR","exitXR"],setup(t,{attrs:e,emit:a}){navigator.xr===void 0&&RO.loadScript("https://cdn.jsdelivr.net/npm/webxr-polyfill@latest/build/webxr-polyfill.js").then(()=>{new WebXRPolyfill});const n=VO.newInstance(),r=se.inject("view");return{startXR:()=>{if(!r||!r.openglRenderWindow){console.error("WebXR is not supported by VtkRemoteView");return}n.setRenderWindow(r.openglRenderWindow),n.setDrawControllersRay(t.drawControllersRay),e.oldInteractorStyle=r.renderWindow.getInteractor().getInteractorStyle(),r.renderWindow.getInteractor().setInteractorStyle(JO.newInstance()),n.startXR(),a("enterXR")},stopXR:()=>{if(!r||!r.openglRenderWindow){console.error("WebXR is not supported by VtkRemoteView");return}r.renderWindow.getInteractor().setInteractorStyle(e.oldInteractorStyle),n.stopXR(),a("exitXR")}}}}};function ZO(){return vc.rgbPresetNames}function Md(t){return t.split("_").map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`).join(" ")}function Nd(t){return t.map(e=>({text:Md(e),value:e}))}function QO(){return Nd(vc.rgbPresetNames)}const ga={vtkColorPresetNames:ZO,vtkLabel:Md,ListToItem:Nd,vtkColorPresetItems:QO};function eb(t){var e,a;Object.keys(bd).forEach(n=>{t.component(n,bd[n])}),(a=(e=window==null?void 0:window.trame)==null?void 0:e.utils)!=null&&a.vtk&&Object.keys(ga).forEach(n=>{window.trame.utils.vtk[n]=ga[n]})}const tb=ga.vtkColorPresetNames,nb=ga.vtkLabel,rb=ga.ListToItem,ab=ga.vtkColorPresetItems;Ht.ListToItem=rb,Ht.install=eb,Ht.vtkColorPresetItems=ab,Ht.vtkColorPresetNames=tb,Ht.vtkLabel=nb,Object.defineProperty(Ht,Symbol.toStringTag,{value:"Module"})});
